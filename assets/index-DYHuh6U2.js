var p1=Object.defineProperty;var m1=(n,e,t)=>e in n?p1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ge=(n,e,t)=>m1(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function sE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wp={exports:{}},Zl={},Hp={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function g1(){if(B_)return Me;B_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=y&&U[y]||U["@@iterator"],typeof U=="function"?U:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,I={};function k(U,Q,pe){this.props=U,this.context=Q,this.refs=I,this.updater=pe||x}k.prototype.isReactComponent={},k.prototype.setState=function(U,Q){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Q,"setState")},k.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function N(){}N.prototype=k.prototype;function L(U,Q,pe){this.props=U,this.context=Q,this.refs=I,this.updater=pe||x}var B=L.prototype=new N;B.constructor=L,S(B,k.prototype),B.isPureReactComponent=!0;var W=Array.isArray,K=Object.prototype.hasOwnProperty,Z={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function C(U,Q,pe){var xe,Ae={},Pe=null,He=null;if(Q!=null)for(xe in Q.ref!==void 0&&(He=Q.ref),Q.key!==void 0&&(Pe=""+Q.key),Q)K.call(Q,xe)&&!R.hasOwnProperty(xe)&&(Ae[xe]=Q[xe]);var $e=arguments.length-2;if($e===1)Ae.children=pe;else if(1<$e){for(var Ze=Array($e),Mt=0;Mt<$e;Mt++)Ze[Mt]=arguments[Mt+2];Ae.children=Ze}if(U&&U.defaultProps)for(xe in $e=U.defaultProps,$e)Ae[xe]===void 0&&(Ae[xe]=$e[xe]);return{$$typeof:n,type:U,key:Pe,ref:He,props:Ae,_owner:Z.current}}function P(U,Q){return{$$typeof:n,type:U.type,key:Q,ref:U.ref,props:U.props,_owner:U._owner}}function O(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function V(U){var Q={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(pe){return Q[pe]})}var F=/\/+/g;function M(U,Q){return typeof U=="object"&&U!==null&&U.key!=null?V(""+U.key):Q.toString(36)}function Le(U,Q,pe,xe,Ae){var Pe=typeof U;(Pe==="undefined"||Pe==="boolean")&&(U=null);var He=!1;if(U===null)He=!0;else switch(Pe){case"string":case"number":He=!0;break;case"object":switch(U.$$typeof){case n:case e:He=!0}}if(He)return He=U,Ae=Ae(He),U=xe===""?"."+M(He,0):xe,W(Ae)?(pe="",U!=null&&(pe=U.replace(F,"$&/")+"/"),Le(Ae,Q,pe,"",function(Mt){return Mt})):Ae!=null&&(O(Ae)&&(Ae=P(Ae,pe+(!Ae.key||He&&He.key===Ae.key?"":(""+Ae.key).replace(F,"$&/")+"/")+U)),Q.push(Ae)),1;if(He=0,xe=xe===""?".":xe+":",W(U))for(var $e=0;$e<U.length;$e++){Pe=U[$e];var Ze=xe+M(Pe,$e);He+=Le(Pe,Q,pe,Ze,Ae)}else if(Ze=v(U),typeof Ze=="function")for(U=Ze.call(U),$e=0;!(Pe=U.next()).done;)Pe=Pe.value,Ze=xe+M(Pe,$e++),He+=Le(Pe,Q,pe,Ze,Ae);else if(Pe==="object")throw Q=String(U),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return He}function Ie(U,Q,pe){if(U==null)return U;var xe=[],Ae=0;return Le(U,xe,"","",function(Pe){return Q.call(pe,Pe,Ae++)}),xe}function Re(U){if(U._status===-1){var Q=U._result;Q=Q(),Q.then(function(pe){(U._status===0||U._status===-1)&&(U._status=1,U._result=pe)},function(pe){(U._status===0||U._status===-1)&&(U._status=2,U._result=pe)}),U._status===-1&&(U._status=0,U._result=Q)}if(U._status===1)return U._result.default;throw U._result}var be={current:null},ie={transition:null},ce={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:ie,ReactCurrentOwner:Z};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:Ie,forEach:function(U,Q,pe){Ie(U,function(){Q.apply(this,arguments)},pe)},count:function(U){var Q=0;return Ie(U,function(){Q++}),Q},toArray:function(U){return Ie(U,function(Q){return Q})||[]},only:function(U){if(!O(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Me.Component=k,Me.Fragment=t,Me.Profiler=r,Me.PureComponent=L,Me.StrictMode=i,Me.Suspense=h,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Me.act=oe,Me.cloneElement=function(U,Q,pe){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var xe=S({},U.props),Ae=U.key,Pe=U.ref,He=U._owner;if(Q!=null){if(Q.ref!==void 0&&(Pe=Q.ref,He=Z.current),Q.key!==void 0&&(Ae=""+Q.key),U.type&&U.type.defaultProps)var $e=U.type.defaultProps;for(Ze in Q)K.call(Q,Ze)&&!R.hasOwnProperty(Ze)&&(xe[Ze]=Q[Ze]===void 0&&$e!==void 0?$e[Ze]:Q[Ze])}var Ze=arguments.length-2;if(Ze===1)xe.children=pe;else if(1<Ze){$e=Array(Ze);for(var Mt=0;Mt<Ze;Mt++)$e[Mt]=arguments[Mt+2];xe.children=$e}return{$$typeof:n,type:U.type,key:Ae,ref:Pe,props:xe,_owner:He}},Me.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:o,_context:U},U.Consumer=U},Me.createElement=C,Me.createFactory=function(U){var Q=C.bind(null,U);return Q.type=U,Q},Me.createRef=function(){return{current:null}},Me.forwardRef=function(U){return{$$typeof:c,render:U}},Me.isValidElement=O,Me.lazy=function(U){return{$$typeof:m,_payload:{_status:-1,_result:U},_init:Re}},Me.memo=function(U,Q){return{$$typeof:f,type:U,compare:Q===void 0?null:Q}},Me.startTransition=function(U){var Q=ie.transition;ie.transition={};try{U()}finally{ie.transition=Q}},Me.unstable_act=oe,Me.useCallback=function(U,Q){return be.current.useCallback(U,Q)},Me.useContext=function(U){return be.current.useContext(U)},Me.useDebugValue=function(){},Me.useDeferredValue=function(U){return be.current.useDeferredValue(U)},Me.useEffect=function(U,Q){return be.current.useEffect(U,Q)},Me.useId=function(){return be.current.useId()},Me.useImperativeHandle=function(U,Q,pe){return be.current.useImperativeHandle(U,Q,pe)},Me.useInsertionEffect=function(U,Q){return be.current.useInsertionEffect(U,Q)},Me.useLayoutEffect=function(U,Q){return be.current.useLayoutEffect(U,Q)},Me.useMemo=function(U,Q){return be.current.useMemo(U,Q)},Me.useReducer=function(U,Q,pe){return be.current.useReducer(U,Q,pe)},Me.useRef=function(U){return be.current.useRef(U)},Me.useState=function(U){return be.current.useState(U)},Me.useSyncExternalStore=function(U,Q,pe){return be.current.useSyncExternalStore(U,Q,pe)},Me.useTransition=function(){return be.current.useTransition()},Me.version="18.3.1",Me}var U_;function ag(){return U_||(U_=1,Hp.exports=g1()),Hp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_;function y1(){if(W_)return Zl;W_=1;var n=ag(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,f){var m,y={},v=null,x=null;f!==void 0&&(v=""+f),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(x=h.ref);for(m in h)i.call(h,m)&&!o.hasOwnProperty(m)&&(y[m]=h[m]);if(c&&c.defaultProps)for(m in h=c.defaultProps,h)y[m]===void 0&&(y[m]=h[m]);return{$$typeof:e,type:c,key:v,ref:x,props:y,_owner:r.current}}return Zl.Fragment=t,Zl.jsx=l,Zl.jsxs=l,Zl}var H_;function v1(){return H_||(H_=1,Wp.exports=y1()),Wp.exports}var b=v1(),ae=ag();const oE=sE(ae);var _h={},$p={exports:{}},vn={},qp={exports:{}},Kp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function _1(){return $_||($_=1,(function(n){function e(ie,ce){var oe=ie.length;ie.push(ce);e:for(;0<oe;){var U=oe-1>>>1,Q=ie[U];if(0<r(Q,ce))ie[U]=ce,ie[oe]=Q,oe=U;else break e}}function t(ie){return ie.length===0?null:ie[0]}function i(ie){if(ie.length===0)return null;var ce=ie[0],oe=ie.pop();if(oe!==ce){ie[0]=oe;e:for(var U=0,Q=ie.length,pe=Q>>>1;U<pe;){var xe=2*(U+1)-1,Ae=ie[xe],Pe=xe+1,He=ie[Pe];if(0>r(Ae,oe))Pe<Q&&0>r(He,Ae)?(ie[U]=He,ie[Pe]=oe,U=Pe):(ie[U]=Ae,ie[xe]=oe,U=xe);else if(Pe<Q&&0>r(He,oe))ie[U]=He,ie[Pe]=oe,U=Pe;else break e}}return ce}function r(ie,ce){var oe=ie.sortIndex-ce.sortIndex;return oe!==0?oe:ie.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],f=[],m=1,y=null,v=3,x=!1,S=!1,I=!1,k=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(ie){for(var ce=t(f);ce!==null;){if(ce.callback===null)i(f);else if(ce.startTime<=ie)i(f),ce.sortIndex=ce.expirationTime,e(h,ce);else break;ce=t(f)}}function W(ie){if(I=!1,B(ie),!S)if(t(h)!==null)S=!0,Re(K);else{var ce=t(f);ce!==null&&be(W,ce.startTime-ie)}}function K(ie,ce){S=!1,I&&(I=!1,N(C),C=-1),x=!0;var oe=v;try{for(B(ce),y=t(h);y!==null&&(!(y.expirationTime>ce)||ie&&!V());){var U=y.callback;if(typeof U=="function"){y.callback=null,v=y.priorityLevel;var Q=U(y.expirationTime<=ce);ce=n.unstable_now(),typeof Q=="function"?y.callback=Q:y===t(h)&&i(h),B(ce)}else i(h);y=t(h)}if(y!==null)var pe=!0;else{var xe=t(f);xe!==null&&be(W,xe.startTime-ce),pe=!1}return pe}finally{y=null,v=oe,x=!1}}var Z=!1,R=null,C=-1,P=5,O=-1;function V(){return!(n.unstable_now()-O<P)}function F(){if(R!==null){var ie=n.unstable_now();O=ie;var ce=!0;try{ce=R(!0,ie)}finally{ce?M():(Z=!1,R=null)}}else Z=!1}var M;if(typeof L=="function")M=function(){L(F)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Ie=Le.port2;Le.port1.onmessage=F,M=function(){Ie.postMessage(null)}}else M=function(){k(F,0)};function Re(ie){R=ie,Z||(Z=!0,M())}function be(ie,ce){C=k(function(){ie(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){S||x||(S=!0,Re(K))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(ie){switch(v){case 1:case 2:case 3:var ce=3;break;default:ce=v}var oe=v;v=ce;try{return ie()}finally{v=oe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,ce){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var oe=v;v=ie;try{return ce()}finally{v=oe}},n.unstable_scheduleCallback=function(ie,ce,oe){var U=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?U+oe:U):oe=U,ie){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=oe+Q,ie={id:m++,callback:ce,priorityLevel:ie,startTime:oe,expirationTime:Q,sortIndex:-1},oe>U?(ie.sortIndex=oe,e(f,ie),t(h)===null&&ie===t(f)&&(I?(N(C),C=-1):I=!0,be(W,oe-U))):(ie.sortIndex=Q,e(h,ie),S||x||(S=!0,Re(K))),ie},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(ie){var ce=v;return function(){var oe=v;v=ce;try{return ie.apply(this,arguments)}finally{v=oe}}}})(Kp)),Kp}var q_;function w1(){return q_||(q_=1,qp.exports=_1()),qp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function b1(){if(K_)return vn;K_=1;var n=ag(),e=w1();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(r[s]=a,s=0;s<a.length;s++)i.add(a[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function v(s){return h.call(y,s)?!0:h.call(m,s)?!1:f.test(s)?y[s]=!0:(m[s]=!0,!1)}function x(s,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function S(s,a,u,p){if(a===null||typeof a>"u"||x(s,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function I(s,a,u,p,g,w,T){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=s,this.type=a,this.sanitizeURL=w,this.removeEmptyString=T}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){k[s]=new I(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];k[a]=new I(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){k[s]=new I(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){k[s]=new I(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){k[s]=new I(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){k[s]=new I(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){k[s]=new I(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){k[s]=new I(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){k[s]=new I(s,5,!1,s.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function L(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(N,L);k[a]=new I(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(N,L);k[a]=new I(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(N,L);k[a]=new I(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){k[s]=new I(s,1,!1,s.toLowerCase(),null,!1,!1)}),k.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){k[s]=new I(s,1,!1,s.toLowerCase(),null,!0,!0)});function B(s,a,u,p){var g=k.hasOwnProperty(a)?k[a]:null;(g!==null?g.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(S(a,u,g,p)&&(u=null),p||g===null?v(a)&&(u===null?s.removeAttribute(a):s.setAttribute(a,""+u)):g.mustUseProperty?s[g.propertyName]=u===null?g.type===3?!1:"":u:(a=g.attributeName,p=g.attributeNamespace,u===null?s.removeAttribute(a):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,p?s.setAttributeNS(p,a,u):s.setAttribute(a,u))))}var W=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),Z=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),V=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),Le=Symbol.for("react.suspense_list"),Ie=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ce(s){return s===null||typeof s!="object"?null:(s=ie&&s[ie]||s["@@iterator"],typeof s=="function"?s:null)}var oe=Object.assign,U;function Q(s){if(U===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);U=a&&a[1]||""}return`
`+U+s}var pe=!1;function xe(s,a){if(!s||pe)return"";pe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(G){var p=G}Reflect.construct(s,[],a)}else{try{a.call()}catch(G){p=G}s.call(a.prototype)}else{try{throw Error()}catch(G){p=G}s()}}catch(G){if(G&&p&&typeof G.stack=="string"){for(var g=G.stack.split(`
`),w=p.stack.split(`
`),T=g.length-1,D=w.length-1;1<=T&&0<=D&&g[T]!==w[D];)D--;for(;1<=T&&0<=D;T--,D--)if(g[T]!==w[D]){if(T!==1||D!==1)do if(T--,D--,0>D||g[T]!==w[D]){var j=`
`+g[T].replace(" at new "," at ");return s.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",s.displayName)),j}while(1<=T&&0<=D);break}}}finally{pe=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?Q(s):""}function Ae(s){switch(s.tag){case 5:return Q(s.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return s=xe(s.type,!1),s;case 11:return s=xe(s.type.render,!1),s;case 1:return s=xe(s.type,!0),s;default:return""}}function Pe(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case Z:return"Portal";case P:return"Profiler";case C:return"StrictMode";case M:return"Suspense";case Le:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case V:return(s.displayName||"Context")+".Consumer";case O:return(s._context.displayName||"Context")+".Provider";case F:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ie:return a=s.displayName||null,a!==null?a:Pe(s.type)||"Memo";case Re:a=s._payload,s=s._init;try{return Pe(s(a))}catch{}}return null}function He(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(a);case 8:return a===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function $e(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ze(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Mt(s){var a=Ze(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),p=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,w=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(T){p=""+T,w.call(this,T)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(T){p=""+T},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function qi(s){s._valueTracker||(s._valueTracker=Mt(s))}function Ao(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return s&&(p=Ze(s)?s.checked?"true":"false":s.value),s=p,s!==u?(a.setValue(s),!0):!1}function kr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ss(s,a){var u=a.checked;return oe({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function Co(s,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=$e(a.value!=null?a.value:u),s._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function sl(s,a){a=a.checked,a!=null&&B(s,"checked",a,!1)}function ol(s,a){sl(s,a);var u=$e(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(p==="submit"||p==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?Po(s,a.type,u):a.hasOwnProperty("defaultValue")&&Po(s,a.type,$e(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function ru(s,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,u||a===s.value||(s.value=a),s.defaultValue=a}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function Po(s,a,u){(a!=="number"||kr(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Ki=Array.isArray;function Gi(s,a,u,p){if(s=s.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=a.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&p&&(s[u].defaultSelected=!0)}else{for(u=""+$e(u),a=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,p&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function al(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Ro(s,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(Ki(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}s._wrapperState={initialValue:$e(u)}}function No(s,a){var u=$e(a.value),p=$e(a.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),a.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),p!=null&&(s.defaultValue=""+p)}function ll(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function It(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kt(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?It(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Yi,cl=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,g){MSApp.execUnsafeLocalFunction(function(){return s(a,u,p,g)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(Yi=Yi||document.createElement("div"),Yi.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Yi.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function Ar(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Is={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ks=["Webkit","ms","Moz","O"];Object.keys(Is).forEach(function(s){ks.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Is[a]=Is[s]})});function ul(s,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Is.hasOwnProperty(s)&&Is[s]?(""+a).trim():a+"px"}function hl(s,a){s=s.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,g=ul(u,a[u],p);u==="float"&&(u="cssFloat"),p?s.setProperty(u,g):s[u]=g}}var dl=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fl(s,a){if(a){if(dl[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function pl(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var As=null;function Do(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Mo=null,Dn=null,vi=null;function Oo(s){if(s=jl(s)){if(typeof Mo!="function")throw Error(t(280));var a=s.stateNode;a&&(a=Mu(a),Mo(s.stateNode,s.type,a))}}function _i(s){Dn?vi?vi.push(s):vi=[s]:Dn=s}function ml(){if(Dn){var s=Dn,a=vi;if(vi=Dn=null,Oo(s),a)for(s=0;s<a.length;s++)Oo(a[s])}}function Cs(s,a){return s(a)}function gl(){}var Qi=!1;function yl(s,a,u){if(Qi)return s(a,u);Qi=!0;try{return Cs(s,a,u)}finally{Qi=!1,(Dn!==null||vi!==null)&&(gl(),ml())}}function gt(s,a){var u=s.stateNode;if(u===null)return null;var p=Mu(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var Vo=!1;if(c)try{var Qn={};Object.defineProperty(Qn,"passive",{get:function(){Vo=!0}}),window.addEventListener("test",Qn,Qn),window.removeEventListener("test",Qn,Qn)}catch{Vo=!1}function Ps(s,a,u,p,g,w,T,D,j){var G=Array.prototype.slice.call(arguments,3);try{a.apply(u,G)}catch(te){this.onError(te)}}var Rs=!1,Lo=null,Xn=!1,vl=null,yf={onError:function(s){Rs=!0,Lo=s}};function jo(s,a,u,p,g,w,T,D,j){Rs=!1,Lo=null,Ps.apply(yf,arguments)}function su(s,a,u,p,g,w,T,D,j){if(jo.apply(this,arguments),Rs){if(Rs){var G=Lo;Rs=!1,Lo=null}else throw Error(t(198));Xn||(Xn=!0,vl=G)}}function Jn(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function Ns(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Zn(s){if(Jn(s)!==s)throw Error(t(188))}function ou(s){var a=s.alternate;if(!a){if(a=Jn(s),a===null)throw Error(t(188));return a!==s?null:s}for(var u=s,p=a;;){var g=u.return;if(g===null)break;var w=g.alternate;if(w===null){if(p=g.return,p!==null){u=p;continue}break}if(g.child===w.child){for(w=g.child;w;){if(w===u)return Zn(g),s;if(w===p)return Zn(g),a;w=w.sibling}throw Error(t(188))}if(u.return!==p.return)u=g,p=w;else{for(var T=!1,D=g.child;D;){if(D===u){T=!0,u=g,p=w;break}if(D===p){T=!0,p=g,u=w;break}D=D.sibling}if(!T){for(D=w.child;D;){if(D===u){T=!0,u=w,p=g;break}if(D===p){T=!0,p=w,u=g;break}D=D.sibling}if(!T)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:a}function _l(s){return s=ou(s),s!==null?Fo(s):null}function Fo(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Fo(s);if(a!==null)return a;s=s.sibling}return null}var zo=e.unstable_scheduleCallback,wl=e.unstable_cancelCallback,au=e.unstable_shouldYield,vf=e.unstable_requestPaint,et=e.unstable_now,lu=e.unstable_getCurrentPriorityLevel,Ds=e.unstable_ImmediatePriority,Cr=e.unstable_UserBlockingPriority,Mn=e.unstable_NormalPriority,bl=e.unstable_LowPriority,cu=e.unstable_IdlePriority,Ms=null,Tn=null;function uu(s){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(Ms,s,void 0,(s.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:du,El=Math.log,hu=Math.LN2;function du(s){return s>>>=0,s===0?32:31-(El(s)/hu|0)|0}var Bo=64,Uo=4194304;function Pr(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Os(s,a){var u=s.pendingLanes;if(u===0)return 0;var p=0,g=s.suspendedLanes,w=s.pingedLanes,T=u&268435455;if(T!==0){var D=T&~g;D!==0?p=Pr(D):(w&=T,w!==0&&(p=Pr(w)))}else T=u&~g,T!==0?p=Pr(T):w!==0&&(p=Pr(w));if(p===0)return 0;if(a!==0&&a!==p&&(a&g)===0&&(g=p&-p,w=a&-a,g>=w||g===16&&(w&4194240)!==0))return a;if((p&4)!==0&&(p|=u&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=p;0<a;)u=31-on(a),g=1<<u,p|=s[u],a&=~g;return p}function _f(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xi(s,a){for(var u=s.suspendedLanes,p=s.pingedLanes,g=s.expirationTimes,w=s.pendingLanes;0<w;){var T=31-on(w),D=1<<T,j=g[T];j===-1?((D&u)===0||(D&p)!==0)&&(g[T]=_f(D,a)):j<=a&&(s.expiredLanes|=D),w&=~D}}function Sn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Vs(){var s=Bo;return Bo<<=1,(Bo&4194240)===0&&(Bo=64),s}function Rr(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Nr(s,a,u){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-on(a),s[a]=u}function Je(s,a){var u=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var p=s.eventTimes;for(s=s.expirationTimes;0<u;){var g=31-on(u),w=1<<g;a[g]=0,p[g]=-1,s[g]=-1,u&=~w}}function Dr(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var p=31-on(u),g=1<<p;g&a|s[p]&a&&(s[p]|=a),u&=~g}}var je=0;function Mr(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var fu,Wo,pu,mu,gu,xl=!1,wi=[],zt=null,ei=null,ti=null,Or=new Map,On=new Map,bi=[],wf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yu(s,a){switch(s){case"focusin":case"focusout":zt=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":Or.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":On.delete(a.pointerId)}}function hn(s,a,u,p,g,w){return s===null||s.nativeEvent!==w?(s={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:w,targetContainers:[g]},a!==null&&(a=jl(a),a!==null&&Wo(a)),s):(s.eventSystemFlags|=p,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function bf(s,a,u,p,g){switch(a){case"focusin":return zt=hn(zt,s,a,u,p,g),!0;case"dragenter":return ei=hn(ei,s,a,u,p,g),!0;case"mouseover":return ti=hn(ti,s,a,u,p,g),!0;case"pointerover":var w=g.pointerId;return Or.set(w,hn(Or.get(w)||null,s,a,u,p,g)),!0;case"gotpointercapture":return w=g.pointerId,On.set(w,hn(On.get(w)||null,s,a,u,p,g)),!0}return!1}function vu(s){var a=Bs(s.target);if(a!==null){var u=Jn(a);if(u!==null){if(a=u.tag,a===13){if(a=Ns(u),a!==null){s.blockedOn=a,gu(s.priority,function(){pu(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ji(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=Ho(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var p=new u.constructor(u.type,u);As=p,u.target.dispatchEvent(p),As=null}else return a=jl(u),a!==null&&Wo(a),s.blockedOn=u,!1;a.shift()}return!0}function Ls(s,a,u){Ji(s)&&u.delete(a)}function _u(){xl=!1,zt!==null&&Ji(zt)&&(zt=null),ei!==null&&Ji(ei)&&(ei=null),ti!==null&&Ji(ti)&&(ti=null),Or.forEach(Ls),On.forEach(Ls)}function ni(s,a){s.blockedOn===a&&(s.blockedOn=null,xl||(xl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_u)))}function ii(s){function a(g){return ni(g,s)}if(0<wi.length){ni(wi[0],s);for(var u=1;u<wi.length;u++){var p=wi[u];p.blockedOn===s&&(p.blockedOn=null)}}for(zt!==null&&ni(zt,s),ei!==null&&ni(ei,s),ti!==null&&ni(ti,s),Or.forEach(a),On.forEach(a),u=0;u<bi.length;u++)p=bi[u],p.blockedOn===s&&(p.blockedOn=null);for(;0<bi.length&&(u=bi[0],u.blockedOn===null);)vu(u),u.blockedOn===null&&bi.shift()}var Zi=W.ReactCurrentBatchConfig,Vr=!0;function at(s,a,u,p){var g=je,w=Zi.transition;Zi.transition=null;try{je=1,Tl(s,a,u,p)}finally{je=g,Zi.transition=w}}function Ef(s,a,u,p){var g=je,w=Zi.transition;Zi.transition=null;try{je=4,Tl(s,a,u,p)}finally{je=g,Zi.transition=w}}function Tl(s,a,u,p){if(Vr){var g=Ho(s,a,u,p);if(g===null)Df(s,a,p,js,u),yu(s,p);else if(bf(g,s,a,u,p))p.stopPropagation();else if(yu(s,p),a&4&&-1<wf.indexOf(s)){for(;g!==null;){var w=jl(g);if(w!==null&&fu(w),w=Ho(s,a,u,p),w===null&&Df(s,a,p,js,u),w===g)break;g=w}g!==null&&p.stopPropagation()}else Df(s,a,p,null,u)}}var js=null;function Ho(s,a,u,p){if(js=null,s=Do(p),s=Bs(s),s!==null)if(a=Jn(s),a===null)s=null;else if(u=a.tag,u===13){if(s=Ns(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return js=s,null}function Sl(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lu()){case Ds:return 1;case Cr:return 4;case Mn:case bl:return 16;case cu:return 536870912;default:return 16}default:return 16}}var In=null,$o=null,dn=null;function Il(){if(dn)return dn;var s,a=$o,u=a.length,p,g="value"in In?In.value:In.textContent,w=g.length;for(s=0;s<u&&a[s]===g[s];s++);var T=u-s;for(p=1;p<=T&&a[u-p]===g[w-p];p++);return dn=g.slice(s,1<p?1-p:void 0)}function qo(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Ei(){return!0}function kl(){return!1}function Bt(s){function a(u,p,g,w,T){this._reactName=u,this._targetInst=g,this.type=p,this.nativeEvent=w,this.target=T,this.currentTarget=null;for(var D in s)s.hasOwnProperty(D)&&(u=s[D],this[D]=u?u(w):w[D]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Ei:kl,this.isPropagationStopped=kl,this}return oe(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),a}var ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ko=Bt(ri),xi=oe({},ri,{view:0,detail:0}),xf=Bt(xi),Go,er,Lr,Fs=oe({},xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ti,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Lr&&(Lr&&s.type==="mousemove"?(Go=s.screenX-Lr.screenX,er=s.screenY-Lr.screenY):er=Go=0,Lr=s),Go)},movementY:function(s){return"movementY"in s?s.movementY:er}}),Yo=Bt(Fs),Al=oe({},Fs,{dataTransfer:0}),wu=Bt(Al),Qo=oe({},xi,{relatedTarget:0}),Xo=Bt(Qo),bu=oe({},ri,{animationName:0,elapsedTime:0,pseudoElement:0}),tr=Bt(bu),Eu=oe({},ri,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),xu=Bt(Eu),Tu=oe({},ri,{data:0}),Cl=Bt(Tu),Jo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},an={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iu(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Su[s])?!!a[s]:!1}function Ti(){return Iu}var d=oe({},xi,{key:function(s){if(s.key){var a=Jo[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=qo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?an[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ti,charCode:function(s){return s.type==="keypress"?qo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?qo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),_=Bt(d),E=oe({},Fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A=Bt(E),H=oe({},xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ti}),Y=Bt(H),se=oe({},ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ge=Bt(se),At=oe({},Fs,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=Bt(At),Ot=[9,13,27,32],wt=c&&"CompositionEvent"in window,Vn=null;c&&"documentMode"in document&&(Vn=document.documentMode);var kn=c&&"TextEvent"in window&&!Vn,zs=c&&(!wt||Vn&&8<Vn&&11>=Vn),Zo=" ",Oy=!1;function Vy(s,a){switch(s){case"keyup":return Ot.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ly(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ea=!1;function hI(s,a){switch(s){case"compositionend":return Ly(a);case"keypress":return a.which!==32?null:(Oy=!0,Zo);case"textInput":return s=a.data,s===Zo&&Oy?null:s;default:return null}}function dI(s,a){if(ea)return s==="compositionend"||!wt&&Vy(s,a)?(s=Il(),dn=$o=In=null,ea=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return zs&&a.locale!=="ko"?null:a.data;default:return null}}var fI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jy(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!fI[s.type]:a==="textarea"}function Fy(s,a,u,p){_i(p),a=Ru(a,"onChange"),0<a.length&&(u=new Ko("onChange","change",null,u,p),s.push({event:u,listeners:a}))}var Pl=null,Rl=null;function pI(s){iv(s,0)}function ku(s){var a=sa(s);if(Ao(a))return s}function mI(s,a){if(s==="change")return a}var zy=!1;if(c){var Tf;if(c){var Sf="oninput"in document;if(!Sf){var By=document.createElement("div");By.setAttribute("oninput","return;"),Sf=typeof By.oninput=="function"}Tf=Sf}else Tf=!1;zy=Tf&&(!document.documentMode||9<document.documentMode)}function Uy(){Pl&&(Pl.detachEvent("onpropertychange",Wy),Rl=Pl=null)}function Wy(s){if(s.propertyName==="value"&&ku(Rl)){var a=[];Fy(a,Rl,s,Do(s)),yl(pI,a)}}function gI(s,a,u){s==="focusin"?(Uy(),Pl=a,Rl=u,Pl.attachEvent("onpropertychange",Wy)):s==="focusout"&&Uy()}function yI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ku(Rl)}function vI(s,a){if(s==="click")return ku(a)}function _I(s,a){if(s==="input"||s==="change")return ku(a)}function wI(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var si=typeof Object.is=="function"?Object.is:wI;function Nl(s,a){if(si(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var g=u[p];if(!h.call(a,g)||!si(s[g],a[g]))return!1}return!0}function Hy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function $y(s,a){var u=Hy(s);s=0;for(var p;u;){if(u.nodeType===3){if(p=s+u.textContent.length,s<=a&&p>=a)return{node:u,offset:a-s};s=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Hy(u)}}function qy(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?qy(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Ky(){for(var s=window,a=kr();a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=kr(s.document)}return a}function If(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function bI(s){var a=Ky(),u=s.focusedElem,p=s.selectionRange;if(a!==u&&u&&u.ownerDocument&&qy(u.ownerDocument.documentElement,u)){if(p!==null&&If(u)){if(a=p.start,s=p.end,s===void 0&&(s=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(s,u.value.length);else if(s=(a=u.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var g=u.textContent.length,w=Math.min(p.start,g);p=p.end===void 0?w:Math.min(p.end,g),!s.extend&&w>p&&(g=p,p=w,w=g),g=$y(u,w);var T=$y(u,p);g&&T&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==T.node||s.focusOffset!==T.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),s.removeAllRanges(),w>p?(s.addRange(a),s.extend(T.node,T.offset)):(a.setEnd(T.node,T.offset),s.addRange(a)))}}for(a=[],s=u;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)s=a[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var EI=c&&"documentMode"in document&&11>=document.documentMode,ta=null,kf=null,Dl=null,Af=!1;function Gy(s,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Af||ta==null||ta!==kr(p)||(p=ta,"selectionStart"in p&&If(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Dl&&Nl(Dl,p)||(Dl=p,p=Ru(kf,"onSelect"),0<p.length&&(a=new Ko("onSelect","select",null,a,u),s.push({event:a,listeners:p}),a.target=ta)))}function Au(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var na={animationend:Au("Animation","AnimationEnd"),animationiteration:Au("Animation","AnimationIteration"),animationstart:Au("Animation","AnimationStart"),transitionend:Au("Transition","TransitionEnd")},Cf={},Yy={};c&&(Yy=document.createElement("div").style,"AnimationEvent"in window||(delete na.animationend.animation,delete na.animationiteration.animation,delete na.animationstart.animation),"TransitionEvent"in window||delete na.transitionend.transition);function Cu(s){if(Cf[s])return Cf[s];if(!na[s])return s;var a=na[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in Yy)return Cf[s]=a[u];return s}var Qy=Cu("animationend"),Xy=Cu("animationiteration"),Jy=Cu("animationstart"),Zy=Cu("transitionend"),ev=new Map,tv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(s,a){ev.set(s,a),o(a,[s])}for(var Pf=0;Pf<tv.length;Pf++){var Rf=tv[Pf],xI=Rf.toLowerCase(),TI=Rf[0].toUpperCase()+Rf.slice(1);jr(xI,"on"+TI)}jr(Qy,"onAnimationEnd"),jr(Xy,"onAnimationIteration"),jr(Jy,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(Zy,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ml));function nv(s,a,u){var p=s.type||"unknown-event";s.currentTarget=u,su(p,a,void 0,s),s.currentTarget=null}function iv(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var p=s[u],g=p.event;p=p.listeners;e:{var w=void 0;if(a)for(var T=p.length-1;0<=T;T--){var D=p[T],j=D.instance,G=D.currentTarget;if(D=D.listener,j!==w&&g.isPropagationStopped())break e;nv(g,D,G),w=j}else for(T=0;T<p.length;T++){if(D=p[T],j=D.instance,G=D.currentTarget,D=D.listener,j!==w&&g.isPropagationStopped())break e;nv(g,D,G),w=j}}}if(Xn)throw s=vl,Xn=!1,vl=null,s}function it(s,a){var u=a[Ff];u===void 0&&(u=a[Ff]=new Set);var p=s+"__bubble";u.has(p)||(rv(a,s,2,!1),u.add(p))}function Nf(s,a,u){var p=0;a&&(p|=4),rv(u,s,p,a)}var Pu="_reactListening"+Math.random().toString(36).slice(2);function Ol(s){if(!s[Pu]){s[Pu]=!0,i.forEach(function(u){u!=="selectionchange"&&(SI.has(u)||Nf(u,!1,s),Nf(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Pu]||(a[Pu]=!0,Nf("selectionchange",!1,a))}}function rv(s,a,u,p){switch(Sl(a)){case 1:var g=at;break;case 4:g=Ef;break;default:g=Tl}u=g.bind(null,a,u,s),g=void 0,!Vo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),p?g!==void 0?s.addEventListener(a,u,{capture:!0,passive:g}):s.addEventListener(a,u,!0):g!==void 0?s.addEventListener(a,u,{passive:g}):s.addEventListener(a,u,!1)}function Df(s,a,u,p,g){var w=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var T=p.tag;if(T===3||T===4){var D=p.stateNode.containerInfo;if(D===g||D.nodeType===8&&D.parentNode===g)break;if(T===4)for(T=p.return;T!==null;){var j=T.tag;if((j===3||j===4)&&(j=T.stateNode.containerInfo,j===g||j.nodeType===8&&j.parentNode===g))return;T=T.return}for(;D!==null;){if(T=Bs(D),T===null)return;if(j=T.tag,j===5||j===6){p=w=T;continue e}D=D.parentNode}}p=p.return}yl(function(){var G=w,te=Do(u),ne=[];e:{var ee=ev.get(s);if(ee!==void 0){var ue=Ko,fe=s;switch(s){case"keypress":if(qo(u)===0)break e;case"keydown":case"keyup":ue=_;break;case"focusin":fe="focus",ue=Xo;break;case"focusout":fe="blur",ue=Xo;break;case"beforeblur":case"afterblur":ue=Xo;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=wu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=Y;break;case Qy:case Xy:case Jy:ue=tr;break;case Zy:ue=Ge;break;case"scroll":ue=xf;break;case"wheel":ue=Fe;break;case"copy":case"cut":case"paste":ue=xu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=A}var me=(a&4)!==0,yt=!me&&s==="scroll",$=me?ee!==null?ee+"Capture":null:ee;me=[];for(var z=G,q;z!==null;){q=z;var re=q.stateNode;if(q.tag===5&&re!==null&&(q=re,$!==null&&(re=gt(z,$),re!=null&&me.push(Vl(z,re,q)))),yt)break;z=z.return}0<me.length&&(ee=new ue(ee,fe,null,u,te),ne.push({event:ee,listeners:me}))}}if((a&7)===0){e:{if(ee=s==="mouseover"||s==="pointerover",ue=s==="mouseout"||s==="pointerout",ee&&u!==As&&(fe=u.relatedTarget||u.fromElement)&&(Bs(fe)||fe[nr]))break e;if((ue||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,ue?(fe=u.relatedTarget||u.toElement,ue=G,fe=fe?Bs(fe):null,fe!==null&&(yt=Jn(fe),fe!==yt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ue=null,fe=G),ue!==fe)){if(me=Yo,re="onMouseLeave",$="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(me=A,re="onPointerLeave",$="onPointerEnter",z="pointer"),yt=ue==null?ee:sa(ue),q=fe==null?ee:sa(fe),ee=new me(re,z+"leave",ue,u,te),ee.target=yt,ee.relatedTarget=q,re=null,Bs(te)===G&&(me=new me($,z+"enter",fe,u,te),me.target=q,me.relatedTarget=yt,re=me),yt=re,ue&&fe)t:{for(me=ue,$=fe,z=0,q=me;q;q=ia(q))z++;for(q=0,re=$;re;re=ia(re))q++;for(;0<z-q;)me=ia(me),z--;for(;0<q-z;)$=ia($),q--;for(;z--;){if(me===$||$!==null&&me===$.alternate)break t;me=ia(me),$=ia($)}me=null}else me=null;ue!==null&&sv(ne,ee,ue,me,!1),fe!==null&&yt!==null&&sv(ne,yt,fe,me,!0)}}e:{if(ee=G?sa(G):window,ue=ee.nodeName&&ee.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ee.type==="file")var ye=mI;else if(jy(ee))if(zy)ye=_I;else{ye=yI;var _e=gI}else(ue=ee.nodeName)&&ue.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(ye=vI);if(ye&&(ye=ye(s,G))){Fy(ne,ye,u,te);break e}_e&&_e(s,ee,G),s==="focusout"&&(_e=ee._wrapperState)&&_e.controlled&&ee.type==="number"&&Po(ee,"number",ee.value)}switch(_e=G?sa(G):window,s){case"focusin":(jy(_e)||_e.contentEditable==="true")&&(ta=_e,kf=G,Dl=null);break;case"focusout":Dl=kf=ta=null;break;case"mousedown":Af=!0;break;case"contextmenu":case"mouseup":case"dragend":Af=!1,Gy(ne,u,te);break;case"selectionchange":if(EI)break;case"keydown":case"keyup":Gy(ne,u,te)}var we;if(wt)e:{switch(s){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else ea?Vy(s,u)&&(Te="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Te="onCompositionStart");Te&&(zs&&u.locale!=="ko"&&(ea||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&ea&&(we=Il()):(In=te,$o="value"in In?In.value:In.textContent,ea=!0)),_e=Ru(G,Te),0<_e.length&&(Te=new Cl(Te,s,null,u,te),ne.push({event:Te,listeners:_e}),we?Te.data=we:(we=Ly(u),we!==null&&(Te.data=we)))),(we=kn?hI(s,u):dI(s,u))&&(G=Ru(G,"onBeforeInput"),0<G.length&&(te=new Cl("onBeforeInput","beforeinput",null,u,te),ne.push({event:te,listeners:G}),te.data=we))}iv(ne,a)})}function Vl(s,a,u){return{instance:s,listener:a,currentTarget:u}}function Ru(s,a){for(var u=a+"Capture",p=[];s!==null;){var g=s,w=g.stateNode;g.tag===5&&w!==null&&(g=w,w=gt(s,u),w!=null&&p.unshift(Vl(s,w,g)),w=gt(s,a),w!=null&&p.push(Vl(s,w,g))),s=s.return}return p}function ia(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function sv(s,a,u,p,g){for(var w=a._reactName,T=[];u!==null&&u!==p;){var D=u,j=D.alternate,G=D.stateNode;if(j!==null&&j===p)break;D.tag===5&&G!==null&&(D=G,g?(j=gt(u,w),j!=null&&T.unshift(Vl(u,j,D))):g||(j=gt(u,w),j!=null&&T.push(Vl(u,j,D)))),u=u.return}T.length!==0&&s.push({event:a,listeners:T})}var II=/\r\n?/g,kI=/\u0000|\uFFFD/g;function ov(s){return(typeof s=="string"?s:""+s).replace(II,`
`).replace(kI,"")}function Nu(s,a,u){if(a=ov(a),ov(s)!==a&&u)throw Error(t(425))}function Du(){}var Mf=null,Of=null;function Vf(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Lf=typeof setTimeout=="function"?setTimeout:void 0,AI=typeof clearTimeout=="function"?clearTimeout:void 0,av=typeof Promise=="function"?Promise:void 0,CI=typeof queueMicrotask=="function"?queueMicrotask:typeof av<"u"?function(s){return av.resolve(null).then(s).catch(PI)}:Lf;function PI(s){setTimeout(function(){throw s})}function jf(s,a){var u=a,p=0;do{var g=u.nextSibling;if(s.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(p===0){s.removeChild(g),ii(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=g}while(u);ii(a)}function Fr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function lv(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}var ra=Math.random().toString(36).slice(2),Si="__reactFiber$"+ra,Ll="__reactProps$"+ra,nr="__reactContainer$"+ra,Ff="__reactEvents$"+ra,RI="__reactListeners$"+ra,NI="__reactHandles$"+ra;function Bs(s){var a=s[Si];if(a)return a;for(var u=s.parentNode;u;){if(a=u[nr]||u[Si]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=lv(s);s!==null;){if(u=s[Si])return u;s=lv(s)}return a}s=u,u=s.parentNode}return null}function jl(s){return s=s[Si]||s[nr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function sa(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Mu(s){return s[Ll]||null}var zf=[],oa=-1;function zr(s){return{current:s}}function rt(s){0>oa||(s.current=zf[oa],zf[oa]=null,oa--)}function tt(s,a){oa++,zf[oa]=s.current,s.current=a}var Br={},Kt=zr(Br),fn=zr(!1),Us=Br;function aa(s,a){var u=s.type.contextTypes;if(!u)return Br;var p=s.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var g={},w;for(w in u)g[w]=a[w];return p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=g),g}function pn(s){return s=s.childContextTypes,s!=null}function Ou(){rt(fn),rt(Kt)}function cv(s,a,u){if(Kt.current!==Br)throw Error(t(168));tt(Kt,a),tt(fn,u)}function uv(s,a,u){var p=s.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var g in p)if(!(g in a))throw Error(t(108,He(s)||"Unknown",g));return oe({},u,p)}function Vu(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Br,Us=Kt.current,tt(Kt,s),tt(fn,fn.current),!0}function hv(s,a,u){var p=s.stateNode;if(!p)throw Error(t(169));u?(s=uv(s,a,Us),p.__reactInternalMemoizedMergedChildContext=s,rt(fn),rt(Kt),tt(Kt,s)):rt(fn),tt(fn,u)}var ir=null,Lu=!1,Bf=!1;function dv(s){ir===null?ir=[s]:ir.push(s)}function DI(s){Lu=!0,dv(s)}function Ur(){if(!Bf&&ir!==null){Bf=!0;var s=0,a=je;try{var u=ir;for(je=1;s<u.length;s++){var p=u[s];do p=p(!0);while(p!==null)}ir=null,Lu=!1}catch(g){throw ir!==null&&(ir=ir.slice(s+1)),zo(Ds,Ur),g}finally{je=a,Bf=!1}}return null}var la=[],ca=0,ju=null,Fu=0,Ln=[],jn=0,Ws=null,rr=1,sr="";function Hs(s,a){la[ca++]=Fu,la[ca++]=ju,ju=s,Fu=a}function fv(s,a,u){Ln[jn++]=rr,Ln[jn++]=sr,Ln[jn++]=Ws,Ws=s;var p=rr;s=sr;var g=32-on(p)-1;p&=~(1<<g),u+=1;var w=32-on(a)+g;if(30<w){var T=g-g%5;w=(p&(1<<T)-1).toString(32),p>>=T,g-=T,rr=1<<32-on(a)+g|u<<g|p,sr=w+s}else rr=1<<w|u<<g|p,sr=s}function Uf(s){s.return!==null&&(Hs(s,1),fv(s,1,0))}function Wf(s){for(;s===ju;)ju=la[--ca],la[ca]=null,Fu=la[--ca],la[ca]=null;for(;s===Ws;)Ws=Ln[--jn],Ln[jn]=null,sr=Ln[--jn],Ln[jn]=null,rr=Ln[--jn],Ln[jn]=null}var An=null,Cn=null,lt=!1,oi=null;function pv(s,a){var u=Un(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=s,a=s.deletions,a===null?(s.deletions=[u],s.flags|=16):a.push(u)}function mv(s,a){switch(s.tag){case 5:var u=s.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,An=s,Cn=Fr(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,An=s,Cn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=Ws!==null?{id:rr,overflow:sr}:null,s.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=Un(18,null,null,0),u.stateNode=a,u.return=s,s.child=u,An=s,Cn=null,!0):!1;default:return!1}}function Hf(s){return(s.mode&1)!==0&&(s.flags&128)===0}function $f(s){if(lt){var a=Cn;if(a){var u=a;if(!mv(s,a)){if(Hf(s))throw Error(t(418));a=Fr(u.nextSibling);var p=An;a&&mv(s,a)?pv(p,u):(s.flags=s.flags&-4097|2,lt=!1,An=s)}}else{if(Hf(s))throw Error(t(418));s.flags=s.flags&-4097|2,lt=!1,An=s}}}function gv(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;An=s}function zu(s){if(s!==An)return!1;if(!lt)return gv(s),lt=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Vf(s.type,s.memoizedProps)),a&&(a=Cn)){if(Hf(s))throw yv(),Error(t(418));for(;a;)pv(s,a),a=Fr(a.nextSibling)}if(gv(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(a===0){Cn=Fr(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}s=s.nextSibling}Cn=null}}else Cn=An?Fr(s.stateNode.nextSibling):null;return!0}function yv(){for(var s=Cn;s;)s=Fr(s.nextSibling)}function ua(){Cn=An=null,lt=!1}function qf(s){oi===null?oi=[s]:oi.push(s)}var MI=W.ReactCurrentBatchConfig;function Fl(s,a,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,s));var g=p,w=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===w?a.ref:(a=function(T){var D=g.refs;T===null?delete D[w]:D[w]=T},a._stringRef=w,a)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function Bu(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function vv(s){var a=s._init;return a(s._payload)}function _v(s){function a($,z){if(s){var q=$.deletions;q===null?($.deletions=[z],$.flags|=16):q.push(z)}}function u($,z){if(!s)return null;for(;z!==null;)a($,z),z=z.sibling;return null}function p($,z){for($=new Map;z!==null;)z.key!==null?$.set(z.key,z):$.set(z.index,z),z=z.sibling;return $}function g($,z){return $=Qr($,z),$.index=0,$.sibling=null,$}function w($,z,q){return $.index=q,s?(q=$.alternate,q!==null?(q=q.index,q<z?($.flags|=2,z):q):($.flags|=2,z)):($.flags|=1048576,z)}function T($){return s&&$.alternate===null&&($.flags|=2),$}function D($,z,q,re){return z===null||z.tag!==6?(z=Lp(q,$.mode,re),z.return=$,z):(z=g(z,q),z.return=$,z)}function j($,z,q,re){var ye=q.type;return ye===R?te($,z,q.props.children,re,q.key):z!==null&&(z.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Re&&vv(ye)===z.type)?(re=g(z,q.props),re.ref=Fl($,z,q),re.return=$,re):(re=hh(q.type,q.key,q.props,null,$.mode,re),re.ref=Fl($,z,q),re.return=$,re)}function G($,z,q,re){return z===null||z.tag!==4||z.stateNode.containerInfo!==q.containerInfo||z.stateNode.implementation!==q.implementation?(z=jp(q,$.mode,re),z.return=$,z):(z=g(z,q.children||[]),z.return=$,z)}function te($,z,q,re,ye){return z===null||z.tag!==7?(z=Js(q,$.mode,re,ye),z.return=$,z):(z=g(z,q),z.return=$,z)}function ne($,z,q){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Lp(""+z,$.mode,q),z.return=$,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case K:return q=hh(z.type,z.key,z.props,null,$.mode,q),q.ref=Fl($,null,z),q.return=$,q;case Z:return z=jp(z,$.mode,q),z.return=$,z;case Re:var re=z._init;return ne($,re(z._payload),q)}if(Ki(z)||ce(z))return z=Js(z,$.mode,q,null),z.return=$,z;Bu($,z)}return null}function ee($,z,q,re){var ye=z!==null?z.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return ye!==null?null:D($,z,""+q,re);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case K:return q.key===ye?j($,z,q,re):null;case Z:return q.key===ye?G($,z,q,re):null;case Re:return ye=q._init,ee($,z,ye(q._payload),re)}if(Ki(q)||ce(q))return ye!==null?null:te($,z,q,re,null);Bu($,q)}return null}function ue($,z,q,re,ye){if(typeof re=="string"&&re!==""||typeof re=="number")return $=$.get(q)||null,D(z,$,""+re,ye);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case K:return $=$.get(re.key===null?q:re.key)||null,j(z,$,re,ye);case Z:return $=$.get(re.key===null?q:re.key)||null,G(z,$,re,ye);case Re:var _e=re._init;return ue($,z,q,_e(re._payload),ye)}if(Ki(re)||ce(re))return $=$.get(q)||null,te(z,$,re,ye,null);Bu(z,re)}return null}function fe($,z,q,re){for(var ye=null,_e=null,we=z,Te=z=0,jt=null;we!==null&&Te<q.length;Te++){we.index>Te?(jt=we,we=null):jt=we.sibling;var We=ee($,we,q[Te],re);if(We===null){we===null&&(we=jt);break}s&&we&&We.alternate===null&&a($,we),z=w(We,z,Te),_e===null?ye=We:_e.sibling=We,_e=We,we=jt}if(Te===q.length)return u($,we),lt&&Hs($,Te),ye;if(we===null){for(;Te<q.length;Te++)we=ne($,q[Te],re),we!==null&&(z=w(we,z,Te),_e===null?ye=we:_e.sibling=we,_e=we);return lt&&Hs($,Te),ye}for(we=p($,we);Te<q.length;Te++)jt=ue(we,$,Te,q[Te],re),jt!==null&&(s&&jt.alternate!==null&&we.delete(jt.key===null?Te:jt.key),z=w(jt,z,Te),_e===null?ye=jt:_e.sibling=jt,_e=jt);return s&&we.forEach(function(Xr){return a($,Xr)}),lt&&Hs($,Te),ye}function me($,z,q,re){var ye=ce(q);if(typeof ye!="function")throw Error(t(150));if(q=ye.call(q),q==null)throw Error(t(151));for(var _e=ye=null,we=z,Te=z=0,jt=null,We=q.next();we!==null&&!We.done;Te++,We=q.next()){we.index>Te?(jt=we,we=null):jt=we.sibling;var Xr=ee($,we,We.value,re);if(Xr===null){we===null&&(we=jt);break}s&&we&&Xr.alternate===null&&a($,we),z=w(Xr,z,Te),_e===null?ye=Xr:_e.sibling=Xr,_e=Xr,we=jt}if(We.done)return u($,we),lt&&Hs($,Te),ye;if(we===null){for(;!We.done;Te++,We=q.next())We=ne($,We.value,re),We!==null&&(z=w(We,z,Te),_e===null?ye=We:_e.sibling=We,_e=We);return lt&&Hs($,Te),ye}for(we=p($,we);!We.done;Te++,We=q.next())We=ue(we,$,Te,We.value,re),We!==null&&(s&&We.alternate!==null&&we.delete(We.key===null?Te:We.key),z=w(We,z,Te),_e===null?ye=We:_e.sibling=We,_e=We);return s&&we.forEach(function(f1){return a($,f1)}),lt&&Hs($,Te),ye}function yt($,z,q,re){if(typeof q=="object"&&q!==null&&q.type===R&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case K:e:{for(var ye=q.key,_e=z;_e!==null;){if(_e.key===ye){if(ye=q.type,ye===R){if(_e.tag===7){u($,_e.sibling),z=g(_e,q.props.children),z.return=$,$=z;break e}}else if(_e.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Re&&vv(ye)===_e.type){u($,_e.sibling),z=g(_e,q.props),z.ref=Fl($,_e,q),z.return=$,$=z;break e}u($,_e);break}else a($,_e);_e=_e.sibling}q.type===R?(z=Js(q.props.children,$.mode,re,q.key),z.return=$,$=z):(re=hh(q.type,q.key,q.props,null,$.mode,re),re.ref=Fl($,z,q),re.return=$,$=re)}return T($);case Z:e:{for(_e=q.key;z!==null;){if(z.key===_e)if(z.tag===4&&z.stateNode.containerInfo===q.containerInfo&&z.stateNode.implementation===q.implementation){u($,z.sibling),z=g(z,q.children||[]),z.return=$,$=z;break e}else{u($,z);break}else a($,z);z=z.sibling}z=jp(q,$.mode,re),z.return=$,$=z}return T($);case Re:return _e=q._init,yt($,z,_e(q._payload),re)}if(Ki(q))return fe($,z,q,re);if(ce(q))return me($,z,q,re);Bu($,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,z!==null&&z.tag===6?(u($,z.sibling),z=g(z,q),z.return=$,$=z):(u($,z),z=Lp(q,$.mode,re),z.return=$,$=z),T($)):u($,z)}return yt}var ha=_v(!0),wv=_v(!1),Uu=zr(null),Wu=null,da=null,Kf=null;function Gf(){Kf=da=Wu=null}function Yf(s){var a=Uu.current;rt(Uu),s._currentValue=a}function Qf(s,a,u){for(;s!==null;){var p=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),s===u)break;s=s.return}}function fa(s,a){Wu=s,Kf=da=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(mn=!0),s.firstContext=null)}function Fn(s){var a=s._currentValue;if(Kf!==s)if(s={context:s,memoizedValue:a,next:null},da===null){if(Wu===null)throw Error(t(308));da=s,Wu.dependencies={lanes:0,firstContext:s}}else da=da.next=s;return a}var $s=null;function Xf(s){$s===null?$s=[s]:$s.push(s)}function bv(s,a,u,p){var g=a.interleaved;return g===null?(u.next=u,Xf(a)):(u.next=g.next,g.next=u),a.interleaved=u,or(s,p)}function or(s,a){s.lanes|=a;var u=s.alternate;for(u!==null&&(u.lanes|=a),u=s,s=s.return;s!==null;)s.childLanes|=a,u=s.alternate,u!==null&&(u.childLanes|=a),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Wr=!1;function Jf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ev(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ar(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function Hr(s,a,u){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(Be&2)!==0){var g=p.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),p.pending=a,or(s,u)}return g=p.interleaved,g===null?(a.next=a,Xf(p)):(a.next=g.next,g.next=a),p.interleaved=a,or(s,u)}function Hu(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=s.pendingLanes,u|=p,a.lanes=u,Dr(s,u)}}function xv(s,a){var u=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var g=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var T={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?g=w=T:w=w.next=T,u=u.next}while(u!==null);w===null?g=w=a:w=w.next=a}else g=w=a;u={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:w,shared:p.shared,effects:p.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}function $u(s,a,u,p){var g=s.updateQueue;Wr=!1;var w=g.firstBaseUpdate,T=g.lastBaseUpdate,D=g.shared.pending;if(D!==null){g.shared.pending=null;var j=D,G=j.next;j.next=null,T===null?w=G:T.next=G,T=j;var te=s.alternate;te!==null&&(te=te.updateQueue,D=te.lastBaseUpdate,D!==T&&(D===null?te.firstBaseUpdate=G:D.next=G,te.lastBaseUpdate=j))}if(w!==null){var ne=g.baseState;T=0,te=G=j=null,D=w;do{var ee=D.lane,ue=D.eventTime;if((p&ee)===ee){te!==null&&(te=te.next={eventTime:ue,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var fe=s,me=D;switch(ee=a,ue=u,me.tag){case 1:if(fe=me.payload,typeof fe=="function"){ne=fe.call(ue,ne,ee);break e}ne=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=me.payload,ee=typeof fe=="function"?fe.call(ue,ne,ee):fe,ee==null)break e;ne=oe({},ne,ee);break e;case 2:Wr=!0}}D.callback!==null&&D.lane!==0&&(s.flags|=64,ee=g.effects,ee===null?g.effects=[D]:ee.push(D))}else ue={eventTime:ue,lane:ee,tag:D.tag,payload:D.payload,callback:D.callback,next:null},te===null?(G=te=ue,j=ne):te=te.next=ue,T|=ee;if(D=D.next,D===null){if(D=g.shared.pending,D===null)break;ee=D,D=ee.next,ee.next=null,g.lastBaseUpdate=ee,g.shared.pending=null}}while(!0);if(te===null&&(j=ne),g.baseState=j,g.firstBaseUpdate=G,g.lastBaseUpdate=te,a=g.shared.interleaved,a!==null){g=a;do T|=g.lane,g=g.next;while(g!==a)}else w===null&&(g.shared.lanes=0);Gs|=T,s.lanes=T,s.memoizedState=ne}}function Tv(s,a,u){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var p=s[a],g=p.callback;if(g!==null){if(p.callback=null,p=u,typeof g!="function")throw Error(t(191,g));g.call(p)}}}var zl={},Ii=zr(zl),Bl=zr(zl),Ul=zr(zl);function qs(s){if(s===zl)throw Error(t(174));return s}function Zf(s,a){switch(tt(Ul,a),tt(Bl,s),tt(Ii,zl),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:kt(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=kt(a,s)}rt(Ii),tt(Ii,a)}function pa(){rt(Ii),rt(Bl),rt(Ul)}function Sv(s){qs(Ul.current);var a=qs(Ii.current),u=kt(a,s.type);a!==u&&(tt(Bl,s),tt(Ii,u))}function ep(s){Bl.current===s&&(rt(Ii),rt(Bl))}var ut=zr(0);function qu(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var tp=[];function np(){for(var s=0;s<tp.length;s++)tp[s]._workInProgressVersionPrimary=null;tp.length=0}var Ku=W.ReactCurrentDispatcher,ip=W.ReactCurrentBatchConfig,Ks=0,ht=null,Ct=null,Vt=null,Gu=!1,Wl=!1,Hl=0,OI=0;function Gt(){throw Error(t(321))}function rp(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!si(s[u],a[u]))return!1;return!0}function sp(s,a,u,p,g,w){if(Ks=w,ht=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ku.current=s===null||s.memoizedState===null?FI:zI,s=u(p,g),Wl){w=0;do{if(Wl=!1,Hl=0,25<=w)throw Error(t(301));w+=1,Vt=Ct=null,a.updateQueue=null,Ku.current=BI,s=u(p,g)}while(Wl)}if(Ku.current=Xu,a=Ct!==null&&Ct.next!==null,Ks=0,Vt=Ct=ht=null,Gu=!1,a)throw Error(t(300));return s}function op(){var s=Hl!==0;return Hl=0,s}function ki(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?ht.memoizedState=Vt=s:Vt=Vt.next=s,Vt}function zn(){if(Ct===null){var s=ht.alternate;s=s!==null?s.memoizedState:null}else s=Ct.next;var a=Vt===null?ht.memoizedState:Vt.next;if(a!==null)Vt=a,Ct=s;else{if(s===null)throw Error(t(310));Ct=s,s={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Vt===null?ht.memoizedState=Vt=s:Vt=Vt.next=s}return Vt}function $l(s,a){return typeof a=="function"?a(s):a}function ap(s){var a=zn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var p=Ct,g=p.baseQueue,w=u.pending;if(w!==null){if(g!==null){var T=g.next;g.next=w.next,w.next=T}p.baseQueue=g=w,u.pending=null}if(g!==null){w=g.next,p=p.baseState;var D=T=null,j=null,G=w;do{var te=G.lane;if((Ks&te)===te)j!==null&&(j=j.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),p=G.hasEagerState?G.eagerState:s(p,G.action);else{var ne={lane:te,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};j===null?(D=j=ne,T=p):j=j.next=ne,ht.lanes|=te,Gs|=te}G=G.next}while(G!==null&&G!==w);j===null?T=p:j.next=D,si(p,a.memoizedState)||(mn=!0),a.memoizedState=p,a.baseState=T,a.baseQueue=j,u.lastRenderedState=p}if(s=u.interleaved,s!==null){g=s;do w=g.lane,ht.lanes|=w,Gs|=w,g=g.next;while(g!==s)}else g===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function lp(s){var a=zn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var p=u.dispatch,g=u.pending,w=a.memoizedState;if(g!==null){u.pending=null;var T=g=g.next;do w=s(w,T.action),T=T.next;while(T!==g);si(w,a.memoizedState)||(mn=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),u.lastRenderedState=w}return[w,p]}function Iv(){}function kv(s,a){var u=ht,p=zn(),g=a(),w=!si(p.memoizedState,g);if(w&&(p.memoizedState=g,mn=!0),p=p.queue,cp(Pv.bind(null,u,p,s),[s]),p.getSnapshot!==a||w||Vt!==null&&Vt.memoizedState.tag&1){if(u.flags|=2048,ql(9,Cv.bind(null,u,p,g,a),void 0,null),Lt===null)throw Error(t(349));(Ks&30)!==0||Av(u,a,g)}return g}function Av(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=ht.updateQueue,a===null?(a={lastEffect:null,stores:null},ht.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function Cv(s,a,u,p){a.value=u,a.getSnapshot=p,Rv(a)&&Nv(s)}function Pv(s,a,u){return u(function(){Rv(a)&&Nv(s)})}function Rv(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!si(s,u)}catch{return!0}}function Nv(s){var a=or(s,1);a!==null&&ui(a,s,1,-1)}function Dv(s){var a=ki();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:s},a.queue=s,s=s.dispatch=jI.bind(null,ht,s),[a.memoizedState,s]}function ql(s,a,u,p){return s={tag:s,create:a,destroy:u,deps:p,next:null},a=ht.updateQueue,a===null?(a={lastEffect:null,stores:null},ht.updateQueue=a,a.lastEffect=s.next=s):(u=a.lastEffect,u===null?a.lastEffect=s.next=s:(p=u.next,u.next=s,s.next=p,a.lastEffect=s)),s}function Mv(){return zn().memoizedState}function Yu(s,a,u,p){var g=ki();ht.flags|=s,g.memoizedState=ql(1|a,u,void 0,p===void 0?null:p)}function Qu(s,a,u,p){var g=zn();p=p===void 0?null:p;var w=void 0;if(Ct!==null){var T=Ct.memoizedState;if(w=T.destroy,p!==null&&rp(p,T.deps)){g.memoizedState=ql(a,u,w,p);return}}ht.flags|=s,g.memoizedState=ql(1|a,u,w,p)}function Ov(s,a){return Yu(8390656,8,s,a)}function cp(s,a){return Qu(2048,8,s,a)}function Vv(s,a){return Qu(4,2,s,a)}function Lv(s,a){return Qu(4,4,s,a)}function jv(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Fv(s,a,u){return u=u!=null?u.concat([s]):null,Qu(4,4,jv.bind(null,a,s),u)}function up(){}function zv(s,a){var u=zn();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&rp(a,p[1])?p[0]:(u.memoizedState=[s,a],s)}function Bv(s,a){var u=zn();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&rp(a,p[1])?p[0]:(s=s(),u.memoizedState=[s,a],s)}function Uv(s,a,u){return(Ks&21)===0?(s.baseState&&(s.baseState=!1,mn=!0),s.memoizedState=u):(si(u,a)||(u=Vs(),ht.lanes|=u,Gs|=u,s.baseState=!0),a)}function VI(s,a){var u=je;je=u!==0&&4>u?u:4,s(!0);var p=ip.transition;ip.transition={};try{s(!1),a()}finally{je=u,ip.transition=p}}function Wv(){return zn().memoizedState}function LI(s,a,u){var p=Gr(s);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},Hv(s))$v(a,u);else if(u=bv(s,a,u,p),u!==null){var g=cn();ui(u,s,p,g),qv(u,a,p)}}function jI(s,a,u){var p=Gr(s),g={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(Hv(s))$v(a,g);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var T=a.lastRenderedState,D=w(T,u);if(g.hasEagerState=!0,g.eagerState=D,si(D,T)){var j=a.interleaved;j===null?(g.next=g,Xf(a)):(g.next=j.next,j.next=g),a.interleaved=g;return}}catch{}finally{}u=bv(s,a,g,p),u!==null&&(g=cn(),ui(u,s,p,g),qv(u,a,p))}}function Hv(s){var a=s.alternate;return s===ht||a!==null&&a===ht}function $v(s,a){Wl=Gu=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function qv(s,a,u){if((u&4194240)!==0){var p=a.lanes;p&=s.pendingLanes,u|=p,a.lanes=u,Dr(s,u)}}var Xu={readContext:Fn,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},FI={readContext:Fn,useCallback:function(s,a){return ki().memoizedState=[s,a===void 0?null:a],s},useContext:Fn,useEffect:Ov,useImperativeHandle:function(s,a,u){return u=u!=null?u.concat([s]):null,Yu(4194308,4,jv.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Yu(4194308,4,s,a)},useInsertionEffect:function(s,a){return Yu(4,2,s,a)},useMemo:function(s,a){var u=ki();return a=a===void 0?null:a,s=s(),u.memoizedState=[s,a],s},useReducer:function(s,a,u){var p=ki();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},p.queue=s,s=s.dispatch=LI.bind(null,ht,s),[p.memoizedState,s]},useRef:function(s){var a=ki();return s={current:s},a.memoizedState=s},useState:Dv,useDebugValue:up,useDeferredValue:function(s){return ki().memoizedState=s},useTransition:function(){var s=Dv(!1),a=s[0];return s=VI.bind(null,s[1]),ki().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,u){var p=ht,g=ki();if(lt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Lt===null)throw Error(t(349));(Ks&30)!==0||Av(p,a,u)}g.memoizedState=u;var w={value:u,getSnapshot:a};return g.queue=w,Ov(Pv.bind(null,p,w,s),[s]),p.flags|=2048,ql(9,Cv.bind(null,p,w,u,a),void 0,null),u},useId:function(){var s=ki(),a=Lt.identifierPrefix;if(lt){var u=sr,p=rr;u=(p&~(1<<32-on(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=Hl++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=OI++,a=":"+a+"r"+u.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},zI={readContext:Fn,useCallback:zv,useContext:Fn,useEffect:cp,useImperativeHandle:Fv,useInsertionEffect:Vv,useLayoutEffect:Lv,useMemo:Bv,useReducer:ap,useRef:Mv,useState:function(){return ap($l)},useDebugValue:up,useDeferredValue:function(s){var a=zn();return Uv(a,Ct.memoizedState,s)},useTransition:function(){var s=ap($l)[0],a=zn().memoizedState;return[s,a]},useMutableSource:Iv,useSyncExternalStore:kv,useId:Wv,unstable_isNewReconciler:!1},BI={readContext:Fn,useCallback:zv,useContext:Fn,useEffect:cp,useImperativeHandle:Fv,useInsertionEffect:Vv,useLayoutEffect:Lv,useMemo:Bv,useReducer:lp,useRef:Mv,useState:function(){return lp($l)},useDebugValue:up,useDeferredValue:function(s){var a=zn();return Ct===null?a.memoizedState=s:Uv(a,Ct.memoizedState,s)},useTransition:function(){var s=lp($l)[0],a=zn().memoizedState;return[s,a]},useMutableSource:Iv,useSyncExternalStore:kv,useId:Wv,unstable_isNewReconciler:!1};function ai(s,a){if(s&&s.defaultProps){a=oe({},a),s=s.defaultProps;for(var u in s)a[u]===void 0&&(a[u]=s[u]);return a}return a}function hp(s,a,u,p){a=s.memoizedState,u=u(p,a),u=u==null?a:oe({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Ju={isMounted:function(s){return(s=s._reactInternals)?Jn(s)===s:!1},enqueueSetState:function(s,a,u){s=s._reactInternals;var p=cn(),g=Gr(s),w=ar(p,g);w.payload=a,u!=null&&(w.callback=u),a=Hr(s,w,g),a!==null&&(ui(a,s,g,p),Hu(a,s,g))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var p=cn(),g=Gr(s),w=ar(p,g);w.tag=1,w.payload=a,u!=null&&(w.callback=u),a=Hr(s,w,g),a!==null&&(ui(a,s,g,p),Hu(a,s,g))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=cn(),p=Gr(s),g=ar(u,p);g.tag=2,a!=null&&(g.callback=a),a=Hr(s,g,p),a!==null&&(ui(a,s,p,u),Hu(a,s,p))}};function Kv(s,a,u,p,g,w,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,w,T):a.prototype&&a.prototype.isPureReactComponent?!Nl(u,p)||!Nl(g,w):!0}function Gv(s,a,u){var p=!1,g=Br,w=a.contextType;return typeof w=="object"&&w!==null?w=Fn(w):(g=pn(a)?Us:Kt.current,p=a.contextTypes,w=(p=p!=null)?aa(s,g):Br),a=new a(u,w),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Ju,s.stateNode=a,a._reactInternals=s,p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=w),a}function Yv(s,a,u,p){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==s&&Ju.enqueueReplaceState(a,a.state,null)}function dp(s,a,u,p){var g=s.stateNode;g.props=u,g.state=s.memoizedState,g.refs={},Jf(s);var w=a.contextType;typeof w=="object"&&w!==null?g.context=Fn(w):(w=pn(a)?Us:Kt.current,g.context=aa(s,w)),g.state=s.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(hp(s,a,w,u),g.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&Ju.enqueueReplaceState(g,g.state,null),$u(s,u,g,p),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function ma(s,a){try{var u="",p=a;do u+=Ae(p),p=p.return;while(p);var g=u}catch(w){g=`
Error generating stack: `+w.message+`
`+w.stack}return{value:s,source:a,stack:g,digest:null}}function fp(s,a,u){return{value:s,source:null,stack:u??null,digest:a??null}}function pp(s,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var UI=typeof WeakMap=="function"?WeakMap:Map;function Qv(s,a,u){u=ar(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){sh||(sh=!0,Cp=p),pp(s,a)},u}function Xv(s,a,u){u=ar(-1,u),u.tag=3;var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var g=a.value;u.payload=function(){return p(g)},u.callback=function(){pp(s,a)}}var w=s.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){pp(s,a),typeof p!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var T=a.stack;this.componentDidCatch(a.value,{componentStack:T!==null?T:""})}),u}function Jv(s,a,u){var p=s.pingCache;if(p===null){p=s.pingCache=new UI;var g=new Set;p.set(a,g)}else g=p.get(a),g===void 0&&(g=new Set,p.set(a,g));g.has(u)||(g.add(u),s=n1.bind(null,s,a,u),a.then(s,s))}function Zv(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function e_(s,a,u,p,g){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=ar(-1,1),a.tag=2,Hr(u,a,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=g,s)}var WI=W.ReactCurrentOwner,mn=!1;function ln(s,a,u,p){a.child=s===null?wv(a,null,u,p):ha(a,s.child,u,p)}function t_(s,a,u,p,g){u=u.render;var w=a.ref;return fa(a,g),p=sp(s,a,u,p,w,g),u=op(),s!==null&&!mn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~g,lr(s,a,g)):(lt&&u&&Uf(a),a.flags|=1,ln(s,a,p,g),a.child)}function n_(s,a,u,p,g){if(s===null){var w=u.type;return typeof w=="function"&&!Vp(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=w,i_(s,a,w,p,g)):(s=hh(u.type,null,p,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(w=s.child,(s.lanes&g)===0){var T=w.memoizedProps;if(u=u.compare,u=u!==null?u:Nl,u(T,p)&&s.ref===a.ref)return lr(s,a,g)}return a.flags|=1,s=Qr(w,p),s.ref=a.ref,s.return=a,a.child=s}function i_(s,a,u,p,g){if(s!==null){var w=s.memoizedProps;if(Nl(w,p)&&s.ref===a.ref)if(mn=!1,a.pendingProps=p=w,(s.lanes&g)!==0)(s.flags&131072)!==0&&(mn=!0);else return a.lanes=s.lanes,lr(s,a,g)}return mp(s,a,u,p,g)}function r_(s,a,u){var p=a.pendingProps,g=p.children,w=s!==null?s.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(ya,Pn),Pn|=u;else{if((u&1073741824)===0)return s=w!==null?w.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,tt(ya,Pn),Pn|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:u,tt(ya,Pn),Pn|=p}else w!==null?(p=w.baseLanes|u,a.memoizedState=null):p=u,tt(ya,Pn),Pn|=p;return ln(s,a,g,u),a.child}function s_(s,a){var u=a.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function mp(s,a,u,p,g){var w=pn(u)?Us:Kt.current;return w=aa(a,w),fa(a,g),u=sp(s,a,u,p,w,g),p=op(),s!==null&&!mn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~g,lr(s,a,g)):(lt&&p&&Uf(a),a.flags|=1,ln(s,a,u,g),a.child)}function o_(s,a,u,p,g){if(pn(u)){var w=!0;Vu(a)}else w=!1;if(fa(a,g),a.stateNode===null)eh(s,a),Gv(a,u,p),dp(a,u,p,g),p=!0;else if(s===null){var T=a.stateNode,D=a.memoizedProps;T.props=D;var j=T.context,G=u.contextType;typeof G=="object"&&G!==null?G=Fn(G):(G=pn(u)?Us:Kt.current,G=aa(a,G));var te=u.getDerivedStateFromProps,ne=typeof te=="function"||typeof T.getSnapshotBeforeUpdate=="function";ne||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==p||j!==G)&&Yv(a,T,p,G),Wr=!1;var ee=a.memoizedState;T.state=ee,$u(a,p,T,g),j=a.memoizedState,D!==p||ee!==j||fn.current||Wr?(typeof te=="function"&&(hp(a,u,te,p),j=a.memoizedState),(D=Wr||Kv(a,u,D,p,ee,j,G))?(ne||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=j),T.props=p,T.state=j,T.context=G,p=D):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{T=a.stateNode,Ev(s,a),D=a.memoizedProps,G=a.type===a.elementType?D:ai(a.type,D),T.props=G,ne=a.pendingProps,ee=T.context,j=u.contextType,typeof j=="object"&&j!==null?j=Fn(j):(j=pn(u)?Us:Kt.current,j=aa(a,j));var ue=u.getDerivedStateFromProps;(te=typeof ue=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==ne||ee!==j)&&Yv(a,T,p,j),Wr=!1,ee=a.memoizedState,T.state=ee,$u(a,p,T,g);var fe=a.memoizedState;D!==ne||ee!==fe||fn.current||Wr?(typeof ue=="function"&&(hp(a,u,ue,p),fe=a.memoizedState),(G=Wr||Kv(a,u,G,p,ee,fe,j)||!1)?(te||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(p,fe,j),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(p,fe,j)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||D===s.memoizedProps&&ee===s.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&ee===s.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=fe),T.props=p,T.state=fe,T.context=j,p=G):(typeof T.componentDidUpdate!="function"||D===s.memoizedProps&&ee===s.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&ee===s.memoizedState||(a.flags|=1024),p=!1)}return gp(s,a,u,p,w,g)}function gp(s,a,u,p,g,w){s_(s,a);var T=(a.flags&128)!==0;if(!p&&!T)return g&&hv(a,u,!1),lr(s,a,w);p=a.stateNode,WI.current=a;var D=T&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,s!==null&&T?(a.child=ha(a,s.child,null,w),a.child=ha(a,null,D,w)):ln(s,a,D,w),a.memoizedState=p.state,g&&hv(a,u,!0),a.child}function a_(s){var a=s.stateNode;a.pendingContext?cv(s,a.pendingContext,a.pendingContext!==a.context):a.context&&cv(s,a.context,!1),Zf(s,a.containerInfo)}function l_(s,a,u,p,g){return ua(),qf(g),a.flags|=256,ln(s,a,u,p),a.child}var yp={dehydrated:null,treeContext:null,retryLane:0};function vp(s){return{baseLanes:s,cachePool:null,transitions:null}}function c_(s,a,u){var p=a.pendingProps,g=ut.current,w=!1,T=(a.flags&128)!==0,D;if((D=T)||(D=s!==null&&s.memoizedState===null?!1:(g&2)!==0),D?(w=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),tt(ut,g&1),s===null)return $f(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(T=p.children,s=p.fallback,w?(p=a.mode,w=a.child,T={mode:"hidden",children:T},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=T):w=dh(T,p,0,null),s=Js(s,p,u,null),w.return=a,s.return=a,w.sibling=s,a.child=w,a.child.memoizedState=vp(u),a.memoizedState=yp,s):_p(a,T));if(g=s.memoizedState,g!==null&&(D=g.dehydrated,D!==null))return HI(s,a,T,p,D,g,u);if(w){w=p.fallback,T=a.mode,g=s.child,D=g.sibling;var j={mode:"hidden",children:p.children};return(T&1)===0&&a.child!==g?(p=a.child,p.childLanes=0,p.pendingProps=j,a.deletions=null):(p=Qr(g,j),p.subtreeFlags=g.subtreeFlags&14680064),D!==null?w=Qr(D,w):(w=Js(w,T,u,null),w.flags|=2),w.return=a,p.return=a,p.sibling=w,a.child=p,p=w,w=a.child,T=s.child.memoizedState,T=T===null?vp(u):{baseLanes:T.baseLanes|u,cachePool:null,transitions:T.transitions},w.memoizedState=T,w.childLanes=s.childLanes&~u,a.memoizedState=yp,p}return w=s.child,s=w.sibling,p=Qr(w,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=u),p.return=a,p.sibling=null,s!==null&&(u=a.deletions,u===null?(a.deletions=[s],a.flags|=16):u.push(s)),a.child=p,a.memoizedState=null,p}function _p(s,a){return a=dh({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function Zu(s,a,u,p){return p!==null&&qf(p),ha(a,s.child,null,u),s=_p(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function HI(s,a,u,p,g,w,T){if(u)return a.flags&256?(a.flags&=-257,p=fp(Error(t(422))),Zu(s,a,T,p)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(w=p.fallback,g=a.mode,p=dh({mode:"visible",children:p.children},g,0,null),w=Js(w,g,T,null),w.flags|=2,p.return=a,w.return=a,p.sibling=w,a.child=p,(a.mode&1)!==0&&ha(a,s.child,null,T),a.child.memoizedState=vp(T),a.memoizedState=yp,w);if((a.mode&1)===0)return Zu(s,a,T,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var D=p.dgst;return p=D,w=Error(t(419)),p=fp(w,p,void 0),Zu(s,a,T,p)}if(D=(T&s.childLanes)!==0,mn||D){if(p=Lt,p!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(p.suspendedLanes|T))!==0?0:g,g!==0&&g!==w.retryLane&&(w.retryLane=g,or(s,g),ui(p,s,g,-1))}return Op(),p=fp(Error(t(421))),Zu(s,a,T,p)}return g.data==="$?"?(a.flags|=128,a.child=s.child,a=i1.bind(null,s),g._reactRetry=a,null):(s=w.treeContext,Cn=Fr(g.nextSibling),An=a,lt=!0,oi=null,s!==null&&(Ln[jn++]=rr,Ln[jn++]=sr,Ln[jn++]=Ws,rr=s.id,sr=s.overflow,Ws=a),a=_p(a,p.children),a.flags|=4096,a)}function u_(s,a,u){s.lanes|=a;var p=s.alternate;p!==null&&(p.lanes|=a),Qf(s.return,a,u)}function wp(s,a,u,p,g){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:g}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=u,w.tailMode=g)}function h_(s,a,u){var p=a.pendingProps,g=p.revealOrder,w=p.tail;if(ln(s,a,p.children,u),p=ut.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&u_(s,u,a);else if(s.tag===19)u_(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}if(tt(ut,p),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(u=a.child,g=null;u!==null;)s=u.alternate,s!==null&&qu(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),wp(a,!1,g,u,w);break;case"backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&qu(s)===null){a.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}wp(a,!0,u,null,w);break;case"together":wp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function eh(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function lr(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),Gs|=a.lanes,(u&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,u=Qr(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=Qr(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function $I(s,a,u){switch(a.tag){case 3:a_(a),ua();break;case 5:Sv(a);break;case 1:pn(a.type)&&Vu(a);break;case 4:Zf(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,g=a.memoizedProps.value;tt(Uu,p._currentValue),p._currentValue=g;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(tt(ut,ut.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?c_(s,a,u):(tt(ut,ut.current&1),s=lr(s,a,u),s!==null?s.sibling:null);tt(ut,ut.current&1);break;case 19:if(p=(u&a.childLanes)!==0,(s.flags&128)!==0){if(p)return h_(s,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),tt(ut,ut.current),p)break;return null;case 22:case 23:return a.lanes=0,r_(s,a,u)}return lr(s,a,u)}var d_,bp,f_,p_;d_=function(s,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},bp=function(){},f_=function(s,a,u,p){var g=s.memoizedProps;if(g!==p){s=a.stateNode,qs(Ii.current);var w=null;switch(u){case"input":g=Ss(s,g),p=Ss(s,p),w=[];break;case"select":g=oe({},g,{value:void 0}),p=oe({},p,{value:void 0}),w=[];break;case"textarea":g=al(s,g),p=al(s,p),w=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(s.onclick=Du)}fl(u,p);var T;u=null;for(G in g)if(!p.hasOwnProperty(G)&&g.hasOwnProperty(G)&&g[G]!=null)if(G==="style"){var D=g[G];for(T in D)D.hasOwnProperty(T)&&(u||(u={}),u[T]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(r.hasOwnProperty(G)?w||(w=[]):(w=w||[]).push(G,null));for(G in p){var j=p[G];if(D=g!=null?g[G]:void 0,p.hasOwnProperty(G)&&j!==D&&(j!=null||D!=null))if(G==="style")if(D){for(T in D)!D.hasOwnProperty(T)||j&&j.hasOwnProperty(T)||(u||(u={}),u[T]="");for(T in j)j.hasOwnProperty(T)&&D[T]!==j[T]&&(u||(u={}),u[T]=j[T])}else u||(w||(w=[]),w.push(G,u)),u=j;else G==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,D=D?D.__html:void 0,j!=null&&D!==j&&(w=w||[]).push(G,j)):G==="children"?typeof j!="string"&&typeof j!="number"||(w=w||[]).push(G,""+j):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(r.hasOwnProperty(G)?(j!=null&&G==="onScroll"&&it("scroll",s),w||D===j||(w=[])):(w=w||[]).push(G,j))}u&&(w=w||[]).push("style",u);var G=w;(a.updateQueue=G)&&(a.flags|=4)}},p_=function(s,a,u,p){u!==p&&(a.flags|=4)};function Kl(s,a){if(!lt)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function Yt(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,p=0;if(a)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=p,s.childLanes=u,a}function qI(s,a,u){var p=a.pendingProps;switch(Wf(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(a),null;case 1:return pn(a.type)&&Ou(),Yt(a),null;case 3:return p=a.stateNode,pa(),rt(fn),rt(Kt),np(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(zu(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,oi!==null&&(Np(oi),oi=null))),bp(s,a),Yt(a),null;case 5:ep(a);var g=qs(Ul.current);if(u=a.type,s!==null&&a.stateNode!=null)f_(s,a,u,p,g),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return Yt(a),null}if(s=qs(Ii.current),zu(a)){p=a.stateNode,u=a.type;var w=a.memoizedProps;switch(p[Si]=a,p[Ll]=w,s=(a.mode&1)!==0,u){case"dialog":it("cancel",p),it("close",p);break;case"iframe":case"object":case"embed":it("load",p);break;case"video":case"audio":for(g=0;g<Ml.length;g++)it(Ml[g],p);break;case"source":it("error",p);break;case"img":case"image":case"link":it("error",p),it("load",p);break;case"details":it("toggle",p);break;case"input":Co(p,w),it("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},it("invalid",p);break;case"textarea":Ro(p,w),it("invalid",p)}fl(u,w),g=null;for(var T in w)if(w.hasOwnProperty(T)){var D=w[T];T==="children"?typeof D=="string"?p.textContent!==D&&(w.suppressHydrationWarning!==!0&&Nu(p.textContent,D,s),g=["children",D]):typeof D=="number"&&p.textContent!==""+D&&(w.suppressHydrationWarning!==!0&&Nu(p.textContent,D,s),g=["children",""+D]):r.hasOwnProperty(T)&&D!=null&&T==="onScroll"&&it("scroll",p)}switch(u){case"input":qi(p),ru(p,w,!0);break;case"textarea":qi(p),ll(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=Du)}p=g,a.updateQueue=p,p!==null&&(a.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=It(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=T.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof p.is=="string"?s=T.createElement(u,{is:p.is}):(s=T.createElement(u),u==="select"&&(T=s,p.multiple?T.multiple=!0:p.size&&(T.size=p.size))):s=T.createElementNS(s,u),s[Si]=a,s[Ll]=p,d_(s,a,!1,!1),a.stateNode=s;e:{switch(T=pl(u,p),u){case"dialog":it("cancel",s),it("close",s),g=p;break;case"iframe":case"object":case"embed":it("load",s),g=p;break;case"video":case"audio":for(g=0;g<Ml.length;g++)it(Ml[g],s);g=p;break;case"source":it("error",s),g=p;break;case"img":case"image":case"link":it("error",s),it("load",s),g=p;break;case"details":it("toggle",s),g=p;break;case"input":Co(s,p),g=Ss(s,p),it("invalid",s);break;case"option":g=p;break;case"select":s._wrapperState={wasMultiple:!!p.multiple},g=oe({},p,{value:void 0}),it("invalid",s);break;case"textarea":Ro(s,p),g=al(s,p),it("invalid",s);break;default:g=p}fl(u,g),D=g;for(w in D)if(D.hasOwnProperty(w)){var j=D[w];w==="style"?hl(s,j):w==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&cl(s,j)):w==="children"?typeof j=="string"?(u!=="textarea"||j!=="")&&Ar(s,j):typeof j=="number"&&Ar(s,""+j):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(r.hasOwnProperty(w)?j!=null&&w==="onScroll"&&it("scroll",s):j!=null&&B(s,w,j,T))}switch(u){case"input":qi(s),ru(s,p,!1);break;case"textarea":qi(s),ll(s);break;case"option":p.value!=null&&s.setAttribute("value",""+$e(p.value));break;case"select":s.multiple=!!p.multiple,w=p.value,w!=null?Gi(s,!!p.multiple,w,!1):p.defaultValue!=null&&Gi(s,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=Du)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Yt(a),null;case 6:if(s&&a.stateNode!=null)p_(s,a,s.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(u=qs(Ul.current),qs(Ii.current),zu(a)){if(p=a.stateNode,u=a.memoizedProps,p[Si]=a,(w=p.nodeValue!==u)&&(s=An,s!==null))switch(s.tag){case 3:Nu(p.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Nu(p.nodeValue,u,(s.mode&1)!==0)}w&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Si]=a,a.stateNode=p}return Yt(a),null;case 13:if(rt(ut),p=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(lt&&Cn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)yv(),ua(),a.flags|=98560,w=!1;else if(w=zu(a),p!==null&&p.dehydrated!==null){if(s===null){if(!w)throw Error(t(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Si]=a}else ua(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Yt(a),w=!1}else oi!==null&&(Np(oi),oi=null),w=!0;if(!w)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(p=p!==null,p!==(s!==null&&s.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(ut.current&1)!==0?Pt===0&&(Pt=3):Op())),a.updateQueue!==null&&(a.flags|=4),Yt(a),null);case 4:return pa(),bp(s,a),s===null&&Ol(a.stateNode.containerInfo),Yt(a),null;case 10:return Yf(a.type._context),Yt(a),null;case 17:return pn(a.type)&&Ou(),Yt(a),null;case 19:if(rt(ut),w=a.memoizedState,w===null)return Yt(a),null;if(p=(a.flags&128)!==0,T=w.rendering,T===null)if(p)Kl(w,!1);else{if(Pt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(T=qu(s),T!==null){for(a.flags|=128,Kl(w,!1),p=T.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)w=u,s=p,w.flags&=14680066,T=w.alternate,T===null?(w.childLanes=0,w.lanes=s,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=T.childLanes,w.lanes=T.lanes,w.child=T.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=T.memoizedProps,w.memoizedState=T.memoizedState,w.updateQueue=T.updateQueue,w.type=T.type,s=T.dependencies,w.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return tt(ut,ut.current&1|2),a.child}s=s.sibling}w.tail!==null&&et()>va&&(a.flags|=128,p=!0,Kl(w,!1),a.lanes=4194304)}else{if(!p)if(s=qu(T),s!==null){if(a.flags|=128,p=!0,u=s.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Kl(w,!0),w.tail===null&&w.tailMode==="hidden"&&!T.alternate&&!lt)return Yt(a),null}else 2*et()-w.renderingStartTime>va&&u!==1073741824&&(a.flags|=128,p=!0,Kl(w,!1),a.lanes=4194304);w.isBackwards?(T.sibling=a.child,a.child=T):(u=w.last,u!==null?u.sibling=T:a.child=T,w.last=T)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=et(),a.sibling=null,u=ut.current,tt(ut,p?u&1|2:u&1),a):(Yt(a),null);case 22:case 23:return Mp(),p=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(Pn&1073741824)!==0&&(Yt(a),a.subtreeFlags&6&&(a.flags|=8192)):Yt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function KI(s,a){switch(Wf(a),a.tag){case 1:return pn(a.type)&&Ou(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return pa(),rt(fn),rt(Kt),np(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return ep(a),null;case 13:if(rt(ut),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));ua()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return rt(ut),null;case 4:return pa(),null;case 10:return Yf(a.type._context),null;case 22:case 23:return Mp(),null;case 24:return null;default:return null}}var th=!1,Qt=!1,GI=typeof WeakSet=="function"?WeakSet:Set,de=null;function ga(s,a){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){ft(s,a,p)}else u.current=null}function Ep(s,a,u){try{u()}catch(p){ft(s,a,p)}}var m_=!1;function YI(s,a){if(Mf=Vr,s=Ky(),If(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var g=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var T=0,D=-1,j=-1,G=0,te=0,ne=s,ee=null;t:for(;;){for(var ue;ne!==u||g!==0&&ne.nodeType!==3||(D=T+g),ne!==w||p!==0&&ne.nodeType!==3||(j=T+p),ne.nodeType===3&&(T+=ne.nodeValue.length),(ue=ne.firstChild)!==null;)ee=ne,ne=ue;for(;;){if(ne===s)break t;if(ee===u&&++G===g&&(D=T),ee===w&&++te===p&&(j=T),(ue=ne.nextSibling)!==null)break;ne=ee,ee=ne.parentNode}ne=ue}u=D===-1||j===-1?null:{start:D,end:j}}else u=null}u=u||{start:0,end:0}}else u=null;for(Of={focusedElem:s,selectionRange:u},Vr=!1,de=a;de!==null;)if(a=de,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,de=s;else for(;de!==null;){a=de;try{var fe=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var me=fe.memoizedProps,yt=fe.memoizedState,$=a.stateNode,z=$.getSnapshotBeforeUpdate(a.elementType===a.type?me:ai(a.type,me),yt);$.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var q=a.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){ft(a,a.return,re)}if(s=a.sibling,s!==null){s.return=a.return,de=s;break}de=a.return}return fe=m_,m_=!1,fe}function Gl(s,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&s)===s){var w=g.destroy;g.destroy=void 0,w!==void 0&&Ep(a,u,w)}g=g.next}while(g!==p)}}function nh(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&s)===s){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function xp(s){var a=s.ref;if(a!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof a=="function"?a(s):a.current=s}}function g_(s){var a=s.alternate;a!==null&&(s.alternate=null,g_(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Si],delete a[Ll],delete a[Ff],delete a[RI],delete a[NI])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function y_(s){return s.tag===5||s.tag===3||s.tag===4}function v_(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||y_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Tp(s,a,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(s,a):u.insertBefore(s,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(s,u)):(a=u,a.appendChild(s)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Du));else if(p!==4&&(s=s.child,s!==null))for(Tp(s,a,u),s=s.sibling;s!==null;)Tp(s,a,u),s=s.sibling}function Sp(s,a,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(p!==4&&(s=s.child,s!==null))for(Sp(s,a,u),s=s.sibling;s!==null;)Sp(s,a,u),s=s.sibling}var Ut=null,li=!1;function $r(s,a,u){for(u=u.child;u!==null;)__(s,a,u),u=u.sibling}function __(s,a,u){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(Ms,u)}catch{}switch(u.tag){case 5:Qt||ga(u,a);case 6:var p=Ut,g=li;Ut=null,$r(s,a,u),Ut=p,li=g,Ut!==null&&(li?(s=Ut,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Ut.removeChild(u.stateNode));break;case 18:Ut!==null&&(li?(s=Ut,u=u.stateNode,s.nodeType===8?jf(s.parentNode,u):s.nodeType===1&&jf(s,u),ii(s)):jf(Ut,u.stateNode));break;case 4:p=Ut,g=li,Ut=u.stateNode.containerInfo,li=!0,$r(s,a,u),Ut=p,li=g;break;case 0:case 11:case 14:case 15:if(!Qt&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var w=g,T=w.destroy;w=w.tag,T!==void 0&&((w&2)!==0||(w&4)!==0)&&Ep(u,a,T),g=g.next}while(g!==p)}$r(s,a,u);break;case 1:if(!Qt&&(ga(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(D){ft(u,a,D)}$r(s,a,u);break;case 21:$r(s,a,u);break;case 22:u.mode&1?(Qt=(p=Qt)||u.memoizedState!==null,$r(s,a,u),Qt=p):$r(s,a,u);break;default:$r(s,a,u)}}function w_(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new GI),a.forEach(function(p){var g=r1.bind(null,s,p);u.has(p)||(u.add(p),p.then(g,g))})}}function ci(s,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var g=u[p];try{var w=s,T=a,D=T;e:for(;D!==null;){switch(D.tag){case 5:Ut=D.stateNode,li=!1;break e;case 3:Ut=D.stateNode.containerInfo,li=!0;break e;case 4:Ut=D.stateNode.containerInfo,li=!0;break e}D=D.return}if(Ut===null)throw Error(t(160));__(w,T,g),Ut=null,li=!1;var j=g.alternate;j!==null&&(j.return=null),g.return=null}catch(G){ft(g,a,G)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)b_(a,s),a=a.sibling}function b_(s,a){var u=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ci(a,s),Ai(s),p&4){try{Gl(3,s,s.return),nh(3,s)}catch(me){ft(s,s.return,me)}try{Gl(5,s,s.return)}catch(me){ft(s,s.return,me)}}break;case 1:ci(a,s),Ai(s),p&512&&u!==null&&ga(u,u.return);break;case 5:if(ci(a,s),Ai(s),p&512&&u!==null&&ga(u,u.return),s.flags&32){var g=s.stateNode;try{Ar(g,"")}catch(me){ft(s,s.return,me)}}if(p&4&&(g=s.stateNode,g!=null)){var w=s.memoizedProps,T=u!==null?u.memoizedProps:w,D=s.type,j=s.updateQueue;if(s.updateQueue=null,j!==null)try{D==="input"&&w.type==="radio"&&w.name!=null&&sl(g,w),pl(D,T);var G=pl(D,w);for(T=0;T<j.length;T+=2){var te=j[T],ne=j[T+1];te==="style"?hl(g,ne):te==="dangerouslySetInnerHTML"?cl(g,ne):te==="children"?Ar(g,ne):B(g,te,ne,G)}switch(D){case"input":ol(g,w);break;case"textarea":No(g,w);break;case"select":var ee=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!w.multiple;var ue=w.value;ue!=null?Gi(g,!!w.multiple,ue,!1):ee!==!!w.multiple&&(w.defaultValue!=null?Gi(g,!!w.multiple,w.defaultValue,!0):Gi(g,!!w.multiple,w.multiple?[]:"",!1))}g[Ll]=w}catch(me){ft(s,s.return,me)}}break;case 6:if(ci(a,s),Ai(s),p&4){if(s.stateNode===null)throw Error(t(162));g=s.stateNode,w=s.memoizedProps;try{g.nodeValue=w}catch(me){ft(s,s.return,me)}}break;case 3:if(ci(a,s),Ai(s),p&4&&u!==null&&u.memoizedState.isDehydrated)try{ii(a.containerInfo)}catch(me){ft(s,s.return,me)}break;case 4:ci(a,s),Ai(s);break;case 13:ci(a,s),Ai(s),g=s.child,g.flags&8192&&(w=g.memoizedState!==null,g.stateNode.isHidden=w,!w||g.alternate!==null&&g.alternate.memoizedState!==null||(Ap=et())),p&4&&w_(s);break;case 22:if(te=u!==null&&u.memoizedState!==null,s.mode&1?(Qt=(G=Qt)||te,ci(a,s),Qt=G):ci(a,s),Ai(s),p&8192){if(G=s.memoizedState!==null,(s.stateNode.isHidden=G)&&!te&&(s.mode&1)!==0)for(de=s,te=s.child;te!==null;){for(ne=de=te;de!==null;){switch(ee=de,ue=ee.child,ee.tag){case 0:case 11:case 14:case 15:Gl(4,ee,ee.return);break;case 1:ga(ee,ee.return);var fe=ee.stateNode;if(typeof fe.componentWillUnmount=="function"){p=ee,u=ee.return;try{a=p,fe.props=a.memoizedProps,fe.state=a.memoizedState,fe.componentWillUnmount()}catch(me){ft(p,u,me)}}break;case 5:ga(ee,ee.return);break;case 22:if(ee.memoizedState!==null){T_(ne);continue}}ue!==null?(ue.return=ee,de=ue):T_(ne)}te=te.sibling}e:for(te=null,ne=s;;){if(ne.tag===5){if(te===null){te=ne;try{g=ne.stateNode,G?(w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(D=ne.stateNode,j=ne.memoizedProps.style,T=j!=null&&j.hasOwnProperty("display")?j.display:null,D.style.display=ul("display",T))}catch(me){ft(s,s.return,me)}}}else if(ne.tag===6){if(te===null)try{ne.stateNode.nodeValue=G?"":ne.memoizedProps}catch(me){ft(s,s.return,me)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===s)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===s)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===s)break e;te===ne&&(te=null),ne=ne.return}te===ne&&(te=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:ci(a,s),Ai(s),p&4&&w_(s);break;case 21:break;default:ci(a,s),Ai(s)}}function Ai(s){var a=s.flags;if(a&2){try{e:{for(var u=s.return;u!==null;){if(y_(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&(Ar(g,""),p.flags&=-33);var w=v_(s);Sp(s,w,g);break;case 3:case 4:var T=p.stateNode.containerInfo,D=v_(s);Tp(s,D,T);break;default:throw Error(t(161))}}catch(j){ft(s,s.return,j)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function QI(s,a,u){de=s,E_(s)}function E_(s,a,u){for(var p=(s.mode&1)!==0;de!==null;){var g=de,w=g.child;if(g.tag===22&&p){var T=g.memoizedState!==null||th;if(!T){var D=g.alternate,j=D!==null&&D.memoizedState!==null||Qt;D=th;var G=Qt;if(th=T,(Qt=j)&&!G)for(de=g;de!==null;)T=de,j=T.child,T.tag===22&&T.memoizedState!==null?S_(g):j!==null?(j.return=T,de=j):S_(g);for(;w!==null;)de=w,E_(w),w=w.sibling;de=g,th=D,Qt=G}x_(s)}else(g.subtreeFlags&8772)!==0&&w!==null?(w.return=g,de=w):x_(s)}}function x_(s){for(;de!==null;){var a=de;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Qt||nh(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!Qt)if(u===null)p.componentDidMount();else{var g=a.elementType===a.type?u.memoizedProps:ai(a.type,u.memoizedProps);p.componentDidUpdate(g,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=a.updateQueue;w!==null&&Tv(a,w,p);break;case 3:var T=a.updateQueue;if(T!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}Tv(a,T,u)}break;case 5:var D=a.stateNode;if(u===null&&a.flags&4){u=D;var j=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&u.focus();break;case"img":j.src&&(u.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var G=a.alternate;if(G!==null){var te=G.memoizedState;if(te!==null){var ne=te.dehydrated;ne!==null&&ii(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Qt||a.flags&512&&xp(a)}catch(ee){ft(a,a.return,ee)}}if(a===s){de=null;break}if(u=a.sibling,u!==null){u.return=a.return,de=u;break}de=a.return}}function T_(s){for(;de!==null;){var a=de;if(a===s){de=null;break}var u=a.sibling;if(u!==null){u.return=a.return,de=u;break}de=a.return}}function S_(s){for(;de!==null;){var a=de;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{nh(4,a)}catch(j){ft(a,u,j)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var g=a.return;try{p.componentDidMount()}catch(j){ft(a,g,j)}}var w=a.return;try{xp(a)}catch(j){ft(a,w,j)}break;case 5:var T=a.return;try{xp(a)}catch(j){ft(a,T,j)}}}catch(j){ft(a,a.return,j)}if(a===s){de=null;break}var D=a.sibling;if(D!==null){D.return=a.return,de=D;break}de=a.return}}var XI=Math.ceil,ih=W.ReactCurrentDispatcher,Ip=W.ReactCurrentOwner,Bn=W.ReactCurrentBatchConfig,Be=0,Lt=null,bt=null,Wt=0,Pn=0,ya=zr(0),Pt=0,Yl=null,Gs=0,rh=0,kp=0,Ql=null,gn=null,Ap=0,va=1/0,cr=null,sh=!1,Cp=null,qr=null,oh=!1,Kr=null,ah=0,Xl=0,Pp=null,lh=-1,ch=0;function cn(){return(Be&6)!==0?et():lh!==-1?lh:lh=et()}function Gr(s){return(s.mode&1)===0?1:(Be&2)!==0&&Wt!==0?Wt&-Wt:MI.transition!==null?(ch===0&&(ch=Vs()),ch):(s=je,s!==0||(s=window.event,s=s===void 0?16:Sl(s.type)),s)}function ui(s,a,u,p){if(50<Xl)throw Xl=0,Pp=null,Error(t(185));Nr(s,u,p),((Be&2)===0||s!==Lt)&&(s===Lt&&((Be&2)===0&&(rh|=u),Pt===4&&Yr(s,Wt)),yn(s,p),u===1&&Be===0&&(a.mode&1)===0&&(va=et()+500,Lu&&Ur()))}function yn(s,a){var u=s.callbackNode;Xi(s,a);var p=Os(s,s===Lt?Wt:0);if(p===0)u!==null&&wl(u),s.callbackNode=null,s.callbackPriority=0;else if(a=p&-p,s.callbackPriority!==a){if(u!=null&&wl(u),a===1)s.tag===0?DI(k_.bind(null,s)):dv(k_.bind(null,s)),CI(function(){(Be&6)===0&&Ur()}),u=null;else{switch(Mr(p)){case 1:u=Ds;break;case 4:u=Cr;break;case 16:u=Mn;break;case 536870912:u=cu;break;default:u=Mn}u=O_(u,I_.bind(null,s))}s.callbackPriority=a,s.callbackNode=u}}function I_(s,a){if(lh=-1,ch=0,(Be&6)!==0)throw Error(t(327));var u=s.callbackNode;if(_a()&&s.callbackNode!==u)return null;var p=Os(s,s===Lt?Wt:0);if(p===0)return null;if((p&30)!==0||(p&s.expiredLanes)!==0||a)a=uh(s,p);else{a=p;var g=Be;Be|=2;var w=C_();(Lt!==s||Wt!==a)&&(cr=null,va=et()+500,Qs(s,a));do try{e1();break}catch(D){A_(s,D)}while(!0);Gf(),ih.current=w,Be=g,bt!==null?a=0:(Lt=null,Wt=0,a=Pt)}if(a!==0){if(a===2&&(g=Sn(s),g!==0&&(p=g,a=Rp(s,g))),a===1)throw u=Yl,Qs(s,0),Yr(s,p),yn(s,et()),u;if(a===6)Yr(s,p);else{if(g=s.current.alternate,(p&30)===0&&!JI(g)&&(a=uh(s,p),a===2&&(w=Sn(s),w!==0&&(p=w,a=Rp(s,w))),a===1))throw u=Yl,Qs(s,0),Yr(s,p),yn(s,et()),u;switch(s.finishedWork=g,s.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:Xs(s,gn,cr);break;case 3:if(Yr(s,p),(p&130023424)===p&&(a=Ap+500-et(),10<a)){if(Os(s,0)!==0)break;if(g=s.suspendedLanes,(g&p)!==p){cn(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=Lf(Xs.bind(null,s,gn,cr),a);break}Xs(s,gn,cr);break;case 4:if(Yr(s,p),(p&4194240)===p)break;for(a=s.eventTimes,g=-1;0<p;){var T=31-on(p);w=1<<T,T=a[T],T>g&&(g=T),p&=~w}if(p=g,p=et()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*XI(p/1960))-p,10<p){s.timeoutHandle=Lf(Xs.bind(null,s,gn,cr),p);break}Xs(s,gn,cr);break;case 5:Xs(s,gn,cr);break;default:throw Error(t(329))}}}return yn(s,et()),s.callbackNode===u?I_.bind(null,s):null}function Rp(s,a){var u=Ql;return s.current.memoizedState.isDehydrated&&(Qs(s,a).flags|=256),s=uh(s,a),s!==2&&(a=gn,gn=u,a!==null&&Np(a)),s}function Np(s){gn===null?gn=s:gn.push.apply(gn,s)}function JI(s){for(var a=s;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var g=u[p],w=g.getSnapshot;g=g.value;try{if(!si(w(),g))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Yr(s,a){for(a&=~kp,a&=~rh,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var u=31-on(a),p=1<<u;s[u]=-1,a&=~p}}function k_(s){if((Be&6)!==0)throw Error(t(327));_a();var a=Os(s,0);if((a&1)===0)return yn(s,et()),null;var u=uh(s,a);if(s.tag!==0&&u===2){var p=Sn(s);p!==0&&(a=p,u=Rp(s,p))}if(u===1)throw u=Yl,Qs(s,0),Yr(s,a),yn(s,et()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,Xs(s,gn,cr),yn(s,et()),null}function Dp(s,a){var u=Be;Be|=1;try{return s(a)}finally{Be=u,Be===0&&(va=et()+500,Lu&&Ur())}}function Ys(s){Kr!==null&&Kr.tag===0&&(Be&6)===0&&_a();var a=Be;Be|=1;var u=Bn.transition,p=je;try{if(Bn.transition=null,je=1,s)return s()}finally{je=p,Bn.transition=u,Be=a,(Be&6)===0&&Ur()}}function Mp(){Pn=ya.current,rt(ya)}function Qs(s,a){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,AI(u)),bt!==null)for(u=bt.return;u!==null;){var p=u;switch(Wf(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Ou();break;case 3:pa(),rt(fn),rt(Kt),np();break;case 5:ep(p);break;case 4:pa();break;case 13:rt(ut);break;case 19:rt(ut);break;case 10:Yf(p.type._context);break;case 22:case 23:Mp()}u=u.return}if(Lt=s,bt=s=Qr(s.current,null),Wt=Pn=a,Pt=0,Yl=null,kp=rh=Gs=0,gn=Ql=null,$s!==null){for(a=0;a<$s.length;a++)if(u=$s[a],p=u.interleaved,p!==null){u.interleaved=null;var g=p.next,w=u.pending;if(w!==null){var T=w.next;w.next=g,p.next=T}u.pending=p}$s=null}return s}function A_(s,a){do{var u=bt;try{if(Gf(),Ku.current=Xu,Gu){for(var p=ht.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}Gu=!1}if(Ks=0,Vt=Ct=ht=null,Wl=!1,Hl=0,Ip.current=null,u===null||u.return===null){Pt=1,Yl=a,bt=null;break}e:{var w=s,T=u.return,D=u,j=a;if(a=Wt,D.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var G=j,te=D,ne=te.tag;if((te.mode&1)===0&&(ne===0||ne===11||ne===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var ue=Zv(T);if(ue!==null){ue.flags&=-257,e_(ue,T,D,w,a),ue.mode&1&&Jv(w,G,a),a=ue,j=G;var fe=a.updateQueue;if(fe===null){var me=new Set;me.add(j),a.updateQueue=me}else fe.add(j);break e}else{if((a&1)===0){Jv(w,G,a),Op();break e}j=Error(t(426))}}else if(lt&&D.mode&1){var yt=Zv(T);if(yt!==null){(yt.flags&65536)===0&&(yt.flags|=256),e_(yt,T,D,w,a),qf(ma(j,D));break e}}w=j=ma(j,D),Pt!==4&&(Pt=2),Ql===null?Ql=[w]:Ql.push(w),w=T;do{switch(w.tag){case 3:w.flags|=65536,a&=-a,w.lanes|=a;var $=Qv(w,j,a);xv(w,$);break e;case 1:D=j;var z=w.type,q=w.stateNode;if((w.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(qr===null||!qr.has(q)))){w.flags|=65536,a&=-a,w.lanes|=a;var re=Xv(w,D,a);xv(w,re);break e}}w=w.return}while(w!==null)}R_(u)}catch(ye){a=ye,bt===u&&u!==null&&(bt=u=u.return);continue}break}while(!0)}function C_(){var s=ih.current;return ih.current=Xu,s===null?Xu:s}function Op(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Lt===null||(Gs&268435455)===0&&(rh&268435455)===0||Yr(Lt,Wt)}function uh(s,a){var u=Be;Be|=2;var p=C_();(Lt!==s||Wt!==a)&&(cr=null,Qs(s,a));do try{ZI();break}catch(g){A_(s,g)}while(!0);if(Gf(),Be=u,ih.current=p,bt!==null)throw Error(t(261));return Lt=null,Wt=0,Pt}function ZI(){for(;bt!==null;)P_(bt)}function e1(){for(;bt!==null&&!au();)P_(bt)}function P_(s){var a=M_(s.alternate,s,Pn);s.memoizedProps=s.pendingProps,a===null?R_(s):bt=a,Ip.current=null}function R_(s){var a=s;do{var u=a.alternate;if(s=a.return,(a.flags&32768)===0){if(u=qI(u,a,Pn),u!==null){bt=u;return}}else{if(u=KI(u,a),u!==null){u.flags&=32767,bt=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Pt=6,bt=null;return}}if(a=a.sibling,a!==null){bt=a;return}bt=a=s}while(a!==null);Pt===0&&(Pt=5)}function Xs(s,a,u){var p=je,g=Bn.transition;try{Bn.transition=null,je=1,t1(s,a,u,p)}finally{Bn.transition=g,je=p}return null}function t1(s,a,u,p){do _a();while(Kr!==null);if((Be&6)!==0)throw Error(t(327));u=s.finishedWork;var g=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var w=u.lanes|u.childLanes;if(Je(s,w),s===Lt&&(bt=Lt=null,Wt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||oh||(oh=!0,O_(Mn,function(){return _a(),null})),w=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||w){w=Bn.transition,Bn.transition=null;var T=je;je=1;var D=Be;Be|=4,Ip.current=null,YI(s,u),b_(u,s),bI(Of),Vr=!!Mf,Of=Mf=null,s.current=u,QI(u),vf(),Be=D,je=T,Bn.transition=w}else s.current=u;if(oh&&(oh=!1,Kr=s,ah=g),w=s.pendingLanes,w===0&&(qr=null),uu(u.stateNode),yn(s,et()),a!==null)for(p=s.onRecoverableError,u=0;u<a.length;u++)g=a[u],p(g.value,{componentStack:g.stack,digest:g.digest});if(sh)throw sh=!1,s=Cp,Cp=null,s;return(ah&1)!==0&&s.tag!==0&&_a(),w=s.pendingLanes,(w&1)!==0?s===Pp?Xl++:(Xl=0,Pp=s):Xl=0,Ur(),null}function _a(){if(Kr!==null){var s=Mr(ah),a=Bn.transition,u=je;try{if(Bn.transition=null,je=16>s?16:s,Kr===null)var p=!1;else{if(s=Kr,Kr=null,ah=0,(Be&6)!==0)throw Error(t(331));var g=Be;for(Be|=4,de=s.current;de!==null;){var w=de,T=w.child;if((de.flags&16)!==0){var D=w.deletions;if(D!==null){for(var j=0;j<D.length;j++){var G=D[j];for(de=G;de!==null;){var te=de;switch(te.tag){case 0:case 11:case 15:Gl(8,te,w)}var ne=te.child;if(ne!==null)ne.return=te,de=ne;else for(;de!==null;){te=de;var ee=te.sibling,ue=te.return;if(g_(te),te===G){de=null;break}if(ee!==null){ee.return=ue,de=ee;break}de=ue}}}var fe=w.alternate;if(fe!==null){var me=fe.child;if(me!==null){fe.child=null;do{var yt=me.sibling;me.sibling=null,me=yt}while(me!==null)}}de=w}}if((w.subtreeFlags&2064)!==0&&T!==null)T.return=w,de=T;else e:for(;de!==null;){if(w=de,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Gl(9,w,w.return)}var $=w.sibling;if($!==null){$.return=w.return,de=$;break e}de=w.return}}var z=s.current;for(de=z;de!==null;){T=de;var q=T.child;if((T.subtreeFlags&2064)!==0&&q!==null)q.return=T,de=q;else e:for(T=z;de!==null;){if(D=de,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:nh(9,D)}}catch(ye){ft(D,D.return,ye)}if(D===T){de=null;break e}var re=D.sibling;if(re!==null){re.return=D.return,de=re;break e}de=D.return}}if(Be=g,Ur(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(Ms,s)}catch{}p=!0}return p}finally{je=u,Bn.transition=a}}return!1}function N_(s,a,u){a=ma(u,a),a=Qv(s,a,1),s=Hr(s,a,1),a=cn(),s!==null&&(Nr(s,1,a),yn(s,a))}function ft(s,a,u){if(s.tag===3)N_(s,s,u);else for(;a!==null;){if(a.tag===3){N_(a,s,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(qr===null||!qr.has(p))){s=ma(u,s),s=Xv(a,s,1),a=Hr(a,s,1),s=cn(),a!==null&&(Nr(a,1,s),yn(a,s));break}}a=a.return}}function n1(s,a,u){var p=s.pingCache;p!==null&&p.delete(a),a=cn(),s.pingedLanes|=s.suspendedLanes&u,Lt===s&&(Wt&u)===u&&(Pt===4||Pt===3&&(Wt&130023424)===Wt&&500>et()-Ap?Qs(s,0):kp|=u),yn(s,a)}function D_(s,a){a===0&&((s.mode&1)===0?a=1:(a=Uo,Uo<<=1,(Uo&130023424)===0&&(Uo=4194304)));var u=cn();s=or(s,a),s!==null&&(Nr(s,a,u),yn(s,u))}function i1(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),D_(s,u)}function r1(s,a){var u=0;switch(s.tag){case 13:var p=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:p=s.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),D_(s,u)}var M_;M_=function(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps||fn.current)mn=!0;else{if((s.lanes&u)===0&&(a.flags&128)===0)return mn=!1,$I(s,a,u);mn=(s.flags&131072)!==0}else mn=!1,lt&&(a.flags&1048576)!==0&&fv(a,Fu,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;eh(s,a),s=a.pendingProps;var g=aa(a,Kt.current);fa(a,u),g=sp(null,a,p,s,g,u);var w=op();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,pn(p)?(w=!0,Vu(a)):w=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Jf(a),g.updater=Ju,a.stateNode=g,g._reactInternals=a,dp(a,p,s,u),a=gp(null,a,p,!0,w,u)):(a.tag=0,lt&&w&&Uf(a),ln(null,a,g,u),a=a.child),a;case 16:p=a.elementType;e:{switch(eh(s,a),s=a.pendingProps,g=p._init,p=g(p._payload),a.type=p,g=a.tag=o1(p),s=ai(p,s),g){case 0:a=mp(null,a,p,s,u);break e;case 1:a=o_(null,a,p,s,u);break e;case 11:a=t_(null,a,p,s,u);break e;case 14:a=n_(null,a,p,ai(p.type,s),u);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:ai(p,g),mp(s,a,p,g,u);case 1:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:ai(p,g),o_(s,a,p,g,u);case 3:e:{if(a_(a),s===null)throw Error(t(387));p=a.pendingProps,w=a.memoizedState,g=w.element,Ev(s,a),$u(a,p,null,u);var T=a.memoizedState;if(p=T.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){g=ma(Error(t(423)),a),a=l_(s,a,p,u,g);break e}else if(p!==g){g=ma(Error(t(424)),a),a=l_(s,a,p,u,g);break e}else for(Cn=Fr(a.stateNode.containerInfo.firstChild),An=a,lt=!0,oi=null,u=wv(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ua(),p===g){a=lr(s,a,u);break e}ln(s,a,p,u)}a=a.child}return a;case 5:return Sv(a),s===null&&$f(a),p=a.type,g=a.pendingProps,w=s!==null?s.memoizedProps:null,T=g.children,Vf(p,g)?T=null:w!==null&&Vf(p,w)&&(a.flags|=32),s_(s,a),ln(s,a,T,u),a.child;case 6:return s===null&&$f(a),null;case 13:return c_(s,a,u);case 4:return Zf(a,a.stateNode.containerInfo),p=a.pendingProps,s===null?a.child=ha(a,null,p,u):ln(s,a,p,u),a.child;case 11:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:ai(p,g),t_(s,a,p,g,u);case 7:return ln(s,a,a.pendingProps,u),a.child;case 8:return ln(s,a,a.pendingProps.children,u),a.child;case 12:return ln(s,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,g=a.pendingProps,w=a.memoizedProps,T=g.value,tt(Uu,p._currentValue),p._currentValue=T,w!==null)if(si(w.value,T)){if(w.children===g.children&&!fn.current){a=lr(s,a,u);break e}}else for(w=a.child,w!==null&&(w.return=a);w!==null;){var D=w.dependencies;if(D!==null){T=w.child;for(var j=D.firstContext;j!==null;){if(j.context===p){if(w.tag===1){j=ar(-1,u&-u),j.tag=2;var G=w.updateQueue;if(G!==null){G=G.shared;var te=G.pending;te===null?j.next=j:(j.next=te.next,te.next=j),G.pending=j}}w.lanes|=u,j=w.alternate,j!==null&&(j.lanes|=u),Qf(w.return,u,a),D.lanes|=u;break}j=j.next}}else if(w.tag===10)T=w.type===a.type?null:w.child;else if(w.tag===18){if(T=w.return,T===null)throw Error(t(341));T.lanes|=u,D=T.alternate,D!==null&&(D.lanes|=u),Qf(T,u,a),T=w.sibling}else T=w.child;if(T!==null)T.return=w;else for(T=w;T!==null;){if(T===a){T=null;break}if(w=T.sibling,w!==null){w.return=T.return,T=w;break}T=T.return}w=T}ln(s,a,g.children,u),a=a.child}return a;case 9:return g=a.type,p=a.pendingProps.children,fa(a,u),g=Fn(g),p=p(g),a.flags|=1,ln(s,a,p,u),a.child;case 14:return p=a.type,g=ai(p,a.pendingProps),g=ai(p.type,g),n_(s,a,p,g,u);case 15:return i_(s,a,a.type,a.pendingProps,u);case 17:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:ai(p,g),eh(s,a),a.tag=1,pn(p)?(s=!0,Vu(a)):s=!1,fa(a,u),Gv(a,p,g),dp(a,p,g,u),gp(null,a,p,!0,s,u);case 19:return h_(s,a,u);case 22:return r_(s,a,u)}throw Error(t(156,a.tag))};function O_(s,a){return zo(s,a)}function s1(s,a,u,p){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(s,a,u,p){return new s1(s,a,u,p)}function Vp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function o1(s){if(typeof s=="function")return Vp(s)?1:0;if(s!=null){if(s=s.$$typeof,s===F)return 11;if(s===Ie)return 14}return 2}function Qr(s,a){var u=s.alternate;return u===null?(u=Un(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function hh(s,a,u,p,g,w){var T=2;if(p=s,typeof s=="function")Vp(s)&&(T=1);else if(typeof s=="string")T=5;else e:switch(s){case R:return Js(u.children,g,w,a);case C:T=8,g|=8;break;case P:return s=Un(12,u,a,g|2),s.elementType=P,s.lanes=w,s;case M:return s=Un(13,u,a,g),s.elementType=M,s.lanes=w,s;case Le:return s=Un(19,u,a,g),s.elementType=Le,s.lanes=w,s;case be:return dh(u,g,w,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case O:T=10;break e;case V:T=9;break e;case F:T=11;break e;case Ie:T=14;break e;case Re:T=16,p=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=Un(T,u,a,g),a.elementType=s,a.type=p,a.lanes=w,a}function Js(s,a,u,p){return s=Un(7,s,p,a),s.lanes=u,s}function dh(s,a,u,p){return s=Un(22,s,p,a),s.elementType=be,s.lanes=u,s.stateNode={isHidden:!1},s}function Lp(s,a,u){return s=Un(6,s,null,a),s.lanes=u,s}function jp(s,a,u){return a=Un(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function a1(s,a,u,p,g){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rr(0),this.expirationTimes=Rr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rr(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Fp(s,a,u,p,g,w,T,D,j){return s=new a1(s,a,u,D,j),a===1?(a=1,w===!0&&(a|=8)):a=0,w=Un(3,null,null,a),s.current=w,w.stateNode=s,w.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jf(w),s}function l1(s,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:p==null?null:""+p,children:s,containerInfo:a,implementation:u}}function V_(s){if(!s)return Br;s=s._reactInternals;e:{if(Jn(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(pn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(pn(u))return uv(s,u,a)}return a}function L_(s,a,u,p,g,w,T,D,j){return s=Fp(u,p,!0,s,g,w,T,D,j),s.context=V_(null),u=s.current,p=cn(),g=Gr(u),w=ar(p,g),w.callback=a??null,Hr(u,w,g),s.current.lanes=g,Nr(s,g,p),yn(s,p),s}function fh(s,a,u,p){var g=a.current,w=cn(),T=Gr(g);return u=V_(u),a.context===null?a.context=u:a.pendingContext=u,a=ar(w,T),a.payload={element:s},p=p===void 0?null:p,p!==null&&(a.callback=p),s=Hr(g,a,T),s!==null&&(ui(s,g,T,w),Hu(s,g,T)),T}function ph(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function j_(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function zp(s,a){j_(s,a),(s=s.alternate)&&j_(s,a)}function c1(){return null}var F_=typeof reportError=="function"?reportError:function(s){console.error(s)};function Bp(s){this._internalRoot=s}mh.prototype.render=Bp.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));fh(s,a,null,null)},mh.prototype.unmount=Bp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Ys(function(){fh(null,s,null,null)}),a[nr]=null}};function mh(s){this._internalRoot=s}mh.prototype.unstable_scheduleHydration=function(s){if(s){var a=mu();s={blockedOn:null,target:s,priority:a};for(var u=0;u<bi.length&&a!==0&&a<bi[u].priority;u++);bi.splice(u,0,s),u===0&&vu(s)}};function Up(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function gh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function z_(){}function u1(s,a,u,p,g){if(g){if(typeof p=="function"){var w=p;p=function(){var G=ph(T);w.call(G)}}var T=L_(a,p,s,0,null,!1,!1,"",z_);return s._reactRootContainer=T,s[nr]=T.current,Ol(s.nodeType===8?s.parentNode:s),Ys(),T}for(;g=s.lastChild;)s.removeChild(g);if(typeof p=="function"){var D=p;p=function(){var G=ph(j);D.call(G)}}var j=Fp(s,0,!1,null,null,!1,!1,"",z_);return s._reactRootContainer=j,s[nr]=j.current,Ol(s.nodeType===8?s.parentNode:s),Ys(function(){fh(a,j,u,p)}),j}function yh(s,a,u,p,g){var w=u._reactRootContainer;if(w){var T=w;if(typeof g=="function"){var D=g;g=function(){var j=ph(T);D.call(j)}}fh(a,T,s,g)}else T=u1(u,a,s,g,p);return ph(T)}fu=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var u=Pr(a.pendingLanes);u!==0&&(Dr(a,u|1),yn(a,et()),(Be&6)===0&&(va=et()+500,Ur()))}break;case 13:Ys(function(){var p=or(s,1);if(p!==null){var g=cn();ui(p,s,1,g)}}),zp(s,1)}},Wo=function(s){if(s.tag===13){var a=or(s,134217728);if(a!==null){var u=cn();ui(a,s,134217728,u)}zp(s,134217728)}},pu=function(s){if(s.tag===13){var a=Gr(s),u=or(s,a);if(u!==null){var p=cn();ui(u,s,a,p)}zp(s,a)}},mu=function(){return je},gu=function(s,a){var u=je;try{return je=s,a()}finally{je=u}},Mo=function(s,a,u){switch(a){case"input":if(ol(s,u),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==s&&p.form===s.form){var g=Mu(p);if(!g)throw Error(t(90));Ao(p),ol(p,g)}}}break;case"textarea":No(s,u);break;case"select":a=u.value,a!=null&&Gi(s,!!u.multiple,a,!1)}},Cs=Dp,gl=Ys;var h1={usingClientEntryPoint:!1,Events:[jl,sa,Mu,_i,ml,Dp]},Jl={findFiberByHostInstance:Bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},d1={bundleType:Jl.bundleType,version:Jl.version,rendererPackageName:Jl.rendererPackageName,rendererConfig:Jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=_l(s),s===null?null:s.stateNode},findFiberByHostInstance:Jl.findFiberByHostInstance||c1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vh.isDisabled&&vh.supportsFiber)try{Ms=vh.inject(d1),Tn=vh}catch{}}return vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h1,vn.createPortal=function(s,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Up(a))throw Error(t(200));return l1(s,a,null,u)},vn.createRoot=function(s,a){if(!Up(s))throw Error(t(299));var u=!1,p="",g=F_;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=Fp(s,1,!1,null,null,u,!1,p,g),s[nr]=a.current,Ol(s.nodeType===8?s.parentNode:s),new Bp(a)},vn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=_l(a),s=s===null?null:s.stateNode,s},vn.flushSync=function(s){return Ys(s)},vn.hydrate=function(s,a,u){if(!gh(a))throw Error(t(200));return yh(null,s,a,!0,u)},vn.hydrateRoot=function(s,a,u){if(!Up(s))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,g=!1,w="",T=F_;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),a=L_(a,null,s,1,u??null,g,!1,w,T),s[nr]=a.current,Ol(s),p)for(s=0;s<p.length;s++)u=p[s],g=u._getVersion,g=g(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,g]:a.mutableSourceEagerHydrationData.push(u,g);return new mh(a)},vn.render=function(s,a,u){if(!gh(a))throw Error(t(200));return yh(null,s,a,!1,u)},vn.unmountComponentAtNode=function(s){if(!gh(s))throw Error(t(40));return s._reactRootContainer?(Ys(function(){yh(null,null,s,!1,function(){s._reactRootContainer=null,s[nr]=null})}),!0):!1},vn.unstable_batchedUpdates=Dp,vn.unstable_renderSubtreeIntoContainer=function(s,a,u,p){if(!gh(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return yh(s,a,u,!1,p)},vn.version="18.3.1-next-f1338f8080-20240426",vn}var G_;function E1(){if(G_)return $p.exports;G_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$p.exports=b1(),$p.exports}var Y_;function x1(){if(Y_)return _h;Y_=1;var n=E1();return _h.createRoot=n.createRoot,_h.hydrateRoot=n.hydrateRoot,_h}var T1=x1();const S1=sE(T1),I1=()=>{};var Q_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},k1=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[t++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[t++],l=n[t++],c=n[t++],h=((r&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},lE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],l=r+1<n.length,c=l?n[r+1]:0,h=r+2<n.length,f=h?n[r+2]:0,m=o>>2,y=(o&3)<<4|c>>4;let v=(c&15)<<2|f>>6,x=f&63;h||(x=64,l||(v=64)),i.push(t[m],t[y],t[v],t[x])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(aE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):k1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;const f=r<n.length?t[n.charAt(r)]:64;++r;const y=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||c==null||f==null||y==null)throw new A1;const v=o<<2|c>>4;if(i.push(v),f!==64){const x=c<<4&240|f>>2;if(i.push(x),y!==64){const S=f<<6&192|y;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class A1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const C1=function(n){const e=aE(n);return lE.encodeByteArray(e,!0)},id=function(n){return C1(n).replace(/\./g,"")},cE=function(n){try{return lE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=()=>P1().__FIREBASE_DEFAULTS__,N1=()=>{if(typeof process>"u"||typeof Q_>"u")return;const n=Q_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},D1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&cE(n[1]);return e&&JSON.parse(e)},Vd=()=>{try{return I1()||R1()||N1()||D1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},uE=n=>{var e,t;return(t=(e=Vd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},M1=n=>{const e=uE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},hE=()=>{var n;return(n=Vd())===null||n===void 0?void 0:n.config},dE=n=>{var e;return(e=Vd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[id(JSON.stringify(t)),id(JSON.stringify(l)),""].join(".")}const mc={};function L1(){const n={prod:[],emulator:[]};for(const e of Object.keys(mc))mc[e]?n.emulator.push(e):n.prod.push(e);return n}function j1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let X_=!1;function pE(n,e){if(typeof window>"u"||typeof document>"u"||!qa(window.location.host)||mc[n]===e||mc[n]||X_)return;mc[n]=e;function t(v){return`__firebase__banner__${v}`}const i="__firebase__banner",o=L1().prod.length>0;function l(){const v=document.getElementById(i);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,x){v.setAttribute("width","24"),v.setAttribute("id",x),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{X_=!0,l()},v}function m(v,x){v.setAttribute("id",x),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=j1(i),x=t("text"),S=document.getElementById(x)||document.createElement("span"),I=t("learnmore"),k=document.getElementById(I)||document.createElement("a"),N=t("preprendIcon"),L=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const B=v.element;c(B),m(k,I);const W=f();h(L,N),B.append(L,S,k,W),document.body.appendChild(B)}o?(S.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function F1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function z1(){var n;const e=(n=Vd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function B1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function U1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function W1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function H1(){const n=sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function $1(){return!z1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mE(){try{return typeof indexedDB=="object"}catch{return!1}}function gE(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function q1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="FirebaseError";class $i extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=K1,Object.setPrototypeOf(this,$i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,To.prototype.create)}}class To{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?G1(o,i):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new $i(r,c,i)}}function G1(n,e){return n.replace(Y1,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Y1=/\{\$([^}]+)}/g;function Q1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function fs(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const o=n[r],l=e[r];if(J_(o)&&J_(l)){if(!fs(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function J_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function X1(n,e){const t=new J1(n,e);return t.subscribe.bind(t)}class J1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Z1(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Gp),r.error===void 0&&(r.error=Gp),r.complete===void 0&&(r.complete=Gp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Z1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Gp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(n){return n&&n._delegate?n._delegate:n}class mi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new O1;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nk(e))try{this.getOrInitializeService({instanceIdentifier:no})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=no){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=no){return this.instances.has(e)}getOptions(e=no){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&l.resolve(r)}return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:tk(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=no){return this.component?this.component.multipleInstances?e:no:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tk(n){return n===no?void 0:n}function nk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ek(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Oe||(Oe={}));const rk={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},sk=Oe.INFO,ok={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},ak=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=ok[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lg{constructor(e){this.name=e,this._logLevel=sk,this._logHandler=ak,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const lk=(n,e)=>e.some(t=>n instanceof t);let Z_,e0;function ck(){return Z_||(Z_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uk(){return e0||(e0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yE=new WeakMap,xm=new WeakMap,vE=new WeakMap,Yp=new WeakMap,cg=new WeakMap;function hk(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(_r(n.result)),r()},l=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&yE.set(t,n)}).catch(()=>{}),cg.set(e,n),e}function dk(n){if(xm.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),r()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});xm.set(n,e)}let Tm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _r(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function fk(n){Tm=n(Tm)}function pk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Qp(this),e,...t);return vE.set(i,e.sort?e.sort():[e]),_r(i)}:uk().includes(n)?function(...e){return n.apply(Qp(this),e),_r(yE.get(this))}:function(...e){return _r(n.apply(Qp(this),e))}}function mk(n){return typeof n=="function"?pk(n):(n instanceof IDBTransaction&&dk(n),lk(n,ck())?new Proxy(n,Tm):n)}function _r(n){if(n instanceof IDBRequest)return hk(n);if(Yp.has(n))return Yp.get(n);const e=mk(n);return e!==n&&(Yp.set(n,e),cg.set(e,n)),e}const Qp=n=>cg.get(n);function Ld(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(n,e),c=_r(l);return i&&l.addEventListener("upgradeneeded",h=>{i(_r(l.result),h.oldVersion,h.newVersion,_r(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}function Xp(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",i=>e(i.oldVersion,i)),_r(t).then(()=>{})}const gk=["get","getKey","getAll","getAllKeys","count"],yk=["put","add","delete","clear"],Jp=new Map;function t0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Jp.get(e))return Jp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=yk.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||gk.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),r&&h.done]))[0]};return Jp.set(e,o),o}fk(n=>({...n,get:(e,t,i)=>t0(e,t)||n.get(e,t,i),has:(e,t)=>!!t0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_k(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function _k(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sm="@firebase/app",n0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new lg("@firebase/app"),wk="@firebase/app-compat",bk="@firebase/analytics-compat",Ek="@firebase/analytics",xk="@firebase/app-check-compat",Tk="@firebase/app-check",Sk="@firebase/auth",Ik="@firebase/auth-compat",kk="@firebase/database",Ak="@firebase/data-connect",Ck="@firebase/database-compat",Pk="@firebase/functions",Rk="@firebase/functions-compat",Nk="@firebase/installations",Dk="@firebase/installations-compat",Mk="@firebase/messaging",Ok="@firebase/messaging-compat",Vk="@firebase/performance",Lk="@firebase/performance-compat",jk="@firebase/remote-config",Fk="@firebase/remote-config-compat",zk="@firebase/storage",Bk="@firebase/storage-compat",Uk="@firebase/firestore",Wk="@firebase/ai",Hk="@firebase/firestore-compat",$k="firebase",qk="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="[DEFAULT]",Kk={[Sm]:"fire-core",[wk]:"fire-core-compat",[Ek]:"fire-analytics",[bk]:"fire-analytics-compat",[Tk]:"fire-app-check",[xk]:"fire-app-check-compat",[Sk]:"fire-auth",[Ik]:"fire-auth-compat",[kk]:"fire-rtdb",[Ak]:"fire-data-connect",[Ck]:"fire-rtdb-compat",[Pk]:"fire-fn",[Rk]:"fire-fn-compat",[Nk]:"fire-iid",[Dk]:"fire-iid-compat",[Mk]:"fire-fcm",[Ok]:"fire-fcm-compat",[Vk]:"fire-perf",[Lk]:"fire-perf-compat",[jk]:"fire-rc",[Fk]:"fire-rc-compat",[zk]:"fire-gcs",[Bk]:"fire-gcs-compat",[Uk]:"fire-fst",[Hk]:"fire-fst-compat",[Wk]:"fire-vertex","fire-js":"fire-js",[$k]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd=new Map,Gk=new Map,km=new Map;function i0(n,e){try{n.container.addComponent(e)}catch(t){br.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ui(n){const e=n.name;if(km.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;km.set(e,n);for(const t of rd.values())i0(t,n);for(const t of Gk.values())i0(t,n);return!0}function Ka(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function di(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cs=new To("app","Firebase",Yk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new mi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=qk;function _E(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Im,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw cs.create("bad-app-name",{appName:String(r)});if(t||(t=hE()),!t)throw cs.create("no-options");const o=rd.get(r);if(o){if(fs(t,o.options)&&fs(i,o.config))return o;throw cs.create("duplicate-app",{appName:r})}const l=new ik(r);for(const h of km.values())l.addComponent(h);const c=new Qk(t,i,l);return rd.set(r,c),c}function ug(n=Im){const e=rd.get(n);if(!e&&n===Im&&hE())return _E();if(!e)throw cs.create("no-app",{appName:n});return e}function qn(n,e,t){var i;let r=(i=Kk[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(c.join(" "));return}Ui(new mi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="firebase-heartbeat-database",Jk=1,Ic="firebase-heartbeat-store";let Zp=null;function wE(){return Zp||(Zp=Ld(Xk,Jk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ic)}catch(t){console.warn(t)}}}}).catch(n=>{throw cs.create("idb-open",{originalErrorMessage:n.message})})),Zp}async function Zk(n){try{const t=(await wE()).transaction(Ic),i=await t.objectStore(Ic).get(bE(n));return await t.done,i}catch(e){if(e instanceof $i)br.warn(e.message);else{const t=cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});br.warn(t.message)}}}async function r0(n,e){try{const i=(await wE()).transaction(Ic,"readwrite");await i.objectStore(Ic).put(e,bE(n)),await i.done}catch(t){if(t instanceof $i)br.warn(t.message);else{const i=cs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});br.warn(i.message)}}}function bE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=1024,tA=30;class nA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rA(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=s0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>tA){const l=sA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){br.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=s0(),{heartbeatsToSend:i,unsentEntries:r}=iA(this._heartbeatsCache.heartbeats),o=id(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return br.warn(t),""}}}function s0(){return new Date().toISOString().substring(0,10)}function iA(n,e=eA){const t=[];let i=n.slice();for(const r of n){const o=t.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),o0(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),o0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class rA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mE()?gE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Zk(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return r0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return r0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function o0(n){return id(JSON.stringify({version:2,heartbeats:n})).length}function sA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(n){Ui(new mi("platform-logger",e=>new vk(e),"PRIVATE")),Ui(new mi("heartbeat",e=>new nA(e),"PRIVATE")),qn(Sm,n0,n),qn(Sm,n0,"esm2017"),qn("fire-js","")}oA("");function hg(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function EE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aA=EE,xE=new To("auth","Firebase",EE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=new lg("@firebase/auth");function lA(n,...e){sd.logLevel<=Oe.WARN&&sd.warn(`Auth (${Ga}): ${n}`,...e)}function zh(n,...e){sd.logLevel<=Oe.ERROR&&sd.error(`Auth (${Ga}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(n,...e){throw fg(n,...e)}function pi(n,...e){return fg(n,...e)}function dg(n,e,t){const i=Object.assign(Object.assign({},aA()),{[e]:t});return new To("auth","Firebase",i).create(e,{appName:n.name})}function uo(n){return dg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cA(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Wi(n,"argument-error"),dg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fg(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return xE.create(n,...e)}function Se(n,e,...t){if(!n)throw fg(e,...t)}function gr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw zh(e),new Error(e)}function Er(n,e){n||gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function uA(){return a0()==="http:"||a0()==="https:"}function a0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uA()||U1()||"connection"in navigator)?navigator.onLine:!0}function dA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Er(t>e,"Short delay should be less than long delay!"),this.isMobile=F1()||W1()}get(){return hA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(n,e){Er(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mA=new qc(3e4,6e4);function mg(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ya(n,e,t,i,r={}){return SE(n,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const c=$c(Object.assign({key:n.config.apiKey},l)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:h},o);return B1()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&qa(n.emulatorConfig.host)&&(f.credentials="include"),TE.fetch()(await IE(n,n.config.apiHost,t,c),f)})}async function SE(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},fA),e);try{const r=new yA(n),o=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw wh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,f]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw wh(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw wh(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw wh(n,"user-disabled",l);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw dg(n,m,f);Wi(n,m)}}catch(r){if(r instanceof $i)throw r;Wi(n,"network-request-failed",{message:String(r)})}}async function gA(n,e,t,i,r={}){const o=await Ya(n,e,t,i,r);return"mfaPendingCredential"in o&&Wi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function IE(n,e,t,i){const r=`${e}${t}?${i}`,o=n,l=o.config.emulator?pg(n.config,r):`${n.config.apiScheme}://${r}`;return pA.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}class yA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(pi(this.auth,"network-request-failed")),mA.get())})}}function wh(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=pi(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vA(n,e){return Ya(n,"POST","/v1/accounts:delete",e)}async function od(n,e){return Ya(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _A(n,e=!1){const t=St(n),i=await t.getIdToken(e),r=gg(i);Se(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:gc(em(r.auth_time)),issuedAtTime:gc(em(r.iat)),expirationTime:gc(em(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function em(n){return Number(n)*1e3}function gg(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return zh("JWT malformed, contained fewer than 3 sections"),null;try{const r=cE(t);return r?JSON.parse(r):(zh("Failed to decode base64 JWT payload"),null)}catch(r){return zh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function l0(n){const e=gg(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof $i&&wA(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function wA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gc(this.lastLoginAt),this.creationTime=gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(n){var e;const t=n.auth,i=await n.getIdToken(),r=await kc(n,od(t,{idToken:i}));Se(r==null?void 0:r.users.length,t,"internal-error");const o=r.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?kE(o.providerUserInfo):[],c=xA(n.providerData,l),h=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),m=h?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Cm(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,y)}async function EA(n){const e=St(n);await ad(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xA(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function kE(n){return n.map(e=>{var{providerId:t}=e,i=hg(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(n,e){const t=await SE(n,{},async()=>{const i=$c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,l=await IE(n,r,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:i};return n.emulatorConfig&&qa(n.emulatorConfig.host)&&(h.credentials="include"),TE.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function SA(n,e){return Ya(n,"POST","/v2/accounts:revokeToken",mg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):l0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=l0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:o}=await TA(e,t);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:o}=t,l=new ka;return i&&(Se(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(Se(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(Se(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ka,this.toJSON())}_performRefresh(){return gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fi{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,o=hg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Cm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await kc(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return _A(this,e)}reload(){return EA(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ad(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(di(this.auth.app))return Promise.reject(uo(this.auth));const e=await this.getIdToken();return await kc(this,vA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,o,l,c,h,f,m;const y=(i=t.displayName)!==null&&i!==void 0?i:void 0,v=(r=t.email)!==null&&r!==void 0?r:void 0,x=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(l=t.photoURL)!==null&&l!==void 0?l:void 0,I=(c=t.tenantId)!==null&&c!==void 0?c:void 0,k=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,N=(f=t.createdAt)!==null&&f!==void 0?f:void 0,L=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:B,emailVerified:W,isAnonymous:K,providerData:Z,stsTokenManager:R}=t;Se(B&&R,e,"internal-error");const C=ka.fromJSON(this.name,R);Se(typeof B=="string",e,"internal-error"),Jr(y,e.name),Jr(v,e.name),Se(typeof W=="boolean",e,"internal-error"),Se(typeof K=="boolean",e,"internal-error"),Jr(x,e.name),Jr(S,e.name),Jr(I,e.name),Jr(k,e.name),Jr(N,e.name),Jr(L,e.name);const P=new fi({uid:B,auth:e,email:v,emailVerified:W,displayName:y,isAnonymous:K,photoURL:S,phoneNumber:x,tenantId:I,stsTokenManager:C,createdAt:N,lastLoginAt:L});return Z&&Array.isArray(Z)&&(P.providerData=Z.map(O=>Object.assign({},O))),k&&(P._redirectEventId=k),P}static async _fromIdTokenResponse(e,t,i=!1){const r=new ka;r.updateFromServerResponse(t);const o=new fi({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await ad(o),o}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Se(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?kE(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),c=new ka;c.updateFromIdToken(i);const h=new fi({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Cm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=new Map;function yr(n){Er(n instanceof Function,"Expected a class definition");let e=c0.get(n);return e?(Er(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,c0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}AE.type="NONE";const u0=AE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(n,e,t){return`firebase:${n}:${e}:${t}`}class Aa{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Bh(this.userKey,r.apiKey,o),this.fullPersistenceKey=Bh("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await od(this.auth,{idToken:e}).catch(()=>{});return t?fi._fromGetAccountInfoResponse(this.auth,t,e):null}return fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Aa(yr(u0),e,i);const r=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||yr(u0);const l=Bh(i,e.config.apiKey,e.name);let c=null;for(const f of t)try{const m=await f._get(l);if(m){let y;if(typeof m=="string"){const v=await od(e,{idToken:m}).catch(()=>{});if(!v)break;y=await fi._fromGetAccountInfoResponse(e,v,m)}else y=fi._fromJSON(e,m);f!==o&&(c=y),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Aa(o,e,i):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new Aa(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ME(e))return"Blackberry";if(OE(e))return"Webos";if(PE(e))return"Safari";if((e.includes("chrome/")||RE(e))&&!e.includes("edge/"))return"Chrome";if(DE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function CE(n=sn()){return/firefox\//i.test(n)}function PE(n=sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RE(n=sn()){return/crios\//i.test(n)}function NE(n=sn()){return/iemobile/i.test(n)}function DE(n=sn()){return/android/i.test(n)}function ME(n=sn()){return/blackberry/i.test(n)}function OE(n=sn()){return/webos/i.test(n)}function yg(n=sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function IA(n=sn()){var e;return yg(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kA(){return H1()&&document.documentMode===10}function VE(n=sn()){return yg(n)||DE(n)||OE(n)||ME(n)||/windows phone/i.test(n)||NE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(n,e=[]){let t;switch(n){case"Browser":t=h0(sn());break;case"Worker":t=`${h0(sn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ga}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(n,e={}){return Ya(n,"GET","/v2/passwordPolicy",mg(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=6;class RA{constructor(e){var t,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:PA,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,o,l,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(i=h.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(r=h.containsLowercaseLetter)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new d0(this),this.idTokenSubscription=new d0(this),this.beforeStateQueue=new AA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yr(t)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Aa.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await od(this,{idToken:e}),i=await fi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(di(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(r=h.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ad(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(di(this.app))return Promise.reject(uo(this));const t=e?St(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return di(this.app)?Promise.reject(uo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return di(this.app)?Promise.reject(uo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CA(this),t=new RA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new To("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await SA(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Aa.create(this,[yr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,i,r);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(di(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&lA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function jd(n){return St(n)}class d0{constructor(e){this.auth=e,this.observer=null,this.addObserver=X1(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DA(n){vg=n}function MA(n){return vg.loadJS(n)}function OA(){return vg.gapiScript}function VA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(n,e){const t=Ka(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),o=t.getOptions();if(fs(o,e??{}))return r;Wi(r,"already-initialized")}return t.initialize({options:e})}function jA(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(yr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function FA(n,e,t){const i=jd(n);Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=jE(e),{host:l,port:c}=zA(e),h=c===null?"":`:${c}`,f={url:`${o}//${l}${h}/`},m=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Se(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Se(fs(f,i.config.emulator)&&fs(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,qa(l)?(fE(`${o}//${l}${h}`),pE("Auth",!0)):BA()}function jE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function zA(n){const e=jE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:f0(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:f0(l)}}}function f0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function BA(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gr("not implemented")}_getIdTokenResponse(e){return gr("not implemented")}_linkToIdToken(e,t){return gr("not implemented")}_getReauthenticationResolver(e){return gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(n,e){return gA(n,"POST","/v1/accounts:signInWithIdp",mg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="http://localhost";class go extends FE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new go(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,o=hg(t,["providerId","signInMethod"]);if(!i||!r)return null;const l=new go(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ca(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ca(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ca(e,t)}buildRequest(){const e={requestUri:UA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$c(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends _g{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Kc{constructor(){super("facebook.com")}static credential(e){return go._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";ts.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Kc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return go._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return mr.credential(t,i)}catch{return null}}}mr.GOOGLE_SIGN_IN_METHOD="google.com";mr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Kc{constructor(){super("github.com")}static credential(e){return go._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.GITHUB_SIGN_IN_METHOD="github.com";ns.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Kc{constructor(){super("twitter.com")}static credential(e,t){return go._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return is.credential(t,i)}catch{return null}}}is.TWITTER_SIGN_IN_METHOD="twitter.com";is.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const o=await fi._fromIdTokenResponse(e,i,r),l=p0(i);return new Ma({user:o,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=p0(i);return new Ma({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function p0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld extends $i{constructor(e,t,i,r){var o;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,ld.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new ld(e,t,i,r)}}function zE(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ld._fromErrorAndOperation(n,o,e,i):o})}async function WA(n,e,t=!1){const i=await kc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ma._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HA(n,e,t=!1){const{auth:i}=n;if(di(i.app))return Promise.reject(uo(i));const r="reauthenticate";try{const o=await kc(n,zE(i,r,e,n),t);Se(o.idToken,i,"internal-error");const l=gg(o.idToken);Se(l,i,"internal-error");const{sub:c}=l;return Se(n.uid===c,i,"user-mismatch"),Ma._forOperation(n,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Wi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(n,e,t=!1){if(di(n.app))return Promise.reject(uo(n));const i="signIn",r=await zE(n,i,e),o=await Ma._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(o.user),o}function qA(n,e,t,i){return St(n).onIdTokenChanged(e,t,i)}function KA(n,e,t){return St(n).beforeAuthStateChanged(e,t)}function GA(n,e,t,i){return St(n).onAuthStateChanged(e,t,i)}function YA(n){return St(n).signOut()}const cd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cd,"1"),this.storage.removeItem(cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=1e3,XA=10;class UE extends BE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);kA()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,XA):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},QA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}UE.type="LOCAL";const JA=UE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE extends BE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}WE.type="SESSION";const HE=WE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new Fd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:o}=t.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(l).map(async f=>f(t.origin,o)),h=await ZA(c);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const f=wg("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(v.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function tC(n){Oi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function nC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iC(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function rC(){return $E()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="firebaseLocalStorageDb",sC=1,ud="firebaseLocalStorage",KE="fbase_key";class Gc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zd(n,e){return n.transaction([ud],e?"readwrite":"readonly").objectStore(ud)}function oC(){const n=indexedDB.deleteDatabase(qE);return new Gc(n).toPromise()}function Pm(){const n=indexedDB.open(qE,sC);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(ud,{keyPath:KE})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(ud)?e(i):(i.close(),await oC(),e(await Pm()))})})}async function m0(n,e,t){const i=zd(n,!0).put({[KE]:e,value:t});return new Gc(i).toPromise()}async function aC(n,e){const t=zd(n,!1).get(e),i=await new Gc(t).toPromise();return i===void 0?null:i.value}function g0(n,e){const t=zd(n,!0).delete(e);return new Gc(t).toPromise()}const lC=800,cC=3;class GE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>cC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $E()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fd._getInstance(rC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await nC(),!this.activeServiceWorker)return;this.sender=new eC(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pm();return await m0(e,cd,"1"),await g0(e,cd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>m0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>aC(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>g0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=zd(r,!1).getAll();return new Gc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GE.type="LOCAL";const uC=GE;new qc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(n,e){return e?yr(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg extends FE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ca(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ca(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ca(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function hC(n){return $A(n.auth,new bg(n),n.bypassAuthState)}function dC(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),HA(t,new bg(n),n.bypassAuthState)}async function fC(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),WA(t,new bg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hC;case"linkViaPopup":case"linkViaRedirect":return fC;case"reauthViaPopup":case"reauthViaRedirect":return dC;default:Wi(this.auth,"internal-error")}}resolve(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new qc(2e3,1e4);async function mC(n,e,t){if(di(n.app))return Promise.reject(pi(n,"operation-not-supported-in-this-environment"));const i=jd(n);cA(n,e,_g);const r=YE(i,t);return new oo(i,"signInViaPopup",e,r).executeNotNull()}class oo extends QE{constructor(e,t,i,r,o){super(e,t,r,o),this.provider=i,this.authWindow=null,this.pollId=null,oo.currentPopupAction&&oo.currentPopupAction.cancel(),oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Er(this.filter.length===1,"Popup operations only handle one event");const e=wg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pC.get())};e()}}oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="pendingRedirect",Uh=new Map;class yC extends QE{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Uh.get(this.auth._key());if(!e){try{const i=await vC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Uh.set(this.auth._key(),e)}return this.bypassAuthState||Uh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vC(n,e){const t=bC(e),i=wC(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function _C(n,e){Uh.set(n._key(),e)}function wC(n){return yr(n._redirectPersistence)}function bC(n){return Bh(gC,n.config.apiKey,n.name)}async function EC(n,e,t=!1){if(di(n.app))return Promise.reject(uo(n));const i=jd(n),r=YE(i,e),l=await new yC(i,r,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=600*1e3;class TC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!XE(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(pi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xC&&this.cachedEventUids.clear(),this.cachedEventUids.has(y0(e))}saveEventToCache(e){this.cachedEventUids.add(y0(e)),this.lastProcessedEventTime=Date.now()}}function y0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function XE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(n,e={}){return Ya(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AC=/^https?/;async function CC(n){if(n.config.emulator)return;const{authorizedDomains:e}=await IC(n);for(const t of e)try{if(PC(t))return}catch{}Wi(n,"unauthorized-domain")}function PC(n){const e=Am(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!AC.test(t))return!1;if(kC.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=new qc(3e4,6e4);function v0(){const n=Oi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function NC(n){return new Promise((e,t)=>{var i,r,o;function l(){v0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v0(),t(pi(n,"network-request-failed"))},timeout:RC.get()})}if(!((r=(i=Oi().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Oi().gapi)===null||o===void 0)&&o.load)l();else{const c=VA("iframefcb");return Oi()[c]=()=>{gapi.load?l():t(pi(n,"network-request-failed"))},MA(`${OA()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw Wh=null,e})}let Wh=null;function DC(n){return Wh=Wh||NC(n),Wh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=new qc(5e3,15e3),OC="__/auth/iframe",VC="emulator/auth/iframe",LC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FC(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?pg(e,VC):`https://${n.config.authDomain}/${OC}`,i={apiKey:e.apiKey,appName:n.name,v:Ga},r=jC.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${$c(i).slice(1)}`}async function zC(n){const e=await DC(n),t=Oi().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:FC(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LC,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=pi(n,"network-request-failed"),c=Oi().setTimeout(()=>{o(l)},MC.get());function h(){Oi().clearTimeout(c),r(i)}i.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UC=500,WC=600,HC="_blank",$C="http://localhost";class _0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qC(n,e,t,i=UC,r=WC){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const h=Object.assign(Object.assign({},BC),{width:i.toString(),height:r.toString(),top:o,left:l}),f=sn().toLowerCase();t&&(c=RE(f)?HC:t),CE(f)&&(e=e||$C,h.scrollbars="yes");const m=Object.entries(h).reduce((v,[x,S])=>`${v}${x}=${S},`,"");if(IA(f)&&c!=="_self")return KC(e||"",c),new _0(null);const y=window.open(e||"",c,m);Se(y,n,"popup-blocked");try{y.focus()}catch{}return new _0(y)}function KC(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="__/auth/handler",YC="emulator/auth/handler",QC=encodeURIComponent("fac");async function w0(n,e,t,i,r,o){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ga,eventId:r};if(e instanceof _g){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",Q1(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))l[m]=y}if(e instanceof Kc){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await n._getAppCheckToken(),f=h?`#${QC}=${encodeURIComponent(h)}`:"";return`${XC(n)}?${$c(c).slice(1)}${f}`}function XC({config:n}){return n.emulator?pg(n,YC):`https://${n.authDomain}/${GC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="webStorageSupport";class JC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HE,this._completeRedirectFn=EC,this._overrideRedirectResult=_C}async _openPopup(e,t,i,r){var o;Er((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await w0(e,t,i,Am(),r);return qC(e,l,wg())}async _openRedirect(e,t,i,r){await this._originValidation(e);const o=await w0(e,t,i,Am(),r);return tC(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(Er(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await zC(e),i=new TC(e);return t.register("authEvent",r=>(Se(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tm,{type:tm},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[tm];l!==void 0&&t(!!l),Wi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=CC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return VE()||PE()||yg()}}const ZC=JC;var b0="@firebase/auth",E0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nP(n){Ui(new mi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Se(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LE(n)},f=new NA(i,r,o,h);return jA(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ui(new mi("auth-internal",e=>{const t=jd(e.getProvider("auth").getImmediate());return(i=>new eP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qn(b0,E0,tP(n)),qn(b0,E0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=300,rP=dE("authIdTokenMaxAge")||iP;let x0=null;const sP=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>rP)return;const r=t==null?void 0:t.token;x0!==r&&(x0=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function oP(n=ug()){const e=Ka(n,"auth");if(e.isInitialized())return e.getImmediate();const t=LA(n,{popupRedirectResolver:ZC,persistence:[uC,JA,HE]}),i=dE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=sP(o.toString());KA(t,l,()=>l(t.currentUser)),qA(t,c=>l(c))}}const r=uE("auth");return r&&FA(t,`http://${r}`),t}function aP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}DA({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const o=pi("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",aP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nP("Browser");var lP="firebase",cP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn(lP,cP,"app");var T0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,JE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,C){function P(){}P.prototype=C.prototype,R.D=C.prototype,R.prototype=new P,R.prototype.constructor=R,R.C=function(O,V,F){for(var M=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)M[Le-2]=arguments[Le];return C.prototype[V].apply(O,M)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,C,P){P||(P=0);var O=Array(16);if(typeof C=="string")for(var V=0;16>V;++V)O[V]=C.charCodeAt(P++)|C.charCodeAt(P++)<<8|C.charCodeAt(P++)<<16|C.charCodeAt(P++)<<24;else for(V=0;16>V;++V)O[V]=C[P++]|C[P++]<<8|C[P++]<<16|C[P++]<<24;C=R.g[0],P=R.g[1],V=R.g[2];var F=R.g[3],M=C+(F^P&(V^F))+O[0]+3614090360&4294967295;C=P+(M<<7&4294967295|M>>>25),M=F+(V^C&(P^V))+O[1]+3905402710&4294967295,F=C+(M<<12&4294967295|M>>>20),M=V+(P^F&(C^P))+O[2]+606105819&4294967295,V=F+(M<<17&4294967295|M>>>15),M=P+(C^V&(F^C))+O[3]+3250441966&4294967295,P=V+(M<<22&4294967295|M>>>10),M=C+(F^P&(V^F))+O[4]+4118548399&4294967295,C=P+(M<<7&4294967295|M>>>25),M=F+(V^C&(P^V))+O[5]+1200080426&4294967295,F=C+(M<<12&4294967295|M>>>20),M=V+(P^F&(C^P))+O[6]+2821735955&4294967295,V=F+(M<<17&4294967295|M>>>15),M=P+(C^V&(F^C))+O[7]+4249261313&4294967295,P=V+(M<<22&4294967295|M>>>10),M=C+(F^P&(V^F))+O[8]+1770035416&4294967295,C=P+(M<<7&4294967295|M>>>25),M=F+(V^C&(P^V))+O[9]+2336552879&4294967295,F=C+(M<<12&4294967295|M>>>20),M=V+(P^F&(C^P))+O[10]+4294925233&4294967295,V=F+(M<<17&4294967295|M>>>15),M=P+(C^V&(F^C))+O[11]+2304563134&4294967295,P=V+(M<<22&4294967295|M>>>10),M=C+(F^P&(V^F))+O[12]+1804603682&4294967295,C=P+(M<<7&4294967295|M>>>25),M=F+(V^C&(P^V))+O[13]+4254626195&4294967295,F=C+(M<<12&4294967295|M>>>20),M=V+(P^F&(C^P))+O[14]+2792965006&4294967295,V=F+(M<<17&4294967295|M>>>15),M=P+(C^V&(F^C))+O[15]+1236535329&4294967295,P=V+(M<<22&4294967295|M>>>10),M=C+(V^F&(P^V))+O[1]+4129170786&4294967295,C=P+(M<<5&4294967295|M>>>27),M=F+(P^V&(C^P))+O[6]+3225465664&4294967295,F=C+(M<<9&4294967295|M>>>23),M=V+(C^P&(F^C))+O[11]+643717713&4294967295,V=F+(M<<14&4294967295|M>>>18),M=P+(F^C&(V^F))+O[0]+3921069994&4294967295,P=V+(M<<20&4294967295|M>>>12),M=C+(V^F&(P^V))+O[5]+3593408605&4294967295,C=P+(M<<5&4294967295|M>>>27),M=F+(P^V&(C^P))+O[10]+38016083&4294967295,F=C+(M<<9&4294967295|M>>>23),M=V+(C^P&(F^C))+O[15]+3634488961&4294967295,V=F+(M<<14&4294967295|M>>>18),M=P+(F^C&(V^F))+O[4]+3889429448&4294967295,P=V+(M<<20&4294967295|M>>>12),M=C+(V^F&(P^V))+O[9]+568446438&4294967295,C=P+(M<<5&4294967295|M>>>27),M=F+(P^V&(C^P))+O[14]+3275163606&4294967295,F=C+(M<<9&4294967295|M>>>23),M=V+(C^P&(F^C))+O[3]+4107603335&4294967295,V=F+(M<<14&4294967295|M>>>18),M=P+(F^C&(V^F))+O[8]+1163531501&4294967295,P=V+(M<<20&4294967295|M>>>12),M=C+(V^F&(P^V))+O[13]+2850285829&4294967295,C=P+(M<<5&4294967295|M>>>27),M=F+(P^V&(C^P))+O[2]+4243563512&4294967295,F=C+(M<<9&4294967295|M>>>23),M=V+(C^P&(F^C))+O[7]+1735328473&4294967295,V=F+(M<<14&4294967295|M>>>18),M=P+(F^C&(V^F))+O[12]+2368359562&4294967295,P=V+(M<<20&4294967295|M>>>12),M=C+(P^V^F)+O[5]+4294588738&4294967295,C=P+(M<<4&4294967295|M>>>28),M=F+(C^P^V)+O[8]+2272392833&4294967295,F=C+(M<<11&4294967295|M>>>21),M=V+(F^C^P)+O[11]+1839030562&4294967295,V=F+(M<<16&4294967295|M>>>16),M=P+(V^F^C)+O[14]+4259657740&4294967295,P=V+(M<<23&4294967295|M>>>9),M=C+(P^V^F)+O[1]+2763975236&4294967295,C=P+(M<<4&4294967295|M>>>28),M=F+(C^P^V)+O[4]+1272893353&4294967295,F=C+(M<<11&4294967295|M>>>21),M=V+(F^C^P)+O[7]+4139469664&4294967295,V=F+(M<<16&4294967295|M>>>16),M=P+(V^F^C)+O[10]+3200236656&4294967295,P=V+(M<<23&4294967295|M>>>9),M=C+(P^V^F)+O[13]+681279174&4294967295,C=P+(M<<4&4294967295|M>>>28),M=F+(C^P^V)+O[0]+3936430074&4294967295,F=C+(M<<11&4294967295|M>>>21),M=V+(F^C^P)+O[3]+3572445317&4294967295,V=F+(M<<16&4294967295|M>>>16),M=P+(V^F^C)+O[6]+76029189&4294967295,P=V+(M<<23&4294967295|M>>>9),M=C+(P^V^F)+O[9]+3654602809&4294967295,C=P+(M<<4&4294967295|M>>>28),M=F+(C^P^V)+O[12]+3873151461&4294967295,F=C+(M<<11&4294967295|M>>>21),M=V+(F^C^P)+O[15]+530742520&4294967295,V=F+(M<<16&4294967295|M>>>16),M=P+(V^F^C)+O[2]+3299628645&4294967295,P=V+(M<<23&4294967295|M>>>9),M=C+(V^(P|~F))+O[0]+4096336452&4294967295,C=P+(M<<6&4294967295|M>>>26),M=F+(P^(C|~V))+O[7]+1126891415&4294967295,F=C+(M<<10&4294967295|M>>>22),M=V+(C^(F|~P))+O[14]+2878612391&4294967295,V=F+(M<<15&4294967295|M>>>17),M=P+(F^(V|~C))+O[5]+4237533241&4294967295,P=V+(M<<21&4294967295|M>>>11),M=C+(V^(P|~F))+O[12]+1700485571&4294967295,C=P+(M<<6&4294967295|M>>>26),M=F+(P^(C|~V))+O[3]+2399980690&4294967295,F=C+(M<<10&4294967295|M>>>22),M=V+(C^(F|~P))+O[10]+4293915773&4294967295,V=F+(M<<15&4294967295|M>>>17),M=P+(F^(V|~C))+O[1]+2240044497&4294967295,P=V+(M<<21&4294967295|M>>>11),M=C+(V^(P|~F))+O[8]+1873313359&4294967295,C=P+(M<<6&4294967295|M>>>26),M=F+(P^(C|~V))+O[15]+4264355552&4294967295,F=C+(M<<10&4294967295|M>>>22),M=V+(C^(F|~P))+O[6]+2734768916&4294967295,V=F+(M<<15&4294967295|M>>>17),M=P+(F^(V|~C))+O[13]+1309151649&4294967295,P=V+(M<<21&4294967295|M>>>11),M=C+(V^(P|~F))+O[4]+4149444226&4294967295,C=P+(M<<6&4294967295|M>>>26),M=F+(P^(C|~V))+O[11]+3174756917&4294967295,F=C+(M<<10&4294967295|M>>>22),M=V+(C^(F|~P))+O[2]+718787259&4294967295,V=F+(M<<15&4294967295|M>>>17),M=P+(F^(V|~C))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+C&4294967295,R.g[1]=R.g[1]+(V+(M<<21&4294967295|M>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+F&4294967295}i.prototype.u=function(R,C){C===void 0&&(C=R.length);for(var P=C-this.blockSize,O=this.B,V=this.h,F=0;F<C;){if(V==0)for(;F<=P;)r(this,R,F),F+=this.blockSize;if(typeof R=="string"){for(;F<C;)if(O[V++]=R.charCodeAt(F++),V==this.blockSize){r(this,O),V=0;break}}else for(;F<C;)if(O[V++]=R[F++],V==this.blockSize){r(this,O),V=0;break}}this.h=V,this.o+=C},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var C=1;C<R.length-8;++C)R[C]=0;var P=8*this.o;for(C=R.length-8;C<R.length;++C)R[C]=P&255,P/=256;for(this.u(R),R=Array(16),C=P=0;4>C;++C)for(var O=0;32>O;O+=8)R[P++]=this.g[C]>>>O&255;return R};function o(R,C){var P=c;return Object.prototype.hasOwnProperty.call(P,R)?P[R]:P[R]=C(R)}function l(R,C){this.h=C;for(var P=[],O=!0,V=R.length-1;0<=V;V--){var F=R[V]|0;O&&F==C||(P[V]=F,O=!1)}this.g=P}var c={};function h(R){return-128<=R&&128>R?o(R,function(C){return new l([C|0],0>C?-1:0)}):new l([R|0],0>R?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return y;if(0>R)return k(f(-R));for(var C=[],P=1,O=0;R>=P;O++)C[O]=R/P|0,P*=4294967296;return new l(C,0)}function m(R,C){if(R.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(R.charAt(0)=="-")return k(m(R.substring(1),C));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=f(Math.pow(C,8)),O=y,V=0;V<R.length;V+=8){var F=Math.min(8,R.length-V),M=parseInt(R.substring(V,V+F),C);8>F?(F=f(Math.pow(C,F)),O=O.j(F).add(f(M))):(O=O.j(P),O=O.add(f(M)))}return O}var y=h(0),v=h(1),x=h(16777216);n=l.prototype,n.m=function(){if(I(this))return-k(this).m();for(var R=0,C=1,P=0;P<this.g.length;P++){var O=this.i(P);R+=(0<=O?O:4294967296+O)*C,C*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(S(this))return"0";if(I(this))return"-"+k(this).toString(R);for(var C=f(Math.pow(R,6)),P=this,O="";;){var V=W(P,C).g;P=N(P,V.j(C));var F=((0<P.g.length?P.g[0]:P.h)>>>0).toString(R);if(P=V,S(P))return F+O;for(;6>F.length;)F="0"+F;O=F+O}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function S(R){if(R.h!=0)return!1;for(var C=0;C<R.g.length;C++)if(R.g[C]!=0)return!1;return!0}function I(R){return R.h==-1}n.l=function(R){return R=N(this,R),I(R)?-1:S(R)?0:1};function k(R){for(var C=R.g.length,P=[],O=0;O<C;O++)P[O]=~R.g[O];return new l(P,~R.h).add(v)}n.abs=function(){return I(this)?k(this):this},n.add=function(R){for(var C=Math.max(this.g.length,R.g.length),P=[],O=0,V=0;V<=C;V++){var F=O+(this.i(V)&65535)+(R.i(V)&65535),M=(F>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);O=M>>>16,F&=65535,M&=65535,P[V]=M<<16|F}return new l(P,P[P.length-1]&-2147483648?-1:0)};function N(R,C){return R.add(k(C))}n.j=function(R){if(S(this)||S(R))return y;if(I(this))return I(R)?k(this).j(k(R)):k(k(this).j(R));if(I(R))return k(this.j(k(R)));if(0>this.l(x)&&0>R.l(x))return f(this.m()*R.m());for(var C=this.g.length+R.g.length,P=[],O=0;O<2*C;O++)P[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<R.g.length;V++){var F=this.i(O)>>>16,M=this.i(O)&65535,Le=R.i(V)>>>16,Ie=R.i(V)&65535;P[2*O+2*V]+=M*Ie,L(P,2*O+2*V),P[2*O+2*V+1]+=F*Ie,L(P,2*O+2*V+1),P[2*O+2*V+1]+=M*Le,L(P,2*O+2*V+1),P[2*O+2*V+2]+=F*Le,L(P,2*O+2*V+2)}for(O=0;O<C;O++)P[O]=P[2*O+1]<<16|P[2*O];for(O=C;O<2*C;O++)P[O]=0;return new l(P,0)};function L(R,C){for(;(R[C]&65535)!=R[C];)R[C+1]+=R[C]>>>16,R[C]&=65535,C++}function B(R,C){this.g=R,this.h=C}function W(R,C){if(S(C))throw Error("division by zero");if(S(R))return new B(y,y);if(I(R))return C=W(k(R),C),new B(k(C.g),k(C.h));if(I(C))return C=W(R,k(C)),new B(k(C.g),C.h);if(30<R.g.length){if(I(R)||I(C))throw Error("slowDivide_ only works with positive integers.");for(var P=v,O=C;0>=O.l(R);)P=K(P),O=K(O);var V=Z(P,1),F=Z(O,1);for(O=Z(O,2),P=Z(P,2);!S(O);){var M=F.add(O);0>=M.l(R)&&(V=V.add(P),F=M),O=Z(O,1),P=Z(P,1)}return C=N(R,V.j(C)),new B(V,C)}for(V=y;0<=R.l(C);){for(P=Math.max(1,Math.floor(R.m()/C.m())),O=Math.ceil(Math.log(P)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),F=f(P),M=F.j(C);I(M)||0<M.l(R);)P-=O,F=f(P),M=F.j(C);S(F)&&(F=v),V=V.add(F),R=N(R,M)}return new B(V,R)}n.A=function(R){return W(this,R).h},n.and=function(R){for(var C=Math.max(this.g.length,R.g.length),P=[],O=0;O<C;O++)P[O]=this.i(O)&R.i(O);return new l(P,this.h&R.h)},n.or=function(R){for(var C=Math.max(this.g.length,R.g.length),P=[],O=0;O<C;O++)P[O]=this.i(O)|R.i(O);return new l(P,this.h|R.h)},n.xor=function(R){for(var C=Math.max(this.g.length,R.g.length),P=[],O=0;O<C;O++)P[O]=this.i(O)^R.i(O);return new l(P,this.h^R.h)};function K(R){for(var C=R.g.length+1,P=[],O=0;O<C;O++)P[O]=R.i(O)<<1|R.i(O-1)>>>31;return new l(P,R.h)}function Z(R,C){var P=C>>5;C%=32;for(var O=R.g.length-P,V=[],F=0;F<O;F++)V[F]=0<C?R.i(F+P)>>>C|R.i(F+P+1)<<32-C:R.i(F+P);return new l(V,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,JE=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=m,us=l}).apply(typeof T0<"u"?T0:typeof self<"u"?self:typeof window<"u"?window:{});var bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZE,sc,ex,Hh,Rm,tx,nx,ix;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,E){return d==Array.prototype||d==Object.prototype||(d[_]=E.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof bh=="object"&&bh];for(var _=0;_<d.length;++_){var E=d[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function r(d,_){if(_)e:{var E=i;d=d.split(".");for(var A=0;A<d.length-1;A++){var H=d[A];if(!(H in E))break e;E=E[H]}d=d[d.length-1],A=E[d],_=_(A),_!=A&&_!=null&&e(E,d,{configurable:!0,writable:!0,value:_})}}function o(d,_){d instanceof String&&(d+="");var E=0,A=!1,H={next:function(){if(!A&&E<d.length){var Y=E++;return{value:_(Y,d[Y]),done:!1}}return A=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}r("Array.prototype.values",function(d){return d||function(){return o(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function f(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function m(d,_,E){return d.call.apply(d.bind,arguments)}function y(d,_,E){if(!d)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,A),d.apply(_,H)}}return function(){return d.apply(_,arguments)}}function v(d,_,E){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,v.apply(null,arguments)}function x(d,_){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function S(d,_){function E(){}E.prototype=_.prototype,d.aa=_.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(A,H,Y){for(var se=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)se[Ge-2]=arguments[Ge];return _.prototype[H].apply(A,se)}}function I(d){const _=d.length;if(0<_){const E=Array(_);for(let A=0;A<_;A++)E[A]=d[A];return E}return[]}function k(d,_){for(let E=1;E<arguments.length;E++){const A=arguments[E];if(h(A)){const H=d.length||0,Y=A.length||0;d.length=H+Y;for(let se=0;se<Y;se++)d[H+se]=A[se]}else d.push(A)}}class N{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function L(d){return/^[\s\xa0]*$/.test(d)}function B(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function W(d){return W[" "](d),d}W[" "]=function(){};var K=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function Z(d,_,E){for(const A in d)_.call(E,d[A],A,d)}function R(d,_){for(const E in d)_.call(void 0,d[E],E,d)}function C(d){const _={};for(const E in d)_[E]=d[E];return _}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(d,_){let E,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(E in A)d[E]=A[E];for(let Y=0;Y<P.length;Y++)E=P[Y],Object.prototype.hasOwnProperty.call(A,E)&&(d[E]=A[E])}}function V(d){var _=1;d=d.split(":");const E=[];for(;0<_&&d.length;)E.push(d.shift()),_--;return d.length&&E.push(d.join(":")),E}function F(d){c.setTimeout(()=>{throw d},0)}function M(){var d=ce;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class Le{constructor(){this.h=this.g=null}add(_,E){const A=Ie.get();A.set(_,E),this.h?this.h.next=A:this.g=A,this.h=A}}var Ie=new N(()=>new Re,d=>d.reset());class Re{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let be,ie=!1,ce=new Le,oe=()=>{const d=c.Promise.resolve(void 0);be=()=>{d.then(U)}};var U=()=>{for(var d;d=M();){try{d.h.call(d.g)}catch(E){F(E)}var _=Ie;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}ie=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var xe=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};c.addEventListener("test",E,_),c.removeEventListener("test",E,_)}catch{}return d})();function Ae(d,_){if(pe.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(K){e:{try{W(_.nodeName);var H=!0;break e}catch{}H=!1}H||(_=null)}}else E=="mouseover"?_=d.fromElement:E=="mouseout"&&(_=d.toElement);this.relatedTarget=_,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Pe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ae.aa.h.call(this)}}S(Ae,pe);var Pe={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var He="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Ze(d,_,E,A,H){this.listener=d,this.proxy=null,this.src=_,this.type=E,this.capture=!!A,this.ha=H,this.key=++$e,this.da=this.fa=!1}function Mt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function qi(d){this.src=d,this.g={},this.h=0}qi.prototype.add=function(d,_,E,A,H){var Y=d.toString();d=this.g[Y],d||(d=this.g[Y]=[],this.h++);var se=kr(d,_,A,H);return-1<se?(_=d[se],E||(_.fa=!1)):(_=new Ze(_,this.src,Y,!!A,H),_.fa=E,d.push(_)),_};function Ao(d,_){var E=_.type;if(E in d.g){var A=d.g[E],H=Array.prototype.indexOf.call(A,_,void 0),Y;(Y=0<=H)&&Array.prototype.splice.call(A,H,1),Y&&(Mt(_),d.g[E].length==0&&(delete d.g[E],d.h--))}}function kr(d,_,E,A){for(var H=0;H<d.length;++H){var Y=d[H];if(!Y.da&&Y.listener==_&&Y.capture==!!E&&Y.ha==A)return H}return-1}var Ss="closure_lm_"+(1e6*Math.random()|0),Co={};function sl(d,_,E,A,H){if(Array.isArray(_)){for(var Y=0;Y<_.length;Y++)sl(d,_[Y],E,A,H);return null}return E=ll(E),d&&d[He]?d.K(_,E,f(A)?!!A.capture:!1,H):ol(d,_,E,!1,A,H)}function ol(d,_,E,A,H,Y){if(!_)throw Error("Invalid event type");var se=f(H)?!!H.capture:!!H,Ge=Ro(d);if(Ge||(d[Ss]=Ge=new qi(d)),E=Ge.add(_,E,A,se,Y),E.proxy)return E;if(A=ru(),E.proxy=A,A.src=d,A.listener=E,d.addEventListener)xe||(H=se),H===void 0&&(H=!1),d.addEventListener(_.toString(),A,H);else if(d.attachEvent)d.attachEvent(Gi(_.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function ru(){function d(E){return _.call(d.src,d.listener,E)}const _=al;return d}function Po(d,_,E,A,H){if(Array.isArray(_))for(var Y=0;Y<_.length;Y++)Po(d,_[Y],E,A,H);else A=f(A)?!!A.capture:!!A,E=ll(E),d&&d[He]?(d=d.i,_=String(_).toString(),_ in d.g&&(Y=d.g[_],E=kr(Y,E,A,H),-1<E&&(Mt(Y[E]),Array.prototype.splice.call(Y,E,1),Y.length==0&&(delete d.g[_],d.h--)))):d&&(d=Ro(d))&&(_=d.g[_.toString()],d=-1,_&&(d=kr(_,E,A,H)),(E=-1<d?_[d]:null)&&Ki(E))}function Ki(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[He])Ao(_.i,d);else{var E=d.type,A=d.proxy;_.removeEventListener?_.removeEventListener(E,A,d.capture):_.detachEvent?_.detachEvent(Gi(E),A):_.addListener&&_.removeListener&&_.removeListener(A),(E=Ro(_))?(Ao(E,d),E.h==0&&(E.src=null,_[Ss]=null)):Mt(d)}}}function Gi(d){return d in Co?Co[d]:Co[d]="on"+d}function al(d,_){if(d.da)d=!0;else{_=new Ae(_,this);var E=d.listener,A=d.ha||d.src;d.fa&&Ki(d),d=E.call(A,_)}return d}function Ro(d){return d=d[Ss],d instanceof qi?d:null}var No="__closure_events_fn_"+(1e9*Math.random()>>>0);function ll(d){return typeof d=="function"?d:(d[No]||(d[No]=function(_){return d.handleEvent(_)}),d[No])}function It(){Q.call(this),this.i=new qi(this),this.M=this,this.F=null}S(It,Q),It.prototype[He]=!0,It.prototype.removeEventListener=function(d,_,E,A){Po(this,d,_,E,A)};function kt(d,_){var E,A=d.F;if(A)for(E=[];A;A=A.F)E.push(A);if(d=d.M,A=_.type||_,typeof _=="string")_=new pe(_,d);else if(_ instanceof pe)_.target=_.target||d;else{var H=_;_=new pe(A,d),O(_,H)}if(H=!0,E)for(var Y=E.length-1;0<=Y;Y--){var se=_.g=E[Y];H=Yi(se,A,!0,_)&&H}if(se=_.g=d,H=Yi(se,A,!0,_)&&H,H=Yi(se,A,!1,_)&&H,E)for(Y=0;Y<E.length;Y++)se=_.g=E[Y],H=Yi(se,A,!1,_)&&H}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var E=d.g[_],A=0;A<E.length;A++)Mt(E[A]);delete d.g[_],d.h--}}this.F=null},It.prototype.K=function(d,_,E,A){return this.i.add(String(d),_,!1,E,A)},It.prototype.L=function(d,_,E,A){return this.i.add(String(d),_,!0,E,A)};function Yi(d,_,E,A){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var H=!0,Y=0;Y<_.length;++Y){var se=_[Y];if(se&&!se.da&&se.capture==E){var Ge=se.listener,At=se.ha||se.src;se.fa&&Ao(d.i,se),H=Ge.call(At,A)!==!1&&H}}return H&&!A.defaultPrevented}function cl(d,_,E){if(typeof d=="function")E&&(d=v(d,E));else if(d&&typeof d.handleEvent=="function")d=v(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:c.setTimeout(d,_||0)}function Ar(d){d.g=cl(()=>{d.g=null,d.i&&(d.i=!1,Ar(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class Is extends Q{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ar(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ks(d){Q.call(this),this.h=d,this.g={}}S(ks,Q);var ul=[];function hl(d){Z(d.g,function(_,E){this.g.hasOwnProperty(E)&&Ki(_)},d),d.g={}}ks.prototype.N=function(){ks.aa.N.call(this),hl(this)},ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dl=c.JSON.stringify,fl=c.JSON.parse,pl=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function As(){}As.prototype.h=null;function Do(d){return d.h||(d.h=d.i())}function Mo(){}var Dn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vi(){pe.call(this,"d")}S(vi,pe);function Oo(){pe.call(this,"c")}S(Oo,pe);var _i={},ml=null;function Cs(){return ml=ml||new It}_i.La="serverreachability";function gl(d){pe.call(this,_i.La,d)}S(gl,pe);function Qi(d){const _=Cs();kt(_,new gl(_))}_i.STAT_EVENT="statevent";function yl(d,_){pe.call(this,_i.STAT_EVENT,d),this.stat=_}S(yl,pe);function gt(d){const _=Cs();kt(_,new yl(_,d))}_i.Ma="timingevent";function Vo(d,_){pe.call(this,_i.Ma,d),this.size=_}S(Vo,pe);function Qn(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},_)}function Ps(){this.g=!0}Ps.prototype.xa=function(){this.g=!1};function Rs(d,_,E,A,H,Y){d.info(function(){if(d.g)if(Y)for(var se="",Ge=Y.split("&"),At=0;At<Ge.length;At++){var Fe=Ge[At].split("=");if(1<Fe.length){var Ot=Fe[0];Fe=Fe[1];var wt=Ot.split("_");se=2<=wt.length&&wt[1]=="type"?se+(Ot+"="+Fe+"&"):se+(Ot+"=redacted&")}}else se=null;else se=Y;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+_+`
`+E+`
`+se})}function Lo(d,_,E,A,H,Y,se){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+_+`
`+E+`
`+Y+" "+se})}function Xn(d,_,E,A){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+yf(d,E)+(A?" "+A:"")})}function vl(d,_){d.info(function(){return"TIMEOUT: "+_})}Ps.prototype.info=function(){};function yf(d,_){if(!d.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var A=E[d];if(!(2>A.length)){var H=A[1];if(Array.isArray(H)&&!(1>H.length)){var Y=H[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var se=1;se<H.length;se++)H[se]=""}}}}return dl(E)}catch{return _}}var jo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},su={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jn;function Ns(){}S(Ns,As),Ns.prototype.g=function(){return new XMLHttpRequest},Ns.prototype.i=function(){return{}},Jn=new Ns;function Zn(d,_,E,A){this.j=d,this.i=_,this.l=E,this.R=A||1,this.U=new ks(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ou}function ou(){this.i=null,this.g="",this.h=!1}var _l={},Fo={};function zo(d,_,E){d.L=1,d.v=Dr(Sn(_)),d.m=E,d.P=!0,wl(d,null)}function wl(d,_){d.F=Date.now(),et(d),d.A=Sn(d.v);var E=d.A,A=d.R;Array.isArray(A)||(A=[String(A)]),Or(E.i,"t",A),d.C=0,E=d.j.J,d.h=new ou,d.g=Tu(d.j,E?_:null,!d.m),0<d.O&&(d.M=new Is(v(d.Y,d,d.g),d.O)),_=d.U,E=d.g,A=d.ca;var H="readystatechange";Array.isArray(H)||(H&&(ul[0]=H.toString()),H=ul);for(var Y=0;Y<H.length;Y++){var se=sl(E,H[Y],A||_.handleEvent,!1,_.h||_);if(!se)break;_.g[se.key]=se}_=d.H?C(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),Qi(),Rs(d.i,d.u,d.A,d.l,d.R,d.m)}Zn.prototype.ca=function(d){d=d.target;const _=this.M;_&&dn(d)==3?_.j():this.Y(d)},Zn.prototype.Y=function(d){try{if(d==this.g)e:{const wt=dn(this.g);var _=this.g.Ba();const Vn=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||Il(this.g)))){this.J||wt!=4||_==7||(_==8||0>=Vn?Qi(3):Qi(2)),Ds(this);var E=this.g.Z();this.X=E;t:if(au(this)){var A=Il(this.g);d="";var H=A.length,Y=dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mn(this),Cr(this);var se="";break t}this.h.i=new c.TextDecoder}for(_=0;_<H;_++)this.h.h=!0,d+=this.h.i.decode(A[_],{stream:!(Y&&_==H-1)});A.length=0,this.h.g+=d,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=E==200,Lo(this.i,this.u,this.A,this.l,this.R,wt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,At=this.g;if((Ge=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Ge)){var Fe=Ge;break t}}Fe=null}if(E=Fe)Xn(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bl(this,E);else{this.o=!1,this.s=3,gt(12),Mn(this),Cr(this);break e}}if(this.P){E=!0;let kn;for(;!this.J&&this.C<se.length;)if(kn=vf(this,se),kn==Fo){wt==4&&(this.s=4,gt(14),E=!1),Xn(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==_l){this.s=4,gt(15),Xn(this.i,this.l,se,"[Invalid Chunk]"),E=!1;break}else Xn(this.i,this.l,kn,null),bl(this,kn);if(au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||se.length!=0||this.h.h||(this.s=1,gt(16),E=!1),this.o=this.o&&E,!E)Xn(this.i,this.l,se,"[Invalid Chunked Response]"),Mn(this),Cr(this);else if(0<se.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Al(Ot),Ot.M=!0,gt(11))}}else Xn(this.i,this.l,se,null),bl(this,se);wt==4&&Mn(this),this.o&&!this.J&&(wt==4?Xo(this.j,this):(this.o=!1,et(this)))}else qo(this.g),E==400&&0<se.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),Mn(this),Cr(this)}}}catch{}finally{}};function au(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function vf(d,_){var E=d.C,A=_.indexOf(`
`,E);return A==-1?Fo:(E=Number(_.substring(E,A)),isNaN(E)?_l:(A+=1,A+E>_.length?Fo:(_=_.slice(A,A+E),d.C=A+E,_)))}Zn.prototype.cancel=function(){this.J=!0,Mn(this)};function et(d){d.S=Date.now()+d.I,lu(d,d.I)}function lu(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Qn(v(d.ba,d),_)}function Ds(d){d.B&&(c.clearTimeout(d.B),d.B=null)}Zn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(vl(this.i,this.A),this.L!=2&&(Qi(),gt(17)),Mn(this),this.s=2,Cr(this)):lu(this,this.S-d)};function Cr(d){d.j.G==0||d.J||Xo(d.j,d)}function Mn(d){Ds(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,hl(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function bl(d,_){try{var E=d.j;if(E.G!=0&&(E.g==d||on(E.h,d))){if(!d.K&&on(E.h,d)&&E.G==3){try{var A=E.Da.g.parse(_)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)Qo(E),ri(E);else break e;Yo(E),gt(18)}}else E.za=H[1],0<E.za-E.T&&37500>H[2]&&E.F&&E.v==0&&!E.C&&(E.C=Qn(v(E.Za,E),6e3));if(1>=uu(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else tr(E,11)}else if((d.K||E.g==d)&&Qo(E),!L(_))for(H=E.Da.g.parse(_),_=0;_<H.length;_++){let Fe=H[_];if(E.T=Fe[0],Fe=Fe[1],E.G==2)if(Fe[0]=="c"){E.K=Fe[1],E.ia=Fe[2];const Ot=Fe[3];Ot!=null&&(E.la=Ot,E.j.info("VER="+E.la));const wt=Fe[4];wt!=null&&(E.Aa=wt,E.j.info("SVER="+E.Aa));const Vn=Fe[5];Vn!=null&&typeof Vn=="number"&&0<Vn&&(A=1.5*Vn,E.L=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const kn=d.g;if(kn){const zs=kn.g?kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zs){var Y=A.h;Y.g||zs.indexOf("spdy")==-1&&zs.indexOf("quic")==-1&&zs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(El(Y,Y.h),Y.h=null))}if(A.D){const Zo=kn.g?kn.g.getResponseHeader("X-HTTP-Session-Id"):null;Zo&&(A.ya=Zo,Je(A.I,A.D,Zo))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),A=E;var se=d;if(A.qa=xu(A,A.J?A.ia:null,A.W),se.K){hu(A.h,se);var Ge=se,At=A.L;At&&(Ge.I=At),Ge.B&&(Ds(Ge),et(Ge)),A.g=se}else Fs(A);0<E.i.length&&xi(E)}else Fe[0]!="stop"&&Fe[0]!="close"||tr(E,7);else E.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?tr(E,7):Bt(E):Fe[0]!="noop"&&E.l&&E.l.ta(Fe),E.v=0)}}Qi(4)}catch{}}var cu=class{constructor(d,_){this.g=d,this.map=_}};function Ms(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tn(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function uu(d){return d.h?1:d.g?d.g.size:0}function on(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function El(d,_){d.g?d.g.add(_):d.h=_}function hu(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}Ms.prototype.cancel=function(){if(this.i=du(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function du(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const E of d.g.values())_=_.concat(E.D);return _}return I(d.i)}function Bo(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(h(d)){for(var _=[],E=d.length,A=0;A<E;A++)_.push(d[A]);return _}_=[],E=0;for(A in d)_[E++]=d[A];return _}function Uo(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(h(d)||typeof d=="string"){var _=[];d=d.length;for(var E=0;E<d;E++)_.push(E);return _}_=[],E=0;for(const A in d)_[E++]=A;return _}}}function Pr(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(h(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var E=Uo(d),A=Bo(d),H=A.length,Y=0;Y<H;Y++)_.call(void 0,A[Y],E&&E[Y],d)}var Os=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _f(d,_){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var A=d[E].indexOf("="),H=null;if(0<=A){var Y=d[E].substring(0,A);H=d[E].substring(A+1)}else Y=d[E];_(Y,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Xi(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Xi){this.h=d.h,Vs(this,d.j),this.o=d.o,this.g=d.g,Rr(this,d.s),this.l=d.l;var _=d.i,E=new wi;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Nr(this,E),this.m=d.m}else d&&(_=String(d).match(Os))?(this.h=!1,Vs(this,_[1]||"",!0),this.o=je(_[2]||""),this.g=je(_[3]||"",!0),Rr(this,_[4]),this.l=je(_[5]||"",!0),Nr(this,_[6]||"",!0),this.m=je(_[7]||"")):(this.h=!1,this.i=new wi(null,this.h))}Xi.prototype.toString=function(){var d=[],_=this.j;_&&d.push(Mr(_,Wo,!0),":");var E=this.g;return(E||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Mr(_,Wo,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Mr(E,E.charAt(0)=="/"?mu:pu,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Mr(E,xl)),d.join("")};function Sn(d){return new Xi(d)}function Vs(d,_,E){d.j=E?je(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Rr(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function Nr(d,_,E){_ instanceof wi?(d.i=_,bi(d.i,d.h)):(E||(_=Mr(_,gu)),d.i=new wi(_,d.h))}function Je(d,_,E){d.i.set(_,E)}function Dr(d){return Je(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function je(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Mr(d,_,E){return typeof d=="string"?(d=encodeURI(d).replace(_,fu),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function fu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Wo=/[#\/\?@]/g,pu=/[#\?:]/g,mu=/[#\?]/g,gu=/[#\?@]/g,xl=/#/g;function wi(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function zt(d){d.g||(d.g=new Map,d.h=0,d.i&&_f(d.i,function(_,E){d.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=wi.prototype,n.add=function(d,_){zt(this),this.i=null,d=On(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(_),this.h+=1,this};function ei(d,_){zt(d),_=On(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function ti(d,_){return zt(d),_=On(d,_),d.g.has(_)}n.forEach=function(d,_){zt(this),this.g.forEach(function(E,A){E.forEach(function(H){d.call(_,H,A,this)},this)},this)},n.na=function(){zt(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let A=0;A<_.length;A++){const H=d[A];for(let Y=0;Y<H.length;Y++)E.push(_[A])}return E},n.V=function(d){zt(this);let _=[];if(typeof d=="string")ti(this,d)&&(_=_.concat(this.g.get(On(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)_=_.concat(d[E])}return _},n.set=function(d,_){return zt(this),this.i=null,d=On(this,d),ti(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function Or(d,_,E){ei(d,_),0<E.length&&(d.i=null,d.g.set(On(d,_),I(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var A=_[E];const Y=encodeURIComponent(String(A)),se=this.V(A);for(A=0;A<se.length;A++){var H=Y;se[A]!==""&&(H+="="+encodeURIComponent(String(se[A]))),d.push(H)}}return this.i=d.join("&")};function On(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function bi(d,_){_&&!d.j&&(zt(d),d.i=null,d.g.forEach(function(E,A){var H=A.toLowerCase();A!=H&&(ei(this,A),Or(this,H,E))},d)),d.j=_}function wf(d,_){const E=new Ps;if(c.Image){const A=new Image;A.onload=x(hn,E,"TestLoadImage: loaded",!0,_,A),A.onerror=x(hn,E,"TestLoadImage: error",!1,_,A),A.onabort=x(hn,E,"TestLoadImage: abort",!1,_,A),A.ontimeout=x(hn,E,"TestLoadImage: timeout",!1,_,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else _(!1)}function yu(d,_){const E=new Ps,A=new AbortController,H=setTimeout(()=>{A.abort(),hn(E,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:A.signal}).then(Y=>{clearTimeout(H),Y.ok?hn(E,"TestPingServer: ok",!0,_):hn(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(H),hn(E,"TestPingServer: error",!1,_)})}function hn(d,_,E,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(E)}catch{}}function bf(){this.g=new pl}function vu(d,_,E){const A=E||"";try{Pr(d,function(H,Y){let se=H;f(H)&&(se=dl(H)),_.push(A+Y+"="+encodeURIComponent(se))})}catch(H){throw _.push(A+"type="+encodeURIComponent("_badmap")),H}}function Ji(d){this.l=d.Ub||null,this.j=d.eb||!1}S(Ji,As),Ji.prototype.g=function(){return new Ls(this.l,this.j)},Ji.prototype.i=(function(d){return function(){return d}})({});function Ls(d,_){It.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Ls,It),n=Ls.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,ii(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||c).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ni(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_u(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function _u(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?ni(this):ii(this),this.readyState==3&&_u(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,ni(this))},n.Qa=function(d){this.g&&(this.response=d,ni(this))},n.ga=function(){this.g&&ni(this)};function ni(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ii(d)}n.setRequestHeader=function(d,_){this.u.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=_.next();return d.join(`\r
`)};function ii(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Zi(d){let _="";return Z(d,function(E,A){_+=A,_+=":",_+=E,_+=`\r
`}),_}function Vr(d,_,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=Zi(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):Je(d,_,E))}function at(d){It.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(at,It);var Ef=/^https?$/i,Tl=["POST","PUT"];n=at.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,_,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jn.g(),this.v=this.o?Do(this.o):Do(Jn),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(Y){js(this,Y);return}if(d=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)E.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Y of A.keys())E.set(Y,A.get(Y));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(Y=>Y.toLowerCase()=="content-type"),H=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Tl,_,void 0))||A||H||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,se]of E)this.g.setRequestHeader(Y,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$o(this),this.u=!0,this.g.send(d),this.u=!1}catch(Y){js(this,Y)}};function js(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,Ho(d),In(d)}function Ho(d){d.A||(d.A=!0,kt(d,"complete"),kt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,kt(this,"complete"),kt(this,"abort"),In(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),In(this,!0)),at.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Sl(this):this.bb())},n.bb=function(){Sl(this)};function Sl(d){if(d.h&&typeof l<"u"&&(!d.v[1]||dn(d)!=4||d.Z()!=2)){if(d.u&&dn(d)==4)cl(d.Ea,0,d);else if(kt(d,"readystatechange"),dn(d)==4){d.h=!1;try{const se=d.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var A;if(A=se===0){var H=String(d.D).match(Os)[1]||null;!H&&c.self&&c.self.location&&(H=c.self.location.protocol.slice(0,-1)),A=!Ef.test(H?H.toLowerCase():"")}E=A}if(E)kt(d,"complete"),kt(d,"success");else{d.m=6;try{var Y=2<dn(d)?d.g.statusText:""}catch{Y=""}d.l=Y+" ["+d.Z()+"]",Ho(d)}}finally{In(d)}}}}function In(d,_){if(d.g){$o(d);const E=d.g,A=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||kt(d,"ready");try{E.onreadystatechange=A}catch{}}}function $o(d){d.I&&(c.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function dn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<dn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),fl(_)}};function Il(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function qo(d){const _={};d=(d.g&&2<=dn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if(L(d[A]))continue;var E=V(d[A]);const H=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Y=_[H]||[];_[H]=Y,Y.push(E)}R(_,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(d,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||_}function kl(d){this.Aa=0,this.i=[],this.j=new Ps,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ei("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ei("baseRetryDelayMs",5e3,d),this.cb=Ei("retryDelaySeedMs",1e4,d),this.Wa=Ei("forwardChannelMaxRetries",2,d),this.wa=Ei("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Ms(d&&d.concurrentRequestLimit),this.Da=new bf,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=kl.prototype,n.la=8,n.G=1,n.connect=function(d,_,E,A){gt(0),this.W=d,this.H=_||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.I=xu(this,null,this.W),xi(this)};function Bt(d){if(Ko(d),d.G==3){var _=d.U++,E=Sn(d.I);if(Je(E,"SID",d.K),Je(E,"RID",_),Je(E,"TYPE","terminate"),er(d,E),_=new Zn(d,d.j,_),_.L=2,_.v=Dr(Sn(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&c.Image&&(new Image().src=_.v,E=!0),E||(_.g=Tu(_.j,null),_.g.ea(_.v)),_.F=Date.now(),et(_)}Eu(d)}function ri(d){d.g&&(Al(d),d.g.cancel(),d.g=null)}function Ko(d){ri(d),d.u&&(c.clearTimeout(d.u),d.u=null),Qo(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function xi(d){if(!Tn(d.h)&&!d.s){d.s=!0;var _=d.Ga;be||oe(),ie||(be(),ie=!0),ce.add(_,d),d.B=0}}function xf(d,_){return uu(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Qn(v(d.Ga,d,_),bu(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const H=new Zn(this,this.j,d);let Y=this.o;if(this.S&&(Y?(Y=C(Y),O(Y,this.S)):Y=this.S),this.m!==null||this.O||(H.H=Y,Y=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(_+=A,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Lr(this,H,_),E=Sn(this.I),Je(E,"RID",d),Je(E,"CVER",22),this.D&&Je(E,"X-HTTP-Session-Id",this.D),er(this,E),Y&&(this.O?_="headers="+encodeURIComponent(String(Zi(Y)))+"&"+_:this.m&&Vr(E,this.m,Y)),El(this.h,H),this.Ua&&Je(E,"TYPE","init"),this.P?(Je(E,"$req",_),Je(E,"SID","null"),H.T=!0,zo(H,E,null)):zo(H,E,_),this.G=2}}else this.G==3&&(d?Go(this,d):this.i.length==0||Tn(this.h)||Go(this))};function Go(d,_){var E;_?E=_.l:E=d.U++;const A=Sn(d.I);Je(A,"SID",d.K),Je(A,"RID",E),Je(A,"AID",d.T),er(d,A),d.m&&d.o&&Vr(A,d.m,d.o),E=new Zn(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),_&&(d.i=_.D.concat(d.i)),_=Lr(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),El(d.h,E),zo(E,A,_)}function er(d,_){d.H&&Z(d.H,function(E,A){Je(_,A,E)}),d.l&&Pr({},function(E,A){Je(_,A,E)})}function Lr(d,_,E){E=Math.min(d.i.length,E);var A=d.l?v(d.l.Na,d.l,d):null;e:{var H=d.i;let Y=-1;for(;;){const se=["count="+E];Y==-1?0<E?(Y=H[0].g,se.push("ofs="+Y)):Y=0:se.push("ofs="+Y);let Ge=!0;for(let At=0;At<E;At++){let Fe=H[At].g;const Ot=H[At].map;if(Fe-=Y,0>Fe)Y=Math.max(0,H[At].g-100),Ge=!1;else try{vu(Ot,se,"req"+Fe+"_")}catch{A&&A(Ot)}}if(Ge){A=se.join("&");break e}}}return d=d.i.splice(0,E),_.D=d,A}function Fs(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;be||oe(),ie||(be(),ie=!0),ce.add(_,d),d.v=0}}function Yo(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Qn(v(d.Fa,d),bu(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,wu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Qn(v(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),ri(this),wu(this))};function Al(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function wu(d){d.g=new Zn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=Sn(d.qa);Je(_,"RID","rpc"),Je(_,"SID",d.K),Je(_,"AID",d.T),Je(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&Je(_,"TO",d.ja),Je(_,"TYPE","xmlhttp"),er(d,_),d.m&&d.o&&Vr(_,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=Dr(Sn(_)),E.m=null,E.P=!0,wl(E,d)}n.Za=function(){this.C!=null&&(this.C=null,ri(this),Yo(this),gt(19))};function Qo(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function Xo(d,_){var E=null;if(d.g==_){Qo(d),Al(d),d.g=null;var A=2}else if(on(d.h,_))E=_.D,hu(d.h,_),A=1;else return;if(d.G!=0){if(_.o)if(A==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var H=d.B;A=Cs(),kt(A,new Vo(A,E)),xi(d)}else Fs(d);else if(H=_.s,H==3||H==0&&0<_.X||!(A==1&&xf(d,_)||A==2&&Yo(d)))switch(E&&0<E.length&&(_=d.h,_.i=_.i.concat(E)),H){case 1:tr(d,5);break;case 4:tr(d,10);break;case 3:tr(d,6);break;default:tr(d,2)}}}function bu(d,_){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*_}function tr(d,_){if(d.j.info("Error code "+_),_==2){var E=v(d.fb,d),A=d.Xa;const H=!A;A=new Xi(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Vs(A,"https"),Dr(A),H?wf(A.toString(),E):yu(A.toString(),E)}else gt(2);d.G=0,d.l&&d.l.sa(_),Eu(d),Ko(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Eu(d){if(d.G=0,d.ka=[],d.l){const _=du(d.h);(_.length!=0||d.i.length!=0)&&(k(d.ka,_),k(d.ka,d.i),d.h.i.length=0,I(d.i),d.i.length=0),d.l.ra()}}function xu(d,_,E){var A=E instanceof Xi?Sn(E):new Xi(E);if(A.g!="")_&&(A.g=_+"."+A.g),Rr(A,A.s);else{var H=c.location;A=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;var Y=new Xi(null);A&&Vs(Y,A),_&&(Y.g=_),H&&Rr(Y,H),E&&(Y.l=E),A=Y}return E=d.D,_=d.ya,E&&_&&Je(A,E,_),Je(A,"VER",d.la),er(d,A),A}function Tu(d,_,E){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new at(new Ji({eb:E})):new at(d.pa),_.Ha(d.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cl(){}n=Cl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Jo(){}Jo.prototype.g=function(d,_){return new an(d,_)};function an(d,_){It.call(this),this.g=new kl(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!L(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!L(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Ti(this)}S(an,It),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Bt(this.g)},an.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=dl(d),d=E);_.i.push(new cu(_.Ya++,d)),_.G==3&&xi(_)},an.prototype.N=function(){this.g.l=null,delete this.j,Bt(this.g),delete this.g,an.aa.N.call(this)};function Su(d){vi.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const E in _){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}S(Su,vi);function Iu(){Oo.call(this),this.status=1}S(Iu,Oo);function Ti(d){this.g=d}S(Ti,Cl),Ti.prototype.ua=function(){kt(this.g,"a")},Ti.prototype.ta=function(d){kt(this.g,new Su(d))},Ti.prototype.sa=function(d){kt(this.g,new Iu)},Ti.prototype.ra=function(){kt(this.g,"b")},Jo.prototype.createWebChannel=Jo.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,ix=function(){return new Jo},nx=function(){return Cs()},tx=_i,Rm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},jo.NO_ERROR=0,jo.TIMEOUT=8,jo.HTTP_ERROR=6,Hh=jo,su.COMPLETE="complete",ex=su,Mo.EventType=Dn,Dn.OPEN="a",Dn.CLOSE="b",Dn.ERROR="c",Dn.MESSAGE="d",It.prototype.listen=It.prototype.K,sc=Mo,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,ZE=at}).apply(typeof bh<"u"?bh:typeof self<"u"?self:typeof window<"u"?window:{});const S0="@firebase/firestore",I0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=new lg("@firebase/firestore");function xa(){return yo.logLevel}function he(n,...e){if(yo.logLevel<=Oe.DEBUG){const t=e.map(Eg);yo.debug(`Firestore (${Qa}): ${n}`,...t)}}function xr(n,...e){if(yo.logLevel<=Oe.ERROR){const t=e.map(Eg);yo.error(`Firestore (${Qa}): ${n}`,...t)}}function ps(n,...e){if(yo.logLevel<=Oe.WARN){const t=e.map(Eg);yo.warn(`Firestore (${Qa}): ${n}`,...t)}}function Eg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,rx(n,i,t)}function rx(n,e,t){let i=`FIRESTORE (${Qa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw xr(i),new Error(i)}function Ke(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||rx(e,r,i)}function Ce(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends $i{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Zt.UNAUTHENTICATED)))}shutdown(){}}class hP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class dP{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,t(h)):Promise.resolve();let o=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new wr,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await r(this.currentUser)}))},c=h=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>c(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new wr)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string",31837,{l:i}),new sx(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class fP{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pP{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new fP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class k0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,di(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const i=o=>{o.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,he("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const r=o=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new k0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new k0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=gP(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%62))}return i}}function Ne(n,e){return n<e?-1:n>e?1:0}function Nm(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),r=e.codePointAt(t);if(i!==r){if(i<128&&r<128)return Ne(i,r);{const o=ox(),l=yP(o.encode(A0(n,t)),o.encode(A0(e,t)));return l!==0?l:Ne(i,r)}}t+=i>65535?2:1}return Ne(n.length,e.length)}function A0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function yP(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ne(n[t],e[t]);return Ne(n.length,e.length)}function Oa(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="__name__";class Ni{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ee(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const o=Ni.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return Ne(e.length,t.length)}static compareSegments(e,t){const i=Ni.isNumericId(e),r=Ni.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Ni.extractNumericId(e).compare(Ni.extractNumericId(t)):Nm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return us.fromString(e.substring(4,e.length-2))}}class nt extends Ni{construct(e,t,i){return new nt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new le(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new nt(t)}static emptyPath(){return new nt([])}}const vP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Ni{construct(e,t,i){return new $t(e,t,i)}static isValidIdentifier(e){return vP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===C0}static keyField(){return new $t([C0])}static fromServerFormat(e){const t=[];let i="",r=0;const o=()=>{if(i.length===0)throw new le(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new le(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new le(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else c==="`"?(l=!l,r++):c!=="."||l?(i+=c,r++):(o(),r++)}if(o(),l)throw new le(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(t)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(nt.fromString(e))}static fromName(e){return new ve(nt.fromString(e).popFirst(5))}static empty(){return new ve(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(n,e,t){if(!t)throw new le(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _P(n,e,t,i){if(e===!0&&i===!0)throw new le(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function P0(n){if(!ve.isDocumentKey(n))throw new le(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function R0(n){if(ve.isDocumentKey(n))throw new le(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Bd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function xn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Bd(n);throw new le(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Yc(n,e){if(!lx(n))throw new le(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(r&&typeof l!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new le(X.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=-62135596800,D0=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*D0);return new ot(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<N0)throw new le(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/D0}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yc(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-N0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:Tt("string",ot._jsonSchemaVersion),seconds:Tt("number"),nanoseconds:Tt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new ot(0,0))}static max(){return new ke(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=-1;function wP(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=ke.fromTimestamp(i===1e9?new ot(t+1,0):new ot(t,i));return new ms(r,ve.empty(),e)}function bP(n){return new ms(n.readTime,n.key,Ac)}class ms{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ms(ke.min(),ve.empty(),Ac)}static max(){return new ms(ke.max(),ve.empty(),Ac)}}function EP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:Ne(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==xP)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):J.reject(t)}static resolve(e){return new J(((t,i)=>{t(e)}))}static reject(e){return new J(((t,i)=>{i(e)}))}static waitFor(e){return new J(((t,i)=>{let r=0,o=0,l=!1;e.forEach((c=>{++r,c.next((()=>{++o,l&&o===r&&t()}),(h=>i(h)))})),l=!0,o===r&&t()}))}static or(e){let t=J.resolve(!1);for(const i of e)t=t.next((r=>r?J.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,o)=>{i.push(t.call(this,r,o))})),this.waitFor(i)}static mapArray(e,t){return new J(((i,r)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const f=h;t(e[f]).next((m=>{l[f]=m,++c,c===o&&i(l)}),(m=>r(m)))}}))}static doWhile(e,t){return new J(((i,r)=>{const o=()=>{e()===!0?t().next((()=>{o()}),r):i()};o()}))}}function SP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ja(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Ud.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=-1;function Wd(n){return n==null}function hd(n){return n===0&&1/n==-1/0}function IP(n){return typeof n=="number"&&Number.isInteger(n)&&!hd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="";function kP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=M0(e)),e=AP(n.get(t),e);return M0(e)}function AP(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":t+="";break;case cx:t+="";break;default:t+=o}}return t}function M0(n){return n+cx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Es(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ux(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||Ht.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eh(this.root,e,this.comparator,!0)}}class Eh{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??Ht.RED,this.left=r??Ht.EMPTY,this.right=o??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new Ht(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Ht.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,i,r,o){return this}insert(e,t,i){return new Ht(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new V0(this.data.getIterator())}getIteratorFrom(e){return new V0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Dt(this.comparator);return t.data=e,t}}class V0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new Rn([])}unionWith(e){let t=new Dt($t.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Rn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oa(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new hx("Invalid base64 string: "+o):o}})(e);return new qt(t)}static fromUint8Array(e){const t=(function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o})(e);return new qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const CP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gs(n){if(Ke(!!n,39018),typeof n=="string"){let e=0;const t=CP.exec(n);if(Ke(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:vt(n.seconds),nanos:vt(n.nanos)}}function vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ys(n){return typeof n=="string"?qt.fromBase64String(n):qt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="server_timestamp",fx="__type__",px="__previous_value__",mx="__local_write_time__";function Sg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[fx])===null||t===void 0?void 0:t.stringValue)===dx}function Hd(n){const e=n.mapValue.fields[px];return Sg(e)?Hd(e):e}function Cc(n){const e=gs(n.mapValue.fields[mx].timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,t,i,r,o,l,c,h,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const dd="(default)";class Pc{constructor(e,t){this.projectId=e,this.database=t||dd}static empty(){return new Pc("","")}get isDefaultDatabase(){return this.database===dd}isEqual(e){return e instanceof Pc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="__type__",RP="__max__",xh={mapValue:{}},yx="__vector__",fd="value";function vs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sg(n)?4:DP(n)?9007199254740991:NP(n)?10:11:Ee(28295,{value:n})}function Hi(n,e){if(n===e)return!0;const t=vs(n);if(t!==vs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Cc(n).isEqual(Cc(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=gs(r.timestampValue),c=gs(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,o){return ys(r.bytesValue).isEqual(ys(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,o){return vt(r.geoPointValue.latitude)===vt(o.geoPointValue.latitude)&&vt(r.geoPointValue.longitude)===vt(o.geoPointValue.longitude)})(n,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return vt(r.integerValue)===vt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=vt(r.doubleValue),c=vt(o.doubleValue);return l===c?hd(l)===hd(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return Oa(n.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return(function(r,o){const l=r.mapValue.fields||{},c=o.mapValue.fields||{};if(O0(l)!==O0(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!Hi(l[h],c[h])))return!1;return!0})(n,e);default:return Ee(52216,{left:n})}}function Rc(n,e){return(n.values||[]).find((t=>Hi(t,e)))!==void 0}function Va(n,e){if(n===e)return 0;const t=vs(n),i=vs(e);if(t!==i)return Ne(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=vt(o.integerValue||o.doubleValue),h=vt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1})(n,e);case 3:return L0(n.timestampValue,e.timestampValue);case 4:return L0(Cc(n),Cc(e));case 5:return Nm(n.stringValue,e.stringValue);case 6:return(function(o,l){const c=ys(o),h=ys(l);return c.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),h=l.split("/");for(let f=0;f<c.length&&f<h.length;f++){const m=Ne(c[f],h[f]);if(m!==0)return m}return Ne(c.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Ne(vt(o.latitude),vt(l.latitude));return c!==0?c:Ne(vt(o.longitude),vt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return j0(n.arrayValue,e.arrayValue);case 10:return(function(o,l){var c,h,f,m;const y=o.fields||{},v=l.fields||{},x=(c=y[fd])===null||c===void 0?void 0:c.arrayValue,S=(h=v[fd])===null||h===void 0?void 0:h.arrayValue,I=Ne(((f=x==null?void 0:x.values)===null||f===void 0?void 0:f.length)||0,((m=S==null?void 0:S.values)===null||m===void 0?void 0:m.length)||0);return I!==0?I:j0(x,S)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===xh.mapValue&&l===xh.mapValue)return 0;if(o===xh.mapValue)return 1;if(l===xh.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),f=l.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let y=0;y<h.length&&y<m.length;++y){const v=Nm(h[y],m[y]);if(v!==0)return v;const x=Va(c[h[y]],f[m[y]]);if(x!==0)return x}return Ne(h.length,m.length)})(n.mapValue,e.mapValue);default:throw Ee(23264,{le:t})}}function L0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ne(n,e);const t=gs(n),i=gs(e),r=Ne(t.seconds,i.seconds);return r!==0?r:Ne(t.nanos,i.nanos)}function j0(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const o=Va(t[r],i[r]);if(o)return o}return Ne(t.length,i.length)}function La(n){return Dm(n)}function Dm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=gs(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ys(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const o of t.values||[])r?r=!1:i+=",",i+=Dm(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${Dm(t.fields[l])}`;return r+"}"})(n.mapValue):Ee(61005,{value:n})}function $h(n){switch(vs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hd(n);return e?16+$h(e):16;case 5:return 2*n.stringValue.length;case 6:return ys(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+$h(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Es(i.fields,((o,l)=>{r+=o.length+$h(l)})),r})(n.mapValue);default:throw Ee(13486,{value:n})}}function F0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Mm(n){return!!n&&"integerValue"in n}function Ig(n){return!!n&&"arrayValue"in n}function z0(n){return!!n&&"nullValue"in n}function B0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qh(n){return!!n&&"mapValue"in n}function NP(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[gx])===null||t===void 0?void 0:t.stringValue)===yx}function yc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Es(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=yc(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===RP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!qh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yc(t)}setAll(e){let t=$t.emptyPath(),i={},r=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,i,r),i={},r=[],t=c.popLast()}l?i[c.lastSegment()]=yc(l):r.push(c.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){const t=this.field(e.popLast());qh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];qh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Es(t,((r,o)=>e[r]=o));for(const r of i)delete e[r]}clone(){return new bn(yc(this.value))}}function vx(n){const e=[];return Es(n.fields,((t,i)=>{const r=new $t([t]);if(qh(i)){const o=vx(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)})),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t,i,r,o,l,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new en(e,0,ke.min(),ke.min(),ke.min(),bn.empty(),0)}static newFoundDocument(e,t,i,r){return new en(e,1,t,ke.min(),i,r,0)}static newNoDocument(e,t){return new en(e,2,t,ke.min(),ke.min(),bn.empty(),0)}static newUnknownDocument(e,t){return new en(e,3,t,ke.min(),ke.min(),bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t){this.position=e,this.inclusive=t}}function U0(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const o=e[r],l=n.position[r];if(o.field.isKeyField()?i=ve.comparator(ve.fromName(l.referenceValue),t.key):i=Va(l,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function W0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t="asc"){this.field=e,this.dir=t}}function MP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{}class xt extends _x{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new VP(e,t,i):t==="array-contains"?new FP(e,i):t==="in"?new zP(e,i):t==="not-in"?new BP(e,i):t==="array-contains-any"?new UP(e,i):new xt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new LP(e,i):new jP(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Va(t,this.value)):t!==null&&vs(this.value)===vs(t)&&this.matchesComparison(Va(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gi extends _x{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new gi(e,t)}matches(e){return wx(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function wx(n){return n.op==="and"}function bx(n){return OP(n)&&wx(n)}function OP(n){for(const e of n.filters)if(e instanceof gi)return!1;return!0}function Om(n){if(n instanceof xt)return n.field.canonicalString()+n.op.toString()+La(n.value);if(bx(n))return n.filters.map((e=>Om(e))).join(",");{const e=n.filters.map((t=>Om(t))).join(",");return`${n.op}(${e})`}}function Ex(n,e){return n instanceof xt?(function(i,r){return r instanceof xt&&i.op===r.op&&i.field.isEqual(r.field)&&Hi(i.value,r.value)})(n,e):n instanceof gi?(function(i,r){return r instanceof gi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,l,c)=>o&&Ex(l,r.filters[c])),!0):!1})(n,e):void Ee(19439)}function xx(n){return n instanceof xt?(function(t){return`${t.field.canonicalString()} ${t.op} ${La(t.value)}`})(n):n instanceof gi?(function(t){return t.op.toString()+" {"+t.getFilters().map(xx).join(" ,")+"}"})(n):"Filter"}class VP extends xt{constructor(e,t,i){super(e,t,i),this.key=ve.fromName(i.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class LP extends xt{constructor(e,t){super(e,"in",t),this.keys=Tx("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class jP extends xt{constructor(e,t){super(e,"not-in",t),this.keys=Tx("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Tx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>ve.fromName(i.referenceValue)))}class FP extends xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ig(t)&&Rc(t.arrayValue,this.value)}}class zP extends xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Rc(this.value.arrayValue,t)}}class BP extends xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Rc(this.value.arrayValue,t)}}class UP extends xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ig(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Rc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,t=null,i=[],r=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=c,this.Pe=null}}function H0(n,e=null,t=[],i=[],r=null,o=null,l=null){return new WP(n,e,t,i,r,o,l)}function kg(n){const e=Ce(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Om(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Wd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>La(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>La(i))).join(",")),e.Pe=t}return e.Pe}function Ag(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!MP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ex(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!W0(n.startAt,e.startAt)&&W0(n.endAt,e.endAt)}function Vm(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t=null,i=[],r=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function HP(n,e,t,i,r,o,l,c){return new Za(n,e,t,i,r,o,l,c)}function $d(n){return new Za(n)}function $0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Sx(n){return n.collectionGroup!==null}function vc(n){const e=Ce(n);if(e.Te===null){e.Te=[];const t=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Dt($t.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Nc(o,i))})),t.has($t.keyField().canonicalString())||e.Te.push(new Nc($t.keyField(),i))}return e.Te}function Vi(n){const e=Ce(n);return e.Ie||(e.Ie=$P(e,vc(n))),e.Ie}function $P(n,e){if(n.limitType==="F")return H0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new Nc(r.field,o)}));const t=n.endAt?new pd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new pd(n.startAt.position,n.startAt.inclusive):null;return H0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Lm(n,e){const t=n.filters.concat([e]);return new Za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function jm(n,e,t){return new Za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qd(n,e){return Ag(Vi(n),Vi(e))&&n.limitType===e.limitType}function Ix(n){return`${kg(Vi(n))}|lt:${n.limitType}`}function Ta(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>xx(r))).join(", ")}]`),Wd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>La(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>La(r))).join(",")),`Target(${i})`})(Vi(n))}; limitType=${n.limitType})`}function Kd(n,e){return e.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ve.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,r){for(const o of vc(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(l,c,h){const f=U0(l,c,h);return l.inclusive?f<=0:f<0})(i.startAt,vc(i),r)||i.endAt&&!(function(l,c,h){const f=U0(l,c,h);return l.inclusive?f>=0:f>0})(i.endAt,vc(i),r))})(n,e)}function qP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kx(n){return(e,t)=>{let i=!1;for(const r of vc(n)){const o=KP(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function KP(n,e,t){const i=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(o,l,c){const h=l.data.field(o),f=c.data.field(o);return h!==null&&f!==null?Va(h,f):Ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ee(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,((t,i)=>{for(const[r,o]of i)e(r,o)}))}isEmpty(){return ux(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP=new dt(ve.comparator);function Tr(){return GP}const Ax=new dt(ve.comparator);function oc(...n){let e=Ax;for(const t of n)e=e.insert(t.key,t);return e}function Cx(n){let e=Ax;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ao(){return _c()}function Px(){return _c()}function _c(){return new So((n=>n.toString()),((n,e)=>n.isEqual(e)))}const YP=new dt(ve.comparator),QP=new Dt(ve.comparator);function Ve(...n){let e=QP;for(const t of n)e=e.add(t);return e}const XP=new Dt(Ne);function JP(){return XP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hd(e)?"-0":e}}function Rx(n){return{integerValue:""+n}}function ZP(n,e){return IP(e)?Rx(e):Cg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(){this._=void 0}}function eR(n,e,t){return n instanceof Dc?(function(r,o){const l={fields:{[fx]:{stringValue:dx},[mx]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Sg(o)&&(o=Hd(o)),o&&(l.fields[px]=o),{mapValue:l}})(t,e):n instanceof ja?Dx(n,e):n instanceof Mc?Mx(n,e):(function(r,o){const l=Nx(r,o),c=q0(l)+q0(r.Ee);return Mm(l)&&Mm(r.Ee)?Rx(c):Cg(r.serializer,c)})(n,e)}function tR(n,e,t){return n instanceof ja?Dx(n,e):n instanceof Mc?Mx(n,e):t}function Nx(n,e){return n instanceof md?(function(i){return Mm(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Dc extends Gd{}class ja extends Gd{constructor(e){super(),this.elements=e}}function Dx(n,e){const t=Ox(e);for(const i of n.elements)t.some((r=>Hi(r,i)))||t.push(i);return{arrayValue:{values:t}}}class Mc extends Gd{constructor(e){super(),this.elements=e}}function Mx(n,e){let t=Ox(e);for(const i of n.elements)t=t.filter((r=>!Hi(r,i)));return{arrayValue:{values:t}}}class md extends Gd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function q0(n){return vt(n.integerValue||n.doubleValue)}function Ox(n){return Ig(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t){this.field=e,this.transform=t}}function nR(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof ja&&r instanceof ja||i instanceof Mc&&r instanceof Mc?Oa(i.elements,r.elements,Hi):i instanceof md&&r instanceof md?Hi(i.Ee,r.Ee):i instanceof Dc&&r instanceof Dc})(n.transform,e.transform)}class iR{constructor(e,t){this.version=e,this.transformResults=t}}class Kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Yd{}function Lx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Pg(n.key,Kn.none()):new Qc(n.key,n.data,Kn.none());{const t=n.data,i=bn.empty();let r=new Dt($t.comparator);for(let o of e.fields)if(!r.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new xs(n.key,i,new Rn(r.toArray()),Kn.none())}}function rR(n,e,t){n instanceof Qc?(function(r,o,l){const c=r.value.clone(),h=G0(r.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof xs?(function(r,o,l){if(!Kh(r.precondition,o))return void o.convertToUnknownDocument(l.version);const c=G0(r.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(jx(r)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):(function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function wc(n,e,t,i){return n instanceof Qc?(function(o,l,c,h){if(!Kh(o.precondition,l))return c;const f=o.value.clone(),m=Y0(o.fieldTransforms,h,l);return f.setAll(m),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof xs?(function(o,l,c,h){if(!Kh(o.precondition,l))return c;const f=Y0(o.fieldTransforms,h,l),m=l.data;return m.setAll(jx(o)),m.setAll(f),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(n,e,t,i):(function(o,l,c){return Kh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function sR(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),o=Nx(i.transform,r||null);o!=null&&(t===null&&(t=bn.empty()),t.set(i.field,o))}return t||null}function K0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Oa(i,r,((o,l)=>nR(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Qc extends Yd{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class xs extends Yd{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function jx(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function G0(n,e,t){const i=new Map;Ke(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let r=0;r<t.length;r++){const o=n[r],l=o.transform,c=e.data.field(o.field);i.set(o.field,tR(l,c,t[r]))}return i}function Y0(n,e,t){const i=new Map;for(const r of n){const o=r.transform,l=t.data.field(r.field);i.set(r.field,eR(o,l,e))}return i}class Pg extends Yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oR extends Yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&rR(o,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=wc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=wc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Px();return this.mutations.forEach((r=>{const o=e.get(r.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(r.key)?null:c;const h=Lx(l,c);h!==null&&i.set(r.key,h),l.isValidDocument()||l.convertToNoDocument(ke.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&Oa(this.mutations,e.mutations,((t,i)=>K0(t,i)))&&Oa(this.baseMutations,e.baseMutations,((t,i)=>K0(t,i)))}}class Rg{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Ke(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=(function(){return YP})();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new Rg(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et,ze;function uR(n){switch(n){case X.OK:return Ee(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function Fx(n){if(n===void 0)return xr("GRPC error has no .code"),X.UNKNOWN;switch(n){case Et.OK:return X.OK;case Et.CANCELLED:return X.CANCELLED;case Et.UNKNOWN:return X.UNKNOWN;case Et.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Et.INTERNAL:return X.INTERNAL;case Et.UNAVAILABLE:return X.UNAVAILABLE;case Et.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Et.NOT_FOUND:return X.NOT_FOUND;case Et.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Et.ABORTED:return X.ABORTED;case Et.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Et.DATA_LOSS:return X.DATA_LOSS;default:return Ee(39323,{code:n})}}(ze=Et||(Et={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=new us([4294967295,4294967295],0);function Q0(n){const e=ox().encode(n),t=new JE;return t.update(e),new Uint8Array(t.digest())}function X0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new us([t,i],0),new us([r,o],0)]}class Ng{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ac(`Invalid padding: ${t}`);if(i<0)throw new ac(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ac(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ac(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=us.fromNumber(this.fe)}pe(e,t,i){let r=e.add(t.multiply(us.fromNumber(i)));return r.compare(hR)===1&&(r=new us([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Q0(e),[i,r]=X0(t);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);if(!this.ye(l))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Ng(o,r,t);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.fe===0)return;const t=Q0(e),[i,r]=X0(t);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);this.we(l)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ac extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Xc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Qd(ke.min(),r,new dt(Ne),Tr(),Ve())}}class Xc{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Xc(i,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=r}}class zx{constructor(e,t){this.targetId=e,this.De=t}}class Bx{constructor(e,t,i=qt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class J0{constructor(){this.ve=0,this.Ce=Z0(),this.Fe=qt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ve(),t=Ve(),i=Ve();return this.Ce.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Ee(38017,{changeType:o})}})),new Xc(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=Z0()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class dR{constructor(e){this.We=e,this.Ge=new Map,this.ze=Tr(),this.je=Th(),this.Je=Th(),this.He=new dt(Ne)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,r)=>{this.nt(r)&&t(r)}))}it(e){const t=e.targetId,i=e.De.count,r=this.st(t);if(r){const o=r.target;if(Vm(o))if(i===0){const l=new ve(o.path);this.Xe(t,l,en.newNoDocument(l,ke.min()))}else Ke(i===1,20013,{expectedCount:i});else{const l=this.ot(t);if(l!==i){const c=this._t(e),h=c?this.ut(c,e,l):1;if(h!==0){this.rt(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,f)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t;let l,c;try{l=ys(i).toUint8Array()}catch(h){if(h instanceof hx)return ps("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new Ng(l,r,o)}catch(h){return ps(h instanceof ac?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.fe===0?null:c}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let r=0;return i.forEach((o=>{const l=this.We.lt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(t,o,null),r++)})),r}Pt(e){const t=new Map;this.Ge.forEach(((o,l)=>{const c=this.st(l);if(c){if(o.current&&Vm(c.target)){const h=new ve(c.target.path);this.Tt(h).has(l)||this.It(l,h)||this.Xe(l,h,en.newNoDocument(h,e))}o.Ne&&(t.set(l,o.Le()),o.ke())}}));let i=Ve();this.Je.forEach(((o,l)=>{let c=!0;l.forEachWhile((h=>{const f=this.st(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(o))})),this.ze.forEach(((o,l)=>l.setReadTime(e)));const r=new Qd(e,t,this.He,this.ze,i);return this.ze=Tr(),this.je=Th(),this.Je=Th(),this.He=new dt(Ne),r}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new J0,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Dt(Ne),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Dt(Ne),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new J0),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Th(){return new dt(ve.comparator)}function Z0(){return new dt(ve.comparator)}const fR={asc:"ASCENDING",desc:"DESCENDING"},pR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mR={and:"AND",or:"OR"};class gR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fm(n,e){return n.useProto3Json||Wd(e)?e:{value:e}}function gd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ux(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yR(n,e){return gd(n,e.toTimestamp())}function Li(n){return Ke(!!n,49232),ke.fromTimestamp((function(t){const i=gs(t);return new ot(i.seconds,i.nanos)})(n))}function Dg(n,e){return zm(n,e).canonicalString()}function zm(n,e){const t=(function(r){return new nt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Wx(n){const e=nt.fromString(n);return Ke(Gx(e),10190,{key:e.toString()}),e}function Bm(n,e){return Dg(n.databaseId,e.path)}function nm(n,e){const t=Wx(e);if(t.get(1)!==n.databaseId.projectId)throw new le(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve($x(t))}function Hx(n,e){return Dg(n.databaseId,e)}function vR(n){const e=Wx(n);return e.length===4?nt.emptyPath():$x(e)}function Um(n){return new nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $x(n){return Ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ew(n,e,t){return{name:Bm(n,e),fields:t.value.mapValue.fields}}function _R(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ee(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(f,m){return f.useProto3Json?(Ke(m===void 0||typeof m=="string",58123),qt.fromBase64String(m||"")):(Ke(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),qt.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(f){const m=f.code===void 0?X.UNKNOWN:Fx(f.code);return new le(m,f.message||"")})(l);t=new Bx(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=nm(n,i.document.name),o=Li(i.document.updateTime),l=i.document.createTime?Li(i.document.createTime):ke.min(),c=new bn({mapValue:{fields:i.document.fields}}),h=en.newFoundDocument(r,o,l,c),f=i.targetIds||[],m=i.removedTargetIds||[];t=new Gh(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=nm(n,i.document),o=i.readTime?Li(i.readTime):ke.min(),l=en.newNoDocument(r,o),c=i.removedTargetIds||[];t=new Gh([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=nm(n,i.document),o=i.removedTargetIds||[];t=new Gh([],o,r,null)}else{if(!("filter"in e))return Ee(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new cR(r,o),c=i.targetId;t=new zx(c,l)}}return t}function wR(n,e){let t;if(e instanceof Qc)t={update:ew(n,e.key,e.value)};else if(e instanceof Pg)t={delete:Bm(n,e.key)};else if(e instanceof xs)t={update:ew(n,e.key,e.data),updateMask:CR(e.fieldMask)};else{if(!(e instanceof oR))return Ee(16599,{Rt:e.type});t={verify:Bm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const c=l.transform;if(c instanceof Dc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ja)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Mc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof md)return{fieldPath:l.field.canonicalString(),increment:c.Ee};throw Ee(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:yR(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ee(27497)})(n,e.precondition)),t}function bR(n,e){return n&&n.length>0?(Ke(e!==void 0,14353),n.map((t=>(function(r,o){let l=r.updateTime?Li(r.updateTime):Li(o);return l.isEqual(ke.min())&&(l=Li(o)),new iR(l,r.transformResults||[])})(t,e)))):[]}function ER(n,e){return{documents:[Hx(n,e.path)]}}function xR(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Hx(n,r);const o=(function(f){if(f.length!==0)return Kx(gi.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((m=>(function(v){return{field:Sa(v.field),direction:IR(v.dir)}})(m)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Fm(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:t,parent:r}}function TR(n){let e=vR(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Ke(i===1,65062);const m=t.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=(function(y){const v=qx(y);return v instanceof gi&&bx(v)?v.getFilters():[v]})(t.where));let l=[];t.orderBy&&(l=(function(y){return y.map((v=>(function(S){return new Nc(Ia(S.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(v)))})(t.orderBy));let c=null;t.limit&&(c=(function(y){let v;return v=typeof y=="object"?y.value:y,Wd(v)?null:v})(t.limit));let h=null;t.startAt&&(h=(function(y){const v=!!y.before,x=y.values||[];return new pd(x,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){const v=!y.before,x=y.values||[];return new pd(x,v)})(t.endAt)),HP(e,r,l,o,c,"F",h,f)}function SR(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qx(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ia(t.unaryFilter.field);return xt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ia(t.unaryFilter.field);return xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ia(t.unaryFilter.field);return xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ia(t.unaryFilter.field);return xt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return xt.create(Ia(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return gi.create(t.compositeFilter.filters.map((i=>qx(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(n):Ee(30097,{filter:n})}function IR(n){return fR[n]}function kR(n){return pR[n]}function AR(n){return mR[n]}function Sa(n){return{fieldPath:n.canonicalString()}}function Ia(n){return $t.fromServerFormat(n.fieldPath)}function Kx(n){return n instanceof xt?(function(t){if(t.op==="=="){if(B0(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NAN"}};if(z0(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(B0(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NOT_NAN"}};if(z0(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sa(t.field),op:kR(t.op),value:t.value}}})(n):n instanceof gi?(function(t){const i=t.getFilters().map((r=>Kx(r)));return i.length===1?i[0]:{compositeFilter:{op:AR(t.op),filters:i}}})(n):Ee(54877,{filter:n})}function CR(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Gx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,t,i,r,o=ke.min(),l=ke.min(),c=qt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.gt=e}}function RR(n){const e=TR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this.Dn=new DR}addToCollectionParentIndex(e,t){return this.Dn.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(ms.min())}updateCollectionGroup(e,t,i){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class DR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Dt(nt.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Dt(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yx=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(Yx,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Fa(0)}static ur(){return new Fa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="LruGarbageCollector",MR=1048576;function iw([n,e],[t,i]){const r=Ne(n,t);return r===0?Ne(e,i):r}class OR{constructor(e){this.Tr=e,this.buffer=new Dt(iw),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();iw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){he(nw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ja(t)?he(nw,"Ignoring IndexedDB error during garbage collection: ",t):await Xa(t)}await this.Rr(3e5)}))}}class LR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return J.resolve(Ud.ue);const i=new OR(t);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.gr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(tw)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tw):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,r,o,l,c,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),r=this.params.maximumSequenceNumbersToCollect):r=y,l=Date.now(),this.nthSequenceNumber(e,r)))).next((y=>(i=y,c=Date.now(),this.removeTargets(e,i,t)))).next((y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,i)))).next((y=>(f=Date.now(),xa()<=Oe.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${r} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:y}))))}}function jR(n,e){return new LR(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.changes=new So((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?J.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&wc(i.mutation,r,Rn.empty(),ot.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ve()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ve()){const r=ao();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((o=>{let l=oc();return o.forEach(((c,h)=>{l=l.insert(c,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const i=ao();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ve())))}populateOverlays(e,t,i){const r=[];return i.forEach((o=>{t.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,i,r){let o=Tr();const l=_c(),c=(function(){return _c()})();return t.forEach(((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof xs)?o=o.insert(f.key,f):m!==void 0?(l.set(f.key,m.mutation.getFieldMask()),wc(m.mutation,f,m.mutation.getFieldMask(),ot.now())):l.set(f.key,Rn.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,m)=>l.set(f,m))),t.forEach(((f,m)=>{var y;return c.set(f,new zR(m,(y=l.get(f))!==null&&y!==void 0?y:null))})),c)))}recalculateAndSaveOverlays(e,t){const i=_c();let r=new dt(((l,c)=>l-c)),o=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((h=>{const f=t.get(h);if(f===null)return;let m=i.get(h)||Rn.empty();m=c.applyToLocalView(f,m),i.set(h,m);const y=(r.get(c.batchId)||Ve()).add(h);r=r.insert(c.batchId,y)}))})).next((()=>{const l=[],c=r.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),f=h.key,m=h.value,y=Px();m.forEach((v=>{if(!o.has(v)){const x=Lx(t.get(v),i.get(v));x!==null&&y.set(v,x),o=o.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,y))}return J.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return(function(l){return ve.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Sx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):J.resolve(ao());let c=Ac,h=o;return l.next((f=>J.forEach(f,((m,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(m)?J.resolve():this.remoteDocumentCache.getEntry(e,m).next((v=>{h=h.insert(m,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,Ve()))).next((m=>({batchId:c,changes:Cx(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((i=>{let r=oc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const o=t.collectionGroup;let l=oc();return this.indexManager.getCollectionParents(e,o).next((c=>J.forEach(c,(h=>{const f=(function(y,v){return new Za(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next((m=>{m.forEach(((y,v)=>{l=l.insert(y,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r)))).next((l=>{o.forEach(((h,f)=>{const m=f.getKey();l.get(m)===null&&(l=l.insert(m,en.newInvalidDocument(m)))}));let c=oc();return l.forEach(((h,f)=>{const m=o.get(h);m!==void 0&&wc(m.mutation,f,Rn.empty(),ot.now()),Kd(t,f)&&(c=c.insert(h,f))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return J.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Li(r.createTime)}})(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(r){return{name:r.name,query:RR(r.bundledQuery),readTime:Li(r.readTime)}})(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(){this.overlays=new dt(ve.comparator),this.kr=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ao();return J.forEach(t,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,o)=>{this.wt(e,t,o)})),J.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.kr.delete(i)),J.resolve()}getOverlaysForCollection(e,t,i){const r=ao(),o=t.length+1,l=new ve(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return J.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new dt(((f,m)=>f-m));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=ao(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const c=ao(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,m)=>c.set(f,m))),!(c.size()>=r)););return J.resolve(c)}wt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new lR(t,i));let o=this.kr.get(t);o===void 0&&(o=Ve(),this.kr.set(t,o)),this.kr.set(t,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(){this.qr=new Dt(Ft.Qr),this.$r=new Dt(Ft.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new Ft(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Ft(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new ve(new nt([])),i=new Ft(t,e),r=new Ft(t,e+1),o=[];return this.$r.forEachInRange([i,r],(l=>{this.Wr(l),o.push(l.key)})),o}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ve(new nt([])),i=new Ft(t,e),r=new Ft(t,e+1);let o=Ve();return this.$r.forEachInRange([i,r],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new Ft(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ft{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ve.comparator(e.key,t.key)||Ne(e.Hr,t.Hr)}static Ur(e,t){return Ne(e.Hr,t.Hr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Dt(Ft.Qr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new aR(o,t,i,r);this.mutationQueue.push(l);for(const c of r)this.Yr=this.Yr.add(new Ft(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return J.resolve(l)}lookupMutationBatch(e,t){return J.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Xr(i),o=r<0?0:r;return J.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?Tg:this.er-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ft(t,0),r=new Ft(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],(l=>{const c=this.Zr(l.Hr);o.push(c)})),J.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Dt(Ne);return t.forEach((r=>{const o=new Ft(r,0),l=new Ft(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,l],(c=>{i=i.add(c.Hr)}))})),J.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let o=i;ve.isDocumentKey(o)||(o=o.child(""));const l=new Ft(new ve(o),0);let c=new Dt(Ne);return this.Yr.forEachWhile((h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(h.Hr)),!0)}),l),J.resolve(this.ei(c))}ei(e){const t=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){Ke(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return J.forEach(t.mutations,(r=>{const o=new Ft(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new Ft(t,0),r=this.Yr.firstAfterOrEqual(i);return J.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.ni=e,this.docs=(function(){return new dt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),o=r?r.size:0,l=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return J.resolve(i?i.document.mutableCopy():en.newInvalidDocument(t))}getEntries(e,t){let i=Tr();return t.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():en.newInvalidDocument(r))})),J.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=Tr();const l=t.path,c=new ve(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||EP(bP(m),i)<=0||(r.has(m.key)||Kd(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return J.resolve(o)}getAllFromCollectionGroup(e,t,i,r){Ee(9500)}ri(e,t){return J.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new KR(this)}getSize(e){return J.resolve(this.size)}}class KR extends FR{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)})),J.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.persistence=e,this.ii=new So((t=>kg(t)),Ag),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.si=0,this.oi=new Mg,this.targetCount=0,this._i=Fa.ar()}forEachTarget(e,t){return this.ii.forEach(((i,r)=>t(r))),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),J.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Fa(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.hr(t),J.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,i){let r=0;const o=[];return this.ii.forEach(((l,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.ii.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),J.waitFor(o).next((()=>r))}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return J.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),J.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach((l=>{o.push(r.markPotentiallyOrphaned(e,l))})),J.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return J.resolve(i)}containsKey(e,t){return J.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,t){this.ai={},this.overlays={},this.ui=new Ud(0),this.ci=!1,this.ci=!0,this.li=new HR,this.referenceDelegate=e(this),this.hi=new GR(this),this.indexManager=new NR,this.remoteDocumentCache=(function(r){return new qR(r)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new PR(t),this.Ti=new UR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new WR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new $R(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){he("MemoryPersistence","Starting transaction:",e);const r=new YR(this.ui.next());return this.referenceDelegate.Ii(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ei(e,t){return J.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class YR extends TP{constructor(e){super(),this.currentSequenceNumber=e}}class Og{constructor(e){this.persistence=e,this.Ai=new Mg,this.Ri=null}static Vi(e){return new Og(e)}get mi(){if(this.Ri)return this.Ri;throw Ee(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),J.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),J.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((r=>this.mi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((o=>this.mi.add(o.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.mi,(i=>{const r=ve.fromPath(i);return this.fi(e,r).next((o=>{o||t.removeEntry(r,ke.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return J.or([()=>J.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class yd{constructor(e,t){this.persistence=e,this.gi=new So((i=>kP(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=jR(this,t)}static Vi(e,t){return new yd(e,t)}Ii(){}di(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return J.forEach(this.gi,((i,r)=>this.Sr(e,i,r).next((o=>o?J.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(e,(l=>this.Sr(e,l,t).next((c=>{c||(i++,o.removeEntry(l,ke.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),J.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),J.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$h(e.data.value)),t}Sr(e,t,i){return J.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.gi.get(t);return J.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=r}static Es(e,t){let i=Ve(),r=Ve();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Vg(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return $1()?8:SP(sn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,r){const o={result:null};return this.ps(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ys(e,t,r,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new QR;return this.ws(e,t,l).next((c=>{if(o.result=c,this.Rs)return this.Ss(e,t,l,c.size)}))})).next((()=>o.result))}Ss(e,t,i,r){return i.documentReadCount<this.Vs?(xa()<=Oe.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Ta(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),J.resolve()):(xa()<=Oe.DEBUG&&he("QueryEngine","Query:",Ta(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(xa()<=Oe.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Ta(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vi(t))):J.resolve())}ps(e,t){if($0(t))return J.resolve(null);let i=Vi(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=jm(t,null,"F"),i=Vi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=Ve(...o);return this.gs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((h=>{const f=this.bs(t,c);return this.Ds(t,f,l,h.readTime)?this.ps(e,jm(t,null,"F")):this.vs(e,f,t,h)}))))})))))}ys(e,t,i,r){return $0(t)||r.isEqual(ke.min())?J.resolve(null):this.gs.getDocuments(e,i).next((o=>{const l=this.bs(t,o);return this.Ds(t,l,i,r)?J.resolve(null):(xa()<=Oe.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ta(t)),this.vs(e,l,t,wP(r,Ac)).next((c=>c)))}))}bs(e,t){let i=new Dt(kx(e));return t.forEach(((r,o)=>{Kd(e,o)&&(i=i.add(o))})),i}Ds(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(e,t,i){return xa()<=Oe.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Ta(t)),this.gs.getDocumentsMatchingQuery(e,t,ms.min(),i)}vs(e,t,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="LocalStore",JR=3e8;class ZR{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new dt(Ne),this.Ms=new So((o=>kg(o)),Ag),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function eN(n,e,t,i){return new ZR(n,e,t,i)}async function Xx(n,e){const t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],c=[];let h=Ve();for(const f of r){l.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){c.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return t.localDocuments.getDocuments(i,h).next((f=>({Bs:f,removedBatchIds:l,addedBatchIds:c})))}))}))}function tN(n,e){const t=Ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(c,h,f,m){const y=f.batch,v=y.keys();let x=J.resolve();return v.forEach((S=>{x=x.next((()=>m.getEntry(h,S))).next((I=>{const k=f.docVersions.get(S);Ke(k!==null,48541),I.version.compareTo(k)<0&&(y.applyToRemoteDocument(I,f),I.isValidDocument()&&(I.setReadTime(f.commitVersion),m.addEntry(I)))}))})),x.next((()=>c.mutationQueue.removeMutationBatch(h,y)))})(t,i,e,o).next((()=>o.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let h=Ve();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(h=h.add(c.batch.mutations[f].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function Jx(n){const e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function nN(n,e){const t=Ce(n),i=e.snapshotVersion;let r=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Os.newChangeBuffer({trackRemovals:!0});r=t.Fs;const c=[];e.targetChanges.forEach(((m,y)=>{const v=r.get(y);if(!v)return;c.push(t.hi.removeMatchingKeys(o,m.removedDocuments,y).next((()=>t.hi.addMatchingKeys(o,m.addedDocuments,y))));let x=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?x=x.withResumeToken(qt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):m.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(m.resumeToken,i)),r=r.insert(y,x),(function(I,k,N){return I.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=JR?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(v,x,m)&&c.push(t.hi.updateTargetData(o,x))}));let h=Tr(),f=Ve();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))})),c.push(iN(o,l,e.documentUpdates).next((m=>{h=m.Ls,f=m.ks}))),!i.isEqual(ke.min())){const m=t.hi.getLastRemoteSnapshotVersion(o).next((y=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,i)));c.push(m)}return J.waitFor(c).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,h,f))).next((()=>h))})).then((o=>(t.Fs=r,o)))}function iN(n,e,t){let i=Ve(),r=Ve();return t.forEach((o=>i=i.add(o))),e.getEntries(n,i).next((o=>{let l=Tr();return t.forEach(((c,h)=>{const f=o.get(c);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),h.isNoDocument()&&h.version.isEqual(ke.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):he(Lg,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)})),{Ls:l,ks:r}}))}function rN(n,e){const t=Ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Tg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function sN(n,e){const t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.hi.getTargetData(i,e).next((o=>o?(r=o,J.resolve(r)):t.hi.allocateTargetId(i).next((l=>(r=new rs(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function Wm(n,e,t){const i=Ce(n),r=i.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Ja(l))throw l;he(Lg,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function rw(n,e,t){const i=Ce(n);let r=ke.min(),o=Ve();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,f,m){const y=Ce(h),v=y.Ms.get(m);return v!==void 0?J.resolve(y.Fs.get(v)):y.hi.getTargetData(f,m)})(i,l,Vi(e)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(l,c.targetId).next((h=>{o=h}))})).next((()=>i.Cs.getDocumentsMatchingQuery(l,e,t?r:ke.min(),t?o:Ve()))).next((c=>(oN(i,qP(e),c),{documents:c,qs:o})))))}function oN(n,e,t){let i=n.xs.get(e)||ke.min();t.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.xs.set(e,i)}class sw{constructor(){this.activeTargetIds=JP()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aN{constructor(){this.Fo=new sw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new sw,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="ConnectivityMonitor";class aw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){he(ow,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){he(ow,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh=null;function Hm(){return Sh===null?Sh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sh++,"0x"+Sh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="RestConnection",cN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uN{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===dd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,o){const l=Hm(),c=this.Go(e,t.toUriEncodedString());he(im,`Sending RPC '${e}' ${l}:`,c,i);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,r,o);const{host:f}=new URL(c),m=qa(f);return this.jo(e,c,h,i,m).then((y=>(he(im,`Received RPC '${e}' ${l}: `,y),y)),(y=>{throw ps(im,`RPC '${e}' ${l} failed with error: `,y,"url: ",c,"request:",i),y}))}Jo(e,t,i,r,o,l){return this.Wo(e,t,i,r,o)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,o)=>e[o]=r)),i&&i.headers.forEach(((r,o)=>e[o]=r))}Go(e,t){const i=cN[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class dN extends uN{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,r,o){const l=Hm();return new Promise(((c,h)=>{const f=new ZE;f.setWithCredentials(!0),f.listenOnce(ex.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Hh.NO_ERROR:const y=f.getResponseJson();he(Xt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case Hh.TIMEOUT:he(Xt,`RPC '${e}' ${l} timed out`),h(new le(X.DEADLINE_EXCEEDED,"Request time out"));break;case Hh.HTTP_ERROR:const v=f.getStatus();if(he(Xt,`RPC '${e}' ${l} failed with status:`,v,"response text:",f.getResponseText()),v>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const S=x==null?void 0:x.error;if(S&&S.status&&S.message){const I=(function(N){const L=N.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(L)>=0?L:X.UNKNOWN})(S.status);h(new le(I,S.message))}else h(new le(X.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new le(X.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{c_:e,streamId:l,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{he(Xt,`RPC '${e}' ${l} completed.`)}}));const m=JSON.stringify(r);he(Xt,`RPC '${e}' ${l} sending request:`,r),f.send(t,"POST",m,i,15)}))}P_(e,t,i){const r=Hm(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=ix(),c=nx(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,t,i),h.encodeInitMessageHeaders=!0;const m=o.join("");he(Xt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const y=l.createWebChannel(m,h);this.T_(y);let v=!1,x=!1;const S=new hN({Ho:k=>{x?he(Xt,`Not sending because RPC '${e}' stream ${r} is closed:`,k):(v||(he(Xt,`Opening RPC '${e}' stream ${r} transport.`),y.open(),v=!0),he(Xt,`RPC '${e}' stream ${r} sending:`,k),y.send(k))},Yo:()=>y.close()}),I=(k,N,L)=>{k.listen(N,(B=>{try{L(B)}catch(W){setTimeout((()=>{throw W}),0)}}))};return I(y,sc.EventType.OPEN,(()=>{x||(he(Xt,`RPC '${e}' stream ${r} transport opened.`),S.s_())})),I(y,sc.EventType.CLOSE,(()=>{x||(x=!0,he(Xt,`RPC '${e}' stream ${r} transport closed`),S.__(),this.I_(y))})),I(y,sc.EventType.ERROR,(k=>{x||(x=!0,ps(Xt,`RPC '${e}' stream ${r} transport errored. Name:`,k.name,"Message:",k.message),S.__(new le(X.UNAVAILABLE,"The operation could not be completed")))})),I(y,sc.EventType.MESSAGE,(k=>{var N;if(!x){const L=k.data[0];Ke(!!L,16349);const B=L,W=(B==null?void 0:B.error)||((N=B[0])===null||N===void 0?void 0:N.error);if(W){he(Xt,`RPC '${e}' stream ${r} received error:`,W);const K=W.status;let Z=(function(P){const O=Et[P];if(O!==void 0)return Fx(O)})(K),R=W.message;Z===void 0&&(Z=X.INTERNAL,R="Unknown error status: "+K+" with message "+W.message),x=!0,S.__(new le(Z,R)),y.close()}else he(Xt,`RPC '${e}' stream ${r} received:`,L),S.a_(L)}})),I(c,tx.STAT_EVENT,(k=>{k.stat===Rm.PROXY?he(Xt,`RPC '${e}' stream ${r} detected buffering proxy`):k.stat===Rm.NOPROXY&&he(Xt,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{S.o_()}),0),S}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(n){return new gR(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,t,i=1e3,r=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-i);r>0&&he("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="PersistentStream";class eT{constructor(e,t,i,r,o,l,c,h){this.Fi=e,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Zx(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(xr(t.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.b_===t&&this.W_(i,r)}),(i=>{e((()=>{const r=new le(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((r=>{i((()=>this.G_(r)))})),this.stream.onMessage((r=>{i((()=>++this.C_==1?this.j_(r):this.onNext(r)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return he(lw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(he(lw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class fN extends eT{constructor(e,t,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=_R(this.serializer,e),i=(function(o){if(!("targetChange"in o))return ke.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ke.min():l.readTime?Li(l.readTime):ke.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=Um(this.serializer),t.addTarget=(function(o,l){let c;const h=l.target;if(c=Vm(h)?{documents:ER(o,h)}:{query:xR(o,h).Vt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=Ux(o,l.resumeToken);const f=Fm(o,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(ke.min())>0){c.readTime=gd(o,l.snapshotVersion.toTimestamp());const f=Fm(o,l.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,e);const i=SR(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=Um(this.serializer),t.removeTarget=e,this.k_(t)}}class pN extends eT{constructor(e,t,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=bR(e.writeResults,e.commitTime),i=Li(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=Um(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>wR(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{}class gN extends mN{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new le(X.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Wo(e,zm(t,i),r,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(X.UNKNOWN,o.toString())}))}Jo(e,t,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Jo(e,zm(t,i),r,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le(X.UNKNOWN,l.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class yN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xr(t),this._a=!1):he("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="RemoteStore";class vN{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo((l=>{i.enqueueAndForget((async()=>{Io(this)&&(he(vo,"Restarting streams for network reachability change."),await(async function(h){const f=Ce(h);f.Ia.add(4),await Jc(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Jd(f)})(this))}))})),this.Aa=new yN(i,r)}}async function Jd(n){if(Io(n))for(const e of n.da)await e(!0)}async function Jc(n){for(const e of n.da)await e(!1)}function tT(n,e){const t=Ce(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Bg(t)?zg(t):el(t).x_()&&Fg(t,e))}function jg(n,e){const t=Ce(n),i=el(t);t.Ta.delete(e),i.x_()&&nT(t,e),t.Ta.size===0&&(i.x_()?i.B_():Io(t)&&t.Aa.set("Unknown"))}function Fg(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}el(n).H_(e)}function nT(n,e){n.Ra.$e(e),el(n).Y_(e)}function zg(n){n.Ra=new dR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),el(n).start(),n.Aa.aa()}function Bg(n){return Io(n)&&!el(n).M_()&&n.Ta.size>0}function Io(n){return Ce(n).Ia.size===0}function iT(n){n.Ra=void 0}async function _N(n){n.Aa.set("Online")}async function wN(n){n.Ta.forEach(((e,t)=>{Fg(n,e)}))}async function bN(n,e){iT(n),Bg(n)?(n.Aa.la(e),zg(n)):n.Aa.set("Unknown")}async function EN(n,e,t){if(n.Aa.set("Online"),e instanceof Bx&&e.state===2&&e.cause)try{await(async function(r,o){const l=o.cause;for(const c of o.targetIds)r.Ta.has(c)&&(await r.remoteSyncer.rejectListen(c,l),r.Ta.delete(c),r.Ra.removeTarget(c))})(n,e)}catch(i){he(vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await vd(n,i)}else if(e instanceof Gh?n.Ra.Ye(e):e instanceof zx?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ke.min()))try{const i=await Jx(n.localStore);t.compareTo(i)>=0&&await(function(o,l){const c=o.Ra.Pt(l);return c.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ta.get(f);m&&o.Ta.set(f,m.withResumeToken(h.resumeToken,l))}})),c.targetMismatches.forEach(((h,f)=>{const m=o.Ta.get(h);if(!m)return;o.Ta.set(h,m.withResumeToken(qt.EMPTY_BYTE_STRING,m.snapshotVersion)),nT(o,h);const y=new rs(m.target,h,f,m.sequenceNumber);Fg(o,y)})),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(i){he(vo,"Failed to raise snapshot:",i),await vd(n,i)}}async function vd(n,e,t){if(!Ja(e))throw e;n.Ia.add(1),await Jc(n),n.Aa.set("Offline"),t||(t=()=>Jx(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{he(vo,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Jd(n)}))}function rT(n,e){return e().catch((t=>vd(n,t,e)))}async function Zd(n){const e=Ce(n),t=_s(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Tg;for(;xN(e);)try{const r=await rN(e.localStore,i);if(r===null){e.Pa.length===0&&t.B_();break}i=r.batchId,TN(e,r)}catch(r){await vd(e,r)}sT(e)&&oT(e)}function xN(n){return Io(n)&&n.Pa.length<10}function TN(n,e){n.Pa.push(e);const t=_s(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function sT(n){return Io(n)&&!_s(n).M_()&&n.Pa.length>0}function oT(n){_s(n).start()}async function SN(n){_s(n).na()}async function IN(n){const e=_s(n);for(const t of n.Pa)e.X_(t.mutations)}async function kN(n,e,t){const i=n.Pa.shift(),r=Rg.from(i,e,t);await rT(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Zd(n)}async function AN(n,e){e&&_s(n).Z_&&await(async function(i,r){if((function(l){return uR(l)&&l!==X.ABORTED})(r.code)){const o=i.Pa.shift();_s(i).N_(),await rT(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Zd(i)}})(n,e),sT(n)&&oT(n)}async function cw(n,e){const t=Ce(n);t.asyncQueue.verifyOperationInProgress(),he(vo,"RemoteStore received new credentials");const i=Io(t);t.Ia.add(3),await Jc(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Jd(t)}async function CN(n,e){const t=Ce(n);e?(t.Ia.delete(2),await Jd(t)):e||(t.Ia.add(2),await Jc(t),t.Aa.set("Unknown"))}function el(n){return n.Va||(n.Va=(function(t,i,r){const o=Ce(t);return o.ia(),new fN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Zo:_N.bind(null,n),e_:wN.bind(null,n),n_:bN.bind(null,n),J_:EN.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Bg(n)?zg(n):n.Aa.set("Unknown")):(await n.Va.stop(),iT(n))}))),n.Va}function _s(n){return n.ma||(n.ma=(function(t,i,r){const o=Ce(t);return o.ia(),new pN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:SN.bind(null,n),n_:AN.bind(null,n),ea:IN.bind(null,n),ta:kN.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await Zd(n)):(await n.ma.stop(),n.Pa.length>0&&(he(vo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){const l=Date.now()+i,c=new Ug(e,t,l,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wg(n,e){if(xr("AsyncQueue",`${e}: ${n}`),Ja(n))return new le(X.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{static emptySet(e){return new Pa(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ve.comparator(t.key,i.key):(t,i)=>ve.comparator(t.key,i.key),this.keyedMap=oc(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Pa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(){this.fa=new dt(ve.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ee(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class za{constructor(e,t,i,r,o,l,c,h,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,o){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new za(e,t,Pa.emptySet(t),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class RN{constructor(){this.queries=hw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const r=Ce(t),o=r.queries;r.queries=hw(),o.forEach(((l,c)=>{for(const h of c.wa)h.onError(i)}))})(this,new le(X.ABORTED,"Firestore shutting down"))}}function hw(){return new So((n=>Ix(n)),qd)}async function Hg(n,e){const t=Ce(n);let i=3;const r=e.query;let o=t.queries.get(r);o?!o.Sa()&&e.ba()&&(i=2):(o=new PN,i=e.ba()?0:1);try{switch(i){case 0:o.ya=await t.onListen(r,!0);break;case 1:o.ya=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(l){const c=Wg(l,`Initialization of query '${Ta(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&qg(t)}async function $g(n,e){const t=Ce(n),i=e.query;let r=3;const o=t.queries.get(i);if(o){const l=o.wa.indexOf(e);l>=0&&(o.wa.splice(l,1),o.wa.length===0?r=e.ba()?0:1:!o.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function NN(n,e){const t=Ce(n);let i=!1;for(const r of e){const o=r.query,l=t.queries.get(o);if(l){for(const c of l.wa)c.Ca(r)&&(i=!0);l.ya=r}}i&&qg(t)}function DN(n,e,t){const i=Ce(n),r=i.queries.get(e);if(r)for(const o of r.wa)o.onError(t);i.queries.delete(e)}function qg(n){n.Da.forEach((e=>{e.next()}))}var $m,dw;(dw=$m||($m={})).Fa="default",dw.Cache="cache";class Kg{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new za(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==$m.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.key=e}}class lT{constructor(e){this.key=e}}class MN{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ve(),this.mutatedKeys=Ve(),this.Xa=kx(e),this.eu=new Pa(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new uw,r=t?t.eu:this.eu;let o=t?t.mutatedKeys:this.mutatedKeys,l=r,c=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((m,y)=>{const v=r.get(m),x=Kd(this.query,y)?y:null,S=!!v&&this.mutatedKeys.has(v.key),I=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let k=!1;v&&x?v.data.isEqual(x.data)?S!==I&&(i.track({type:3,doc:x}),k=!0):this.iu(v,x)||(i.track({type:2,doc:x}),k=!0,(h&&this.Xa(x,h)>0||f&&this.Xa(x,f)<0)&&(c=!0)):!v&&x?(i.track({type:0,doc:x}),k=!0):v&&!x&&(i.track({type:1,doc:v}),k=!0,(h||f)&&(c=!0)),k&&(x?(l=l.add(x),o=I?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{eu:l,ru:i,Ds:c,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort(((m,y)=>(function(x,S){const I=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{At:k})}};return I(x)-I(S)})(m.type,y.type)||this.Xa(m.doc,y.doc))),this.su(i),r=r!=null&&r;const c=t&&!r?this.ou():[],h=this.Za.size===0&&this.current&&!r?1:0,f=h!==this.Ya;return this.Ya=h,l.length!==0||f?{snapshot:new za(this.query,e.eu,o,l,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new uw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ve(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new lT(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new aT(i))})),t}uu(e){this.Ha=e.qs,this.Za=Ve();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return za.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Gg="SyncEngine";class ON{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class VN{constructor(e){this.key=e,this.lu=!1}}class LN{constructor(e,t,i,r,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new So((c=>Ix(c)),qd),this.Tu=new Map,this.Iu=new Set,this.du=new dt(ve.comparator),this.Eu=new Map,this.Au=new Mg,this.Ru={},this.Vu=new Map,this.mu=Fa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function jN(n,e,t=!0){const i=pT(n);let r;const o=i.Pu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=await cT(i,e,t,!0),r}async function FN(n,e){const t=pT(n);await cT(t,e,!0,!1)}async function cT(n,e,t,i){const r=await sN(n.localStore,Vi(e)),o=r.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return i&&(c=await zN(n,e,o,l==="current",r.resumeToken)),n.isPrimaryClient&&t&&tT(n.remoteStore,r),c}async function zN(n,e,t,i,r){n.gu=(y,v,x)=>(async function(I,k,N,L){let B=k.view.nu(N);B.Ds&&(B=await rw(I.localStore,k.query,!1).then((({documents:R})=>k.view.nu(R,B))));const W=L&&L.targetChanges.get(k.targetId),K=L&&L.targetMismatches.get(k.targetId)!=null,Z=k.view.applyChanges(B,I.isPrimaryClient,W,K);return pw(I,k.targetId,Z._u),Z.snapshot})(n,y,v,x);const o=await rw(n.localStore,e,!0),l=new MN(e,o.qs),c=l.nu(o.documents),h=Xc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=l.applyChanges(c,n.isPrimaryClient,h);pw(n,t,f._u);const m=new ON(e,t,l);return n.Pu.set(e,m),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),f.snapshot}async function BN(n,e,t){const i=Ce(n),r=i.Pu.get(e),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter((l=>!qd(l,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Wm(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&jg(i.remoteStore,r.targetId),qm(i,r.targetId)})).catch(Xa)):(qm(i,r.targetId),await Wm(i.localStore,r.targetId,!0))}async function UN(n,e){const t=Ce(n),i=t.Pu.get(e),r=t.Tu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),jg(t.remoteStore,i.targetId))}async function WN(n,e,t){const i=QN(n);try{const r=await(function(l,c){const h=Ce(l),f=ot.now(),m=c.reduce(((x,S)=>x.add(S.key)),Ve());let y,v;return h.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let S=Tr(),I=Ve();return h.Os.getEntries(x,m).next((k=>{S=k,S.forEach(((N,L)=>{L.isValidDocument()||(I=I.add(N))}))})).next((()=>h.localDocuments.getOverlayedDocuments(x,S))).next((k=>{y=k;const N=[];for(const L of c){const B=sR(L,y.get(L.key).overlayedDocument);B!=null&&N.push(new xs(L.key,B,vx(B.value.mapValue),Kn.exists(!0)))}return h.mutationQueue.addMutationBatch(x,f,N,c)})).next((k=>{v=k;const N=k.applyToLocalDocumentSet(y,I);return h.documentOverlayCache.saveOverlays(x,k.batchId,N)}))})).then((()=>({batchId:v.batchId,changes:Cx(y)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(l,c,h){let f=l.Ru[l.currentUser.toKey()];f||(f=new dt(Ne)),f=f.insert(c,h),l.Ru[l.currentUser.toKey()]=f})(i,r.batchId,t),await Zc(i,r.changes),await Zd(i.remoteStore)}catch(r){const o=Wg(r,"Failed to persist write");t.reject(o)}}async function uT(n,e){const t=Ce(n);try{const i=await nN(t.localStore,e);e.targetChanges.forEach(((r,o)=>{const l=t.Eu.get(o);l&&(Ke(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.lu=!0:r.modifiedDocuments.size>0?Ke(l.lu,14607):r.removedDocuments.size>0&&(Ke(l.lu,42227),l.lu=!1))})),await Zc(t,i,e)}catch(i){await Xa(i)}}function fw(n,e,t){const i=Ce(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Pu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(l,c){const h=Ce(l);h.onlineState=c;let f=!1;h.queries.forEach(((m,y)=>{for(const v of y.wa)v.va(c)&&(f=!0)})),f&&qg(h)})(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function HN(n,e,t){const i=Ce(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Eu.get(e),o=r&&r.key;if(o){let l=new dt(ve.comparator);l=l.insert(o,en.newNoDocument(o,ke.min()));const c=Ve().add(o),h=new Qd(ke.min(),new Map,new dt(Ne),l,c);await uT(i,h),i.du=i.du.remove(o),i.Eu.delete(e),Yg(i)}else await Wm(i.localStore,e,!1).then((()=>qm(i,e,t))).catch(Xa)}async function $N(n,e){const t=Ce(n),i=e.batch.batchId;try{const r=await tN(t.localStore,e);dT(t,i,null),hT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Zc(t,r)}catch(r){await Xa(r)}}async function qN(n,e,t){const i=Ce(n);try{const r=await(function(l,c){const h=Ce(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let m;return h.mutationQueue.lookupMutationBatch(f,c).next((y=>(Ke(y!==null,37113),m=y.keys(),h.mutationQueue.removeMutationBatch(f,y)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,c))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m))).next((()=>h.localDocuments.getDocuments(f,m)))}))})(i.localStore,e);dT(i,e,t),hT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Zc(i,r)}catch(r){await Xa(r)}}function hT(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function dT(n,e,t){const i=Ce(n);let r=i.Ru[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function qm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||fT(n,i)}))}function fT(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(jg(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Yg(n))}function pw(n,e,t){for(const i of t)i instanceof aT?(n.Au.addReference(i.key,e),KN(n,i)):i instanceof lT?(he(Gg,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||fT(n,i.key)):Ee(19791,{yu:i})}function KN(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(he(Gg,"New document in limbo: "+t),n.Iu.add(i),Yg(n))}function Yg(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new ve(nt.fromString(e)),i=n.mu.next();n.Eu.set(i,new VN(t)),n.du=n.du.insert(t,i),tT(n.remoteStore,new rs(Vi($d(t.path)),i,"TargetPurposeLimboResolution",Ud.ue))}}async function Zc(n,e,t){const i=Ce(n),r=[],o=[],l=[];i.Pu.isEmpty()||(i.Pu.forEach(((c,h)=>{l.push(i.gu(h,e,t).then((f=>{var m;if((f||t)&&i.isPrimaryClient){const y=f?!f.fromCache:(m=t==null?void 0:t.targetChanges.get(h.targetId))===null||m===void 0?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(f){r.push(f);const y=Vg.Es(h.targetId,f);o.push(y)}})))})),await Promise.all(l),i.hu.J_(r),await(async function(h,f){const m=Ce(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>J.forEach(f,(v=>J.forEach(v.Is,(x=>m.persistence.referenceDelegate.addReference(y,v.targetId,x))).next((()=>J.forEach(v.ds,(x=>m.persistence.referenceDelegate.removeReference(y,v.targetId,x)))))))))}catch(y){if(!Ja(y))throw y;he(Lg,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const x=m.Fs.get(v),S=x.snapshotVersion,I=x.withLastLimboFreeSnapshotVersion(S);m.Fs=m.Fs.insert(v,I)}}})(i.localStore,o))}async function GN(n,e){const t=Ce(n);if(!t.currentUser.isEqual(e)){he(Gg,"User change. New user:",e.toKey());const i=await Xx(t.localStore,e);t.currentUser=e,(function(o,l){o.Vu.forEach((c=>{c.forEach((h=>{h.reject(new le(X.CANCELLED,l))}))})),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Zc(t,i.Bs)}}function YN(n,e){const t=Ce(n),i=t.Eu.get(e);if(i&&i.lu)return Ve().add(i.key);{let r=Ve();const o=t.Tu.get(e);if(!o)return r;for(const l of o){const c=t.Pu.get(l);r=r.unionWith(c.view.tu)}return r}}function pT(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=uT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HN.bind(null,e),e.hu.J_=NN.bind(null,e.eventManager),e.hu.pu=DN.bind(null,e.eventManager),e}function QN(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$N.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qN.bind(null,e),e}class _d{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return eN(this.persistence,new XR,e.initialUser,this.serializer)}Du(e){return new Qx(Og.Vi,this.serializer)}bu(e){return new aN}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_d.provider={build:()=>new _d};class XN extends _d{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ke(this.persistence.referenceDelegate instanceof yd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new VR(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new Qx((i=>yd.Vi(i,t)),this.serializer)}}class Km{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>fw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=GN.bind(null,this.syncEngine),await CN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new RN})()}createDatastore(e){const t=Xd(e.databaseInfo.databaseId),i=(function(o){return new dN(o)})(e.databaseInfo);return(function(o,l,c,h){return new gN(o,l,c,h)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,o,l,c){return new vN(i,r,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>fw(this.syncEngine,t,0)),(function(){return aw.C()?new aw:new lN})())}createSyncEngine(e,t){return(function(r,o,l,c,h,f,m){const y=new LN(r,o,l,c,h,f);return m&&(y.fu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const o=Ce(r);he(vo,"RemoteStore shutting down."),o.Ia.add(5),await Jc(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Km.provider={build:()=>new Km};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="FirestoreClient";class JN{constructor(e,t,i,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Zt.UNAUTHENTICATED,this.clientId=xg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{he(ws,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(he(ws,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Wg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function sm(n,e){n.asyncQueue.verifyOperationInProgress(),he(ws,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await Xx(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>{ps("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{he("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((r=>{ps("Terminating Firestore due to IndexedDb database deletion failed",r)}))})),n._offlineComponents=e}async function mw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await ZN(n);he(ws,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>cw(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>cw(e.remoteStore,r))),n._onlineComponents=e}async function ZN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(ws,"Using user provided OfflineComponentProvider");try{await sm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===X.FAILED_PRECONDITION||r.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;ps("Error using user provided cache. Falling back to memory cache: "+t),await sm(n,new _d)}}else he(ws,"Using default OfflineComponentProvider"),await sm(n,new XN(void 0));return n._offlineComponents}async function mT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(ws,"Using user provided OnlineComponentProvider"),await mw(n,n._uninitializedComponentsProvider._online)):(he(ws,"Using default OnlineComponentProvider"),await mw(n,new Km))),n._onlineComponents}function eD(n){return mT(n).then((e=>e.syncEngine))}async function wd(n){const e=await mT(n),t=e.eventManager;return t.onListen=jN.bind(null,e.syncEngine),t.onUnlisten=BN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=FN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=UN.bind(null,e.syncEngine),t}function tD(n,e,t={}){const i=new wr;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,h,f){const m=new Qg({next:v=>{m.Ou(),l.enqueueAndForget((()=>$g(o,y)));const x=v.docs.has(c);!x&&v.fromCache?f.reject(new le(X.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&v.fromCache&&h&&h.source==="server"?f.reject(new le(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new Kg($d(c.path),m,{includeMetadataChanges:!0,ka:!0});return Hg(o,y)})(await wd(n),n.asyncQueue,e,t,i))),i.promise}function nD(n,e,t={}){const i=new wr;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,h,f){const m=new Qg({next:v=>{m.Ou(),l.enqueueAndForget((()=>$g(o,y))),v.fromCache&&h.source==="server"?f.reject(new le(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new Kg(c,m,{includeMetadataChanges:!0,ka:!0});return Hg(o,y)})(await wd(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="firestore.googleapis.com",yw=!0;class vw{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new le(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yT,this.ssl=yw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:yw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Yx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MR)throw new le(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_P("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gT((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ef{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new uP;switch(i.type){case"firstParty":return new pP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new le(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=gw.get(t);i&&(he("ComponentProvider","Removing Datastore"),gw.delete(t),i.terminate())})(this),Promise.resolve()}}function iD(n,e,t,i={}){var r;n=xn(n,ef);const o=qa(e),l=n._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:n._getEmulatorOptions()}),h=`${e}:${t}`;o&&(fE(`https://${h}`),pE("Firestore",!0)),l.host!==yT&&l.host!==h&&ps("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},l),{host:h,ssl:o,emulatorOptions:i});if(!fs(f,c)&&(n._setSettings(f),i.mockUserToken)){let m,y;if(typeof i.mockUserToken=="string")m=i.mockUserToken,y=Zt.MOCK_USER;else{m=V1(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new le(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Zt(v)}n._authCredentials=new hP(new sx(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ts(this.firestore,e,this._query)}}class pt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Yc(t,pt._jsonSchema))return new pt(e,i||null,new ve(nt.fromString(t.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:Tt("string",pt._jsonSchemaVersion),referencePath:Tt("string")};class hs extends Ts{constructor(e,t,i){super(e,t,$d(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new ve(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function Ba(n,e,...t){if(n=St(n),ax("collection","path",e),n instanceof ef){const i=nt.fromString(e,...t);return R0(i),new hs(n,null,i)}{if(!(n instanceof pt||n instanceof hs))throw new le(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(nt.fromString(e,...t));return R0(i),new hs(n.firestore,null,i)}}function ji(n,e,...t){if(n=St(n),arguments.length===1&&(e=xg.newId()),ax("doc","path",e),n instanceof ef){const i=nt.fromString(e,...t);return P0(i),new pt(n,null,new ve(i))}{if(!(n instanceof pt||n instanceof hs))throw new le(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(nt.fromString(e,...t));return P0(i),new pt(n.firestore,n instanceof hs?n.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="AsyncQueue";class ww{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Zx(this,"async_queue_retry"),this.oc=()=>{const i=rm();i&&he(_w,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=rm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=rm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new wr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ja(e))throw e;he(_w,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,xr("INTERNAL UNHANDLED ERROR: ",bw(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const r=Ug.createAndSchedule(this,e,t,i,(o=>this.lc(o)));return this.ec.push(r),r}ac(){this.tc&&Ee(47125,{hc:bw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function bw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(n,["next","error","complete"])}class Sr extends ef{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new ww,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ww(e),this._firestoreClient=void 0,await e}}}function rD(n,e){const t=typeof n=="object"?n:ug(),i=typeof n=="string"?n:dd,r=Ka(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=M1("firestore");o&&iD(r,...o)}return r}function tf(n){if(n._terminated)throw new le(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||sD(n),n._firestoreClient}function sD(n){var e,t,i;const r=n._freezeSettings(),o=(function(c,h,f,m){return new PP(c,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,gT(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new JN(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hn(qt.fromBase64String(e))}catch(t){throw new le(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hn(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yc(e,Hn._jsonSchema))return Hn.fromBase64String(e.bytes)}}Hn._jsonSchemaVersion="firestore/bytes/1.0",Hn._jsonSchema={type:Tt("string",Hn._jsonSchemaVersion),bytes:Tt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fi._jsonSchemaVersion}}static fromJSON(e){if(Yc(e,Fi._jsonSchema))return new Fi(e.latitude,e.longitude)}}Fi._jsonSchemaVersion="firestore/geoPoint/1.0",Fi._jsonSchema={type:Tt("string",Fi._jsonSchemaVersion),latitude:Tt("number"),longitude:Tt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yc(e,zi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new zi(e.vectorValues);throw new le(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zi._jsonSchemaVersion="firestore/vectorValue/1.0",zi._jsonSchema={type:Tt("string",zi._jsonSchemaVersion),vectorValues:Tt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=/^__.*__$/;class aD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new xs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qc(e,this.data,t,this.fieldTransforms)}}class vT{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new xs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _T(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ec:n})}}class rf{constructor(e,t,i,r,o,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new rf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return bd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(_T(this.Ec)&&oD.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class lD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Xd(e)}Dc(e,t,i,r=!1){return new rf({Ec:e,methodName:t,bc:i,path:$t.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sf(n){const e=n._freezeSettings(),t=Xd(n._databaseId);return new lD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wT(n,e,t,i,r,o={}){const l=n.Dc(o.merge||o.mergeFields?2:0,e,t,r);Zg("Data must be an object, but it was:",l,i);const c=bT(i,l);let h,f;if(o.merge)h=new Rn(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const y of o.mergeFields){const v=Gm(e,y,t);if(!l.contains(v))throw new le(X.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);xT(m,v)||m.push(v)}h=new Rn(m),f=l.fieldTransforms.filter((y=>h.covers(y.field)))}else h=null,f=l.fieldTransforms;return new aD(new bn(c),h,f)}class of extends eu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof of}}function cD(n,e,t){return new rf({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Xg extends eu{_toFieldTransform(e){return new Vx(e.path,new Dc)}isEqual(e){return e instanceof Xg}}class Jg extends eu{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=cD(this,e,!0),i=this.vc.map((o=>tl(o,t))),r=new ja(i);return new Vx(e.path,r)}isEqual(e){return e instanceof Jg&&fs(this.vc,e.vc)}}function uD(n,e,t,i){const r=n.Dc(1,e,t);Zg("Data must be an object, but it was:",r,i);const o=[],l=bn.empty();Es(i,((h,f)=>{const m=ey(e,h,t);f=St(f);const y=r.gc(m);if(f instanceof of)o.push(m);else{const v=tl(f,y);v!=null&&(o.push(m),l.set(m,v))}}));const c=new Rn(o);return new vT(l,c,r.fieldTransforms)}function hD(n,e,t,i,r,o){const l=n.Dc(1,e,t),c=[Gm(e,i,t)],h=[r];if(o.length%2!=0)throw new le(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)c.push(Gm(e,o[v])),h.push(o[v+1]);const f=[],m=bn.empty();for(let v=c.length-1;v>=0;--v)if(!xT(f,c[v])){const x=c[v];let S=h[v];S=St(S);const I=l.gc(x);if(S instanceof of)f.push(x);else{const k=tl(S,I);k!=null&&(f.push(x),m.set(x,k))}}const y=new Rn(f);return new vT(m,y,l.fieldTransforms)}function dD(n,e,t,i=!1){return tl(t,n.Dc(i?4:3,e))}function tl(n,e){if(ET(n=St(n)))return Zg("Unsupported field value:",e,n),bT(n,e);if(n instanceof eu)return(function(i,r){if(!_T(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,r){const o=[];let l=0;for(const c of i){let h=tl(c,r.yc(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}})(n,e)}return(function(i,r){if((i=St(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ZP(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=ot.fromDate(i);return{timestampValue:gd(r.serializer,o)}}if(i instanceof ot){const o=new ot(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:gd(r.serializer,o)}}if(i instanceof Fi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Hn)return{bytesValue:Ux(r.serializer,i._byteString)};if(i instanceof pt){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Dg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof zi)return(function(l,c){return{mapValue:{fields:{[gx]:{stringValue:yx},[fd]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw c.wc("VectorValues must only contain numeric values.");return Cg(c.serializer,f)}))}}}}}})(i,r);throw r.wc(`Unsupported field value: ${Bd(i)}`)})(n,e)}function bT(n,e){const t={};return ux(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(n,((i,r)=>{const o=tl(r,e.Vc(i));o!=null&&(t[i]=o)})),{mapValue:{fields:t}}}function ET(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ot||n instanceof Fi||n instanceof Hn||n instanceof pt||n instanceof eu||n instanceof zi)}function Zg(n,e,t){if(!ET(t)||!lx(t)){const i=Bd(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function Gm(n,e,t){if((e=St(e))instanceof nf)return e._internalPath;if(typeof e=="string")return ey(n,e);throw bd("Field path arguments must be of type string or ",n,!1,void 0,t)}const fD=new RegExp("[~\\*/\\[\\]]");function ey(n,e,t){if(e.search(fD)>=0)throw bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nf(...e.split("."))._internalPath}catch{throw bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bd(n,e,t,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${i}`),l&&(h+=` in document ${r}`),h+=")"),new le(X.INVALID_ARGUMENT,c+n+h)}function xT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(af("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class pD extends TT{data(){return super.data()}}function af(n,e){return typeof e=="string"?ey(n,e):e instanceof nf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new le(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ty{}class IT extends ty{}function ny(n,e,...t){let i=[];e instanceof ty&&i.push(e),i=i.concat(t),(function(o){const l=o.filter((h=>h instanceof iy)).length,c=o.filter((h=>h instanceof lf)).length;if(l>1||l>0&&c>0)throw new le(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class lf extends IT{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new lf(e,t,i)}_apply(e){const t=this._parse(e);return AT(e._query,t),new Ts(e.firestore,e.converter,Lm(e._query,t))}_parse(e){const t=sf(e.firestore);return(function(o,l,c,h,f,m,y){let v;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new le(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Tw(y,m);const S=[];for(const I of y)S.push(xw(h,o,I));v={arrayValue:{values:S}}}else v=xw(h,o,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Tw(y,m),v=dD(c,l,y,m==="in"||m==="not-in");return xt.create(f,m,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function mD(n,e,t){const i=e,r=af("where",n);return lf._create(r,i,t)}class iy extends ty{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new iy(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:gi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,o){let l=r;const c=o.getFlattenedFilters();for(const h of c)AT(l,h),l=Lm(l,h)})(e._query,t),new Ts(e.firestore,e.converter,Lm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ry extends IT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ry(e,t)}_apply(e){const t=(function(r,o,l){if(r.startAt!==null)throw new le(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new le(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nc(o,l)})(e._query,this._field,this._direction);return new Ts(e.firestore,e.converter,(function(r,o){const l=r.explicitOrderBy.concat([o]);return new Za(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}}function kT(n,e="asc"){const t=e,i=af("orderBy",n);return ry._create(i,t)}function xw(n,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new le(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sx(e)&&t.indexOf("/")!==-1)throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(nt.fromString(t));if(!ve.isDocumentKey(i))throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return F0(n,new ve(i))}if(t instanceof pt)return F0(n,t._key);throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bd(t)}.`)}function Tw(n,e){if(!Array.isArray(n)||n.length===0)throw new le(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AT(n,e){const t=(function(r,o){for(const l of r)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class gD{convertValue(e,t="none"){switch(vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Es(e,((r,o)=>{i[r]=this.convertValue(o,t)})),i}convertVectorValue(e){var t,i,r;const o=(r=(i=(t=e.fields)===null||t===void 0?void 0:t[fd].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map((l=>vt(l.doubleValue)));return new zi(o)}convertGeoPoint(e){return new Fi(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Hd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Cc(e));default:return null}}convertTimestamp(e){const t=gs(e);return new ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=nt.fromString(e);Ke(Gx(i),9688,{name:e});const r=new Pc(i.get(1),i.get(3)),o=new ve(i.popFirst(5));return r.isEqual(t)||xr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class lc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ho extends TT{constructor(e,t,i,r,o,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(af("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ho._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ho._jsonSchemaVersion="firestore/documentSnapshot/1.0",ho._jsonSchema={type:Tt("string",ho._jsonSchemaVersion),bundleSource:Tt("string","DocumentSnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class Yh extends ho{data(e={}){return super.data(e)}}class fo{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new lc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Yh(this._firestore,this._userDataWriter,i.key,i,new lc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((c=>{const h=new Yh(r._firestore,r._userDataWriter,c.doc.key,c.doc,new lc(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const h=new Yh(r._firestore,r._userDataWriter,c.doc.key,c.doc,new lc(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),m=l.indexOf(c.doc.key)),{type:yD(c.type),doc:h,oldIndex:f,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(n){n=xn(n,pt);const e=xn(n.firestore,Sr);return tD(tf(e),n._key).then((t=>MT(e,n,t)))}fo._jsonSchemaVersion="firestore/querySnapshot/1.0",fo._jsonSchema={type:Tt("string",fo._jsonSchemaVersion),bundleSource:Tt("string","QuerySnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class sy extends gD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,t)}}function vD(n){n=xn(n,Ts);const e=xn(n.firestore,Sr),t=tf(e),i=new sy(e);return ST(n._query),nD(t,n._query).then((r=>new fo(e,i,n,r)))}function RT(n,e,t){n=xn(n,pt);const i=xn(n.firestore,Sr),r=CT(n.converter,e,t);return cf(i,[wT(sf(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Kn.none())])}function Ed(n,e,t,...i){n=xn(n,pt);const r=xn(n.firestore,Sr),o=sf(r);let l;return l=typeof(e=St(e))=="string"||e instanceof nf?hD(o,"updateDoc",n._key,e,t,i):uD(o,"updateDoc",n._key,e),cf(r,[l.toMutation(n._key,Kn.exists(!0))])}function NT(n){return cf(xn(n.firestore,Sr),[new Pg(n._key,Kn.none())])}function oy(n,e){const t=xn(n.firestore,Sr),i=ji(n),r=CT(n.converter,e);return cf(t,[wT(sf(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Kn.exists(!1))]).then((()=>i))}function DT(n,...e){var t,i,r;n=St(n);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||Ew(e[l])||(o=e[l++]);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Ew(e[l])){const y=e[l];e[l]=(t=y.next)===null||t===void 0?void 0:t.bind(y),e[l+1]=(i=y.error)===null||i===void 0?void 0:i.bind(y),e[l+2]=(r=y.complete)===null||r===void 0?void 0:r.bind(y)}let h,f,m;if(n instanceof pt)f=xn(n.firestore,Sr),m=$d(n._key.path),h={next:y=>{e[l]&&e[l](MT(f,n,y))},error:e[l+1],complete:e[l+2]};else{const y=xn(n,Ts);f=xn(y.firestore,Sr),m=y._query;const v=new sy(f);h={next:x=>{e[l]&&e[l](new fo(f,v,y,x))},error:e[l+1],complete:e[l+2]},ST(n._query)}return(function(v,x,S,I){const k=new Qg(I),N=new Kg(x,k,S);return v.asyncQueue.enqueueAndForget((async()=>Hg(await wd(v),N))),()=>{k.Ou(),v.asyncQueue.enqueueAndForget((async()=>$g(await wd(v),N)))}})(tf(f),m,c,h)}function cf(n,e){return(function(i,r){const o=new wr;return i.asyncQueue.enqueueAndForget((async()=>WN(await eD(i),r,o))),o.promise})(tf(n),e)}function MT(n,e,t){const i=t.docs.get(e._key),r=new sy(n);return new ho(n,r,e._key,i,new lc(t.hasPendingWrites,t.fromCache),e.converter)}function xd(){return new Xg("serverTimestamp")}function Sw(...n){return new Jg("arrayUnion",n)}(function(e,t=!0){(function(r){Qa=r})(Ga),Ui(new mi("firestore",((i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),c=new Sr(new dP(i.getProvider("auth-internal")),new mP(l,i.getProvider("app-check-internal")),(function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new le(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pc(f.options.projectId,m)})(l,r),l);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),qn(S0,I0,e),qn(S0,I0,"esm2017")})();const OT="@firebase/installations",ay="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=1e4,LT=`w:${ay}`,jT="FIS_v2",_D="https://firebaseinstallations.googleapis.com/v1",wD=3600*1e3,bD="installations",ED="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},_o=new To(bD,ED,xD);function FT(n){return n instanceof $i&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT({projectId:n}){return`${_D}/projects/${n}/installations`}function BT(n){return{token:n.token,requestStatus:2,expiresIn:SD(n.expiresIn),creationTime:Date.now()}}async function UT(n,e){const i=(await e.json()).error;return _o.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function WT({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function TD(n,{refreshToken:e}){const t=WT(n);return t.append("Authorization",ID(e)),t}async function HT(n){const e=await n();return e.status>=500&&e.status<600?n():e}function SD(n){return Number(n.replace("s","000"))}function ID(n){return`${jT} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=zT(n),r=WT(n),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const l={fid:t,authVersion:jT,appId:n.appId,sdkVersion:LT},c={method:"POST",headers:r,body:JSON.stringify(l)},h=await HT(()=>fetch(i,c));if(h.ok){const f=await h.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:BT(f.authToken)}}else throw await UT("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=/^[cdef][\w-]{21}$/,Ym="";function PD(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=RD(n);return CD.test(t)?t:Ym}catch{return Ym}}function RD(n){return AD(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=new Map;function KT(n,e){const t=uf(n);GT(t,e),ND(t,e)}function GT(n,e){const t=qT.get(n);if(t)for(const i of t)i(e)}function ND(n,e){const t=DD();t&&t.postMessage({key:n,fid:e}),MD()}let lo=null;function DD(){return!lo&&"BroadcastChannel"in self&&(lo=new BroadcastChannel("[Firebase] FID Change"),lo.onmessage=n=>{GT(n.data.key,n.data.fid)}),lo}function MD(){qT.size===0&&lo&&(lo.close(),lo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD="firebase-installations-database",VD=1,wo="firebase-installations-store";let om=null;function ly(){return om||(om=Ld(OD,VD,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(wo)}}})),om}async function Td(n,e){const t=uf(n),r=(await ly()).transaction(wo,"readwrite"),o=r.objectStore(wo),l=await o.get(t);return await o.put(e,t),await r.done,(!l||l.fid!==e.fid)&&KT(n,e.fid),e}async function YT(n){const e=uf(n),i=(await ly()).transaction(wo,"readwrite");await i.objectStore(wo).delete(e),await i.done}async function hf(n,e){const t=uf(n),r=(await ly()).transaction(wo,"readwrite"),o=r.objectStore(wo),l=await o.get(t),c=e(l);return c===void 0?await o.delete(t):await o.put(c,t),await r.done,c&&(!l||l.fid!==c.fid)&&KT(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cy(n){let e;const t=await hf(n.appConfig,i=>{const r=LD(i),o=jD(n,r);return e=o.registrationPromise,o.installationEntry});return t.fid===Ym?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function LD(n){const e=n||{fid:PD(),registrationStatus:0};return QT(e)}function jD(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(_o.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=FD(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:zD(n)}:{installationEntry:e}}async function FD(n,e){try{const t=await kD(n,e);return Td(n.appConfig,t)}catch(t){throw FT(t)&&t.customData.serverCode===409?await YT(n.appConfig):await Td(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function zD(n){let e=await Iw(n.appConfig);for(;e.registrationStatus===1;)await $T(100),e=await Iw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await cy(n);return i||t}return e}function Iw(n){return hf(n,e=>{if(!e)throw _o.create("installation-not-found");return QT(e)})}function QT(n){return BD(n)?{fid:n.fid,registrationStatus:0}:n}function BD(n){return n.registrationStatus===1&&n.registrationTime+VT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UD({appConfig:n,heartbeatServiceProvider:e},t){const i=WD(n,t),r=TD(n,t),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const l={installation:{sdkVersion:LT,appId:n.appId}},c={method:"POST",headers:r,body:JSON.stringify(l)},h=await HT(()=>fetch(i,c));if(h.ok){const f=await h.json();return BT(f)}else throw await UT("Generate Auth Token",h)}function WD(n,{fid:e}){return`${zT(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uy(n,e=!1){let t;const i=await hf(n.appConfig,o=>{if(!XT(o))throw _o.create("not-registered");const l=o.authToken;if(!e&&qD(l))return o;if(l.requestStatus===1)return t=HD(n,e),o;{if(!navigator.onLine)throw _o.create("app-offline");const c=GD(o);return t=$D(n,c),c}});return t?await t:i.authToken}async function HD(n,e){let t=await kw(n.appConfig);for(;t.authToken.requestStatus===1;)await $T(100),t=await kw(n.appConfig);const i=t.authToken;return i.requestStatus===0?uy(n,e):i}function kw(n){return hf(n,e=>{if(!XT(e))throw _o.create("not-registered");const t=e.authToken;return YD(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function $D(n,e){try{const t=await UD(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return await Td(n.appConfig,i),t}catch(t){if(FT(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await YT(n.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Td(n.appConfig,i)}throw t}}function XT(n){return n!==void 0&&n.registrationStatus===2}function qD(n){return n.requestStatus===2&&!KD(n)}function KD(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+wD}function GD(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function YD(n){return n.requestStatus===1&&n.requestTime+VT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(n){const e=n,{installationEntry:t,registrationPromise:i}=await cy(e);return i?i.catch(console.error):uy(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(n,e=!1){const t=n;return await JD(t),(await uy(t,e)).token}async function JD(n){const{registrationPromise:e}=await cy(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(n){if(!n||!n.options)throw am("App Configuration");if(!n.name)throw am("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw am(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function am(n){return _o.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="installations",eM="installations-internal",tM=n=>{const e=n.getProvider("app").getImmediate(),t=ZD(e),i=Ka(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},nM=n=>{const e=n.getProvider("app").getImmediate(),t=Ka(e,JT).getImmediate();return{getId:()=>QD(t),getToken:r=>XD(t,r)}};function iM(){Ui(new mi(JT,tM,"PUBLIC")),Ui(new mi(eM,nM,"PRIVATE"))}iM();qn(OT,ay);qn(OT,ay,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM="/firebase-messaging-sw.js",sM="/firebase-cloud-messaging-push-scope",ZT="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",oM="https://fcmregistrations.googleapis.com/v1",eS="google.c.a.c_id",aM="google.c.a.c_l",lM="google.c.a.ts",cM="google.c.a.e",Aw=1e4;var Cw;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Cw||(Cw={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Oc;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(Oc||(Oc={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function uM(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),r=new Uint8Array(i.length);for(let o=0;o<i.length;++o)r[o]=i.charCodeAt(o);return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="fcm_token_details_db",hM=5,Pw="fcm_token_object_Store";async function dM(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(lm))return null;let e=null;return(await Ld(lm,hM,{upgrade:async(i,r,o,l)=>{var c;if(r<2||!i.objectStoreNames.contains(Pw))return;const h=l.objectStore(Pw),f=await h.index("fcmSenderId").get(n);if(await h.clear(),!!f){if(r===2){const m=f;if(!m.auth||!m.p256dh||!m.endpoint)return;e={token:m.fcmToken,createTime:(c=m.createTime)!==null&&c!==void 0?c:Date.now(),subscriptionOptions:{auth:m.auth,p256dh:m.p256dh,endpoint:m.endpoint,swScope:m.swScope,vapidKey:typeof m.vapidKey=="string"?m.vapidKey:fr(m.vapidKey)}}}else if(r===3){const m=f;e={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:fr(m.auth),p256dh:fr(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:fr(m.vapidKey)}}}else if(r===4){const m=f;e={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:fr(m.auth),p256dh:fr(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:fr(m.vapidKey)}}}}}})).close(),await Xp(lm),await Xp("fcm_vapid_details_db"),await Xp("undefined"),fM(e)?e:null}function fM(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM="firebase-messaging-database",mM=1,Vc="firebase-messaging-store";let cm=null;function tS(){return cm||(cm=Ld(pM,mM,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Vc)}}})),cm}async function gM(n){const e=nS(n),i=await(await tS()).transaction(Vc).objectStore(Vc).get(e);if(i)return i;{const r=await dM(n.appConfig.senderId);if(r)return await hy(n,r),r}}async function hy(n,e){const t=nS(n),r=(await tS()).transaction(Vc,"readwrite");return await r.objectStore(Vc).put(e,t),await r.done,e}function nS({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},rn=new To("messaging","Messaging",yM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vM(n,e){const t=await fy(n),i=iS(e),r={method:"POST",headers:t,body:JSON.stringify(i)};let o;try{o=await(await fetch(dy(n.appConfig),r)).json()}catch(l){throw rn.create("token-subscribe-failed",{errorInfo:l==null?void 0:l.toString()})}if(o.error){const l=o.error.message;throw rn.create("token-subscribe-failed",{errorInfo:l})}if(!o.token)throw rn.create("token-subscribe-no-token");return o.token}async function _M(n,e){const t=await fy(n),i=iS(e.subscriptionOptions),r={method:"PATCH",headers:t,body:JSON.stringify(i)};let o;try{o=await(await fetch(`${dy(n.appConfig)}/${e.token}`,r)).json()}catch(l){throw rn.create("token-update-failed",{errorInfo:l==null?void 0:l.toString()})}if(o.error){const l=o.error.message;throw rn.create("token-update-failed",{errorInfo:l})}if(!o.token)throw rn.create("token-update-no-token");return o.token}async function wM(n,e){const i={method:"DELETE",headers:await fy(n)};try{const o=await(await fetch(`${dy(n.appConfig)}/${e}`,i)).json();if(o.error){const l=o.error.message;throw rn.create("token-unsubscribe-failed",{errorInfo:l})}}catch(r){throw rn.create("token-unsubscribe-failed",{errorInfo:r==null?void 0:r.toString()})}}function dy({projectId:n}){return`${oM}/projects/${n}/registrations`}async function fy({appConfig:n,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function iS({p256dh:n,auth:e,endpoint:t,vapidKey:i}){const r={web:{endpoint:t,auth:e,p256dh:n}};return i!==ZT&&(r.web.applicationPubKey=i),r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=10080*60*1e3;async function EM(n){const e=await TM(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:fr(e.getKey("auth")),p256dh:fr(e.getKey("p256dh"))},i=await gM(n.firebaseDependencies);if(i){if(SM(i.subscriptionOptions,t))return Date.now()>=i.createTime+bM?xM(n,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{await wM(n.firebaseDependencies,i.token)}catch(r){console.warn(r)}return Rw(n.firebaseDependencies,t)}else return Rw(n.firebaseDependencies,t)}async function xM(n,e){try{const t=await _M(n.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return await hy(n.firebaseDependencies,i),t}catch(t){throw t}}async function Rw(n,e){const i={token:await vM(n,e),createTime:Date.now(),subscriptionOptions:e};return await hy(n,i),i.token}async function TM(n,e){const t=await n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:uM(e)})}function SM(n,e){const t=e.vapidKey===n.vapidKey,i=e.endpoint===n.endpoint,r=e.auth===n.auth,o=e.p256dh===n.p256dh;return t&&i&&r&&o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return IM(e,n),kM(e,n),AM(e,n),e}function IM(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const i=e.notification.body;i&&(n.notification.body=i);const r=e.notification.image;r&&(n.notification.image=r);const o=e.notification.icon;o&&(n.notification.icon=o)}function kM(n,e){e.data&&(n.data=e.data)}function AM(n,e){var t,i,r,o,l;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};const c=(r=(i=e.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&r!==void 0?r:(o=e.notification)===null||o===void 0?void 0:o.click_action;c&&(n.fcmOptions.link=c);const h=(l=e.fcmOptions)===null||l===void 0?void 0:l.analytics_label;h&&(n.fcmOptions.analyticsLabel=h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(n){return typeof n=="object"&&!!n&&eS in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(n){if(!n||!n.options)throw um("App Configuration Object");if(!n.name)throw um("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const i of e)if(!t[i])throw um(i);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function um(n){return rn.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=PM(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(n){try{n.swRegistration=await navigator.serviceWorker.register(rM,{scope:sM}),n.swRegistration.update().catch(()=>{}),await DM(n.swRegistration)}catch(e){throw rn.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function DM(n){return new Promise((e,t)=>{const i=setTimeout(()=>t(new Error(`Service worker not registered after ${Aw} ms`)),Aw),r=n.installing||n.waiting;n.active?(clearTimeout(i),e()):r?r.onstatechange=o=>{var l;((l=o.target)===null||l===void 0?void 0:l.state)==="activated"&&(r.onstatechange=null,clearTimeout(i),e())}:(clearTimeout(i),t(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MM(n,e){if(!e&&!n.swRegistration&&await NM(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw rn.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=ZT)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(n,e){if(!navigator)throw rn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw rn.create("permission-blocked");return await OM(n,e==null?void 0:e.vapidKey),await MM(n,e==null?void 0:e.serviceWorkerRegistration),EM(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM(n,e,t){const i=jM(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:t[eS],message_name:t[aM],message_time:t[lM],message_device_time:Math.floor(Date.now()/1e3)})}function jM(n){switch(n){case Oc.NOTIFICATION_CLICKED:return"notification_open";case Oc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FM(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Oc.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(Nw(t)):n.onMessageHandler.next(Nw(t)));const i=t.data;CM(i)&&i[cM]==="1"&&await LM(n,t.messageType,i)}const Dw="@firebase/messaging",Mw="0.12.22";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=n=>{const e=new RM(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>FM(e,t)),e},BM=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:i=>VM(e,i)}};function UM(){Ui(new mi("messaging",zM,"PUBLIC")),Ui(new mi("messaging-internal",BM,"PRIVATE")),qn(Dw,Mw),qn(Dw,Mw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(){try{await gE()}catch{return!1}return typeof window<"u"&&mE()&&q1()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(n,e){if(!navigator)throw rn.create("only-available-in-window");return n.onMessageHandler=e,()=>{n.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(n=ug()){return rS().then(e=>{if(!e)throw rn.create("unsupported-browser")},e=>{throw rn.create("indexed-db-unsupported")}),Ka(St(n),"messaging").getImmediate()}function $M(n,e){return n=St(n),WM(n,e)}UM();const qM={apiKey:"AIzaSyCIo66QQPVKEk6UfYJ6ecBM6rppt9i8BtU",authDomain:"baby-track-53ba7.firebaseapp.com",projectId:"baby-track-53ba7",storageBucket:"baby-track-53ba7.firebasestorage.app",messagingSenderId:"329413034582",appId:"1:329413034582:web:60e08368d9c5636855b1f7",measurementId:"G-2V9JR0J8VW"},py=_E(qM),my=oP(py),KM=new mr,un=rD(py),GM=async()=>await rS()?HM(py):null,YM=async()=>{try{return(await mC(my,KM)).user}catch(n){throw console.error("Erreur lors de la connexion:",n),n}},QM=async()=>{try{await YA(my)}catch(n){throw console.error("Erreur lors de la dconnexion:",n),n}},XM=n=>GA(my,n),sS=ae.createContext(),Ir=()=>{const n=ae.useContext(sS);if(!n)throw new Error("useAuth doit tre utilis dans un AuthProvider");return n},JM=({children:n})=>{const[e,t]=ae.useState(null),[i,r]=ae.useState(!0);ae.useEffect(()=>{const l=XM(c=>{t(c),r(!1)});return()=>l()},[]);const o={user:e,loading:i};return b.jsx(sS.Provider,{value:o,children:!i&&n})},ZM=async(n,e,t={})=>{try{const i=Ba(un,"babies",n,"events");return(await oy(i,{...e,addedBy:t,timestamp:xd(),createdAt:e.createdAt||new Date().toISOString()})).id}catch(i){throw console.error("Erreur lors de l'ajout de l'vnement:",i),i}},e2=(n,e)=>{const t=Ba(un,"babies",n,"events"),i=ny(t,kT("createdAt","desc"));return DT(i,r=>{const o=[];r.forEach(l=>{o.push({id:l.id,...l.data()})}),e(o)})},t2=async n=>{try{const e=ji(un,"users",n,"settings","preferences"),t=await PT(e);if(t.exists())return t.data();{const i={feedingInterval:4,theme:"dark",notificationsEnabled:!0};return await RT(e,i),i}}catch(e){throw console.error("Erreur lors de la rcupration des paramtres:",e),e}},n2=async(n,e)=>{try{const t=ji(un,"users",n,"settings","preferences");await RT(t,e,{merge:!0})}catch(t){throw console.error("Erreur lors de la mise  jour des paramtres:",t),t}},i2=async(n,e,t)=>{try{const i=ji(un,"babies",n,"events",e);await Ed(i,t)}catch(i){throw console.error("Erreur lors de la mise  jour de l'vnement:",i),i}},r2=async(n,e)=>{try{const t=ji(un,"babies",n,"events",e);await NT(t)}catch(t){throw console.error("Erreur lors de la suppression de l'vnement:",t),t}},oS=ae.createContext(),tu=()=>{const n=ae.useContext(oS);if(!n)throw new Error("useSettings doit tre utilis dans un SettingsProvider");return n},s2=({children:n})=>{const{user:e}=Ir(),[t,i]=ae.useState({feedingInterval:4,theme:"dark",notificationsEnabled:!0}),[r,o]=ae.useState(!0);ae.useEffect(()=>{e?l():o(!1)},[e]);const l=async()=>{try{const m=await t2(e.uid);i(m)}catch(m){console.error("Erreur lors du chargement des paramtres:",m)}finally{o(!1)}},c=async m=>{try{const y={...t,...m};await n2(e.uid,y),i(y)}catch(y){throw console.error("Erreur lors de la mise  jour des paramtres:",y),y}},f={settings:t,loading:r,updateSettings:c,toggleTheme:()=>{const m=t.theme==="dark"?"light":"dark";c({theme:m})}};return b.jsx(oS.Provider,{value:f,children:n})},o2=async(n,e,t,i)=>{try{const r=Ba(un,"babies");return(await oy(r,{...i,createdBy:n,memberIds:[n],members:[{userId:n,email:e,displayName:t,role:"owner"}],createdAt:xd(),updatedAt:xd()})).id}catch(r){throw console.error("Erreur lors de la cration du bb:",r),r}},Ow=async n=>{try{const e=Ba(un,"babies"),t=ny(e,mD("memberIds","array-contains",n)),i=await vD(t),r=[];return i.forEach(o=>{r.push({id:o.id,...o.data()})}),r}catch(e){throw console.error("Erreur lors de la rcupration des bbs:",e),e}},Qm=async n=>{try{const e=ji(un,"babies",n),t=await PT(e);return t.exists()?{id:t.id,...t.data()}:null}catch(e){throw console.error("Erreur lors de la rcupration du bb:",e),e}},a2=async(n,e)=>{try{const t=ji(un,"babies",n);await Ed(t,{memberIds:Sw(e.userId),members:Sw(e),updatedAt:xd()})}catch(t){throw console.error("Erreur lors de l'ajout du membre:",t),t}},aS=ae.createContext(),nl=()=>{const n=ae.useContext(aS);if(!n)throw new Error("useBaby must be used within BabyProvider");return n},l2=({children:n})=>{const{user:e}=Ir(),[t,i]=ae.useState([]),[r,o]=ae.useState(null),[l,c]=ae.useState(!0);ae.useEffect(()=>{(async()=>{if(!e){i([]),o(null),c(!1);return}try{c(!0);const v=await Ow(e.uid);i(v);const x=localStorage.getItem("activeBabyId");if(x&&v.find(S=>S.id===x)){const S=await Qm(x);o(S)}else v.length>0&&(o(v[0]),localStorage.setItem("activeBabyId",v[0].id))}catch(v){console.error("Erreur lors du chargement des bbs:",v)}finally{c(!1)}})()},[e]);const m={babies:t,activeBaby:r,loading:l,switchBaby:async y=>{try{const v=await Qm(y);o(v),localStorage.setItem("activeBabyId",y)}catch(v){console.error("Erreur lors du changement de bb:",v)}},refreshBabies:async()=>{if(e)try{const y=await Ow(e.uid);if(i(y),r){const v=y.find(x=>x.id===r.id);v&&o(v)}}catch(y){console.error("Erreur lors du rafrachissement des bbs:",y)}}};return b.jsx(aS.Provider,{value:m,children:n})},c2=()=>{const[n,e]=ae.useState(""),[t,i]=ae.useState(!1),r=async()=>{try{i(!0),e(""),await YM()}catch(o){e("Erreur lors de la connexion. Veuillez ressayer."),console.error(o)}finally{i(!1)}};return b.jsx("div",{className:"login-container",children:b.jsxs("div",{className:"login-card",children:[b.jsxs("div",{className:"login-header",children:[b.jsx("div",{className:"baby-icon",children:""}),b.jsx("h1",{children:"Baby Track"}),b.jsx("p",{children:"Suivez l'allaitement et les couches de votre bb"})]}),b.jsxs("button",{className:"google-signin-button",onClick:r,disabled:t,children:[b.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[b.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),b.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),b.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),b.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),t?"Connexion...":"Se connecter avec Google"]}),n&&b.jsx("div",{className:"error-message",children:n}),b.jsx("div",{className:"login-footer",children:b.jsx("p",{children:" Vos donnes sont scurises et synchronises en temps rel"})})]})})},u2=()=>{const{user:n}=Ir(),{settings:e}=tu();ae.useEffect(()=>{if(!n||!e.notificationsEnabled)return;(async()=>{try{if(!("Notification"in window)){console.log("Les notifications ne sont pas supportes par ce navigateur");return}if(await Notification.requestPermission()!=="granted"){console.log("Permission de notification refuse");return}const r=await GM();if(!r){console.log("Firebase Messaging non support");return}$M(r,o=>{console.log("Message reu en foreground:",o),o.notification&&new Notification(o.notification.title,{body:o.notification.body,icon:"/pwa-192x192.png",badge:"/pwa-192x192.png",vibrate:[200,100,200],tag:"baby-track-notification"})})}catch(i){console.error("Erreur lors de la configuration des notifications:",i)}})()},[n,e.notificationsEnabled])},h2=({user:n,activeView:e,setActiveView:t})=>{var l;const{settings:i,toggleTheme:r}=tu(),o=[{id:"home",label:"Accueil",icon:""},{id:"history",label:"Historique",icon:""},{id:"statistics",label:"Statistiques",icon:""},{id:"todos",label:"To-Do",icon:""},{id:"settings",label:"Paramtres",icon:""}];return b.jsxs("header",{className:"header",children:[b.jsxs("div",{className:"header-content",children:[b.jsx("div",{className:"header-left",children:b.jsxs("h1",{className:"app-title",children:[b.jsx("span",{className:"app-icon",children:""}),"Baby Track"]})}),b.jsxs("div",{className:"header-right",children:[b.jsx("button",{className:"theme-toggle",onClick:r,"aria-label":"Changer de thme",title:i.theme==="dark"?"Mode clair":"Mode sombre",children:i.theme==="dark"?"":""}),b.jsxs("div",{className:"user-info",children:[b.jsx("img",{src:n.photoURL||"/default-avatar.png",alt:n.displayName,className:"user-avatar"}),b.jsx("span",{className:"user-name",children:(l=n.displayName)==null?void 0:l.split(" ")[0]})]})]})]}),b.jsx("nav",{className:"nav-tabs",children:o.map(c=>b.jsxs("button",{className:`nav-tab ${e===c.id?"active":""}`,onClick:()=>t(c.id),children:[b.jsx("span",{className:"nav-icon",children:c.icon}),b.jsx("span",{className:"nav-label",children:c.label})]},c.id))})]})},d2=({activeView:n,setActiveView:e})=>{const t=[{id:"home",label:"Accueil",icon:""},{id:"history",label:"Historique",icon:""},{id:"statistics",label:"Stats",icon:""},{id:"todos",label:"To-Do",icon:""},{id:"settings",label:"Rglages",icon:""}];return b.jsx("nav",{className:"mobile-nav",children:t.map(i=>b.jsxs("button",{className:`mobile-nav-item ${n===i.id?"active":""}`,onClick:()=>e(i.id),children:[b.jsx("span",{className:"mobile-nav-icon",children:i.icon}),b.jsx("span",{className:"mobile-nav-label",children:i.label})]},i.id))})},lS=6048e5,f2=864e5,p2=6e4,m2=36e5,Ih=43200,Vw=1440,Lw=Symbol.for("constructDateFrom");function Nn(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&Lw in n?n[Lw](e):n instanceof Date?new n.constructor(e):new Date(e)}function ct(n,e){return Nn(e||n,n)}function g2(n,e,t){const i=ct(n,t==null?void 0:t.in);return isNaN(e)?Nn(n,NaN):(e&&i.setDate(i.getDate()+e),i)}function y2(n,e,t){return Nn(n,+ct(n)+e)}function v2(n,e,t){return y2(n,e*m2)}let _2={};function nu(){return _2}function Ua(n,e){var c,h,f,m;const t=nu(),i=(e==null?void 0:e.weekStartsOn)??((h=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)??t.weekStartsOn??((m=(f=t.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,r=ct(n,e==null?void 0:e.in),o=r.getDay(),l=(o<i?7:0)+o-i;return r.setDate(r.getDate()-l),r.setHours(0,0,0,0),r}function Sd(n,e){return Ua(n,{...e,weekStartsOn:1})}function cS(n,e){const t=ct(n,e==null?void 0:e.in),i=t.getFullYear(),r=Nn(t,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);const o=Sd(r),l=Nn(t,0);l.setFullYear(i,0,4),l.setHours(0,0,0,0);const c=Sd(l);return t.getTime()>=o.getTime()?i+1:t.getTime()>=c.getTime()?i:i-1}function Id(n){const e=ct(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function il(n,...e){const t=Nn.bind(null,n||e.find(i=>typeof i=="object"));return e.map(t)}function bo(n,e){const t=ct(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function uS(n,e,t){const[i,r]=il(t==null?void 0:t.in,n,e),o=bo(i),l=bo(r),c=+o-Id(o),h=+l-Id(l);return Math.round((c-h)/f2)}function w2(n,e){const t=cS(n,e),i=Nn(n,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),Sd(i)}function Qh(n,e){const t=+ct(n)-+ct(e);return t<0?-1:t>0?1:t}function gy(n){return Nn(n,Date.now())}function hS(n,e,t){const[i,r]=il(t==null?void 0:t.in,n,e);return+bo(i)==+bo(r)}function b2(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function E2(n){return!(!b2(n)&&typeof n!="number"||isNaN(+ct(n)))}function x2(n,e,t){const[i,r]=il(t==null?void 0:t.in,n,e),o=i.getFullYear()-r.getFullYear(),l=i.getMonth()-r.getMonth();return o*12+l}function T2(n,e,t){const[i,r]=il(t==null?void 0:t.in,n,e),o=jw(i,r),l=Math.abs(uS(i,r));i.setDate(i.getDate()-o*l);const c=+(jw(i,r)===-o),h=o*(l-c);return h===0?0:h}function jw(n,e){const t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function dS(n){return e=>{const i=(n?Math[n]:Math.trunc)(e);return i===0?0:i}}function fS(n,e){return+ct(n)-+ct(e)}function S2(n,e,t){const i=fS(n,e)/p2;return dS(t==null?void 0:t.roundingMethod)(i)}function df(n,e){const t=ct(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function I2(n,e){const t=ct(n,e==null?void 0:e.in),i=t.getMonth();return t.setFullYear(t.getFullYear(),i+1,0),t.setHours(23,59,59,999),t}function k2(n,e){const t=ct(n,e==null?void 0:e.in);return+df(t,e)==+I2(t,e)}function A2(n,e,t){const[i,r,o]=il(t==null?void 0:t.in,n,n,e),l=Qh(r,o),c=Math.abs(x2(r,o));if(c<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-l*c);let h=Qh(r,o)===-l;k2(i)&&c===1&&Qh(i,o)===1&&(h=!1);const f=l*(c-+h);return f===0?0:f}function pS(n,e,t){const i=fS(n,e)/1e3;return dS(t==null?void 0:t.roundingMethod)(i)}function C2(n,e){const t=ct(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function P2(n,e){const t=e==null?void 0:e.weekStartsOn,i=ct(n,e==null?void 0:e.in),r=i.getDay(),o=(r<t?-7:0)+6-(r-t);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}const R2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},N2=(n,e,t)=>{let i;const r=R2[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function Ra(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const D2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},M2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},O2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},V2={date:Ra({formats:D2,defaultWidth:"full"}),time:Ra({formats:M2,defaultWidth:"full"}),dateTime:Ra({formats:O2,defaultWidth:"full"})},L2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},j2=(n,e,t,i)=>L2[n];function Di(n){return(e,t)=>{const i=t!=null&&t.context?String(t.context):"standalone";let r;if(i==="formatting"&&n.formattingValues){const l=n.defaultFormattingWidth||n.defaultWidth,c=t!=null&&t.width?String(t.width):l;r=n.formattingValues[c]||n.formattingValues[l]}else{const l=n.defaultWidth,c=t!=null&&t.width?String(t.width):n.defaultWidth;r=n.values[c]||n.values[l]}const o=n.argumentCallback?n.argumentCallback(e):e;return r[o]}}const F2={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},z2={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},B2={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},U2={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},W2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},H2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},$2=(n,e)=>{const t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},q2={ordinalNumber:$2,era:Di({values:F2,defaultWidth:"wide"}),quarter:Di({values:z2,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Di({values:B2,defaultWidth:"wide"}),day:Di({values:U2,defaultWidth:"wide"}),dayPeriod:Di({values:W2,defaultWidth:"wide",formattingValues:H2,defaultFormattingWidth:"wide"})};function Mi(n){return(e,t={})=>{const i=t.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],o=e.match(r);if(!o)return null;const l=o[0],c=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],h=Array.isArray(c)?G2(c,y=>y.test(l)):K2(c,y=>y.test(l));let f;f=n.valueCallback?n.valueCallback(h):h,f=t.valueCallback?t.valueCallback(f):f;const m=e.slice(l.length);return{value:f,rest:m}}}function K2(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function G2(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function mS(n){return(e,t={})=>{const i=e.match(n.matchPattern);if(!i)return null;const r=i[0],o=e.match(n.parsePattern);if(!o)return null;let l=n.valueCallback?n.valueCallback(o[0]):o[0];l=t.valueCallback?t.valueCallback(l):l;const c=e.slice(r.length);return{value:l,rest:c}}}const Y2=/^(\d+)(th|st|nd|rd)?/i,Q2=/\d+/i,X2={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},J2={any:[/^b/i,/^(a|c)/i]},Z2={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},eO={any:[/1/i,/2/i,/3/i,/4/i]},tO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},nO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},iO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},oO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},aO={ordinalNumber:mS({matchPattern:Y2,parsePattern:Q2,valueCallback:n=>parseInt(n,10)}),era:Mi({matchPatterns:X2,defaultMatchWidth:"wide",parsePatterns:J2,defaultParseWidth:"any"}),quarter:Mi({matchPatterns:Z2,defaultMatchWidth:"wide",parsePatterns:eO,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Mi({matchPatterns:tO,defaultMatchWidth:"wide",parsePatterns:nO,defaultParseWidth:"any"}),day:Mi({matchPatterns:iO,defaultMatchWidth:"wide",parsePatterns:rO,defaultParseWidth:"any"}),dayPeriod:Mi({matchPatterns:sO,defaultMatchWidth:"any",parsePatterns:oO,defaultParseWidth:"any"})},gS={code:"en-US",formatDistance:N2,formatLong:V2,formatRelative:j2,localize:q2,match:aO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lO(n,e){const t=ct(n,e==null?void 0:e.in);return uS(t,C2(t))+1}function cO(n,e){const t=ct(n,e==null?void 0:e.in),i=+Sd(t)-+w2(t);return Math.round(i/lS)+1}function yS(n,e){var m,y,v,x;const t=ct(n,e==null?void 0:e.in),i=t.getFullYear(),r=nu(),o=(e==null?void 0:e.firstWeekContainsDate)??((y=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??r.firstWeekContainsDate??((x=(v=r.locale)==null?void 0:v.options)==null?void 0:x.firstWeekContainsDate)??1,l=Nn((e==null?void 0:e.in)||n,0);l.setFullYear(i+1,0,o),l.setHours(0,0,0,0);const c=Ua(l,e),h=Nn((e==null?void 0:e.in)||n,0);h.setFullYear(i,0,o),h.setHours(0,0,0,0);const f=Ua(h,e);return+t>=+c?i+1:+t>=+f?i:i-1}function uO(n,e){var c,h,f,m;const t=nu(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??t.firstWeekContainsDate??((m=(f=t.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,r=yS(n,e),o=Nn((e==null?void 0:e.in)||n,0);return o.setFullYear(r,0,i),o.setHours(0,0,0,0),Ua(o,e)}function hO(n,e){const t=ct(n,e==null?void 0:e.in),i=+Ua(t,e)-+uO(t,e);return Math.round(i/lS)+1}function Ye(n,e){const t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}const Zr={y(n,e){const t=n.getFullYear(),i=t>0?t:1-t;return Ye(e==="yy"?i%100:i,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Ye(t+1,2)},d(n,e){return Ye(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Ye(n.getHours()%12||12,e.length)},H(n,e){return Ye(n.getHours(),e.length)},m(n,e){return Ye(n.getMinutes(),e.length)},s(n,e){return Ye(n.getSeconds(),e.length)},S(n,e){const t=e.length,i=n.getMilliseconds(),r=Math.trunc(i*Math.pow(10,t-3));return Ye(r,e.length)}},wa={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Fw={G:function(n,e,t){const i=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const i=n.getFullYear(),r=i>0?i:1-i;return t.ordinalNumber(r,{unit:"year"})}return Zr.y(n,e)},Y:function(n,e,t,i){const r=yS(n,i),o=r>0?r:1-r;if(e==="YY"){const l=o%100;return Ye(l,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):Ye(o,e.length)},R:function(n,e){const t=cS(n);return Ye(t,e.length)},u:function(n,e){const t=n.getFullYear();return Ye(t,e.length)},Q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return Ye(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return Ye(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,t){const i=n.getMonth();switch(e){case"M":case"MM":return Zr.M(n,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,t){const i=n.getMonth();switch(e){case"L":return String(i+1);case"LL":return Ye(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,t,i){const r=hO(n,i);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):Ye(r,e.length)},I:function(n,e,t){const i=cO(n);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):Ye(i,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Zr.d(n,e)},D:function(n,e,t){const i=lO(n);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):Ye(i,e.length)},E:function(n,e,t){const i=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,t,i){const r=n.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Ye(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(n,e,t,i){const r=n.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Ye(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(n,e,t){const i=n.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return Ye(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,t){const r=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,e,t){const i=n.getHours();let r;switch(i===12?r=wa.noon:i===0?r=wa.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,e,t){const i=n.getHours();let r;switch(i>=17?r=wa.evening:i>=12?r=wa.afternoon:i>=4?r=wa.morning:r=wa.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let i=n.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return Zr.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Zr.H(n,e)},K:function(n,e,t){const i=n.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):Ye(i,e.length)},k:function(n,e,t){let i=n.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):Ye(i,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Zr.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Zr.s(n,e)},S:function(n,e){return Zr.S(n,e)},X:function(n,e,t){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return Bw(i);case"XXXX":case"XX":return io(i);case"XXXXX":case"XXX":default:return io(i,":")}},x:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"x":return Bw(i);case"xxxx":case"xx":return io(i);case"xxxxx":case"xxx":default:return io(i,":")}},O:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+zw(i,":");case"OOOO":default:return"GMT"+io(i,":")}},z:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+zw(i,":");case"zzzz":default:return"GMT"+io(i,":")}},t:function(n,e,t){const i=Math.trunc(+n/1e3);return Ye(i,e.length)},T:function(n,e,t){return Ye(+n,e.length)}};function zw(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),r=Math.trunc(i/60),o=i%60;return o===0?t+String(r):t+String(r)+e+Ye(o,2)}function Bw(n,e){return n%60===0?(n>0?"-":"+")+Ye(Math.abs(n)/60,2):io(n,e)}function io(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),r=Ye(Math.trunc(i/60),2),o=Ye(i%60,2);return t+r+e+o}const Uw=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},vS=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},dO=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],i=t[1],r=t[2];if(!r)return Uw(n,e);let o;switch(i){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",Uw(i,e)).replace("{{time}}",vS(r,e))},fO={p:vS,P:dO},pO=/^D+$/,mO=/^Y+$/,gO=["D","DD","YY","YYYY"];function yO(n){return pO.test(n)}function vO(n){return mO.test(n)}function _O(n,e,t){const i=wO(n,e,t);if(console.warn(i),gO.includes(n))throw new RangeError(i)}function wO(n,e,t){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const bO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,EO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xO=/^'([^]*?)'?$/,TO=/''/g,SO=/[a-zA-Z]/;function bc(n,e,t){var m,y,v,x,S,I,k,N;const i=nu(),r=(t==null?void 0:t.locale)??i.locale??gS,o=(t==null?void 0:t.firstWeekContainsDate)??((y=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??i.firstWeekContainsDate??((x=(v=i.locale)==null?void 0:v.options)==null?void 0:x.firstWeekContainsDate)??1,l=(t==null?void 0:t.weekStartsOn)??((I=(S=t==null?void 0:t.locale)==null?void 0:S.options)==null?void 0:I.weekStartsOn)??i.weekStartsOn??((N=(k=i.locale)==null?void 0:k.options)==null?void 0:N.weekStartsOn)??0,c=ct(n,t==null?void 0:t.in);if(!E2(c))throw new RangeError("Invalid time value");let h=e.match(EO).map(L=>{const B=L[0];if(B==="p"||B==="P"){const W=fO[B];return W(L,r.formatLong)}return L}).join("").match(bO).map(L=>{if(L==="''")return{isToken:!1,value:"'"};const B=L[0];if(B==="'")return{isToken:!1,value:IO(L)};if(Fw[B])return{isToken:!0,value:L};if(B.match(SO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return{isToken:!1,value:L}});r.localize.preprocessor&&(h=r.localize.preprocessor(c,h));const f={firstWeekContainsDate:o,weekStartsOn:l,locale:r};return h.map(L=>{if(!L.isToken)return L.value;const B=L.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&vO(B)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&yO(B))&&_O(B,e,String(n));const W=Fw[B[0]];return W(c,B,r.localize,f)}).join("")}function IO(n){const e=n.match(xO);return e?e[1].replace(TO,"'"):n}function kO(n,e,t){const i=nu(),r=(t==null?void 0:t.locale)??i.locale??gS,o=2520,l=Qh(n,e);if(isNaN(l))throw new RangeError("Invalid time value");const c=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:l}),[h,f]=il(t==null?void 0:t.in,...l>0?[e,n]:[n,e]),m=pS(f,h),y=(Id(f)-Id(h))/1e3,v=Math.round((m-y)/60);let x;if(v<2)return t!=null&&t.includeSeconds?m<5?r.formatDistance("lessThanXSeconds",5,c):m<10?r.formatDistance("lessThanXSeconds",10,c):m<20?r.formatDistance("lessThanXSeconds",20,c):m<40?r.formatDistance("halfAMinute",0,c):m<60?r.formatDistance("lessThanXMinutes",1,c):r.formatDistance("xMinutes",1,c):v===0?r.formatDistance("lessThanXMinutes",1,c):r.formatDistance("xMinutes",v,c);if(v<45)return r.formatDistance("xMinutes",v,c);if(v<90)return r.formatDistance("aboutXHours",1,c);if(v<Vw){const S=Math.round(v/60);return r.formatDistance("aboutXHours",S,c)}else{if(v<o)return r.formatDistance("xDays",1,c);if(v<Ih){const S=Math.round(v/Vw);return r.formatDistance("xDays",S,c)}else if(v<Ih*2)return x=Math.round(v/Ih),r.formatDistance("aboutXMonths",x,c)}if(x=A2(f,h),x<12){const S=Math.round(v/Ih);return r.formatDistance("xMonths",S,c)}else{const S=x%12,I=Math.trunc(x/12);return S<3?r.formatDistance("aboutXYears",I,c):S<9?r.formatDistance("overXYears",I,c):r.formatDistance("almostXYears",I+1,c)}}function Ww(n,e){return kO(n,gy(n),e)}function AO(n,e){return hS(Nn(n,n),gy(n))}function kd(n,e,t){const i=+ct(n,t==null?void 0:t.in),[r,o]=[+ct(e.start,t==null?void 0:t.in),+ct(e.end,t==null?void 0:t.in)].sort((l,c)=>l-c);return i>=r&&i<=o}function _S(n,e,t){return g2(n,-e,t)}function CO(n,e){return hS(Nn(n,n),_S(gy(n),1))}const PO={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},RO=(n,e,t)=>{let i;const r=PO[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"dans "+i:"il y a "+i:i},NO={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},DO={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},MO={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},OO={date:Ra({formats:NO,defaultWidth:"full"}),time:Ra({formats:DO,defaultWidth:"full"}),dateTime:Ra({formats:MO,defaultWidth:"full"})},VO={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},LO=(n,e,t,i)=>VO[n],jO={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},FO={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},zO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},BO={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},UO={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},WO=(n,e)=>{const t=Number(n),i=e==null?void 0:e.unit;if(t===0)return"0";const r=["year","week","hour","minute","second"];let o;return t===1?o=i&&r.includes(i)?"re":"er":o="me",t+o},HO=["MMM","MMMM"],$O={preprocessor:(n,e)=>n.getDate()===1||!e.some(i=>i.isToken&&HO.includes(i.value))?e:e.map(i=>i.isToken&&i.value==="do"?{isToken:!0,value:"d"}:i),ordinalNumber:WO,era:Di({values:jO,defaultWidth:"wide"}),quarter:Di({values:FO,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Di({values:zO,defaultWidth:"wide"}),day:Di({values:BO,defaultWidth:"wide"}),dayPeriod:Di({values:UO,defaultWidth:"wide"})},qO=/^(\d+)(ime|re|me|er|e)?/i,KO=/\d+/i,GO={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},YO={any:[/^av/i,/^ap/i]},QO={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},XO={any:[/1/i,/2/i,/3/i,/4/i]},JO={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},ZO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},eV={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},tV={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},nV={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},iV={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},rV={ordinalNumber:mS({matchPattern:qO,parsePattern:KO,valueCallback:n=>parseInt(n)}),era:Mi({matchPatterns:GO,defaultMatchWidth:"wide",parsePatterns:YO,defaultParseWidth:"any"}),quarter:Mi({matchPatterns:QO,defaultMatchWidth:"wide",parsePatterns:XO,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Mi({matchPatterns:JO,defaultMatchWidth:"wide",parsePatterns:ZO,defaultParseWidth:"any"}),day:Mi({matchPatterns:eV,defaultMatchWidth:"wide",parsePatterns:tV,defaultParseWidth:"any"}),dayPeriod:Mi({matchPatterns:nV,defaultMatchWidth:"any",parsePatterns:iV,defaultParseWidth:"any"})},Wa={code:"fr",formatDistance:RO,formatLong:OO,formatRelative:LO,localize:$O,match:rV,options:{weekStartsOn:1,firstWeekContainsDate:4}},sV=({events:n})=>{const e=ae.useMemo(()=>{const t=new Date,i=bo(t),r=df(t),o=n.filter(y=>kd(new Date(y.createdAt),{start:i,end:r})),l=o.filter(y=>y.type==="feeding"),c=o.filter(y=>y.type==="diaper"),h=l[0],f=c[0],m=l.length>0?Math.round(l.map(y=>y.duration||parseInt(y.customDuration)||0).filter(y=>y>0).reduce((y,v)=>y+v,0)/l.filter(y=>y.duration||y.customDuration).length):0;return{feedingsCount:l.length,diapersCount:c.length,lastFeeding:h,lastDiaper:f,avgDuration:m}},[n]);return b.jsxs("div",{className:"daily-summary",children:[b.jsx("div",{className:"summary-header",children:b.jsx("h3",{children:" Aujourd'hui"})}),b.jsxs("div",{className:"summary-grid",children:[b.jsxs("div",{className:"summary-card feedings",children:[b.jsx("div",{className:"summary-icon",children:""}),b.jsxs("div",{className:"summary-content",children:[b.jsx("div",{className:"summary-count",children:e.feedingsCount}),b.jsx("div",{className:"summary-label",children:"Allaitements"}),e.avgDuration>0&&b.jsxs("div",{className:"summary-detail",children:["Moy. ",e.avgDuration," min"]})]})]}),b.jsxs("div",{className:"summary-card diapers",children:[b.jsx("div",{className:"summary-icon",children:""}),b.jsxs("div",{className:"summary-content",children:[b.jsx("div",{className:"summary-count",children:e.diapersCount}),b.jsx("div",{className:"summary-label",children:"Couches"}),e.lastDiaper&&b.jsxs("div",{className:"summary-detail",children:["Dernier"," ",Ww(new Date(e.lastDiaper.createdAt),{addSuffix:!0,locale:Wa})]})]})]})]}),e.lastFeeding&&b.jsxs("div",{className:"last-feeding-info",children:[b.jsx("span",{className:"info-icon",children:""}),b.jsxs("span",{className:"info-text",children:["Dernier allaitement",e.lastFeeding.breast&&b.jsx("span",{className:"breast-indicator",children:e.lastFeeding.breast==="left"?"  Sein gauche":"  Sein droit"})," ",Ww(new Date(e.lastFeeding.createdAt),{addSuffix:!0,locale:Wa})]})]}),e.feedingsCount===0&&e.diapersCount===0&&b.jsxs("div",{className:"no-activity",children:[b.jsx("div",{className:"no-activity-icon",children:""}),b.jsx("p",{children:"Aucune activit enregistre aujourd'hui"})]})]})},oV=({lastFeeding:n,interval:e})=>{const[t,i]=ae.useState(null),[r,o]=ae.useState(null);ae.useEffect(()=>{if(!n){i(null),o(null);return}const x=new Date(n.createdAt),S=v2(x,e);o(S);const I=()=>{const L=pS(S,new Date);i(L)};I();const k=setInterval(I,1e3);return()=>clearInterval(k)},[n,e]);const l=x=>{if(x<=0)return{hours:0,minutes:0,seconds:0};const S=Math.floor(x/3600),I=Math.floor(x%3600/60),k=x%60;return{hours:S,minutes:I,seconds:k}},c=()=>n?t===null?"Calcul en cours...":t<=0?"Il est temps d'allaiter !":"Prochain allaitement dans":"Aucun allaitement enregistr",h=()=>t?t<=0?"overdue":t<=300?"warning":"normal":"",f=()=>{if(!n||!n.breast)return null;const x=n.breast==="left"?"":"",S=n.breast==="left"?"Sein droit":"Sein gauche";return`${x} ${S}`},m=l(t||0),y=t!==null&&t<=0,v=f();return b.jsxs("div",{className:`feeding-timer ${h()}`,children:[b.jsx("div",{className:"timer-header",children:b.jsx("h2",{children:c()})}),n&&t!==null&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"timer-display",children:y?b.jsx("div",{className:"overdue-icon",children:""}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"time-unit",children:[b.jsx("div",{className:"time-value",children:String(m.hours).padStart(2,"0")}),b.jsx("div",{className:"time-label",children:"heures"})]}),b.jsx("div",{className:"time-separator",children:":"}),b.jsxs("div",{className:"time-unit",children:[b.jsx("div",{className:"time-value",children:String(m.minutes).padStart(2,"0")}),b.jsx("div",{className:"time-label",children:"minutes"})]}),b.jsx("div",{className:"time-separator",children:":"}),b.jsxs("div",{className:"time-unit",children:[b.jsx("div",{className:"time-value",children:String(m.seconds).padStart(2,"0")}),b.jsx("div",{className:"time-label",children:"secondes"})]})]})}),r&&!y&&b.jsx("div",{className:"next-feeding-time",children:b.jsxs("p",{className:"exact-time",children:["Prochain allaitement prvu  ",b.jsx("strong",{children:bc(r,"HH:mm",{locale:Wa})}),v&&b.jsx("span",{className:"next-breast",children:v})]})})]}),!n&&b.jsxs("div",{className:"no-feeding-message",children:[b.jsx("div",{className:"no-feeding-icon",children:""}),b.jsx("p",{children:"Commencez par enregistrer votre premier allaitement"})]})]})},wS=({type:n,onSubmit:e,onClose:t,editEvent:i=null,lastFeeding:r=null})=>{const[o,l]=ae.useState({type:n,diaperType:"pee",breast:null,duration:null,customDuration:"",notes:"",customTime:""});ae.useEffect(()=>{if(i){const v=i.createdAt?new Date(i.createdAt):new Date,x=String(v.getHours()).padStart(2,"0"),S=String(v.getMinutes()).padStart(2,"0");l({type:i.type,diaperType:i.diaperType||"pee",breast:i.breast||null,duration:i.duration||null,customDuration:i.customDuration||"",notes:i.notes||"",customTime:`${x}:${S}`})}else if(n==="feeding"&&r&&r.breast){const v=r.breast==="left"?"right":"left";l(x=>({...x,breast:v}))}},[i,n,r]);const c=v=>{v.preventDefault(),e(o)},h=v=>{l({...o,diaperType:v})},f=v=>{l({...o,duration:v,customDuration:""})},m=v=>{l({...o,customDuration:v,duration:null})},y=v=>{l({...o,breast:v})};return b.jsx("div",{className:"modal-overlay",onClick:t,children:b.jsxs("div",{className:"modal-content",onClick:v=>v.stopPropagation(),children:[b.jsxs("div",{className:"modal-header",children:[b.jsxs("h2",{children:[i?" Modifier ":"",n==="feeding"&&" Allaitement",n==="diaper"&&" Changement de couche",n==="bath"&&" Bain"]}),b.jsx("button",{className:"close-button",onClick:t,children:""})]}),b.jsxs("form",{onSubmit:c,children:[n==="feeding"&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Sein"}),b.jsxs("div",{className:"breast-options",children:[b.jsxs("button",{type:"button",className:`breast-option ${o.breast==="left"?"active":""}`,onClick:()=>y("left"),children:[b.jsx("span",{className:"breast-emoji",children:""}),b.jsx("span",{className:"breast-label",children:"Sein Gauche"})]}),b.jsxs("button",{type:"button",className:`breast-option ${o.breast==="right"?"active":""}`,onClick:()=>y("right"),children:[b.jsx("span",{className:"breast-emoji",children:""}),b.jsx("span",{className:"breast-label",children:"Sein Droit"})]})]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Dure de l'allaitement (optionnel)"}),b.jsxs("div",{className:"duration-options",children:[b.jsx("button",{type:"button",className:`duration-option ${o.duration===5?"active":""}`,onClick:()=>f(5),children:"5 min"}),b.jsx("button",{type:"button",className:`duration-option ${o.duration===10?"active":""}`,onClick:()=>f(10),children:"10 min"}),b.jsx("button",{type:"button",className:`duration-option ${o.duration===15?"active":""}`,onClick:()=>f(15),children:"15 min"}),b.jsx("button",{type:"button",className:`duration-option ${o.duration===20?"active":""}`,onClick:()=>f(20),children:"20 min"})]}),b.jsx("div",{className:"custom-duration",children:b.jsx("input",{type:"number",placeholder:"Autre dure (min)",value:o.customDuration,onChange:v=>m(v.target.value),min:"1",max:"120",className:"custom-duration-input"})})]})]}),n==="diaper"&&b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Type de couche"}),b.jsxs("div",{className:"diaper-options",children:[b.jsx("button",{type:"button",className:`diaper-option ${o.diaperType==="pee"?"active":""}`,onClick:()=>h("pee"),children:" Pipi"}),b.jsx("button",{type:"button",className:`diaper-option ${o.diaperType==="poop"?"active":""}`,onClick:()=>h("poop"),children:" Caca"}),b.jsx("button",{type:"button",className:`diaper-option ${o.diaperType==="both"?"active":""}`,onClick:()=>h("both"),children:" Les deux"})]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"customTime",children:"Heure (optionnel - par dfaut maintenant)"}),b.jsx("input",{type:"time",id:"customTime",value:o.customTime,onChange:v=>l({...o,customTime:v.target.value}),className:"custom-time-input"}),b.jsx("div",{className:"time-hint",children:"Laissez vide pour utiliser l'heure actuelle"})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"notes",children:"Notes (optionnel)"}),b.jsx("textarea",{id:"notes",value:o.notes,onChange:v=>l({...o,notes:v.target.value}),placeholder:n==="feeding"?"Ex: Bon allaitement, bb calme...":n==="diaper"?"Ex: Couche trs mouille, selles normales...":"Ex: Bain agrable, temprature de l'eau...",rows:"3"})]}),b.jsxs("div",{className:"modal-actions",children:[b.jsx("button",{type:"button",className:"cancel-button",onClick:t,children:"Annuler"}),b.jsx("button",{type:"submit",className:"submit-button",children:"Enregistrer"})]})]})]})})},aV=({onAddEvent:n,lastFeeding:e})=>{const[t,i]=ae.useState(!1),[r,o]=ae.useState(null),l=f=>{o(f),i(!0)},c=f=>{n(f),i(!1),o(null)},h=()=>{i(!1),o(null)};return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"quick-actions",children:[b.jsx("h3",{children:"Actions rapides"}),b.jsxs("div",{className:"action-buttons",children:[b.jsxs("button",{className:"action-button feeding",onClick:()=>l("feeding"),children:[b.jsx("div",{className:"action-icon",children:""}),b.jsx("div",{className:"action-label",children:"Allaitement"})]}),b.jsxs("button",{className:"action-button diaper",onClick:()=>l("diaper"),children:[b.jsx("div",{className:"action-icon",children:""}),b.jsx("div",{className:"action-label",children:"Couche"})]})]}),b.jsx("div",{className:"secondary-actions",children:b.jsxs("button",{className:"secondary-action-button bath",onClick:()=>l("bath"),children:[b.jsx("span",{className:"secondary-icon",children:""}),b.jsx("span",{className:"secondary-label",children:"Bain"})]})})]}),t&&b.jsx(wS,{type:r,onSubmit:c,onClose:h,lastFeeding:e})]})},bS=({events:n,limit:e,onEditEvent:t})=>{const{activeBaby:i}=nl(),r=e?n.slice(0,e):n,o=S=>{const I={};return S.forEach(k=>{const N=new Date(k.createdAt),L=bc(N,"yyyy-MM-dd");I[L]||(I[L]={date:N,events:[]}),I[L].events.push(k)}),Object.values(I)},l=S=>AO(S)?"Aujourd'hui":CO(S)?"Hier":bc(S,"EEEE d MMMM",{locale:Wa}),c=S=>{const I={};return S.forEach(k=>{I[k.type]=(I[k.type]||0)+1}),I},h=o(r),f=async S=>{if(i&&window.confirm("tes-vous sr de vouloir supprimer cet vnement ?"))try{await r2(i.id,S)}catch(I){console.error("Erreur lors de la suppression:",I),alert("Erreur lors de la suppression de l'vnement")}},m=S=>S.type==="feeding"?"":S.type==="diaper"?S.diaperType==="pee"?"":S.diaperType==="poop"?"":"":S.type==="bath"?"":"",y=S=>S.type==="feeding"?"Allaitement":S.type==="diaper"?S.diaperType==="pee"?"Couche - Pipi":S.diaperType==="poop"?"Couche - Caca":"Couche - Les deux":S.type==="bath"?"Bain":"vnement",v=S=>{if(S.type==="feeding"&&S.breast){if(S.breast==="left")return" Sein gauche";if(S.breast==="right")return" Sein droit"}return null},x=S=>S.type==="feeding"&&(S.duration||S.customDuration)?`${S.duration||S.customDuration} min`:null;return r.length===0?b.jsxs("div",{className:"timeline-empty",children:[b.jsx("div",{className:"timeline-empty-icon",children:""}),b.jsx("p",{children:"Aucun vnement  afficher"})]}):b.jsx("div",{className:"event-timeline",children:h.map((S,I)=>{const k=c(S.events);return b.jsxs("div",{className:"timeline-group",children:[b.jsxs("div",{className:"timeline-date-header",children:[b.jsxs("div",{className:"timeline-date-label",children:[l(S.date),b.jsxs("span",{className:"timeline-date-counts",children:[k.feeding&&b.jsxs("span",{className:"count-item feeding",children:[k.feeding," "]}),k.diaper&&b.jsxs("span",{className:"count-item diaper",children:[k.diaper," "]}),k.bath&&b.jsxs("span",{className:"count-item bath",children:[k.bath," "]})]})]}),b.jsx("div",{className:"timeline-date-line"})]}),S.events.map((N,L)=>b.jsxs("div",{className:`timeline-item ${N.type}`,children:[b.jsx("div",{className:"timeline-time",children:bc(new Date(N.createdAt),"HH:mm",{locale:Wa})}),b.jsxs("div",{className:"timeline-marker",children:[b.jsx("div",{className:"timeline-dot"}),(L<S.events.length-1||I<h.length-1)&&b.jsx("div",{className:"timeline-line"})]}),b.jsx("div",{className:"timeline-content",children:b.jsxs("div",{className:"timeline-card",children:[b.jsxs("div",{className:"timeline-header",children:[b.jsx("div",{className:"timeline-icon",children:m(N)}),b.jsxs("div",{className:"timeline-info",children:[b.jsxs("div",{className:"timeline-title",children:[y(N),v(N)&&b.jsx("span",{className:"timeline-breast-badge",children:v(N)})]}),x(N)&&b.jsx("div",{className:"timeline-details",children:x(N)})]}),b.jsxs("div",{className:"timeline-actions",children:[t&&b.jsx("button",{className:"timeline-edit",onClick:()=>t(N),title:"Modifier",children:""}),b.jsx("button",{className:"timeline-delete",onClick:()=>f(N.id),title:"Supprimer",children:""})]})]}),N.notes&&b.jsxs("div",{className:"timeline-notes",children:[b.jsx("div",{className:"timeline-notes-icon",children:""}),N.notes]})]})})]},N.id))]},S.date.toISOString())})})},lV=({events:n,showAll:e=!1,onEditEvent:t})=>{const[i,r]=ae.useState("all"),o=n.filter(l=>i==="all"?!0:l.type===i);return b.jsxs("div",{className:"event-history",children:[b.jsxs("div",{className:"history-header",children:[b.jsx("h3",{children:e?"Historique complet":"Derniers vnements"}),e&&b.jsxs("div",{className:"filter-buttons",children:[b.jsx("button",{className:`filter-btn ${i==="all"?"active":""}`,onClick:()=>r("all"),children:"Tous"}),b.jsx("button",{className:`filter-btn ${i==="feeding"?"active":""}`,onClick:()=>r("feeding"),children:" Allaitement"}),b.jsx("button",{className:`filter-btn ${i==="diaper"?"active":""}`,onClick:()=>r("diaper"),children:" Couches"}),b.jsx("button",{className:`filter-btn ${i==="bath"?"active":""}`,onClick:()=>r("bath"),children:" Bains"})]})]}),b.jsx(bS,{events:o,limit:e?null:5,onEditEvent:t})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function iu(n){return n+.5|0}const ss=(n,e,t)=>Math.max(Math.min(n,t),e);function cc(n){return ss(iu(n*2.55),0,255)}function ds(n){return ss(iu(n*255),0,255)}function pr(n){return ss(iu(n/2.55)/100,0,1)}function Hw(n){return ss(iu(n*100),0,100)}const Wn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Xm=[..."0123456789ABCDEF"],cV=n=>Xm[n&15],uV=n=>Xm[(n&240)>>4]+Xm[n&15],kh=n=>(n&240)>>4===(n&15),hV=n=>kh(n.r)&&kh(n.g)&&kh(n.b)&&kh(n.a);function dV(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Wn[n[1]]*17,g:255&Wn[n[2]]*17,b:255&Wn[n[3]]*17,a:e===5?Wn[n[4]]*17:255}:(e===7||e===9)&&(t={r:Wn[n[1]]<<4|Wn[n[2]],g:Wn[n[3]]<<4|Wn[n[4]],b:Wn[n[5]]<<4|Wn[n[6]],a:e===9?Wn[n[7]]<<4|Wn[n[8]]:255})),t}const fV=(n,e)=>n<255?e(n):"";function pV(n){var e=hV(n)?cV:uV;return n?"#"+e(n.r)+e(n.g)+e(n.b)+fV(n.a,e):void 0}const mV=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ES(n,e,t){const i=e*Math.min(t,1-t),r=(o,l=(o+n/30)%12)=>t-i*Math.max(Math.min(l-3,9-l,1),-1);return[r(0),r(8),r(4)]}function gV(n,e,t){const i=(r,o=(r+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function yV(n,e,t){const i=ES(n,1,.5);let r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function vV(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function yy(n){const t=n.r/255,i=n.g/255,r=n.b/255,o=Math.max(t,i,r),l=Math.min(t,i,r),c=(o+l)/2;let h,f,m;return o!==l&&(m=o-l,f=c>.5?m/(2-o-l):m/(o+l),h=vV(t,i,r,m,o),h=h*60+.5),[h|0,f||0,c]}function vy(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(ds)}function _y(n,e,t){return vy(ES,n,e,t)}function _V(n,e,t){return vy(yV,n,e,t)}function wV(n,e,t){return vy(gV,n,e,t)}function xS(n){return(n%360+360)%360}function bV(n){const e=mV.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?cc(+e[5]):ds(+e[5]));const r=xS(+e[2]),o=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?i=_V(r,o,l):e[1]==="hsv"?i=wV(r,o,l):i=_y(r,o,l),{r:i[0],g:i[1],b:i[2],a:t}}function EV(n,e){var t=yy(n);t[0]=xS(t[0]+e),t=_y(t),n.r=t[0],n.g=t[1],n.b=t[2]}function xV(n){if(!n)return;const e=yy(n),t=e[0],i=Hw(e[1]),r=Hw(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${pr(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}const $w={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},qw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function TV(){const n={},e=Object.keys(qw),t=Object.keys($w);let i,r,o,l,c;for(i=0;i<e.length;i++){for(l=c=e[i],r=0;r<t.length;r++)o=t[r],c=c.replace(o,$w[o]);o=parseInt(qw[l],16),n[c]=[o>>16&255,o>>8&255,o&255]}return n}let Ah;function SV(n){Ah||(Ah=TV(),Ah.transparent=[0,0,0,0]);const e=Ah[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const IV=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function kV(n){const e=IV.exec(n);let t=255,i,r,o;if(e){if(e[7]!==i){const l=+e[7];t=e[8]?cc(l):ss(l*255,0,255)}return i=+e[1],r=+e[3],o=+e[5],i=255&(e[2]?cc(i):ss(i,0,255)),r=255&(e[4]?cc(r):ss(r,0,255)),o=255&(e[6]?cc(o):ss(o,0,255)),{r:i,g:r,b:o,a:t}}}function AV(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${pr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const hm=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ba=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function CV(n,e,t){const i=ba(pr(n.r)),r=ba(pr(n.g)),o=ba(pr(n.b));return{r:ds(hm(i+t*(ba(pr(e.r))-i))),g:ds(hm(r+t*(ba(pr(e.g))-r))),b:ds(hm(o+t*(ba(pr(e.b))-o))),a:n.a+t*(e.a-n.a)}}function Ch(n,e,t){if(n){let i=yy(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=_y(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function TS(n,e){return n&&Object.assign(e||{},n)}function Kw(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=ds(n[3]))):(e=TS(n,{r:0,g:0,b:0,a:1}),e.a=ds(e.a)),e}function PV(n){return n.charAt(0)==="r"?kV(n):bV(n)}class Lc{constructor(e){if(e instanceof Lc)return e;const t=typeof e;let i;t==="object"?i=Kw(e):t==="string"&&(i=dV(e)||SV(e)||PV(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=TS(this._rgb);return e&&(e.a=pr(e.a)),e}set rgb(e){this._rgb=Kw(e)}rgbString(){return this._valid?AV(this._rgb):void 0}hexString(){return this._valid?pV(this._rgb):void 0}hslString(){return this._valid?xV(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,r=e.rgb;let o;const l=t===o?.5:t,c=2*l-1,h=i.a-r.a,f=((c*h===-1?c:(c+h)/(1+c*h))+1)/2;o=1-f,i.r=255&f*i.r+o*r.r+.5,i.g=255&f*i.g+o*r.g+.5,i.b=255&f*i.b+o*r.b+.5,i.a=l*i.a+(1-l)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=CV(this._rgb,e._rgb,t)),this}clone(){return new Lc(this.rgb)}alpha(e){return this._rgb.a=ds(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=iu(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ch(this._rgb,2,e),this}darken(e){return Ch(this._rgb,2,-e),this}saturate(e){return Ch(this._rgb,1,e),this}desaturate(e){return Ch(this._rgb,1,-e),this}rotate(e){return EV(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ur(){}const RV=(()=>{let n=0;return()=>n++})();function qe(n){return n==null}function Rt(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ue(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Gn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Ci(n,e){return Gn(n)?n:e}function De(n,e){return typeof n>"u"?e:n}const NV=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,SS=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function st(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Qe(n,e,t,i){let r,o,l;if(Rt(n))for(o=n.length,r=0;r<o;r++)e.call(t,n[r],r);else if(Ue(n))for(l=Object.keys(n),o=l.length,r=0;r<o;r++)e.call(t,n[l[r]],l[r])}function Ad(n,e){let t,i,r,o;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],o=e[t],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function Cd(n){if(Rt(n))return n.map(Cd);if(Ue(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let r=0;for(;r<i;++r)e[t[r]]=Cd(n[t[r]]);return e}return n}function IS(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function DV(n,e,t,i){if(!IS(n))return;const r=e[n],o=t[n];Ue(r)&&Ue(o)?jc(r,o,i):e[n]=Cd(o)}function jc(n,e,t){const i=Rt(e)?e:[e],r=i.length;if(!Ue(n))return n;t=t||{};const o=t.merger||DV;let l;for(let c=0;c<r;++c){if(l=i[c],!Ue(l))continue;const h=Object.keys(l);for(let f=0,m=h.length;f<m;++f)o(h[f],n,l,t)}return n}function Ec(n,e){return jc(n,e,{merger:MV})}function MV(n,e,t){if(!IS(n))return;const i=e[n],r=t[n];Ue(i)&&Ue(r)?Ec(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Cd(r))}const Gw={"":n=>n,x:n=>n.x,y:n=>n.y};function OV(n){const e=n.split("."),t=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function VV(n){const e=OV(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function Eo(n,e){return(Gw[e]||(Gw[e]=VV(e)))(n)}function wy(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Fc=n=>typeof n<"u",bs=n=>typeof n=="function",Yw=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function LV(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Xe=Math.PI,mt=2*Xe,jV=mt+Xe,Pd=Number.POSITIVE_INFINITY,FV=Xe/180,Nt=Xe/2,Zs=Xe/4,Qw=Xe*2/3,kS=Math.log10,Bi=Math.sign;function xc(n,e,t){return Math.abs(n-e)<t}function Xw(n){const e=Math.round(n);n=xc(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(kS(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function zV(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,o)=>r-o).pop(),e}function BV(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function zc(n){return!BV(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function UV(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function WV(n,e,t){let i,r,o;for(i=0,r=n.length;i<r;i++)o=n[i][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function vr(n){return n*(Xe/180)}function HV(n){return n*(180/Xe)}function Jw(n){if(!Gn(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function AS(n,e){const t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i);let o=Math.atan2(i,t);return o<-.5*Xe&&(o+=mt),{angle:o,distance:r}}function Jm(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function $V(n,e){return(n-e+jV)%mt-Xe}function hi(n){return(n%mt+mt)%mt}function Bc(n,e,t,i){const r=hi(n),o=hi(e),l=hi(t),c=hi(o-r),h=hi(l-r),f=hi(r-o),m=hi(r-l);return r===o||r===l||i&&o===l||c>h&&f<m}function tn(n,e,t){return Math.max(e,Math.min(t,n))}function qV(n){return tn(n,-32768,32767)}function os(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function by(n,e,t){t=t||(l=>n[l]<e);let i=n.length-1,r=0,o;for(;i-r>1;)o=r+i>>1,t(o)?r=o:i=o;return{lo:r,hi:i}}const co=(n,e,t,i)=>by(n,t,i?r=>{const o=n[r][e];return o<t||o===t&&n[r+1][e]===t}:r=>n[r][e]<t),KV=(n,e,t)=>by(n,t,i=>n[i][e]>=t);function GV(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}const CS=["push","pop","shift","splice","unshift"];function YV(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),CS.forEach(t=>{const i="_onData"+wy(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...o){const l=r.apply(this,o);return n._chartjs.listeners.forEach(c=>{typeof c[i]=="function"&&c[i](...o)}),l}})})}function Zw(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(CS.forEach(o=>{delete n[o]}),delete n._chartjs)}function PS(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const RS=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function NS(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,RS.call(window,()=>{i=!1,n.apply(e,t)}))}}function QV(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const Ey=n=>n==="start"?"left":n==="end"?"right":"center",Jt=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,XV=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function JV(n,e,t){const i=e.length;let r=0,o=i;if(n._sorted){const{iScale:l,vScale:c,_parsed:h}=n,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,m=l.axis,{min:y,max:v,minDefined:x,maxDefined:S}=l.getUserBounds();if(x){if(r=Math.min(co(h,m,y).lo,t?i:co(e,m,l.getPixelForValue(y)).lo),f){const I=h.slice(0,r+1).reverse().findIndex(k=>!qe(k[c.axis]));r-=Math.max(0,I)}r=tn(r,0,i-1)}if(S){let I=Math.max(co(h,l.axis,v,!0).hi+1,t?0:co(e,m,l.getPixelForValue(v),!0).hi+1);if(f){const k=h.slice(I-1).findIndex(N=>!qe(N[c.axis]));I+=Math.max(0,k)}o=tn(I,r,i)-r}else o=i-r}return{start:r,count:o}}function ZV(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;const o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),o}const Ph=n=>n===0||n===1,eb=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*mt/t)),tb=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*mt/t)+1,Tc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Nt)+1,easeOutSine:n=>Math.sin(n*Nt),easeInOutSine:n=>-.5*(Math.cos(Xe*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Ph(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Ph(n)?n:eb(n,.075,.3),easeOutElastic:n=>Ph(n)?n:tb(n,.075,.3),easeInOutElastic(n){return Ph(n)?n:n<.5?.5*eb(n*2,.1125,.45):.5+.5*tb(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Tc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Tc.easeInBounce(n*2)*.5:Tc.easeOutBounce(n*2-1)*.5+.5};function xy(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function nb(n){return xy(n)?n:new Lc(n)}function dm(n){return xy(n)?n:new Lc(n).saturate(.5).darken(.1).hexString()}const eL=["x","y","borderWidth","radius","tension"],tL=["color","borderColor","backgroundColor"];function nL(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:tL},numbers:{type:"number",properties:eL}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function iL(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ib=new Map;function rL(n,e){e=e||{};const t=n+JSON.stringify(e);let i=ib.get(t);return i||(i=new Intl.NumberFormat(n,e),ib.set(t,i)),i}function Ty(n,e,t){return rL(e,t).format(n)}const sL={values(n){return Rt(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let r,o=n;if(t.length>1){const f=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(f<1e-4||f>1e15)&&(r="scientific"),o=oL(n,t)}const l=kS(Math.abs(o)),c=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),h={notation:r,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(h,this.options.ticks.format),Ty(n,i,h)}};function oL(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var DS={formatters:sL};function aL(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:DS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const xo=Object.create(null),Zm=Object.create(null);function Sc(n,e){if(!e)return n;const t=e.split(".");for(let i=0,r=t.length;i<r;++i){const o=t[i];n=n[o]||(n[o]=Object.create(null))}return n}function fm(n,e,t){return typeof e=="string"?jc(Sc(n,e),t):jc(Sc(n,""),e)}class lL{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>dm(r.backgroundColor),this.hoverBorderColor=(i,r)=>dm(r.borderColor),this.hoverColor=(i,r)=>dm(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return fm(this,e,t)}get(e){return Sc(this,e)}describe(e,t){return fm(Zm,e,t)}override(e,t){return fm(xo,e,t)}route(e,t,i,r){const o=Sc(this,e),l=Sc(this,i),c="_"+t;Object.defineProperties(o,{[c]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){const h=this[c],f=l[r];return Ue(h)?Object.assign({},f,h):De(h,f)},set(h){this[c]=h}}})}apply(e){e.forEach(t=>t(this))}}var _t=new lL({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[nL,iL,aL]);function cL(n){return!n||qe(n.size)||qe(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function rb(n,e,t,i,r){let o=e[r];return o||(o=e[r]=n.measureText(r).width,t.push(r)),o>i&&(i=o),i}function eo(n,e,t){const i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function sb(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function eg(n,e,t,i){MS(n,e,t,i,null)}function MS(n,e,t,i,r){let o,l,c,h,f,m,y,v;const x=e.pointStyle,S=e.rotation,I=e.radius;let k=(S||0)*FV;if(x&&typeof x=="object"&&(o=x.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(k),n.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),n.restore();return}if(!(isNaN(I)||I<=0)){switch(n.beginPath(),x){default:r?n.ellipse(t,i,r/2,I,0,0,mt):n.arc(t,i,I,0,mt),n.closePath();break;case"triangle":m=r?r/2:I,n.moveTo(t+Math.sin(k)*m,i-Math.cos(k)*I),k+=Qw,n.lineTo(t+Math.sin(k)*m,i-Math.cos(k)*I),k+=Qw,n.lineTo(t+Math.sin(k)*m,i-Math.cos(k)*I),n.closePath();break;case"rectRounded":f=I*.516,h=I-f,l=Math.cos(k+Zs)*h,y=Math.cos(k+Zs)*(r?r/2-f:h),c=Math.sin(k+Zs)*h,v=Math.sin(k+Zs)*(r?r/2-f:h),n.arc(t-y,i-c,f,k-Xe,k-Nt),n.arc(t+v,i-l,f,k-Nt,k),n.arc(t+y,i+c,f,k,k+Nt),n.arc(t-v,i+l,f,k+Nt,k+Xe),n.closePath();break;case"rect":if(!S){h=Math.SQRT1_2*I,m=r?r/2:h,n.rect(t-m,i-h,2*m,2*h);break}k+=Zs;case"rectRot":y=Math.cos(k)*(r?r/2:I),l=Math.cos(k)*I,c=Math.sin(k)*I,v=Math.sin(k)*(r?r/2:I),n.moveTo(t-y,i-c),n.lineTo(t+v,i-l),n.lineTo(t+y,i+c),n.lineTo(t-v,i+l),n.closePath();break;case"crossRot":k+=Zs;case"cross":y=Math.cos(k)*(r?r/2:I),l=Math.cos(k)*I,c=Math.sin(k)*I,v=Math.sin(k)*(r?r/2:I),n.moveTo(t-y,i-c),n.lineTo(t+y,i+c),n.moveTo(t+v,i-l),n.lineTo(t-v,i+l);break;case"star":y=Math.cos(k)*(r?r/2:I),l=Math.cos(k)*I,c=Math.sin(k)*I,v=Math.sin(k)*(r?r/2:I),n.moveTo(t-y,i-c),n.lineTo(t+y,i+c),n.moveTo(t+v,i-l),n.lineTo(t-v,i+l),k+=Zs,y=Math.cos(k)*(r?r/2:I),l=Math.cos(k)*I,c=Math.sin(k)*I,v=Math.sin(k)*(r?r/2:I),n.moveTo(t-y,i-c),n.lineTo(t+y,i+c),n.moveTo(t+v,i-l),n.lineTo(t-v,i+l);break;case"line":l=r?r/2:Math.cos(k)*I,c=Math.sin(k)*I,n.moveTo(t-l,i-c),n.lineTo(t+l,i+c);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(k)*(r?r/2:I),i+Math.sin(k)*I);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Uc(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Sy(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Iy(n){n.restore()}function uL(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){const o=(e.x+t.x)/2;n.lineTo(o,e.y),n.lineTo(o,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function hL(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function dL(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),qe(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function fL(n,e,t,i,r){if(r.strikethrough||r.underline){const o=n.measureText(i),l=e-o.actualBoundingBoxLeft,c=e+o.actualBoundingBoxRight,h=t-o.actualBoundingBoxAscent,f=t+o.actualBoundingBoxDescent,m=r.strikethrough?(h+f)/2:f;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(l,m),n.lineTo(c,m),n.stroke()}}function pL(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Wc(n,e,t,i,r,o={}){const l=Rt(e)?e:[e],c=o.strokeWidth>0&&o.strokeColor!=="";let h,f;for(n.save(),n.font=r.string,dL(n,o),h=0;h<l.length;++h)f=l[h],o.backdrop&&pL(n,o.backdrop),c&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),qe(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(f,t,i,o.maxWidth)),n.fillText(f,t,i,o.maxWidth),fL(n,t,i,f,o),i+=Number(r.lineHeight);n.restore()}function Rd(n,e){const{x:t,y:i,w:r,h:o,radius:l}=e;n.arc(t+l.topLeft,i+l.topLeft,l.topLeft,1.5*Xe,Xe,!0),n.lineTo(t,i+o-l.bottomLeft),n.arc(t+l.bottomLeft,i+o-l.bottomLeft,l.bottomLeft,Xe,Nt,!0),n.lineTo(t+r-l.bottomRight,i+o),n.arc(t+r-l.bottomRight,i+o-l.bottomRight,l.bottomRight,Nt,0,!0),n.lineTo(t+r,i+l.topRight),n.arc(t+r-l.topRight,i+l.topRight,l.topRight,0,-Nt,!0),n.lineTo(t+l.topLeft,i)}const mL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,gL=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function yL(n,e){const t=(""+n).match(mL);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const vL=n=>+n||0;function ky(n,e){const t={},i=Ue(e),r=i?Object.keys(e):e,o=Ue(n)?i?l=>De(n[l],n[e[l]]):l=>n[l]:()=>n;for(const l of r)t[l]=vL(o(l));return t}function OS(n){return ky(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Na(n){return ky(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Yn(n){const e=OS(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function nn(n,e){n=n||{},e=e||_t.font;let t=De(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=De(n.style,e.style);i&&!(""+i).match(gL)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:De(n.family,e.family),lineHeight:yL(De(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:De(n.weight,e.weight),string:""};return r.string=cL(r),r}function Rh(n,e,t,i){let r,o,l;for(r=0,o=n.length;r<o;++r)if(l=n[r],l!==void 0&&l!==void 0)return l}function _L(n,e,t){const{min:i,max:r}=n,o=SS(e,(r-i)/2),l=(c,h)=>t&&c===0?0:c+h;return{min:l(i,-Math.abs(o)),max:l(r,o)}}function ko(n,e){return Object.assign(Object.create(n),e)}function Ay(n,e=[""],t,i,r=()=>n[0]){const o=t||n;typeof i>"u"&&(i=FS("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:r,override:c=>Ay([c,...n],e,o,i)};return new Proxy(l,{deleteProperty(c,h){return delete c[h],delete c._keys,delete n[0][h],!0},get(c,h){return LS(c,h,()=>kL(h,e,n,c))},getOwnPropertyDescriptor(c,h){return Reflect.getOwnPropertyDescriptor(c._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(c,h){return ab(c).includes(h)},ownKeys(c){return ab(c)},set(c,h,f){const m=c._storage||(c._storage=r());return c[h]=m[h]=f,delete c._keys,!0}})}function Ha(n,e,t,i){const r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:VS(n,i),setContext:o=>Ha(n,o,t,i),override:o=>Ha(n.override(o),e,t,i)};return new Proxy(r,{deleteProperty(o,l){return delete o[l],delete n[l],!0},get(o,l,c){return LS(o,l,()=>bL(o,l,c))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(o,l,c){return n[l]=c,delete o[l],!0}})}function VS(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:bs(t)?t:()=>t,isIndexable:bs(i)?i:()=>i}}const wL=(n,e)=>n?n+wy(e):e,Cy=(n,e)=>Ue(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function LS(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function bL(n,e,t){const{_proxy:i,_context:r,_subProxy:o,_descriptors:l}=n;let c=i[e];return bs(c)&&l.isScriptable(e)&&(c=EL(e,c,n,t)),Rt(c)&&c.length&&(c=xL(e,c,n,l.isIndexable)),Cy(e,c)&&(c=Ha(c,r,o&&o[e],l)),c}function EL(n,e,t,i){const{_proxy:r,_context:o,_subProxy:l,_stack:c}=t;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let h=e(o,l||i);return c.delete(n),Cy(n,h)&&(h=Py(r._scopes,r,n,h)),h}function xL(n,e,t,i){const{_proxy:r,_context:o,_subProxy:l,_descriptors:c}=t;if(typeof o.index<"u"&&i(n))return e[o.index%e.length];if(Ue(e[0])){const h=e,f=r._scopes.filter(m=>m!==h);e=[];for(const m of h){const y=Py(f,r,n,m);e.push(Ha(y,o,l&&l[n],c))}}return e}function jS(n,e,t){return bs(n)?n(e,t):n}const TL=(n,e)=>n===!0?e:typeof n=="string"?Eo(e,n):void 0;function SL(n,e,t,i,r){for(const o of e){const l=TL(t,o);if(l){n.add(l);const c=jS(l._fallback,t,r);if(typeof c<"u"&&c!==t&&c!==i)return c}else if(l===!1&&typeof i<"u"&&t!==i)return null}return!1}function Py(n,e,t,i){const r=e._rootScopes,o=jS(e._fallback,t,i),l=[...n,...r],c=new Set;c.add(i);let h=ob(c,l,t,o||t,i);return h===null||typeof o<"u"&&o!==t&&(h=ob(c,l,o,h,i),h===null)?!1:Ay(Array.from(c),[""],r,o,()=>IL(e,t,i))}function ob(n,e,t,i,r){for(;t;)t=SL(n,e,t,i,r);return t}function IL(n,e,t){const i=n._getTarget();e in i||(i[e]={});const r=i[e];return Rt(r)&&Ue(t)?t:r||{}}function kL(n,e,t,i){let r;for(const o of e)if(r=FS(wL(o,n),t),typeof r<"u")return Cy(n,r)?Py(t,i,n,r):r}function FS(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function ab(n){let e=n._keys;return e||(e=n._keys=AL(n._scopes)),e}function AL(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const CL=Number.EPSILON||1e-14,$a=(n,e)=>e<n.length&&!n[e].skip&&n[e],zS=n=>n==="x"?"y":"x";function PL(n,e,t,i){const r=n.skip?e:n,o=e,l=t.skip?e:t,c=Jm(o,r),h=Jm(l,o);let f=c/(c+h),m=h/(c+h);f=isNaN(f)?0:f,m=isNaN(m)?0:m;const y=i*f,v=i*m;return{previous:{x:o.x-y*(l.x-r.x),y:o.y-y*(l.y-r.y)},next:{x:o.x+v*(l.x-r.x),y:o.y+v*(l.y-r.y)}}}function RL(n,e,t){const i=n.length;let r,o,l,c,h,f=$a(n,0);for(let m=0;m<i-1;++m)if(h=f,f=$a(n,m+1),!(!h||!f)){if(xc(e[m],0,CL)){t[m]=t[m+1]=0;continue}r=t[m]/e[m],o=t[m+1]/e[m],c=Math.pow(r,2)+Math.pow(o,2),!(c<=9)&&(l=3/Math.sqrt(c),t[m]=r*l*e[m],t[m+1]=o*l*e[m])}}function NL(n,e,t="x"){const i=zS(t),r=n.length;let o,l,c,h=$a(n,0);for(let f=0;f<r;++f){if(l=c,c=h,h=$a(n,f+1),!c)continue;const m=c[t],y=c[i];l&&(o=(m-l[t])/3,c[`cp1${t}`]=m-o,c[`cp1${i}`]=y-o*e[f]),h&&(o=(h[t]-m)/3,c[`cp2${t}`]=m+o,c[`cp2${i}`]=y+o*e[f])}}function DL(n,e="x"){const t=zS(e),i=n.length,r=Array(i).fill(0),o=Array(i);let l,c,h,f=$a(n,0);for(l=0;l<i;++l)if(c=h,h=f,f=$a(n,l+1),!!h){if(f){const m=f[e]-h[e];r[l]=m!==0?(f[t]-h[t])/m:0}o[l]=c?f?Bi(r[l-1])!==Bi(r[l])?0:(r[l-1]+r[l])/2:r[l-1]:r[l]}RL(n,r,o),NL(n,o,e)}function Nh(n,e,t){return Math.max(Math.min(n,t),e)}function ML(n,e){let t,i,r,o,l,c=Uc(n[0],e);for(t=0,i=n.length;t<i;++t)l=o,o=c,c=t<i-1&&Uc(n[t+1],e),o&&(r=n[t],l&&(r.cp1x=Nh(r.cp1x,e.left,e.right),r.cp1y=Nh(r.cp1y,e.top,e.bottom)),c&&(r.cp2x=Nh(r.cp2x,e.left,e.right),r.cp2y=Nh(r.cp2y,e.top,e.bottom)))}function OL(n,e,t,i,r){let o,l,c,h;if(e.spanGaps&&(n=n.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")DL(n,r);else{let f=i?n[n.length-1]:n[0];for(o=0,l=n.length;o<l;++o)c=n[o],h=PL(f,c,n[Math.min(o+1,l-(i?0:1))%l],e.tension),c.cp1x=h.previous.x,c.cp1y=h.previous.y,c.cp2x=h.next.x,c.cp2y=h.next.y,f=c}e.capBezierPoints&&ML(n,t)}function Ry(){return typeof window<"u"&&typeof document<"u"}function Ny(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Nd(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const ff=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function VL(n,e){return ff(n).getPropertyValue(e)}const LL=["top","right","bottom","left"];function po(n,e,t){const i={};t=t?"-"+t:"";for(let r=0;r<4;r++){const o=LL[r];i[o]=parseFloat(n[e+"-"+o+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const jL=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function FL(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:o}=i;let l=!1,c,h;if(jL(r,o,n.target))c=r,h=o;else{const f=e.getBoundingClientRect();c=i.clientX-f.left,h=i.clientY-f.top,l=!0}return{x:c,y:h,box:l}}function ro(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,r=ff(t),o=r.boxSizing==="border-box",l=po(r,"padding"),c=po(r,"border","width"),{x:h,y:f,box:m}=FL(n,t),y=l.left+(m&&c.left),v=l.top+(m&&c.top);let{width:x,height:S}=e;return o&&(x-=l.width+c.width,S-=l.height+c.height),{x:Math.round((h-y)/x*t.width/i),y:Math.round((f-v)/S*t.height/i)}}function zL(n,e,t){let i,r;if(e===void 0||t===void 0){const o=n&&Ny(n);if(!o)e=n.clientWidth,t=n.clientHeight;else{const l=o.getBoundingClientRect(),c=ff(o),h=po(c,"border","width"),f=po(c,"padding");e=l.width-f.width-h.width,t=l.height-f.height-h.height,i=Nd(c.maxWidth,o,"clientWidth"),r=Nd(c.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:i||Pd,maxHeight:r||Pd}}const as=n=>Math.round(n*10)/10;function BL(n,e,t,i){const r=ff(n),o=po(r,"margin"),l=Nd(r.maxWidth,n,"clientWidth")||Pd,c=Nd(r.maxHeight,n,"clientHeight")||Pd,h=zL(n,e,t);let{width:f,height:m}=h;if(r.boxSizing==="content-box"){const v=po(r,"border","width"),x=po(r,"padding");f-=x.width+v.width,m-=x.height+v.height}return f=Math.max(0,f-o.width),m=Math.max(0,i?f/i:m-o.height),f=as(Math.min(f,l,h.maxWidth)),m=as(Math.min(m,c,h.maxHeight)),f&&!m&&(m=as(f/2)),(e!==void 0||t!==void 0)&&i&&h.height&&m>h.height&&(m=h.height,f=as(Math.floor(m*i))),{width:f,height:m}}function lb(n,e,t){const i=e||1,r=as(n.height*i),o=as(n.width*i);n.height=as(n.height),n.width=as(n.width);const l=n.canvas;return l.style&&(t||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||l.height!==r||l.width!==o?(n.currentDevicePixelRatio=i,l.height=r,l.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const UL=(function(){let n=!1;try{const e={get passive(){return n=!0,!1}};Ry()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function cb(n,e){const t=VL(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function so(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function WL(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function HL(n,e,t,i){const r={x:n.cp2x,y:n.cp2y},o={x:e.cp1x,y:e.cp1y},l=so(n,r,t),c=so(r,o,t),h=so(o,e,t),f=so(l,c,t),m=so(c,h,t);return so(f,m,t)}const $L=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},qL=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Da(n,e,t){return n?$L(e,t):qL()}function BS(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function US(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function WS(n){return n==="angle"?{between:Bc,compare:$V,normalize:hi}:{between:os,compare:(e,t)=>e-t,normalize:e=>e}}function ub({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function KL(n,e,t){const{property:i,start:r,end:o}=t,{between:l,normalize:c}=WS(i),h=e.length;let{start:f,end:m,loop:y}=n,v,x;if(y){for(f+=h,m+=h,v=0,x=h;v<x&&l(c(e[f%h][i]),r,o);++v)f--,m--;f%=h,m%=h}return m<f&&(m+=h),{start:f,end:m,loop:y,style:n.style}}function GL(n,e,t){if(!t)return[n];const{property:i,start:r,end:o}=t,l=e.length,{compare:c,between:h,normalize:f}=WS(i),{start:m,end:y,loop:v,style:x}=KL(n,e,t),S=[];let I=!1,k=null,N,L,B;const W=()=>h(r,B,N)&&c(r,B)!==0,K=()=>c(o,N)===0||h(o,B,N),Z=()=>I||W(),R=()=>!I||K();for(let C=m,P=m;C<=y;++C)L=e[C%l],!L.skip&&(N=f(L[i]),N!==B&&(I=h(N,r,o),k===null&&Z()&&(k=c(N,r)===0?C:P),k!==null&&R()&&(S.push(ub({start:k,end:C,loop:v,count:l,style:x})),k=null),P=C,B=N));return k!==null&&S.push(ub({start:k,end:y,loop:v,count:l,style:x})),S}function YL(n,e){const t=[],i=n.segments;for(let r=0;r<i.length;r++){const o=GL(i[r],n.points,e);o.length&&t.push(...o)}return t}function QL(n,e,t,i){let r=0,o=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(o+=r);o>r&&n[o%e].skip;)o--;return o%=e,{start:r,end:o}}function XL(n,e,t,i){const r=n.length,o=[];let l=e,c=n[e],h;for(h=e+1;h<=t;++h){const f=n[h%r];f.skip||f.stop?c.skip||(i=!1,o.push({start:e%r,end:(h-1)%r,loop:i}),e=l=f.stop?h:null):(l=h,c.skip&&(e=h)),c=f}return l!==null&&o.push({start:e%r,end:l%r,loop:i}),o}function JL(n,e){const t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];const o=!!n._loop,{start:l,end:c}=QL(t,r,o,i);if(i===!0)return hb(n,[{start:l,end:c,loop:o}],t,e);const h=c<l?c+r:c,f=!!n._fullLoop&&l===0&&c===r-1;return hb(n,XL(t,l,h,f),t,e)}function hb(n,e,t,i){return!i||!i.setContext||!t?e:ZL(n,e,t,i)}function ZL(n,e,t,i){const r=n._chart.getContext(),o=db(n.options),{_datasetIndex:l,options:{spanGaps:c}}=n,h=t.length,f=[];let m=o,y=e[0].start,v=y;function x(S,I,k,N){const L=c?-1:1;if(S!==I){for(S+=h;t[S%h].skip;)S-=L;for(;t[I%h].skip;)I+=L;S%h!==I%h&&(f.push({start:S%h,end:I%h,loop:k,style:N}),m=N,y=I%h)}}for(const S of e){y=c?y:S.start;let I=t[y%h],k;for(v=y+1;v<=S.end;v++){const N=t[v%h];k=db(i.setContext(ko(r,{type:"segment",p0:I,p1:N,p0DataIndex:(v-1)%h,p1DataIndex:v%h,datasetIndex:l}))),ej(k,m)&&x(y,v-1,S.loop,m),I=N,m=k}y<v-1&&x(y,v-1,S.loop,m)}return f}function db(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function ej(n,e){if(!e)return!1;const t=[],i=function(r,o){return xy(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function Dh(n,e,t){return n.options.clip?n[t]:e[t]}function tj(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:Dh(t,e,"left"),right:Dh(t,e,"right"),top:Dh(i,e,"top"),bottom:Dh(i,e,"bottom")}:e}function nj(n,e){const t=e._clip;if(t.disabled)return!1;const i=tj(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class ij{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){const o=t.listeners[r],l=t.duration;o.forEach(c=>c({chart:e,initial:t.initial,numSteps:l,currentStep:Math.min(i-t.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=RS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const o=i.items;let l=o.length-1,c=!1,h;for(;l>=0;--l)h=o[l],h._active?(h._total>i.duration&&(i.duration=h._total),h.tick(e),c=!0):(o[l]=o[o.length-1],o.pop());c&&(r.draw(),this._notify(r,i,e,"progress")),o.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var hr=new ij;const fb="transparent",rj={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=nb(n||fb),r=i.valid&&nb(e||fb);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class sj{constructor(e,t,i,r){const o=t[i];r=Rh([e.to,r,o,e.from]);const l=Rh([e.from,o,r]);this._active=!0,this._fn=e.fn||rj[e.type||typeof l],this._easing=Tc[e.easing]||Tc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=l,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const r=this._target[this._prop],o=i-this._start,l=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Rh([e.to,t,r,e.from]),this._from=Rh([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,r=this._prop,o=this._from,l=this._loop,c=this._to;let h;if(this._active=o!==c&&(l||t<i),!this._active){this._target[r]=c,this._notify(!0);return}if(t<0){this._target[r]=o;return}h=t/i%2,h=l&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[r]=this._fn(o,c,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}}class HS{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ue(e))return;const t=Object.keys(_t.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const o=e[r];if(!Ue(o))return;const l={};for(const c of t)l[c]=o[c];(Rt(o.properties)&&o.properties||[r]).forEach(c=>{(c===r||!i.has(c))&&i.set(c,l)})})}_animateOptions(e,t){const i=t.options,r=aj(e,i);if(!r)return[];const o=this._createAnimations(r,i);return i.$shared&&oj(e.options.$animations,i).then(()=>{e.options=i},()=>{}),o}_createAnimations(e,t){const i=this._properties,r=[],o=e.$animations||(e.$animations={}),l=Object.keys(t),c=Date.now();let h;for(h=l.length-1;h>=0;--h){const f=l[h];if(f.charAt(0)==="$")continue;if(f==="options"){r.push(...this._animateOptions(e,t));continue}const m=t[f];let y=o[f];const v=i.get(f);if(y)if(v&&y.active()){y.update(v,m,c);continue}else y.cancel();if(!v||!v.duration){e[f]=m;continue}o[f]=y=new sj(v,e,f,m),r.push(y)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return hr.add(this._chart,i),!0}}function oj(n,e){const t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const o=n[i[r]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function aj(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function pb(n,e){const t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:i?o:r,end:i?r:o}}function lj(n,e,t){if(t===!1)return!1;const i=pb(n,t),r=pb(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function cj(n){let e,t,i,r;return Ue(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function $S(n,e){const t=[],i=n._getSortedDatasetMetas(e);let r,o;for(r=0,o=i.length;r<o;++r)t.push(i[r].index);return t}function mb(n,e,t,i={}){const r=n.keys,o=i.mode==="single";let l,c,h,f;if(e===null)return;let m=!1;for(l=0,c=r.length;l<c;++l){if(h=+r[l],h===t){if(m=!0,i.all)continue;break}f=n.values[h],Gn(f)&&(o||e===0||Bi(e)===Bi(f))&&(e+=f)}return!m&&!i.all?0:e}function uj(n,e){const{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",l=Object.keys(n),c=new Array(l.length);let h,f,m;for(h=0,f=l.length;h<f;++h)m=l[h],c[h]={[r]:m,[o]:n[m]};return c}function pm(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function hj(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function dj(n){const{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function fj(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function gb(n,e,t,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const o=n[r.index];if(t&&o>0||!t&&o<0)return r.index}return null}function yb(n,e){const{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:o,vScale:l,index:c}=i,h=o.axis,f=l.axis,m=hj(o,l,i),y=e.length;let v;for(let x=0;x<y;++x){const S=e[x],{[h]:I,[f]:k}=S,N=S._stacks||(S._stacks={});v=N[f]=fj(r,m,I),v[c]=k,v._top=gb(v,l,!0,i.type),v._bottom=gb(v,l,!1,i.type);const L=v._visualValues||(v._visualValues={});L[c]=k}}function mm(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function pj(n,e){return ko(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function mj(n,e,t){return ko(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function ec(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const r of e){const o=r._stacks;if(!o||o[i]===void 0||o[i][t]===void 0)return;delete o[i][t],o[i]._visualValues!==void 0&&o[i]._visualValues[t]!==void 0&&delete o[i]._visualValues[t]}}}const gm=n=>n==="reset"||n==="none",vb=(n,e)=>e?n:Object.assign({},n),gj=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:$S(t,!0),values:null};class mo{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=pm(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ec(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),r=(y,v,x,S)=>y==="x"?v:y==="r"?S:x,o=t.xAxisID=De(i.xAxisID,mm(e,"x")),l=t.yAxisID=De(i.yAxisID,mm(e,"y")),c=t.rAxisID=De(i.rAxisID,mm(e,"r")),h=t.indexAxis,f=t.iAxisID=r(h,o,l,c),m=t.vAxisID=r(h,l,o,c);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(l),t.rScale=this.getScaleForId(c),t.iScale=this.getScaleForId(f),t.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Zw(this._data,this),e._stacked&&ec(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(Ue(t)){const r=this._cachedMeta;this._data=uj(t,r)}else if(i!==t){if(i){Zw(i,this);const r=this._cachedMeta;ec(r),r._parsed=[]}t&&Object.isExtensible(t)&&YV(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const o=t._stacked;t._stacked=pm(t.vScale,t),t.stack!==i.stack&&(r=!0,ec(t),t.stack=i.stack),this._resyncElements(e),(r||o!==t._stacked)&&(yb(this,t._parsed),t._stacked=pm(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:r}=this,{iScale:o,_stacked:l}=i,c=o.axis;let h=e===0&&t===r.length?!0:i._sorted,f=e>0&&i._parsed[e-1],m,y,v;if(this._parsing===!1)i._parsed=r,i._sorted=!0,v=r;else{Rt(r[e])?v=this.parseArrayData(i,r,e,t):Ue(r[e])?v=this.parseObjectData(i,r,e,t):v=this.parsePrimitiveData(i,r,e,t);const x=()=>y[c]===null||f&&y[c]<f[c];for(m=0;m<t;++m)i._parsed[m+e]=y=v[m],h&&(x()&&(h=!1),f=y);i._sorted=h}l&&yb(this,v)}parsePrimitiveData(e,t,i,r){const{iScale:o,vScale:l}=e,c=o.axis,h=l.axis,f=o.getLabels(),m=o===l,y=new Array(r);let v,x,S;for(v=0,x=r;v<x;++v)S=v+i,y[v]={[c]:m||o.parse(f[S],S),[h]:l.parse(t[S],S)};return y}parseArrayData(e,t,i,r){const{xScale:o,yScale:l}=e,c=new Array(r);let h,f,m,y;for(h=0,f=r;h<f;++h)m=h+i,y=t[m],c[h]={x:o.parse(y[0],m),y:l.parse(y[1],m)};return c}parseObjectData(e,t,i,r){const{xScale:o,yScale:l}=e,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,f=new Array(r);let m,y,v,x;for(m=0,y=r;m<y;++m)v=m+i,x=t[v],f[m]={x:o.parse(Eo(x,c),v),y:l.parse(Eo(x,h),v)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const r=this.chart,o=this._cachedMeta,l=t[e.axis],c={keys:$S(r,!0),values:t._stacks[e.axis]._visualValues};return mb(c,l,o.index,{mode:i})}updateRangeFromParsed(e,t,i,r){const o=i[t.axis];let l=o===null?NaN:o;const c=r&&i._stacks[t.axis];r&&c&&(r.values=c,l=mb(r,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,t){const i=this._cachedMeta,r=i._parsed,o=i._sorted&&e===i.iScale,l=r.length,c=this._getOtherScale(e),h=gj(t,i,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:y}=dj(c);let v,x;function S(){x=r[v];const I=x[c.axis];return!Gn(x[e.axis])||m>I||y<I}for(v=0;v<l&&!(!S()&&(this.updateRangeFromParsed(f,e,x,h),o));++v);if(o){for(v=l-1;v>=0;--v)if(!S()){this.updateRangeFromParsed(f,e,x,h);break}}return f}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let r,o,l;for(r=0,o=t.length;r<o;++r)l=t[r][e.axis],Gn(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,r=t.vScale,o=this.getParsed(e);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=cj(De(this.options.clip,lj(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,r=i.data||[],o=t.chartArea,l=[],c=this._drawStart||0,h=this._drawCount||r.length-c,f=this.options.drawActiveElementsOnTop;let m;for(i.dataset&&i.dataset.draw(e,o,c,h),m=c;m<c+h;++m){const y=r[m];y.hidden||(y.active&&f?l.push(y):y.draw(e,o))}for(m=0;m<l.length;++m)l[m].draw(e,o)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const r=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=mj(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=r.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=pj(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=i,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const r=t==="active",o=this._cachedDataOpts,l=e+"-"+t,c=o[l],h=this.enableOptionSharing&&Fc(i);if(c)return vb(c,h);const f=this.chart.config,m=f.datasetElementScopeKeys(this._type,e),y=r?[`${e}Hover`,"hover",e,""]:[e,""],v=f.getOptionScopes(this.getDataset(),m),x=Object.keys(_t.elements[e]),S=()=>this.getContext(i,r,t),I=f.resolveNamedOptions(v,x,S,y);return I.$shared&&(I.$shared=h,o[l]=Object.freeze(vb(I,h))),I}_resolveAnimations(e,t,i){const r=this.chart,o=this._cachedDataOpts,l=`animation-${t}`,c=o[l];if(c)return c;let h;if(r.options.animation!==!1){const m=this.chart.config,y=m.datasetAnimationScopeKeys(this._type,t),v=m.getOptionScopes(this.getDataset(),y);h=m.createResolver(v,this.getContext(e,i,t))}const f=new HS(r,h&&h.animations);return h&&h._cacheable&&(o[l]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||gm(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),r=this._sharedOptions,o=this.getSharedOptions(i),l=this.includeOptions(t,o)||o!==r;return this.updateSharedOptions(o,t,i),{sharedOptions:o,includeOptions:l}}updateElement(e,t,i,r){gm(r)?Object.assign(e,i):this._resolveAnimations(t,r).update(e,i)}updateSharedOptions(e,t,i){e&&!gm(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,r){e.active=r;const o=this.getStyle(t,r);this._resolveAnimations(t,i,r).update(e,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[c,h,f]of this._syncList)this[c](h,f);this._syncList=[];const r=i.length,o=t.length,l=Math.min(o,r);l&&this.parse(0,l),o>r?this._insertElements(r,o-r,e):o<r&&this._removeElements(o,r-o)}_insertElements(e,t,i=!0){const r=this._cachedMeta,o=r.data,l=e+t;let c;const h=f=>{for(f.length+=t,c=f.length-1;c>=l;c--)f[c]=f[c-t]};for(h(o),c=e;c<l;++c)o[c]=new this.dataElementType;this._parsing&&h(r._parsed),this.parse(e,t),i&&this.updateElements(o,e,t,"reset")}updateElements(e,t,i,r){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,t);i._stacked&&ec(i,r)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,r]=e;this[t](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ge(mo,"defaults",{}),ge(mo,"datasetElementType",null),ge(mo,"dataElementType",null);function yj(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let r=0,o=t.length;r<o;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=PS(i.sort((r,o)=>r-o))}return n._cache.$bar}function vj(n){const e=n.iScale,t=yj(e,n.type);let i=e._length,r,o,l,c;const h=()=>{l===32767||l===-32768||(Fc(c)&&(i=Math.min(i,Math.abs(l-c)||i)),c=l)};for(r=0,o=t.length;r<o;++r)l=e.getPixelForValue(t[r]),h();for(c=void 0,r=0,o=e.ticks.length;r<o;++r)l=e.getPixelForTick(r),h();return i}function _j(n,e,t,i){const r=t.barThickness;let o,l;return qe(r)?(o=e.min*t.categoryPercentage,l=t.barPercentage):(o=r*i,l=1),{chunk:o/i,ratio:l,start:e.pixels[n]-o/2}}function wj(n,e,t,i){const r=e.pixels,o=r[n];let l=n>0?r[n-1]:null,c=n<r.length-1?r[n+1]:null;const h=t.categoryPercentage;l===null&&(l=o-(c===null?e.end-e.start:c-o)),c===null&&(c=o+o-l);const f=o-(o-Math.min(l,c))/2*h;return{chunk:Math.abs(c-l)/2*h/i,ratio:t.barPercentage,start:f}}function bj(n,e,t,i){const r=t.parse(n[0],i),o=t.parse(n[1],i),l=Math.min(r,o),c=Math.max(r,o);let h=l,f=c;Math.abs(l)>Math.abs(c)&&(h=c,f=l),e[t.axis]=f,e._custom={barStart:h,barEnd:f,start:r,end:o,min:l,max:c}}function qS(n,e,t,i){return Rt(n)?bj(n,e,t,i):e[t.axis]=t.parse(n,i),e}function _b(n,e,t,i){const r=n.iScale,o=n.vScale,l=r.getLabels(),c=r===o,h=[];let f,m,y,v;for(f=t,m=t+i;f<m;++f)v=e[f],y={},y[r.axis]=c||r.parse(l[f],f),h.push(qS(v,y,o,f));return h}function ym(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function Ej(n,e,t){return n!==0?Bi(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function xj(n){let e,t,i,r,o;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",o="start"):(r="start",o="end"),{start:t,end:i,reverse:e,top:r,bottom:o}}function Tj(n,e,t,i){let r=e.borderSkipped;const o={};if(!r){n.borderSkipped=o;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:c,reverse:h,top:f,bottom:m}=xj(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=f:(t._bottom||0)===i?r=m:(o[wb(m,l,c,h)]=!0,r=f)),o[wb(r,l,c,h)]=!0,n.borderSkipped=o}function wb(n,e,t,i){return i?(n=Sj(n,e,t),n=bb(n,t,e)):n=bb(n,e,t),n}function Sj(n,e,t){return n===e?t:n===t?e:n}function bb(n,e,t){return n==="start"?e:n==="end"?t:n}function Ij(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class Xh extends mo{parsePrimitiveData(e,t,i,r){return _b(e,t,i,r)}parseArrayData(e,t,i,r){return _b(e,t,i,r)}parseObjectData(e,t,i,r){const{iScale:o,vScale:l}=e,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,f=o.axis==="x"?c:h,m=l.axis==="x"?c:h,y=[];let v,x,S,I;for(v=i,x=i+r;v<x;++v)I=t[v],S={},S[o.axis]=o.parse(Eo(I,f),v),y.push(qS(Eo(I,m),S,l,v));return y}updateRangeFromParsed(e,t,i,r){super.updateRangeFromParsed(e,t,i,r);const o=i._custom;o&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:r}=t,o=this.getParsed(e),l=o._custom,c=ym(l)?"["+l.start+", "+l.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,r){const o=r==="reset",{index:l,_cachedMeta:{vScale:c}}=this,h=c.getBasePixel(),f=c.isHorizontal(),m=this._getRuler(),{sharedOptions:y,includeOptions:v}=this._getSharedOptions(t,r);for(let x=t;x<t+i;x++){const S=this.getParsed(x),I=o||qe(S[c.axis])?{base:h,head:h}:this._calculateBarValuePixels(x),k=this._calculateBarIndexPixels(x,m),N=(S._stacks||{})[c.axis],L={horizontal:f,base:I.base,enableBorderRadius:!N||ym(S._custom)||l===N._top||l===N._bottom,x:f?I.head:k.center,y:f?k.center:I.head,height:f?k.size:Math.abs(I.size),width:f?Math.abs(I.size):k.size};v&&(L.options=y||this.resolveDataElementOptions(x,e[x].active?"active":r));const B=L.options||e[x].options;Tj(L,B,N,l),Ij(L,B,m.ratio),this.updateElement(e[x],x,L,r)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),o=i.options.stacked,l=[],c=this._cachedMeta.controller.getParsed(t),h=c&&c[i.axis],f=m=>{const y=m._parsed.find(x=>x[i.axis]===h),v=y&&y[m.vScale.axis];if(qe(v)||isNaN(v))return!0};for(const m of r)if(!(t!==void 0&&f(m))&&((o===!1||l.indexOf(m.stack)===-1||o===void 0&&m.stack===void 0)&&l.push(m.stack),m.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[De(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,i){const r=this._getStacks(e,i),o=t!==void 0?r.indexOf(t):-1;return o===-1?r.length-1:o}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,r=[];let o,l;for(o=0,l=t.data.length;o<l;++o)r.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const c=e.barThickness;return{min:c||vj(t),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:r},options:{base:o,minBarLength:l}}=this,c=o||0,h=this.getParsed(e),f=h._custom,m=ym(f);let y=h[t.axis],v=0,x=i?this.applyStack(t,h,i):y,S,I;x!==y&&(v=x-y,x=y),m&&(y=f.barStart,x=f.barEnd-f.barStart,y!==0&&Bi(y)!==Bi(f.barEnd)&&(v=0),v+=y);const k=!qe(o)&&!m?o:v;let N=t.getPixelForValue(k);if(this.chart.getDataVisibility(e)?S=t.getPixelForValue(v+x):S=N,I=S-N,Math.abs(I)<l){I=Ej(I,t,c)*l,y===c&&(N-=I/2);const L=t.getPixelForDecimal(0),B=t.getPixelForDecimal(1),W=Math.min(L,B),K=Math.max(L,B);N=Math.max(Math.min(N,K),W),S=N+I,i&&!m&&(h._stacks[t.axis]._visualValues[r]=t.getValueForPixel(S)-t.getValueForPixel(N))}if(N===t.getPixelForValue(c)){const L=Bi(I)*t.getLineWidthForValue(c)/2;N+=L,I-=L}return{size:I,base:N,head:S,center:S+I/2}}_calculateBarIndexPixels(e,t){const i=t.scale,r=this.options,o=r.skipNull,l=De(r.maxBarThickness,1/0);let c,h;const f=this._getAxisCount();if(t.grouped){const m=o?this._getStackCount(e):t.stackCount,y=r.barThickness==="flex"?wj(e,t,r,m*f):_j(e,t,r,m*f),v=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(De(v,this.getFirstScaleIdForIndexAxis())),S=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+x;c=y.start+y.chunk*S+y.chunk/2,h=Math.min(l,y.chunk*y.ratio)}else c=i.getPixelForValue(this.getParsed(e)[i.axis],e),h=Math.min(l,t.min*t.ratio);return{base:c-h/2,head:c+h/2,center:c,size:h}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,r=i.length;let o=0;for(;o<r;++o)this.getParsed(o)[t.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}ge(Xh,"id","bar"),ge(Xh,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ge(Xh,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function kj(n,e,t){let i=1,r=1,o=0,l=0;if(e<mt){const c=n,h=c+e,f=Math.cos(c),m=Math.sin(c),y=Math.cos(h),v=Math.sin(h),x=(B,W,K)=>Bc(B,c,h,!0)?1:Math.max(W,W*t,K,K*t),S=(B,W,K)=>Bc(B,c,h,!0)?-1:Math.min(W,W*t,K,K*t),I=x(0,f,y),k=x(Nt,m,v),N=S(Xe,f,y),L=S(Xe+Nt,m,v);i=(I-N)/2,r=(k-L)/2,o=-(I+N)/2,l=-(k+L)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:l}}class uc extends mo{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let o=h=>+i[h];if(Ue(i[e])){const{key:h="value"}=this._parsing;o=f=>+Eo(i[f],h)}let l,c;for(l=e,c=e+t;l<c;++l)r._parsed[l]=o(l)}}_getRotation(){return vr(this.options.rotation-90)}_getCircumference(){return vr(this.options.circumference)}_getRotationExtents(){let e=mt,t=-mt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,o=r._getRotation(),l=r._getCircumference();e=Math.min(e,o),t=Math.max(t,o+l)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,r=this._cachedMeta,o=r.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,c=Math.max((Math.min(i.width,i.height)-l)/2,0),h=Math.min(NV(this.options.cutout,c),1),f=this._getRingWeight(this.index),{circumference:m,rotation:y}=this._getRotationExtents(),{ratioX:v,ratioY:x,offsetX:S,offsetY:I}=kj(y,m,h),k=(i.width-l)/v,N=(i.height-l)/x,L=Math.max(Math.min(k,N)/2,0),B=SS(this.options.radius,L),W=Math.max(B*h,0),K=(B-W)/this._getVisibleDatasetWeightTotal();this.offsetX=S*B,this.offsetY=I*B,r.total=this.calculateTotal(),this.outerRadius=B-K*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-K*f,0),this.updateElements(o,0,o.length,e)}_circumference(e,t){const i=this.options,r=this._cachedMeta,o=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*o/mt)}updateElements(e,t,i,r){const o=r==="reset",l=this.chart,c=l.chartArea,f=l.options.animation,m=(c.left+c.right)/2,y=(c.top+c.bottom)/2,v=o&&f.animateScale,x=v?0:this.innerRadius,S=v?0:this.outerRadius,{sharedOptions:I,includeOptions:k}=this._getSharedOptions(t,r);let N=this._getRotation(),L;for(L=0;L<t;++L)N+=this._circumference(L,o);for(L=t;L<t+i;++L){const B=this._circumference(L,o),W=e[L],K={x:m+this.offsetX,y:y+this.offsetY,startAngle:N,endAngle:N+B,circumference:B,outerRadius:S,innerRadius:x};k&&(K.options=I||this.resolveDataElementOptions(L,W.active?"active":r)),N+=B,this.updateElement(W,L,K,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,r;for(r=0;r<t.length;r++){const o=e._parsed[r];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!t[r].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?mt*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,r=i.data.labels||[],o=Ty(t._parsed[e],i.options.locale);return{label:r[e]||"",value:o}}getMaxBorderWidth(e){let t=0;const i=this.chart;let r,o,l,c,h;if(!e){for(r=0,o=i.data.datasets.length;r<o;++r)if(i.isDatasetVisible(r)){l=i.getDatasetMeta(r),e=l.data,c=l.controller;break}}if(!e)return 0;for(r=0,o=e.length;r<o;++r)h=c.resolveDataElementOptions(r),h.borderAlign!=="inner"&&(t=Math.max(t,h.borderWidth||0,h.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,r=e.length;i<r;++i){const o=this.resolveDataElementOptions(i);t=Math.max(t,o.offset||0,o.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(De(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ge(uc,"id","doughnut"),ge(uc,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ge(uc,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ge(uc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:i,textAlign:r,color:o,useBorderRadius:l,borderRadius:c}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((h,f)=>{const y=e.getDatasetMeta(0).controller.getStyle(f);return{text:h,fillStyle:y.backgroundColor,fontColor:o,hidden:!e.getDataVisibility(f),lineDash:y.borderDash,lineDashOffset:y.borderDashOffset,lineJoin:y.borderJoinStyle,lineWidth:y.borderWidth,strokeStyle:y.borderColor,textAlign:r,pointStyle:i,borderRadius:l&&(c||y.borderRadius),index:f}}):[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}});class Jh extends mo{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:r=[],_dataset:o}=t,l=this.chart._animationsDisabled;let{start:c,count:h}=JV(t,r,l);this._drawStart=c,this._drawCount=h,ZV(t)&&(c=0,h=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=r;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:f},e),this.updateElements(r,c,h,e)}updateElements(e,t,i,r){const o=r==="reset",{iScale:l,vScale:c,_stacked:h,_dataset:f}=this._cachedMeta,{sharedOptions:m,includeOptions:y}=this._getSharedOptions(t,r),v=l.axis,x=c.axis,{spanGaps:S,segment:I}=this.options,k=zc(S)?S:Number.POSITIVE_INFINITY,N=this.chart._animationsDisabled||o||r==="none",L=t+i,B=e.length;let W=t>0&&this.getParsed(t-1);for(let K=0;K<B;++K){const Z=e[K],R=N?Z:{};if(K<t||K>=L){R.skip=!0;continue}const C=this.getParsed(K),P=qe(C[x]),O=R[v]=l.getPixelForValue(C[v],K),V=R[x]=o||P?c.getBasePixel():c.getPixelForValue(h?this.applyStack(c,C,h):C[x],K);R.skip=isNaN(O)||isNaN(V)||P,R.stop=K>0&&Math.abs(C[v]-W[v])>k,I&&(R.parsed=C,R.raw=f.data[K]),y&&(R.options=m||this.resolveDataElementOptions(K,Z.active?"active":r)),N||this.updateElement(Z,K,R,r),W=C}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const o=r[0].size(this.resolveDataElementOptions(0)),l=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,o,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ge(Jh,"id","line"),ge(Jh,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ge(Jh,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function to(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Dy{constructor(e){ge(this,"options");this.options=e||{}}static override(e){Object.assign(Dy.prototype,e)}init(){}formats(){return to()}parse(){return to()}format(){return to()}add(){return to()}diff(){return to()}startOf(){return to()}endOf(){return to()}}var Aj={_date:Dy};function Cj(n,e,t,i){const{controller:r,data:o,_sorted:l}=n,c=r._cachedMeta.iScale,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&l&&o.length){const f=c._reversePixels?KV:co;if(i){if(r._sharedOptions){const m=o[0],y=typeof m.getRange=="function"&&m.getRange(e);if(y){const v=f(o,e,t-y),x=f(o,e,t+y);return{lo:v.lo,hi:x.hi}}}}else{const m=f(o,e,t);if(h){const{vScale:y}=r._cachedMeta,{_parsed:v}=n,x=v.slice(0,m.lo+1).reverse().findIndex(I=>!qe(I[y.axis]));m.lo-=Math.max(0,x);const S=v.slice(m.hi).findIndex(I=>!qe(I[y.axis]));m.hi+=Math.max(0,S)}return m}}return{lo:0,hi:o.length-1}}function pf(n,e,t,i,r){const o=n.getSortedVisibleDatasetMetas(),l=t[e];for(let c=0,h=o.length;c<h;++c){const{index:f,data:m}=o[c],{lo:y,hi:v}=Cj(o[c],e,l,r);for(let x=y;x<=v;++x){const S=m[x];S.skip||i(S,f,x)}}}function Pj(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){const o=e?Math.abs(i.x-r.x):0,l=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function vm(n,e,t,i,r){const o=[];return!r&&!n.isPointInArea(e)||pf(n,t,e,function(c,h,f){!r&&!Uc(c,n.chartArea,0)||c.inRange(e.x,e.y,i)&&o.push({element:c,datasetIndex:h,index:f})},!0),o}function Rj(n,e,t,i){let r=[];function o(l,c,h){const{startAngle:f,endAngle:m}=l.getProps(["startAngle","endAngle"],i),{angle:y}=AS(l,{x:e.x,y:e.y});Bc(y,f,m)&&r.push({element:l,datasetIndex:c,index:h})}return pf(n,t,e,o),r}function Nj(n,e,t,i,r,o){let l=[];const c=Pj(t);let h=Number.POSITIVE_INFINITY;function f(m,y,v){const x=m.inRange(e.x,e.y,r);if(i&&!x)return;const S=m.getCenterPoint(r);if(!(!!o||n.isPointInArea(S))&&!x)return;const k=c(e,S);k<h?(l=[{element:m,datasetIndex:y,index:v}],h=k):k===h&&l.push({element:m,datasetIndex:y,index:v})}return pf(n,t,e,f),l}function _m(n,e,t,i,r,o){return!o&&!n.isPointInArea(e)?[]:t==="r"&&!i?Rj(n,e,t,r):Nj(n,e,t,i,r,o)}function Eb(n,e,t,i,r){const o=[],l=t==="x"?"inXRange":"inYRange";let c=!1;return pf(n,t,e,(h,f,m)=>{h[l]&&h[l](e[t],r)&&(o.push({element:h,datasetIndex:f,index:m}),c=c||h.inRange(e.x,e.y,r))}),i&&!c?[]:o}var Dj={modes:{index(n,e,t,i){const r=ro(e,n),o=t.axis||"x",l=t.includeInvisible||!1,c=t.intersect?vm(n,r,o,i,l):_m(n,r,o,!1,i,l),h=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(f=>{const m=c[0].index,y=f.data[m];y&&!y.skip&&h.push({element:y,datasetIndex:f.index,index:m})}),h):[]},dataset(n,e,t,i){const r=ro(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;let c=t.intersect?vm(n,r,o,i,l):_m(n,r,o,!1,i,l);if(c.length>0){const h=c[0].datasetIndex,f=n.getDatasetMeta(h).data;c=[];for(let m=0;m<f.length;++m)c.push({element:f[m],datasetIndex:h,index:m})}return c},point(n,e,t,i){const r=ro(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;return vm(n,r,o,i,l)},nearest(n,e,t,i){const r=ro(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;return _m(n,r,o,t.intersect,i,l)},x(n,e,t,i){const r=ro(e,n);return Eb(n,r,"x",t.intersect,i)},y(n,e,t,i){const r=ro(e,n);return Eb(n,r,"y",t.intersect,i)}}};const KS=["left","top","right","bottom"];function tc(n,e){return n.filter(t=>t.pos===e)}function xb(n,e){return n.filter(t=>KS.indexOf(t.pos)===-1&&t.box.axis===e)}function nc(n,e){return n.sort((t,i)=>{const r=e?i:t,o=e?t:i;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function Mj(n){const e=[];let t,i,r,o,l,c;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:o,options:{stack:l,stackWeight:c=1}}=r,e.push({index:t,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:l&&o+l,stackWeight:c});return e}function Oj(n){const e={};for(const t of n){const{stack:i,pos:r,stackWeight:o}=t;if(!i||!KS.includes(r))continue;const l=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return e}function Vj(n,e){const t=Oj(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let o,l,c;for(o=0,l=n.length;o<l;++o){c=n[o];const{fullSize:h}=c.box,f=t[c.stack],m=f&&c.stackWeight/f.weight;c.horizontal?(c.width=m?m*i:h&&e.availableWidth,c.height=r):(c.width=i,c.height=m?m*r:h&&e.availableHeight)}return t}function Lj(n){const e=Mj(n),t=nc(e.filter(f=>f.box.fullSize),!0),i=nc(tc(e,"left"),!0),r=nc(tc(e,"right")),o=nc(tc(e,"top"),!0),l=nc(tc(e,"bottom")),c=xb(e,"x"),h=xb(e,"y");return{fullSize:t,leftAndTop:i.concat(o),rightAndBottom:r.concat(h).concat(l).concat(c),chartArea:tc(e,"chartArea"),vertical:i.concat(r).concat(h),horizontal:o.concat(l).concat(c)}}function Tb(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function GS(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function jj(n,e,t,i){const{pos:r,box:o}=t,l=n.maxPadding;if(!Ue(r)){t.size&&(n[r]-=t.size);const y=i[t.stack]||{size:0,count:1};y.size=Math.max(y.size,t.horizontal?o.height:o.width),t.size=y.size/y.count,n[r]+=t.size}o.getPadding&&GS(l,o.getPadding());const c=Math.max(0,e.outerWidth-Tb(l,n,"left","right")),h=Math.max(0,e.outerHeight-Tb(l,n,"top","bottom")),f=c!==n.w,m=h!==n.h;return n.w=c,n.h=h,t.horizontal?{same:f,other:m}:{same:m,other:f}}function Fj(n){const e=n.maxPadding;function t(i){const r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function zj(n,e){const t=e.maxPadding;function i(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(l=>{o[l]=Math.max(e[l],t[l])}),o}return i(n?["left","right"]:["top","bottom"])}function hc(n,e,t,i){const r=[];let o,l,c,h,f,m;for(o=0,l=n.length,f=0;o<l;++o){c=n[o],h=c.box,h.update(c.width||e.w,c.height||e.h,zj(c.horizontal,e));const{same:y,other:v}=jj(e,t,c,i);f|=y&&r.length,m=m||v,h.fullSize||r.push(c)}return f&&hc(r,e,t,i)||m}function Mh(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function Sb(n,e,t,i){const r=t.padding;let{x:o,y:l}=e;for(const c of n){const h=c.box,f=i[c.stack]||{placed:0,weight:1},m=c.stackWeight/f.weight||1;if(c.horizontal){const y=e.w*m,v=f.size||h.height;Fc(f.start)&&(l=f.start),h.fullSize?Mh(h,r.left,l,t.outerWidth-r.right-r.left,v):Mh(h,e.left+f.placed,l,y,v),f.start=l,f.placed+=y,l=h.bottom}else{const y=e.h*m,v=f.size||h.width;Fc(f.start)&&(o=f.start),h.fullSize?Mh(h,o,r.top,v,t.outerHeight-r.bottom-r.top):Mh(h,o,e.top+f.placed,v,y),f.start=o,f.placed+=y,o=h.right}}e.x=o,e.y=l}var $n={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const r=Yn(n.options.layout.padding),o=Math.max(e-r.width,0),l=Math.max(t-r.height,0),c=Lj(n.boxes),h=c.vertical,f=c.horizontal;Qe(n.boxes,I=>{typeof I.beforeLayout=="function"&&I.beforeLayout()});const m=h.reduce((I,k)=>k.box.options&&k.box.options.display===!1?I:I+1,0)||1,y=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/m,hBoxMaxHeight:l/2}),v=Object.assign({},r);GS(v,Yn(i));const x=Object.assign({maxPadding:v,w:o,h:l,x:r.left,y:r.top},r),S=Vj(h.concat(f),y);hc(c.fullSize,x,y,S),hc(h,x,y,S),hc(f,x,y,S)&&hc(h,x,y,S),Fj(x),Sb(c.leftAndTop,x,y,S),x.x+=x.w,x.y+=x.h,Sb(c.rightAndBottom,x,y,S),n.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},Qe(c.chartArea,I=>{const k=I.box;Object.assign(k,n.chartArea),k.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class YS{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}}class Bj extends YS{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Zh="$chartjs",Uj={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ib=n=>n===null||n==="";function Wj(n,e){const t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[Zh]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Ib(r)){const o=cb(n,"width");o!==void 0&&(n.width=o)}if(Ib(i))if(n.style.height==="")n.height=n.width/(e||2);else{const o=cb(n,"height");o!==void 0&&(n.height=o)}return n}const QS=UL?{passive:!0}:!1;function Hj(n,e,t){n&&n.addEventListener(e,t,QS)}function $j(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,QS)}function qj(n,e){const t=Uj[n.type]||n.type,{x:i,y:r}=ro(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Dd(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function Kj(n,e,t){const i=n.canvas,r=new MutationObserver(o=>{let l=!1;for(const c of o)l=l||Dd(c.addedNodes,i),l=l&&!Dd(c.removedNodes,i);l&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function Gj(n,e,t){const i=n.canvas,r=new MutationObserver(o=>{let l=!1;for(const c of o)l=l||Dd(c.removedNodes,i),l=l&&!Dd(c.addedNodes,i);l&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}const Hc=new Map;let kb=0;function XS(){const n=window.devicePixelRatio;n!==kb&&(kb=n,Hc.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function Yj(n,e){Hc.size||window.addEventListener("resize",XS),Hc.set(n,e)}function Qj(n){Hc.delete(n),Hc.size||window.removeEventListener("resize",XS)}function Xj(n,e,t){const i=n.canvas,r=i&&Ny(i);if(!r)return;const o=NS((c,h)=>{const f=r.clientWidth;t(c,h),f<r.clientWidth&&t()},window),l=new ResizeObserver(c=>{const h=c[0],f=h.contentRect.width,m=h.contentRect.height;f===0&&m===0||o(f,m)});return l.observe(r),Yj(n,o),l}function wm(n,e,t){t&&t.disconnect(),e==="resize"&&Qj(n)}function Jj(n,e,t){const i=n.canvas,r=NS(o=>{n.ctx!==null&&t(qj(o,n))},n);return Hj(i,e,r),r}class Zj extends YS{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(Wj(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[Zh])return!1;const i=t[Zh].initial;["height","width"].forEach(o=>{const l=i[o];qe(l)?t.removeAttribute(o):t.setAttribute(o,l)});const r=i.style||{};return Object.keys(r).forEach(o=>{t.style[o]=r[o]}),t.width=t.width,delete t[Zh],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),l={attach:Kj,detach:Gj,resize:Xj}[t]||Jj;r[t]=l(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:wm,detach:wm,resize:wm}[t]||$j)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return BL(e,t,i,r)}isAttached(e){const t=e&&Ny(e);return!!(t&&t.isConnected)}}function eF(n){return!Ry()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Bj:Zj}class yi{constructor(){ge(this,"x");ge(this,"y");ge(this,"active",!1);ge(this,"options");ge(this,"$animations")}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return zc(this.x)&&zc(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const r={};return e.forEach(o=>{r[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),r}}ge(yi,"defaults",{}),ge(yi,"defaultRoutes");function tF(n,e){const t=n.options.ticks,i=nF(n),r=Math.min(t.maxTicksLimit||i,i),o=t.major.enabled?rF(e):[],l=o.length,c=o[0],h=o[l-1],f=[];if(l>r)return sF(e,f,o,l/r),f;const m=iF(o,e,r);if(l>0){let y,v;const x=l>1?Math.round((h-c)/(l-1)):null;for(Oh(e,f,m,qe(x)?0:c-x,c),y=0,v=l-1;y<v;y++)Oh(e,f,m,o[y],o[y+1]);return Oh(e,f,m,h,qe(x)?e.length:h+x),f}return Oh(e,f,m),f}function nF(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function iF(n,e,t){const i=oF(n),r=e.length/t;if(!i)return Math.max(r,1);const o=zV(i);for(let l=0,c=o.length-1;l<c;l++){const h=o[l];if(h>r)return h}return Math.max(r,1)}function rF(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function sF(n,e,t,i){let r=0,o=t[0],l;for(i=Math.ceil(i),l=0;l<n.length;l++)l===o&&(e.push(n[l]),r++,o=t[r*i])}function Oh(n,e,t,i,r){const o=De(i,0),l=Math.min(De(r,n.length),n.length);let c=0,h,f,m;for(t=Math.ceil(t),r&&(h=r-i,t=h/Math.floor(h/t)),m=o;m<0;)c++,m=Math.round(o+c*t);for(f=Math.max(o,0);f<l;f++)f===m&&(e.push(n[f]),c++,m=Math.round(o+c*t))}function oF(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const aF=n=>n==="left"?"right":n==="right"?"left":n,Ab=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,Cb=(n,e)=>Math.min(e||n,n);function Pb(n,e){const t=[],i=n.length/e,r=n.length;let o=0;for(;o<r;o+=i)t.push(n[Math.floor(o)]);return t}function lF(n,e,t){const i=n.ticks.length,r=Math.min(e,i-1),o=n._startPixel,l=n._endPixel,c=1e-6;let h=n.getPixelForTick(r),f;if(!(t&&(i===1?f=Math.max(h-o,l-h):e===0?f=(n.getPixelForTick(1)-h)/2:f=(h-n.getPixelForTick(r-1))/2,h+=r<e?f:-f,h<o-c||h>l+c)))return h}function cF(n,e){Qe(n,t=>{const i=t.gc,r=i.length/2;let o;if(r>e){for(o=0;o<r;++o)delete t.data[i[o]];i.splice(0,r)}})}function ic(n){return n.drawTicks?n.tickLength:0}function Rb(n,e){if(!n.display)return 0;const t=nn(n.font,e),i=Yn(n.padding);return(Rt(n.text)?n.text.length:1)*t.lineHeight+i.height}function uF(n,e){return ko(n,{scale:e,type:"scale"})}function hF(n,e,t){return ko(n,{tick:t,index:e,type:"tick"})}function dF(n,e,t){let i=Ey(n);return(t&&e!=="right"||!t&&e==="right")&&(i=aF(i)),i}function fF(n,e,t,i){const{top:r,left:o,bottom:l,right:c,chart:h}=n,{chartArea:f,scales:m}=h;let y=0,v,x,S;const I=l-r,k=c-o;if(n.isHorizontal()){if(x=Jt(i,o,c),Ue(t)){const N=Object.keys(t)[0],L=t[N];S=m[N].getPixelForValue(L)+I-e}else t==="center"?S=(f.bottom+f.top)/2+I-e:S=Ab(n,t,e);v=c-o}else{if(Ue(t)){const N=Object.keys(t)[0],L=t[N];x=m[N].getPixelForValue(L)-k+e}else t==="center"?x=(f.left+f.right)/2-k+e:x=Ab(n,t,e);S=Jt(i,l,r),y=t==="left"?-Nt:Nt}return{titleX:x,titleY:S,maxWidth:v,rotation:y}}class rl extends yi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=Ci(e,Number.POSITIVE_INFINITY),t=Ci(t,Number.NEGATIVE_INFINITY),i=Ci(i,Number.POSITIVE_INFINITY),r=Ci(r,Number.NEGATIVE_INFINITY),{min:Ci(e,i),max:Ci(t,r),minDefined:Gn(e),maxDefined:Gn(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:o}=this.getUserBounds(),l;if(r&&o)return{min:t,max:i};const c=this.getMatchingVisibleMetas();for(let h=0,f=c.length;h<f;++h)l=c[h].controller.getMinMax(this,e),r||(t=Math.min(t,l.min)),o||(i=Math.max(i,l.max));return t=o&&t>i?i:t,i=r&&t>i?t:i,{min:Ci(t,Ci(i,t)),max:Ci(i,Ci(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){st(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:r,grace:o,ticks:l}=this.options,c=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_L(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=c<this.ticks.length;this._convertTicksToLabels(h?Pb(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=tF(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){st(this.options.afterUpdate,[this])}beforeSetDimensions(){st(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){st(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),st(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){st(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,r,o;for(i=0,r=e.length;i<r;i++)o=e[i],o.label=st(t.callback,[o.value,i,e],this)}afterTickToLabelConversion(){st(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){st(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=Cb(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,o=t.maxRotation;let l=r,c,h,f;if(!this._isVisible()||!t.display||r>=o||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const m=this._getLabelSizes(),y=m.widest.width,v=m.highest.height,x=tn(this.chart.width-y,0,this.maxWidth);c=e.offset?this.maxWidth/i:x/(i-1),y+6>c&&(c=x/(i-(e.offset?.5:1)),h=this.maxHeight-ic(e.grid)-t.padding-Rb(e.title,this.chart.options.font),f=Math.sqrt(y*y+v*v),l=HV(Math.min(Math.asin(tn((m.highest.height+6)/c,-1,1)),Math.asin(tn(h/f,-1,1))-Math.asin(tn(v/f,-1,1)))),l=Math.max(r,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){st(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){st(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:o}}=this,l=this._isVisible(),c=this.isHorizontal();if(l){const h=Rb(r,t.options.font);if(c?(e.width=this.maxWidth,e.height=ic(o)+h):(e.height=this.maxHeight,e.width=ic(o)+h),i.display&&this.ticks.length){const{first:f,last:m,widest:y,highest:v}=this._getLabelSizes(),x=i.padding*2,S=vr(this.labelRotation),I=Math.cos(S),k=Math.sin(S);if(c){const N=i.mirror?0:k*y.width+I*v.height;e.height=Math.min(this.maxHeight,e.height+N+x)}else{const N=i.mirror?0:I*y.width+k*v.height;e.width=Math.min(this.maxWidth,e.width+N+x)}this._calculatePadding(f,m,k,I)}}this._handleMargins(),c?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){const{ticks:{align:o,padding:l},position:c}=this.options,h=this.labelRotation!==0,f=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,x=0;h?f?(v=r*e.width,x=i*t.height):(v=i*e.height,x=r*t.width):o==="start"?x=t.width:o==="end"?v=e.width:o!=="inner"&&(v=e.width/2,x=t.width/2),this.paddingLeft=Math.max((v-m+l)*this.width/(this.width-m),0),this.paddingRight=Math.max((x-y+l)*this.width/(this.width-y),0)}else{let m=t.height/2,y=e.height/2;o==="start"?(m=0,y=e.height):o==="end"&&(m=t.height,y=0),this.paddingTop=m+l,this.paddingBottom=y+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){st(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)qe(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=Pb(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:r,_longestTextCache:o}=this,l=[],c=[],h=Math.floor(t/Cb(t,i));let f=0,m=0,y,v,x,S,I,k,N,L,B,W,K;for(y=0;y<t;y+=h){if(S=e[y].label,I=this._resolveTickFontOptions(y),r.font=k=I.string,N=o[k]=o[k]||{data:{},gc:[]},L=I.lineHeight,B=W=0,!qe(S)&&!Rt(S))B=rb(r,N.data,N.gc,B,S),W=L;else if(Rt(S))for(v=0,x=S.length;v<x;++v)K=S[v],!qe(K)&&!Rt(K)&&(B=rb(r,N.data,N.gc,B,K),W+=L);l.push(B),c.push(W),f=Math.max(B,f),m=Math.max(W,m)}cF(o,t);const Z=l.indexOf(f),R=c.indexOf(m),C=P=>({width:l[P]||0,height:c[P]||0});return{first:C(0),last:C(t-1),widest:C(Z),highest:C(R),widths:l,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return qV(this._alignToPixels?eo(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=hF(this.getContext(),e,i))}return this.$context||(this.$context=uF(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=vr(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),o=this._getLabelSizes(),l=e.autoSkipPadding||0,c=o?o.widest.width+l:0,h=o?o.highest.height+l:0;return this.isHorizontal()?h*i>c*r?c/i:h/r:h*r<c*i?h/i:c/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,r=this.options,{grid:o,position:l,border:c}=r,h=o.offset,f=this.isHorizontal(),y=this.ticks.length+(h?1:0),v=ic(o),x=[],S=c.setContext(this.getContext()),I=S.display?S.width:0,k=I/2,N=function(Re){return eo(i,Re,I)};let L,B,W,K,Z,R,C,P,O,V,F,M;if(l==="top")L=N(this.bottom),R=this.bottom-v,P=L-k,V=N(e.top)+k,M=e.bottom;else if(l==="bottom")L=N(this.top),V=e.top,M=N(e.bottom)-k,R=L+k,P=this.top+v;else if(l==="left")L=N(this.right),Z=this.right-v,C=L-k,O=N(e.left)+k,F=e.right;else if(l==="right")L=N(this.left),O=e.left,F=N(e.right)-k,Z=L+k,C=this.left+v;else if(t==="x"){if(l==="center")L=N((e.top+e.bottom)/2+.5);else if(Ue(l)){const Re=Object.keys(l)[0],be=l[Re];L=N(this.chart.scales[Re].getPixelForValue(be))}V=e.top,M=e.bottom,R=L+k,P=R+v}else if(t==="y"){if(l==="center")L=N((e.left+e.right)/2);else if(Ue(l)){const Re=Object.keys(l)[0],be=l[Re];L=N(this.chart.scales[Re].getPixelForValue(be))}Z=L-k,C=Z-v,O=e.left,F=e.right}const Le=De(r.ticks.maxTicksLimit,y),Ie=Math.max(1,Math.ceil(y/Le));for(B=0;B<y;B+=Ie){const Re=this.getContext(B),be=o.setContext(Re),ie=c.setContext(Re),ce=be.lineWidth,oe=be.color,U=ie.dash||[],Q=ie.dashOffset,pe=be.tickWidth,xe=be.tickColor,Ae=be.tickBorderDash||[],Pe=be.tickBorderDashOffset;W=lF(this,B,h),W!==void 0&&(K=eo(i,W,ce),f?Z=C=O=F=K:R=P=V=M=K,x.push({tx1:Z,ty1:R,tx2:C,ty2:P,x1:O,y1:V,x2:F,y2:M,width:ce,color:oe,borderDash:U,borderDashOffset:Q,tickWidth:pe,tickColor:xe,tickBorderDash:Ae,tickBorderDashOffset:Pe}))}return this._ticksLength=y,this._borderValue=L,x}_computeLabelItems(e){const t=this.axis,i=this.options,{position:r,ticks:o}=i,l=this.isHorizontal(),c=this.ticks,{align:h,crossAlign:f,padding:m,mirror:y}=o,v=ic(i.grid),x=v+m,S=y?-m:x,I=-vr(this.labelRotation),k=[];let N,L,B,W,K,Z,R,C,P,O,V,F,M="middle";if(r==="top")Z=this.bottom-S,R=this._getXAxisLabelAlignment();else if(r==="bottom")Z=this.top+S,R=this._getXAxisLabelAlignment();else if(r==="left"){const Ie=this._getYAxisLabelAlignment(v);R=Ie.textAlign,K=Ie.x}else if(r==="right"){const Ie=this._getYAxisLabelAlignment(v);R=Ie.textAlign,K=Ie.x}else if(t==="x"){if(r==="center")Z=(e.top+e.bottom)/2+x;else if(Ue(r)){const Ie=Object.keys(r)[0],Re=r[Ie];Z=this.chart.scales[Ie].getPixelForValue(Re)+x}R=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")K=(e.left+e.right)/2-x;else if(Ue(r)){const Ie=Object.keys(r)[0],Re=r[Ie];K=this.chart.scales[Ie].getPixelForValue(Re)}R=this._getYAxisLabelAlignment(v).textAlign}t==="y"&&(h==="start"?M="top":h==="end"&&(M="bottom"));const Le=this._getLabelSizes();for(N=0,L=c.length;N<L;++N){B=c[N],W=B.label;const Ie=o.setContext(this.getContext(N));C=this.getPixelForTick(N)+o.labelOffset,P=this._resolveTickFontOptions(N),O=P.lineHeight,V=Rt(W)?W.length:1;const Re=V/2,be=Ie.color,ie=Ie.textStrokeColor,ce=Ie.textStrokeWidth;let oe=R;l?(K=C,R==="inner"&&(N===L-1?oe=this.options.reverse?"left":"right":N===0?oe=this.options.reverse?"right":"left":oe="center"),r==="top"?f==="near"||I!==0?F=-V*O+O/2:f==="center"?F=-Le.highest.height/2-Re*O+O:F=-Le.highest.height+O/2:f==="near"||I!==0?F=O/2:f==="center"?F=Le.highest.height/2-Re*O:F=Le.highest.height-V*O,y&&(F*=-1),I!==0&&!Ie.showLabelBackdrop&&(K+=O/2*Math.sin(I))):(Z=C,F=(1-V)*O/2);let U;if(Ie.showLabelBackdrop){const Q=Yn(Ie.backdropPadding),pe=Le.heights[N],xe=Le.widths[N];let Ae=F-Q.top,Pe=0-Q.left;switch(M){case"middle":Ae-=pe/2;break;case"bottom":Ae-=pe;break}switch(R){case"center":Pe-=xe/2;break;case"right":Pe-=xe;break;case"inner":N===L-1?Pe-=xe:N>0&&(Pe-=xe/2);break}U={left:Pe,top:Ae,width:xe+Q.width,height:pe+Q.height,color:Ie.backdropColor}}k.push({label:W,font:P,textOffset:F,options:{rotation:I,color:be,strokeColor:ie,strokeWidth:ce,textAlign:oe,textBaseline:M,translation:[K,Z],backdrop:U}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-vr(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:r,padding:o}}=this.options,l=this._getLabelSizes(),c=e+o,h=l.widest.width;let f,m;return t==="left"?r?(m=this.right+o,i==="near"?f="left":i==="center"?(f="center",m+=h/2):(f="right",m+=h)):(m=this.right-c,i==="near"?f="right":i==="center"?(f="center",m-=h/2):(f="left",m=this.left)):t==="right"?r?(m=this.left+o,i==="near"?f="right":i==="center"?(f="center",m-=h/2):(f="left",m-=h)):(m=this.left+c,i==="near"?f="left":i==="center"?(f="center",m+=h/2):(f="right",m=this.right)):f="right",{textAlign:f,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:r,width:o,height:l}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,o,l),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex(o=>o.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,l;const c=(h,f,m)=>{!m.width||!m.color||(i.save(),i.lineWidth=m.width,i.strokeStyle=m.color,i.setLineDash(m.borderDash||[]),i.lineDashOffset=m.borderDashOffset,i.beginPath(),i.moveTo(h.x,h.y),i.lineTo(f.x,f.y),i.stroke(),i.restore())};if(t.display)for(o=0,l=r.length;o<l;++o){const h=r[o];t.drawOnChartArea&&c({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),t.drawTicks&&c({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),l=i.display?o.width:0;if(!l)return;const c=r.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let f,m,y,v;this.isHorizontal()?(f=eo(e,this.left,l)-l/2,m=eo(e,this.right,c)+c/2,y=v=h):(y=eo(e,this.top,l)-l/2,v=eo(e,this.bottom,c)+c/2,f=m=h),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(f,y),t.lineTo(m,v),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Sy(i,r);const o=this.getLabelItems(e);for(const l of o){const c=l.options,h=l.font,f=l.label,m=l.textOffset;Wc(i,f,0,m,h,c)}r&&Iy(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;const o=nn(i.font),l=Yn(i.padding),c=i.align;let h=o.lineHeight/2;t==="bottom"||t==="center"||Ue(t)?(h+=l.bottom,Rt(i.text)&&(h+=o.lineHeight*(i.text.length-1))):h+=l.top;const{titleX:f,titleY:m,maxWidth:y,rotation:v}=fF(this,h,t,c);Wc(e,i.text,0,0,o,{color:i.color,maxWidth:y,rotation:v,textAlign:dF(c,t,r),textBaseline:"middle",translation:[f,m]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=De(e.grid&&e.grid.z,-1),r=De(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==rl.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let o,l;for(o=0,l=t.length;o<l;++o){const c=t[o];c[i]===this.id&&(!e||c.type===e)&&r.push(c)}return r}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return nn(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Vh{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;gF(t)&&(i=this.register(t));const r=this.items,o=e.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in r||(r[o]=e,pF(e,l,i),this.override&&_t.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in _t[r]&&(delete _t[r][i],this.override&&delete xo[i])}}function pF(n,e,t){const i=jc(Object.create(null),[t?_t.get(t):{},_t.get(e),n.defaults]);_t.set(e,i),n.defaultRoutes&&mF(e,n.defaultRoutes),n.descriptors&&_t.describe(e,n.descriptors)}function mF(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),r=i.pop(),o=[n].concat(i).join("."),l=e[t].split("."),c=l.pop(),h=l.join(".");_t.route(o,r,h,c)})}function gF(n){return"id"in n&&"defaults"in n}class yF{constructor(){this.controllers=new Vh(mo,"datasets",!0),this.elements=new Vh(yi,"elements"),this.plugins=new Vh(Object,"plugins"),this.scales=new Vh(rl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{const o=i||this._getRegistryForType(r);i||o.isForType(r)||o===this.plugins&&r.id?this._exec(e,o,r):Qe(r,l=>{const c=i||this._getRegistryForType(l);this._exec(e,c,l)})})}_exec(e,t,i){const r=wy(e);st(i["before"+r],[],i),t[e](i),st(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Ri=new yF;class vF{constructor(){this._init=void 0}notify(e,t,i,r){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const o=r?this._descriptors(e).filter(r):this._descriptors(e),l=this._notify(o,e,t,i);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),l}_notify(e,t,i,r){r=r||{};for(const o of e){const l=o.plugin,c=l[i],h=[t,r,o.options];if(st(c,h,l)===!1&&r.cancelable)return!1}return!0}invalidate(){qe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,r=De(i.options&&i.options.plugins,{}),o=_F(i);return r===!1&&!t?[]:bF(e,o,r,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,r=(o,l)=>o.filter(c=>!l.some(h=>c.plugin.id===h.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}}function _F(n){const e={},t=[],i=Object.keys(Ri.plugins.items);for(let o=0;o<i.length;o++)t.push(Ri.getPlugin(i[o]));const r=n.plugins||[];for(let o=0;o<r.length;o++){const l=r[o];t.indexOf(l)===-1&&(t.push(l),e[l.id]=!0)}return{plugins:t,localIds:e}}function wF(n,e){return!e&&n===!1?null:n===!0?{}:n}function bF(n,{plugins:e,localIds:t},i,r){const o=[],l=n.getContext();for(const c of e){const h=c.id,f=wF(i[h],r);f!==null&&o.push({plugin:c,options:EF(n.config,{plugin:c,local:t[h]},f,l)})}return o}function EF(n,{plugin:e,local:t},i,r){const o=n.pluginScopeKeys(e),l=n.getOptionScopes(i,o);return t&&e.defaults&&l.push(e.defaults),n.createResolver(l,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function tg(n,e){const t=_t.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function xF(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function TF(n,e){return n===e?"_index_":"_value_"}function Nb(n){if(n==="x"||n==="y"||n==="r")return n}function SF(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function ng(n,...e){if(Nb(n))return n;for(const t of e){const i=t.axis||SF(t.position)||n.length>1&&Nb(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Db(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function IF(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return Db(n,"x",t[0])||Db(n,"y",t[0])}return{}}function kF(n,e){const t=xo[n.type]||{scales:{}},i=e.scales||{},r=tg(n.type,e),o=Object.create(null);return Object.keys(i).forEach(l=>{const c=i[l];if(!Ue(c))return console.error(`Invalid scale configuration for scale: ${l}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=ng(l,c,IF(l,n),_t.scales[c.type]),f=TF(h,r),m=t.scales||{};o[l]=Ec(Object.create(null),[{axis:h},c,m[h],m[f]])}),n.data.datasets.forEach(l=>{const c=l.type||n.type,h=l.indexAxis||tg(c,e),m=(xo[c]||{}).scales||{};Object.keys(m).forEach(y=>{const v=xF(y,h),x=l[v+"AxisID"]||v;o[x]=o[x]||Object.create(null),Ec(o[x],[{axis:v},i[x],m[y]])})}),Object.keys(o).forEach(l=>{const c=o[l];Ec(c,[_t.scales[c.type],_t.scale])}),o}function JS(n){const e=n.options||(n.options={});e.plugins=De(e.plugins,{}),e.scales=kF(n,e)}function ZS(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function AF(n){return n=n||{},n.data=ZS(n.data),JS(n),n}const Mb=new Map,eI=new Set;function Lh(n,e){let t=Mb.get(n);return t||(t=e(),Mb.set(n,t),eI.add(t)),t}const rc=(n,e,t)=>{const i=Eo(e,t);i!==void 0&&n.add(i)};class CF{constructor(e){this._config=AF(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ZS(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),JS(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Lh(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Lh(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Lh(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return Lh(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){const{options:r,type:o}=this,l=this._cachedScopes(e,i),c=l.get(t);if(c)return c;const h=new Set;t.forEach(m=>{e&&(h.add(e),m.forEach(y=>rc(h,e,y))),m.forEach(y=>rc(h,r,y)),m.forEach(y=>rc(h,xo[o]||{},y)),m.forEach(y=>rc(h,_t,y)),m.forEach(y=>rc(h,Zm,y))});const f=Array.from(h);return f.length===0&&f.push(Object.create(null)),eI.has(t)&&l.set(t,f),f}chartOptionScopes(){const{options:e,type:t}=this;return[e,xo[t]||{},_t.datasets[t]||{},{type:t},_t,Zm]}resolveNamedOptions(e,t,i,r=[""]){const o={$shared:!0},{resolver:l,subPrefixes:c}=Ob(this._resolverCache,e,r);let h=l;if(RF(l,t)){o.$shared=!1,i=bs(i)?i():i;const f=this.createResolver(e,i,c);h=Ha(l,i,f)}for(const f of t)o[f]=h[f];return o}createResolver(e,t,i=[""],r){const{resolver:o}=Ob(this._resolverCache,e,i);return Ue(t)?Ha(o,t,void 0,r):o}}function Ob(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const r=t.join();let o=i.get(r);return o||(o={resolver:Ay(e,t),subPrefixes:t.filter(c=>!c.toLowerCase().includes("hover"))},i.set(r,o)),o}const PF=n=>Ue(n)&&Object.getOwnPropertyNames(n).some(e=>bs(n[e]));function RF(n,e){const{isScriptable:t,isIndexable:i}=VS(n);for(const r of e){const o=t(r),l=i(r),c=(l||o)&&n[r];if(o&&(bs(c)||PF(c))||l&&Rt(c))return!0}return!1}var NF="4.5.1";const DF=["top","bottom","left","right","chartArea"];function Vb(n,e){return n==="top"||n==="bottom"||DF.indexOf(n)===-1&&e==="x"}function Lb(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function jb(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),st(t&&t.onComplete,[n],e)}function MF(n){const e=n.chart,t=e.options.animation;st(t&&t.onProgress,[n],e)}function tI(n){return Ry()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const ed={},Fb=n=>{const e=tI(n);return Object.values(ed).filter(t=>t.canvas===e).pop()};function OF(n,e,t){const i=Object.keys(n);for(const r of i){const o=+r;if(o>=e){const l=n[r];delete n[r],(t>0||o>e)&&(n[o+t]=l)}}}function VF(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}var es;let mf=(es=class{static register(...e){Ri.add(...e),zb()}static unregister(...e){Ri.remove(...e),zb()}constructor(e,t){const i=this.config=new CF(t),r=tI(e),o=Fb(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||eF(r)),this.platform.updateConfig(i);const c=this.platform.acquireContext(r,l.aspectRatio),h=c&&c.canvas,f=h&&h.height,m=h&&h.width;if(this.id=RV(),this.ctx=c,this.canvas=h,this.width=m,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new vF,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=QV(y=>this.update(y),l.resizeDelay||0),this._dataChanges=[],ed[this.id]=this,!c||!h){console.error("Failed to create chart: can't acquire context from the given item");return}hr.listen(this,"complete",jb),hr.listen(this,"progress",MF),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:r,_aspectRatio:o}=this;return qe(e)?t&&o?o:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ri}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():lb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return sb(this.canvas,this.ctx),this}stop(){return hr.stop(this),this}resize(e,t){hr.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,r=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(r,e,t,o),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,lb(this,c,!0)&&(this.notifyPlugins("resize",{size:l}),st(i.onResize,[this,l],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Qe(t,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,r=Object.keys(i).reduce((l,c)=>(l[c]=!1,l),{});let o=[];t&&(o=o.concat(Object.keys(t).map(l=>{const c=t[l],h=ng(l,c),f=h==="r",m=h==="x";return{options:c,dposition:f?"chartArea":m?"bottom":"left",dtype:f?"radialLinear":m?"category":"linear"}}))),Qe(o,l=>{const c=l.options,h=c.id,f=ng(h,c),m=De(c.type,l.dtype);(c.position===void 0||Vb(c.position,f)!==Vb(l.dposition))&&(c.position=l.dposition),r[h]=!0;let y=null;if(h in i&&i[h].type===m)y=i[h];else{const v=Ri.getScale(m);y=new v({id:h,type:m,ctx:this.ctx,chart:this}),i[y.id]=y}y.init(c,e)}),Qe(r,(l,c)=>{l||delete i[c]}),Qe(i,l=>{$n.configure(this,l,l.options),$n.addBox(this,l)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((r,o)=>r.index-o.index),i>t){for(let r=t;r<i;++r)this._destroyDatasetMeta(r);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(Lb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,r)=>{t.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=t.length;i<r;i++){const o=t[i];let l=this.getDatasetMeta(i);const c=o.type||this.config.type;if(l.type&&l.type!==c&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=c,l.indexAxis=o.indexAxis||tg(c,this.options),l.order=o.order||0,l.index=i,l.label=""+o.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const h=Ri.getController(c),{datasetElementType:f,dataElementType:m}=_t.datasets[c];Object.assign(h,{dataElementType:Ri.getElement(m),datasetElementType:f&&Ri.getElement(f)}),l.controller=new h(this,i),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){Qe(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,m=this.data.datasets.length;f<m;f++){const{controller:y}=this.getDatasetMeta(f),v=!r&&o.indexOf(y)===-1;y.buildOrUpdateElements(v),l=Math.max(+y.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),r||Qe(o,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Lb("z","_idx"));const{_active:c,_lastEvent:h}=this;h?this._eventHandler(h,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Qe(this.scales,e=>{$n.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Yw(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:o}of t){const l=i==="_removeElements"?-o:o;OF(e,r,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=o=>new Set(e.filter(l=>l[0]===o).map((l,c)=>c+","+l.splice(1).join(","))),r=i(0);for(let o=1;o<t;o++)if(!Yw(r,i(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;$n.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],Qe(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,bs(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(hr.has(this)?this.attached&&!hr.running(this)&&hr.start(this):(this.draw(),jb({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let r,o;for(r=0,o=t.length;r<o;++r){const l=t[r];(!e||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=nj(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Sy(t,r),e.controller.draw(),r&&Iy(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Uc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,r){const o=Dj.modes[t];return typeof o=="function"?o(this,e,i,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let r=i.filter(o=>o&&o._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=ko(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const r=i?"show":"hide",o=this.getDatasetMeta(e),l=o.controller._resolveAnimations(void 0,r);Fc(t)?(o.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),l.update(o,{visible:i}),this.update(c=>c.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),hr.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),sb(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete ed[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(o,l)=>{t.addEventListener(this,o,l),e[o]=l},r=(o,l,c)=>{o.offsetX=l,o.offsetY=c,this._eventHandler(o)};Qe(this.options.events,o=>i(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(h,f)=>{t.addEventListener(this,h,f),e[h]=f},r=(h,f)=>{e[h]&&(t.removeEventListener(this,h,f),delete e[h])},o=(h,f)=>{this.canvas&&this.resize(h,f)};let l;const c=()=>{r("attach",c),this.attached=!0,this.resize(),i("resize",o),i("detach",l)};l=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),i("attach",c)},t.isAttached(this.canvas)?c():l()}unbindEvents(){Qe(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Qe(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const r=i?"set":"remove";let o,l,c,h;for(t==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),c=0,h=e.length;c<h;++c){l=e[c];const f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[r+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:o,index:l})=>{const c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[l],index:l}});!Ad(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const r=this.options.hover,o=(h,f)=>h.filter(m=>!f.some(y=>m.datasetIndex===y.datasetIndex&&m.index===y.index)),l=o(t,e),c=i?e:o(e,t);l.length&&this.updateHoverStyle(l,r.mode,!1),c.length&&r.mode&&this.updateHoverStyle(c,r.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const o=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(o||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:r=[],options:o}=this,l=t,c=this._getActiveElements(e,r,i,l),h=LV(e),f=VF(e,this._lastEvent,i,h);i&&(this._lastEvent=null,st(o.onHover,[e,c,this],this),h&&st(o.onClick,[e,c,this],this));const m=!Ad(c,r);return(m||t)&&(this._active=c,this._updateHoverStyles(c,r,t)),this._lastEvent=f,m}_getActiveElements(e,t,i,r){if(e.type==="mouseout")return[];if(!i)return t;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,r)}},ge(es,"defaults",_t),ge(es,"instances",ed),ge(es,"overrides",xo),ge(es,"registry",Ri),ge(es,"version",NF),ge(es,"getChart",Fb),es);function zb(){return Qe(mf.instances,n=>n._plugins.invalidate())}function LF(n,e,t){const{startAngle:i,x:r,y:o,outerRadius:l,innerRadius:c,options:h}=e,{borderWidth:f,borderJoinStyle:m}=h,y=Math.min(f/l,hi(i-t));if(n.beginPath(),n.arc(r,o,l-f/2,i+y/2,t-y/2),c>0){const v=Math.min(f/c,hi(i-t));n.arc(r,o,c+f/2,t-v/2,i+v/2,!0)}else{const v=Math.min(f/2,l*hi(i-t));if(m==="round")n.arc(r,o,v,t-Xe/2,i+Xe/2,!0);else if(m==="bevel"){const x=2*v*v,S=-x*Math.cos(t+Xe/2)+r,I=-x*Math.sin(t+Xe/2)+o,k=x*Math.cos(i+Xe/2)+r,N=x*Math.sin(i+Xe/2)+o;n.lineTo(S,I),n.lineTo(k,N)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function jF(n,e,t){const{startAngle:i,pixelMargin:r,x:o,y:l,outerRadius:c,innerRadius:h}=e;let f=r/c;n.beginPath(),n.arc(o,l,c,i-f,t+f),h>r?(f=r/h,n.arc(o,l,h,t+f,i-f,!0)):n.arc(o,l,r,t+Nt,i-Nt),n.closePath(),n.clip()}function FF(n){return ky(n,["outerStart","outerEnd","innerStart","innerEnd"])}function zF(n,e,t,i){const r=FF(n.options.borderRadius),o=(t-e)/2,l=Math.min(o,i*e/2),c=h=>{const f=(t-Math.min(o,h))*i/2;return tn(h,0,Math.min(o,f))};return{outerStart:c(r.outerStart),outerEnd:c(r.outerEnd),innerStart:tn(r.innerStart,0,l),innerEnd:tn(r.innerEnd,0,l)}}function Ea(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function Md(n,e,t,i,r,o){const{x:l,y:c,startAngle:h,pixelMargin:f,innerRadius:m}=e,y=Math.max(e.outerRadius+i+t-f,0),v=m>0?m+i+t+f:0;let x=0;const S=r-h;if(i){const Ie=m>0?m-i:0,Re=y>0?y-i:0,be=(Ie+Re)/2,ie=be!==0?S*be/(be+i):S;x=(S-ie)/2}const I=Math.max(.001,S*y-t/Xe)/y,k=(S-I)/2,N=h+k+x,L=r-k-x,{outerStart:B,outerEnd:W,innerStart:K,innerEnd:Z}=zF(e,v,y,L-N),R=y-B,C=y-W,P=N+B/R,O=L-W/C,V=v+K,F=v+Z,M=N+K/V,Le=L-Z/F;if(n.beginPath(),o){const Ie=(P+O)/2;if(n.arc(l,c,y,P,Ie),n.arc(l,c,y,Ie,O),W>0){const ce=Ea(C,O,l,c);n.arc(ce.x,ce.y,W,O,L+Nt)}const Re=Ea(F,L,l,c);if(n.lineTo(Re.x,Re.y),Z>0){const ce=Ea(F,Le,l,c);n.arc(ce.x,ce.y,Z,L+Nt,Le+Math.PI)}const be=(L-Z/v+(N+K/v))/2;if(n.arc(l,c,v,L-Z/v,be,!0),n.arc(l,c,v,be,N+K/v,!0),K>0){const ce=Ea(V,M,l,c);n.arc(ce.x,ce.y,K,M+Math.PI,N-Nt)}const ie=Ea(R,N,l,c);if(n.lineTo(ie.x,ie.y),B>0){const ce=Ea(R,P,l,c);n.arc(ce.x,ce.y,B,N-Nt,P)}}else{n.moveTo(l,c);const Ie=Math.cos(P)*y+l,Re=Math.sin(P)*y+c;n.lineTo(Ie,Re);const be=Math.cos(O)*y+l,ie=Math.sin(O)*y+c;n.lineTo(be,ie)}n.closePath()}function BF(n,e,t,i,r){const{fullCircles:o,startAngle:l,circumference:c}=e;let h=e.endAngle;if(o){Md(n,e,t,i,h,r);for(let f=0;f<o;++f)n.fill();isNaN(c)||(h=l+(c%mt||mt))}return Md(n,e,t,i,h,r),n.fill(),h}function UF(n,e,t,i,r){const{fullCircles:o,startAngle:l,circumference:c,options:h}=e,{borderWidth:f,borderJoinStyle:m,borderDash:y,borderDashOffset:v,borderRadius:x}=h,S=h.borderAlign==="inner";if(!f)return;n.setLineDash(y||[]),n.lineDashOffset=v,S?(n.lineWidth=f*2,n.lineJoin=m||"round"):(n.lineWidth=f,n.lineJoin=m||"bevel");let I=e.endAngle;if(o){Md(n,e,t,i,I,r);for(let k=0;k<o;++k)n.stroke();isNaN(c)||(I=l+(c%mt||mt))}S&&jF(n,e,I),h.selfJoin&&I-l>=Xe&&x===0&&m!=="miter"&&LF(n,e,I),o||(Md(n,e,t,i,I,r),n.stroke())}class dc extends yi{constructor(t){super();ge(this,"circumference");ge(this,"endAngle");ge(this,"fullCircles");ge(this,"innerRadius");ge(this,"outerRadius");ge(this,"pixelMargin");ge(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,r){const o=this.getProps(["x","y"],r),{angle:l,distance:c}=AS(o,{x:t,y:i}),{startAngle:h,endAngle:f,innerRadius:m,outerRadius:y,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),x=(this.options.spacing+this.options.borderWidth)/2,S=De(v,f-h),I=Bc(l,h,f)&&h!==f,k=S>=mt||I,N=os(c,m+x,y+x);return k&&N}getCenterPoint(t){const{x:i,y:r,startAngle:o,endAngle:l,innerRadius:c,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:f,spacing:m}=this.options,y=(o+l)/2,v=(c+h+m+f)/2;return{x:i+Math.cos(y)*v,y:r+Math.sin(y)*v}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:i,circumference:r}=this,o=(i.offset||0)/4,l=(i.spacing||0)/2,c=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>mt?Math.floor(r/mt):0,r===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const h=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(h)*o,Math.sin(h)*o);const f=1-Math.sin(Math.min(Xe,r||0)),m=o*f;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,BF(t,this,m,l,c),UF(t,this,m,l,c),t.restore()}}ge(dc,"id","arc"),ge(dc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ge(dc,"defaultRoutes",{backgroundColor:"backgroundColor"}),ge(dc,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function nI(n,e,t=e){n.lineCap=De(t.borderCapStyle,e.borderCapStyle),n.setLineDash(De(t.borderDash,e.borderDash)),n.lineDashOffset=De(t.borderDashOffset,e.borderDashOffset),n.lineJoin=De(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=De(t.borderWidth,e.borderWidth),n.strokeStyle=De(t.borderColor,e.borderColor)}function WF(n,e,t){n.lineTo(t.x,t.y)}function HF(n){return n.stepped?uL:n.tension||n.cubicInterpolationMode==="monotone"?hL:WF}function iI(n,e,t={}){const i=n.length,{start:r=0,end:o=i-1}=t,{start:l,end:c}=e,h=Math.max(r,l),f=Math.min(o,c),m=r<l&&o<l||r>c&&o>c;return{count:i,start:h,loop:e.loop,ilen:f<h&&!m?i+f-h:f-h}}function $F(n,e,t,i){const{points:r,options:o}=e,{count:l,start:c,loop:h,ilen:f}=iI(r,t,i),m=HF(o);let{move:y=!0,reverse:v}=i||{},x,S,I;for(x=0;x<=f;++x)S=r[(c+(v?f-x:x))%l],!S.skip&&(y?(n.moveTo(S.x,S.y),y=!1):m(n,I,S,v,o.stepped),I=S);return h&&(S=r[(c+(v?f:0))%l],m(n,I,S,v,o.stepped)),!!h}function qF(n,e,t,i){const r=e.points,{count:o,start:l,ilen:c}=iI(r,t,i),{move:h=!0,reverse:f}=i||{};let m=0,y=0,v,x,S,I,k,N;const L=W=>(l+(f?c-W:W))%o,B=()=>{I!==k&&(n.lineTo(m,k),n.lineTo(m,I),n.lineTo(m,N))};for(h&&(x=r[L(0)],n.moveTo(x.x,x.y)),v=0;v<=c;++v){if(x=r[L(v)],x.skip)continue;const W=x.x,K=x.y,Z=W|0;Z===S?(K<I?I=K:K>k&&(k=K),m=(y*m+W)/++y):(B(),n.lineTo(W,K),S=Z,y=0,I=k=K),N=K}B()}function ig(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?qF:$F}function KF(n){return n.stepped?WL:n.tension||n.cubicInterpolationMode==="monotone"?HL:so}function GF(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),nI(n,e.options),n.stroke(r)}function YF(n,e,t,i){const{segments:r,options:o}=e,l=ig(e);for(const c of r)nI(n,o,c.style),n.beginPath(),l(n,e,c,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const QF=typeof Path2D=="function";function XF(n,e,t,i){QF&&!e.options.segment?GF(n,e,t,i):YF(n,e,t,i)}class fc extends yi{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;OL(this._points,i,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=JL(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,r=e[t],o=this.points,l=YL(this,{property:t,start:r,end:r});if(!l.length)return;const c=[],h=KF(i);let f,m;for(f=0,m=l.length;f<m;++f){const{start:y,end:v}=l[f],x=o[y],S=o[v];if(x===S){c.push(x);continue}const I=Math.abs((r-x[t])/(S[t]-x[t])),k=h(x,S,I,i.stepped);k[t]=e[t],c.push(k)}return c.length===1?c[0]:c}pathSegment(e,t,i){return ig(this)(e,this,t,i)}path(e,t,i){const r=this.segments,o=ig(this);let l=this._loop;t=t||0,i=i||this.points.length-t;for(const c of r)l&=o(e,this,c,{start:t,end:t+i-1});return!!l}draw(e,t,i,r){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),XF(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ge(fc,"id","line"),ge(fc,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ge(fc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ge(fc,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Bb(n,e,t,i){const r=n.options,{[t]:o}=n.getProps([t],i);return Math.abs(e-o)<r.radius+r.hitRadius}class td extends yi{constructor(t){super();ge(this,"parsed");ge(this,"skip");ge(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,r){const o=this.options,{x:l,y:c}=this.getProps(["x","y"],r);return Math.pow(t-l,2)+Math.pow(i-c,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,i){return Bb(this,t,"x",i)}inYRange(t,i){return Bb(this,t,"y",i)}getCenterPoint(t){const{x:i,y:r}=this.getProps(["x","y"],t);return{x:i,y:r}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const r=i&&t.borderWidth||0;return(i+r)*2}draw(t,i){const r=this.options;this.skip||r.radius<.1||!Uc(this,i,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,eg(t,r,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}ge(td,"id","point"),ge(td,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ge(td,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function rI(n,e){const{x:t,y:i,base:r,width:o,height:l}=n.getProps(["x","y","base","width","height"],e);let c,h,f,m,y;return n.horizontal?(y=l/2,c=Math.min(t,r),h=Math.max(t,r),f=i-y,m=i+y):(y=o/2,c=t-y,h=t+y,f=Math.min(i,r),m=Math.max(i,r)),{left:c,top:f,right:h,bottom:m}}function ls(n,e,t,i){return n?0:tn(e,t,i)}function JF(n,e,t){const i=n.options.borderWidth,r=n.borderSkipped,o=OS(i);return{t:ls(r.top,o.top,0,t),r:ls(r.right,o.right,0,e),b:ls(r.bottom,o.bottom,0,t),l:ls(r.left,o.left,0,e)}}function ZF(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,o=Na(r),l=Math.min(e,t),c=n.borderSkipped,h=i||Ue(r);return{topLeft:ls(!h||c.top||c.left,o.topLeft,0,l),topRight:ls(!h||c.top||c.right,o.topRight,0,l),bottomLeft:ls(!h||c.bottom||c.left,o.bottomLeft,0,l),bottomRight:ls(!h||c.bottom||c.right,o.bottomRight,0,l)}}function e4(n){const e=rI(n),t=e.right-e.left,i=e.bottom-e.top,r=JF(n,t/2,i/2),o=ZF(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:o},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function bm(n,e,t,i){const r=e===null,o=t===null,c=n&&!(r&&o)&&rI(n,i);return c&&(r||os(e,c.left,c.right))&&(o||os(t,c.top,c.bottom))}function t4(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function n4(n,e){n.rect(e.x,e.y,e.w,e.h)}function Em(n,e,t={}){const i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,o=(n.x+n.w!==t.x+t.w?e:0)-i,l=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+o,h:n.h+l,radius:n.radius}}class nd extends yi{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:o,outer:l}=e4(this),c=t4(l.radius)?Rd:n4;e.save(),(l.w!==o.w||l.h!==o.h)&&(e.beginPath(),c(e,Em(l,t,o)),e.clip(),c(e,Em(o,-t,l)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),c(e,Em(o,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return bm(this,e,t,i)}inXRange(e,t){return bm(this,e,null,t)}inYRange(e,t){return bm(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+r)/2:t,y:o?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ge(nd,"id","bar"),ge(nd,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ge(nd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Ub=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},i4=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class Wb extends yi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=st(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=nn(i.font),o=r.size,l=this._computeTitleHeight(),{boxWidth:c,itemHeight:h}=Ub(i,o);let f,m;t.font=r.string,this.isHorizontal()?(f=this.maxWidth,m=this._fitRows(l,o,c,h)+10):(m=this.maxHeight,f=this._fitCols(l,r,c,h)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(m,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){const{ctx:o,maxWidth:l,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],f=this.lineWidths=[0],m=r+c;let y=e;o.textAlign="left",o.textBaseline="middle";let v=-1,x=-m;return this.legendItems.forEach((S,I)=>{const k=i+t/2+o.measureText(S.text).width;(I===0||f[f.length-1]+k+2*c>l)&&(y+=m,f[f.length-(I>0?0:1)]=0,x+=m,v++),h[I]={left:0,top:x,row:v,width:k,height:r},f[f.length-1]+=k+c}),y}_fitCols(e,t,i,r){const{ctx:o,maxHeight:l,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],f=this.columnSizes=[],m=l-e;let y=c,v=0,x=0,S=0,I=0;return this.legendItems.forEach((k,N)=>{const{itemWidth:L,itemHeight:B}=r4(i,t,o,k,r);N>0&&x+B+2*c>m&&(y+=v+c,f.push({width:v,height:x}),S+=v+c,I++,v=x=0),h[N]={left:S,top:x,col:I,width:L,height:B},v=Math.max(v,L),x+=B+c}),y+=v,f.push({width:v,height:x}),y}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:o}}=this,l=Da(o,this.left,this.width);if(this.isHorizontal()){let c=0,h=Jt(i,this.left+r,this.right-this.lineWidths[c]);for(const f of t)c!==f.row&&(c=f.row,h=Jt(i,this.left+r,this.right-this.lineWidths[c])),f.top+=this.top+e+r,f.left=l.leftForLtr(l.x(h),f.width),h+=f.width+r}else{let c=0,h=Jt(i,this.top+e+r,this.bottom-this.columnSizes[c].height);for(const f of t)f.col!==c&&(c=f.col,h=Jt(i,this.top+e+r,this.bottom-this.columnSizes[c].height)),f.top=h,f.left+=this.left+r,f.left=l.leftForLtr(l.x(f.left),f.width),h+=f.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Sy(e,this),this._draw(),Iy(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:o,labels:l}=e,c=_t.color,h=Da(e.rtl,this.left,this.width),f=nn(l.font),{padding:m}=l,y=f.size,v=y/2;let x;this.drawTitle(),r.textAlign=h.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=f.string;const{boxWidth:S,boxHeight:I,itemHeight:k}=Ub(l,y),N=function(Z,R,C){if(isNaN(S)||S<=0||isNaN(I)||I<0)return;r.save();const P=De(C.lineWidth,1);if(r.fillStyle=De(C.fillStyle,c),r.lineCap=De(C.lineCap,"butt"),r.lineDashOffset=De(C.lineDashOffset,0),r.lineJoin=De(C.lineJoin,"miter"),r.lineWidth=P,r.strokeStyle=De(C.strokeStyle,c),r.setLineDash(De(C.lineDash,[])),l.usePointStyle){const O={radius:I*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:P},V=h.xPlus(Z,S/2),F=R+v;MS(r,O,V,F,l.pointStyleWidth&&S)}else{const O=R+Math.max((y-I)/2,0),V=h.leftForLtr(Z,S),F=Na(C.borderRadius);r.beginPath(),Object.values(F).some(M=>M!==0)?Rd(r,{x:V,y:O,w:S,h:I,radius:F}):r.rect(V,O,S,I),r.fill(),P!==0&&r.stroke()}r.restore()},L=function(Z,R,C){Wc(r,C.text,Z,R+k/2,f,{strikethrough:C.hidden,textAlign:h.textAlign(C.textAlign)})},B=this.isHorizontal(),W=this._computeTitleHeight();B?x={x:Jt(o,this.left+m,this.right-i[0]),y:this.top+m+W,line:0}:x={x:this.left+m,y:Jt(o,this.top+W+m,this.bottom-t[0].height),line:0},BS(this.ctx,e.textDirection);const K=k+m;this.legendItems.forEach((Z,R)=>{r.strokeStyle=Z.fontColor,r.fillStyle=Z.fontColor;const C=r.measureText(Z.text).width,P=h.textAlign(Z.textAlign||(Z.textAlign=l.textAlign)),O=S+v+C;let V=x.x,F=x.y;h.setWidth(this.width),B?R>0&&V+O+m>this.right&&(F=x.y+=K,x.line++,V=x.x=Jt(o,this.left+m,this.right-i[x.line])):R>0&&F+K>this.bottom&&(V=x.x=V+t[x.line].width+m,x.line++,F=x.y=Jt(o,this.top+W+m,this.bottom-t[x.line].height));const M=h.x(V);if(N(M,F,Z),V=XV(P,V+S+v,B?V+O:this.right,e.rtl),L(h.x(V),F,Z),B)x.x+=O+m;else if(typeof Z.text!="string"){const Le=f.lineHeight;x.y+=sI(Z,Le)+m}else x.y+=K}),US(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=nn(t.font),r=Yn(t.padding);if(!t.display)return;const o=Da(e.rtl,this.left,this.width),l=this.ctx,c=t.position,h=i.size/2,f=r.top+h;let m,y=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),m=this.top+f,y=Jt(e.align,y,this.right-v);else{const S=this.columnSizes.reduce((I,k)=>Math.max(I,k.height),0);m=f+Jt(e.align,this.top,this.bottom-S-e.labels.padding-this._computeTitleHeight())}const x=Jt(c,y,y+v);l.textAlign=o.textAlign(Ey(c)),l.textBaseline="middle",l.strokeStyle=t.color,l.fillStyle=t.color,l.font=i.string,Wc(l,t.text,x,m,i)}_computeTitleHeight(){const e=this.options.title,t=nn(e.font),i=Yn(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,o;if(os(e,this.left,this.right)&&os(t,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],os(e,r.left,r.left+r.width)&&os(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!a4(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,o=i4(r,i);r&&!o&&st(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!o&&st(t.onHover,[e,i,this],this)}else i&&st(t.onClick,[e,i,this],this)}}function r4(n,e,t,i,r){const o=s4(i,n,e,t),l=o4(r,i,e.lineHeight);return{itemWidth:o,itemHeight:l}}function s4(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((o,l)=>o.length>l.length?o:l)),e+t.size/2+i.measureText(r).width}function o4(n,e,t){let i=n;return typeof e.text!="string"&&(i=sI(e,t)),i}function sI(n,e){const t=n.text?n.text.length:0;return e*t}function a4(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var l4={id:"legend",_element:Wb,start(n,e,t){const i=n.legend=new Wb({ctx:n.ctx,options:t,chart:n});$n.configure(n,i,t),$n.addBox(n,i)},stop(n){$n.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;$n.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:o,useBorderRadius:l,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const f=h.controller.getStyle(t?0:void 0),m=Yn(f.borderWidth);return{text:e[h.index].label,fillStyle:f.backgroundColor,fontColor:o,hidden:!h.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:f.borderColor,pointStyle:i||f.pointStyle,rotation:f.rotation,textAlign:r||f.textAlign,borderRadius:l&&(c||f.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class oI extends yi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const r=Rt(i.text)?i.text.length:1;this._padding=Yn(i.padding);const o=r*nn(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:r,right:o,options:l}=this,c=l.align;let h=0,f,m,y;return this.isHorizontal()?(m=Jt(c,i,o),y=t+e,f=o-i):(l.position==="left"?(m=i+e,y=Jt(c,r,t),h=Xe*-.5):(m=o-e,y=Jt(c,t,r),h=Xe*.5),f=r-t),{titleX:m,titleY:y,maxWidth:f,rotation:h}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=nn(t.font),o=i.lineHeight/2+this._padding.top,{titleX:l,titleY:c,maxWidth:h,rotation:f}=this._drawArgs(o);Wc(e,t.text,0,0,i,{color:t.color,maxWidth:h,rotation:f,textAlign:Ey(t.align),textBaseline:"middle",translation:[l,c]})}}function c4(n,e){const t=new oI({ctx:n.ctx,options:e,chart:n});$n.configure(n,t,e),$n.addBox(n,t),n.titleBlock=t}var u4={id:"title",_element:oI,start(n,e,t){c4(n,t)},stop(n){const e=n.titleBlock;$n.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;$n.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const pc={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,o=0;for(e=0,t=n.length;e<t;++e){const c=n[e].element;if(c&&c.hasValue()){const h=c.tooltipPosition();i.add(h.x),r+=h.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((c,h)=>c+h)/i.size,y:r/o}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,o,l,c;for(o=0,l=n.length;o<l;++o){const h=n[o].element;if(h&&h.hasValue()){const f=h.getCenterPoint(),m=Jm(e,f);m<r&&(r=m,c=h)}}if(c){const h=c.tooltipPosition();t=h.x,i=h.y}return{x:t,y:i}}};function Pi(n,e){return e&&(Rt(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function dr(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function h4(n,e){const{element:t,datasetIndex:i,index:r}=e,o=n.getDatasetMeta(i).controller,{label:l,value:c}=o.getLabelAndValue(r);return{chart:n,label:l,parsed:o.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:c,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function Hb(n,e){const t=n.chart.ctx,{body:i,footer:r,title:o}=n,{boxWidth:l,boxHeight:c}=e,h=nn(e.bodyFont),f=nn(e.titleFont),m=nn(e.footerFont),y=o.length,v=r.length,x=i.length,S=Yn(e.padding);let I=S.height,k=0,N=i.reduce((W,K)=>W+K.before.length+K.lines.length+K.after.length,0);if(N+=n.beforeBody.length+n.afterBody.length,y&&(I+=y*f.lineHeight+(y-1)*e.titleSpacing+e.titleMarginBottom),N){const W=e.displayColors?Math.max(c,h.lineHeight):h.lineHeight;I+=x*W+(N-x)*h.lineHeight+(N-1)*e.bodySpacing}v&&(I+=e.footerMarginTop+v*m.lineHeight+(v-1)*e.footerSpacing);let L=0;const B=function(W){k=Math.max(k,t.measureText(W).width+L)};return t.save(),t.font=f.string,Qe(n.title,B),t.font=h.string,Qe(n.beforeBody.concat(n.afterBody),B),L=e.displayColors?l+2+e.boxPadding:0,Qe(i,W=>{Qe(W.before,B),Qe(W.lines,B),Qe(W.after,B)}),L=0,t.font=m.string,Qe(n.footer,B),t.restore(),k+=S.width,{width:k,height:I}}function d4(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function f4(n,e,t,i){const{x:r,width:o}=i,l=t.caretSize+t.caretPadding;if(n==="left"&&r+o+l>e.width||n==="right"&&r-o-l<0)return!0}function p4(n,e,t,i){const{x:r,width:o}=t,{width:l,chartArea:{left:c,right:h}}=n;let f="center";return i==="center"?f=r<=(c+h)/2?"left":"right":r<=o/2?f="left":r>=l-o/2&&(f="right"),f4(f,n,e,t)&&(f="center"),f}function $b(n,e,t){const i=t.yAlign||e.yAlign||d4(n,t);return{xAlign:t.xAlign||e.xAlign||p4(n,e,t,i),yAlign:i}}function m4(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function g4(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function qb(n,e,t,i){const{caretSize:r,caretPadding:o,cornerRadius:l}=n,{xAlign:c,yAlign:h}=t,f=r+o,{topLeft:m,topRight:y,bottomLeft:v,bottomRight:x}=Na(l);let S=m4(e,c);const I=g4(e,h,f);return h==="center"?c==="left"?S+=f:c==="right"&&(S-=f):c==="left"?S-=Math.max(m,v)+r:c==="right"&&(S+=Math.max(y,x)+r),{x:tn(S,0,i.width-e.width),y:tn(I,0,i.height-e.height)}}function jh(n,e,t){const i=Yn(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function Kb(n){return Pi([],dr(n))}function y4(n,e,t){return ko(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function Gb(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const aI={beforeTitle:ur,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:ur,beforeBody:ur,beforeLabel:ur,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return qe(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:ur,afterBody:ur,beforeFooter:ur,footer:ur,afterFooter:ur};function _n(n,e,t,i){const r=n[e].call(t,i);return typeof r>"u"?aI[e].call(t,i):r}class rg extends yi{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&t.options.animation&&i.animations,o=new HS(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=y4(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,r=_n(i,"beforeTitle",this,e),o=_n(i,"title",this,e),l=_n(i,"afterTitle",this,e);let c=[];return c=Pi(c,dr(r)),c=Pi(c,dr(o)),c=Pi(c,dr(l)),c}getBeforeBody(e,t){return Kb(_n(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,r=[];return Qe(e,o=>{const l={before:[],lines:[],after:[]},c=Gb(i,o);Pi(l.before,dr(_n(c,"beforeLabel",this,o))),Pi(l.lines,_n(c,"label",this,o)),Pi(l.after,dr(_n(c,"afterLabel",this,o))),r.push(l)}),r}getAfterBody(e,t){return Kb(_n(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,r=_n(i,"beforeFooter",this,e),o=_n(i,"footer",this,e),l=_n(i,"afterFooter",this,e);let c=[];return c=Pi(c,dr(r)),c=Pi(c,dr(o)),c=Pi(c,dr(l)),c}_createItems(e){const t=this._active,i=this.chart.data,r=[],o=[],l=[];let c=[],h,f;for(h=0,f=t.length;h<f;++h)c.push(h4(this.chart,t[h]));return e.filter&&(c=c.filter((m,y,v)=>e.filter(m,y,v,i))),e.itemSort&&(c=c.sort((m,y)=>e.itemSort(m,y,i))),Qe(c,m=>{const y=Gb(e.callbacks,m);r.push(_n(y,"labelColor",this,m)),o.push(_n(y,"labelPointStyle",this,m)),l.push(_n(y,"labelTextColor",this,m))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=c,c}update(e,t){const i=this.options.setContext(this.getContext()),r=this._active;let o,l=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const c=pc[i.position].call(this,r,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const h=this._size=Hb(this,i),f=Object.assign({},c,h),m=$b(this.chart,i,f),y=qb(i,f,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,o={opacity:1,x:y.x,y:y.y,width:h.width,height:h.height,caretX:c.x,caretY:c.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,r){const o=this.getCaretPosition(e,i,r);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,i){const{xAlign:r,yAlign:o}=this,{caretSize:l,cornerRadius:c}=i,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:y}=Na(c),{x:v,y:x}=e,{width:S,height:I}=t;let k,N,L,B,W,K;return o==="center"?(W=x+I/2,r==="left"?(k=v,N=k-l,B=W+l,K=W-l):(k=v+S,N=k+l,B=W-l,K=W+l),L=k):(r==="left"?N=v+Math.max(h,m)+l:r==="right"?N=v+S-Math.max(f,y)-l:N=this.caretX,o==="top"?(B=x,W=B-l,k=N-l,L=N+l):(B=x+I,W=B+l,k=N+l,L=N-l),K=B),{x1:k,x2:N,x3:L,y1:B,y2:W,y3:K}}drawTitle(e,t,i){const r=this.title,o=r.length;let l,c,h;if(o){const f=Da(i.rtl,this.x,this.width);for(e.x=jh(this,i.titleAlign,i),t.textAlign=f.textAlign(i.titleAlign),t.textBaseline="middle",l=nn(i.titleFont),c=i.titleSpacing,t.fillStyle=i.titleColor,t.font=l.string,h=0;h<o;++h)t.fillText(r[h],f.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+c,h+1===o&&(e.y+=i.titleMarginBottom-c)}}_drawColorBox(e,t,i,r,o){const l=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:h,boxWidth:f}=o,m=nn(o.bodyFont),y=jh(this,"left",o),v=r.x(y),x=h<m.lineHeight?(m.lineHeight-h)/2:0,S=t.y+x;if(o.usePointStyle){const I={radius:Math.min(f,h)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},k=r.leftForLtr(v,f)+f/2,N=S+h/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,eg(e,I,k,N),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,eg(e,I,k,N)}else{e.lineWidth=Ue(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const I=r.leftForLtr(v,f),k=r.leftForLtr(r.xPlus(v,1),f-2),N=Na(l.borderRadius);Object.values(N).some(L=>L!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Rd(e,{x:I,y:S,w:f,h,radius:N}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),Rd(e,{x:k,y:S+1,w:f-2,h:h-2,radius:N}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(I,S,f,h),e.strokeRect(I,S,f,h),e.fillStyle=l.backgroundColor,e.fillRect(k,S+1,f-2,h-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:r}=this,{bodySpacing:o,bodyAlign:l,displayColors:c,boxHeight:h,boxWidth:f,boxPadding:m}=i,y=nn(i.bodyFont);let v=y.lineHeight,x=0;const S=Da(i.rtl,this.x,this.width),I=function(C){t.fillText(C,S.x(e.x+x),e.y+v/2),e.y+=v+o},k=S.textAlign(l);let N,L,B,W,K,Z,R;for(t.textAlign=l,t.textBaseline="middle",t.font=y.string,e.x=jh(this,k,i),t.fillStyle=i.bodyColor,Qe(this.beforeBody,I),x=c&&k!=="right"?l==="center"?f/2+m:f+2+m:0,W=0,Z=r.length;W<Z;++W){for(N=r[W],L=this.labelTextColors[W],t.fillStyle=L,Qe(N.before,I),B=N.lines,c&&B.length&&(this._drawColorBox(t,e,W,S,i),v=Math.max(y.lineHeight,h)),K=0,R=B.length;K<R;++K)I(B[K]),v=y.lineHeight;Qe(N.after,I)}x=0,v=y.lineHeight,Qe(this.afterBody,I),e.y-=o}drawFooter(e,t,i){const r=this.footer,o=r.length;let l,c;if(o){const h=Da(i.rtl,this.x,this.width);for(e.x=jh(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=h.textAlign(i.footerAlign),t.textBaseline="middle",l=nn(i.footerFont),t.fillStyle=i.footerColor,t.font=l.string,c=0;c<o;++c)t.fillText(r[c],h.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+i.footerSpacing}}drawBackground(e,t,i,r){const{xAlign:o,yAlign:l}=this,{x:c,y:h}=e,{width:f,height:m}=i,{topLeft:y,topRight:v,bottomLeft:x,bottomRight:S}=Na(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(c+y,h),l==="top"&&this.drawCaret(e,t,i,r),t.lineTo(c+f-v,h),t.quadraticCurveTo(c+f,h,c+f,h+v),l==="center"&&o==="right"&&this.drawCaret(e,t,i,r),t.lineTo(c+f,h+m-S),t.quadraticCurveTo(c+f,h+m,c+f-S,h+m),l==="bottom"&&this.drawCaret(e,t,i,r),t.lineTo(c+x,h+m),t.quadraticCurveTo(c,h+m,c,h+m-x),l==="center"&&o==="left"&&this.drawCaret(e,t,i,r),t.lineTo(c,h+y),t.quadraticCurveTo(c,h,c+y,h),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,r=i&&i.x,o=i&&i.y;if(r||o){const l=pc[e.position].call(this,this._active,this._eventPosition);if(!l)return;const c=this._size=Hb(this,e),h=Object.assign({},l,this._size),f=$b(t,e,h),m=qb(e,h,f,t);(r._to!==m.x||o._to!==m.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=c.width,this.height=c.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=Yn(t.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&c&&(e.save(),e.globalAlpha=i,this.drawBackground(o,e,r,t),BS(e,t.textDirection),o.y+=l.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),US(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,r=e.map(({datasetIndex:c,index:h})=>{const f=this.chart.getDatasetMeta(c);if(!f)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:f.data[h],index:h}}),o=!Ad(i,r),l=this._positionChanged(r,t);(o||l)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],l=this._getActiveElements(e,o,t,i),c=this._positionChanged(l,e),h=t||!Ad(l,o)||c;return h&&(this._active=l,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),h}_getActiveElements(e,t,i,r){const o=this.options;if(e.type==="mouseout")return[];if(!r)return t.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,o.mode,o,i);return o.reverse&&l.reverse(),l}_positionChanged(e,t){const{caretX:i,caretY:r,options:o}=this,l=pc[o.position].call(this,e,t);return l!==!1&&(i!==l.x||r!==l.y)}}ge(rg,"positioners",pc);var v4={id:"tooltip",_element:rg,positioners:pc,afterInit(n,e,t){t&&(n.tooltip=new rg({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:aI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const _4=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function w4(n,e,t,i){const r=n.indexOf(e);if(r===-1)return _4(n,e,t,i);const o=n.lastIndexOf(e);return r!==o?t:r}const b4=(n,e)=>n===null?null:tn(Math.round(n),0,e);function Yb(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class sg extends rl{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:r,label:o}of t)i[r]===o&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(qe(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:w4(i,e,De(t,e),this._addedLabels),b4(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,r=[];let o=this.getLabels();o=e===0&&t===o.length-1?o:o.slice(e,t+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=e;l<=t;l++)r.push({value:l});return r}getLabelForValue(e){return Yb.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ge(sg,"id","category"),ge(sg,"defaults",{ticks:{callback:Yb}});function E4(n,e){const t=[],{bounds:r,step:o,min:l,max:c,precision:h,count:f,maxTicks:m,maxDigits:y,includeBounds:v}=n,x=o||1,S=m-1,{min:I,max:k}=e,N=!qe(l),L=!qe(c),B=!qe(f),W=(k-I)/(y+1);let K=Xw((k-I)/S/x)*x,Z,R,C,P;if(K<1e-14&&!N&&!L)return[{value:I},{value:k}];P=Math.ceil(k/K)-Math.floor(I/K),P>S&&(K=Xw(P*K/S/x)*x),qe(h)||(Z=Math.pow(10,h),K=Math.ceil(K*Z)/Z),r==="ticks"?(R=Math.floor(I/K)*K,C=Math.ceil(k/K)*K):(R=I,C=k),N&&L&&o&&UV((c-l)/o,K/1e3)?(P=Math.round(Math.min((c-l)/K,m)),K=(c-l)/P,R=l,C=c):B?(R=N?l:R,C=L?c:C,P=f-1,K=(C-R)/P):(P=(C-R)/K,xc(P,Math.round(P),K/1e3)?P=Math.round(P):P=Math.ceil(P));const O=Math.max(Jw(K),Jw(R));Z=Math.pow(10,qe(h)?O:h),R=Math.round(R*Z)/Z,C=Math.round(C*Z)/Z;let V=0;for(N&&(v&&R!==l?(t.push({value:l}),R<l&&V++,xc(Math.round((R+V*K)*Z)/Z,l,Qb(l,W,n))&&V++):R<l&&V++);V<P;++V){const F=Math.round((R+V*K)*Z)/Z;if(L&&F>c)break;t.push({value:F})}return L&&v&&C!==c?t.length&&xc(t[t.length-1].value,c,Qb(c,W,n))?t[t.length-1].value=c:t.push({value:c}):(!L||C===c)&&t.push({value:C}),t}function Qb(n,e,{horizontal:t,minRotation:i}){const r=vr(i),o=(t?Math.sin(r):Math.cos(r))||.001,l=.75*e*(""+n).length;return Math.min(e/o,l)}class x4 extends rl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return qe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:r,max:o}=this;const l=h=>r=t?r:h,c=h=>o=i?o:h;if(e){const h=Bi(r),f=Bi(o);h<0&&f<0?c(0):h>0&&f>0&&l(0)}if(r===o){let h=o===0?1:Math.abs(o*.05);c(o+h),e||l(r-h)}this.min=r,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,l=E4(r,o);return e.bounds==="ticks"&&WV(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Ty(e,this.chart.options.locale,this.options.ticks.format)}}class og extends x4{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Gn(e)?e:0,this.max=Gn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=vr(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ge(og,"id","linear"),ge(og,"defaults",{ticks:{callback:DS.formatters.numeric}});const gf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},En=Object.keys(gf);function Xb(n,e){return n-e}function Jb(n,e){if(qe(e))return null;const t=n._adapter,{parser:i,round:r,isoWeekday:o}=n._parseOpts;let l=e;return typeof i=="function"&&(l=i(l)),Gn(l)||(l=typeof i=="string"?t.parse(l,i):t.parse(l)),l===null?null:(r&&(l=r==="week"&&(zc(o)||o===!0)?t.startOf(l,"isoWeek",o):t.startOf(l,r)),+l)}function Zb(n,e,t,i){const r=En.length;for(let o=En.indexOf(n);o<r-1;++o){const l=gf[En[o]],c=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((t-e)/(c*l.size))<=i)return En[o]}return En[r-1]}function T4(n,e,t,i,r){for(let o=En.length-1;o>=En.indexOf(t);o--){const l=En[o];if(gf[l].common&&n._adapter.diff(r,i,l)>=e-1)return l}return En[t?En.indexOf(t):0]}function S4(n){for(let e=En.indexOf(n)+1,t=En.length;e<t;++e)if(gf[En[e]].common)return En[e]}function eE(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:r}=by(t,e),o=t[i]>=e?t[i]:t[r];n[o]=!0}}function I4(n,e,t,i){const r=n._adapter,o=+r.startOf(e[0].value,i),l=e[e.length-1].value;let c,h;for(c=o;c<=l;c=+r.add(c,1,i))h=t[c],h>=0&&(e[h].major=!0);return e}function tE(n,e,t){const i=[],r={},o=e.length;let l,c;for(l=0;l<o;++l)c=e[l],r[c]=l,i.push({value:c,major:!1});return o===0||!t?i:I4(n,i,r,t)}class Od extends rl{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),r=this._adapter=new Aj._date(e.adapters.date);r.init(t),Ec(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:Jb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:r,max:o,minDefined:l,maxDefined:c}=this.getUserBounds();function h(f){!l&&!isNaN(f.min)&&(r=Math.min(r,f.min)),!c&&!isNaN(f.max)&&(o=Math.max(o,f.max))}(!l||!c)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),r=Gn(r)&&!isNaN(r)?r:+t.startOf(Date.now(),i),o=Gn(o)&&!isNaN(o)?o:+t.endOf(Date.now(),i)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,l=this.max,c=GV(r,o,l);return this._unit=t.unit||(i.autoSkip?Zb(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):T4(this,c.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:S4(this._unit),this.initOffsets(r),e.reverse&&c.reverse(),tE(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,r,o;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?t=1-r:t=(this.getDecimalForValue(e[1])-r)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?i=o:i=(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;t=tn(t,0,l),i=tn(i,0,l),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,r=this.options,o=r.time,l=o.unit||Zb(o.minUnit,t,i,this._getLabelCapacity(t)),c=De(r.ticks.stepSize,1),h=l==="week"?o.isoWeekday:!1,f=zc(h)||h===!0,m={};let y=t,v,x;if(f&&(y=+e.startOf(y,"isoWeek",h)),y=+e.startOf(y,f?"day":l),e.diff(i,t,l)>1e5*c)throw new Error(t+" and "+i+" are too far apart with stepSize of "+c+" "+l);const S=r.ticks.source==="data"&&this.getDataTimestamps();for(v=y,x=0;v<i;v=+e.add(v,c,l),x++)eE(m,v,S);return(v===i||r.bounds==="ticks"||x===1)&&eE(m,v,S),Object.keys(m).sort(Xb).map(I=>+I)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const r=this.options.time.displayFormats,o=this._unit,l=t||r[o];return this._adapter.format(e,l)}_tickFormatFunction(e,t,i,r){const o=this.options,l=o.ticks.callback;if(l)return st(l,[e,t,i],this);const c=o.time.displayFormats,h=this._unit,f=this._majorUnit,m=h&&c[h],y=f&&c[f],v=i[t],x=f&&y&&v&&v.major;return this._adapter.format(e,r||(x?y:m))}generateTickLabels(e){let t,i,r;for(t=0,i=e.length;t<i;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,r=vr(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(r),l=Math.sin(r),c=this._resolveTickFontOptions(0).size;return{w:i*o+c*l,h:i*l+c*o}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,r=i[t.unit]||i.millisecond,o=this._tickFormatFunction(e,0,tE(this,[e],this._majorUnit),r),l=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,i=r.length;t<i;++t)e=e.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const r=this.getLabels();for(t=0,i=r.length;t<i;++t)e.push(Jb(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return PS(e.sort(Xb))}}ge(Od,"id","time"),ge(Od,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Fh(n,e,t){let i=0,r=n.length-1,o,l,c,h;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=co(n,"pos",e)),{pos:o,time:c}=n[i],{pos:l,time:h}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=co(n,"time",e)),{time:o,pos:c}=n[i],{time:l,pos:h}=n[r]);const f=l-o;return f?c+(h-c)*(e-o)/f:c}class nE extends Od{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Fh(t,this.min),this._tableRange=Fh(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,r=[],o=[];let l,c,h,f,m;for(l=0,c=e.length;l<c;++l)f=e[l],f>=t&&f<=i&&r.push(f);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(l=0,c=r.length;l<c;++l)m=r[l+1],h=r[l-1],f=r[l],Math.round((m+h)/2)!==f&&o.push({time:f,pos:l/(c-1)});return o}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,o)=>r-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Fh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Fh(this._table,i*this._tableRange+this._minPos,!0)}}ge(nE,"id","timeseries"),ge(nE,"defaults",Od.defaults);const lI="label";function iE(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function k4(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function cI(n,e){n.labels=e}function uI(n,e,t=lI){const i=[];n.datasets=e.map(r=>{const o=n.datasets.find(l=>l[t]===r[t]);return!o||!r.data||i.includes(o)?{...r}:(i.push(o),Object.assign(o,r),o)})}function A4(n,e=lI){const t={labels:[],datasets:[]};return cI(t,n.labels),uI(t,n.datasets,e),t}function C4(n,e){const{height:t=150,width:i=300,redraw:r=!1,datasetIdKey:o,type:l,data:c,options:h,plugins:f=[],fallbackContent:m,updateMode:y,...v}=n,x=ae.useRef(null),S=ae.useRef(null),I=()=>{x.current&&(S.current=new mf(x.current,{type:l,data:A4(c,o),options:h&&{...h},plugins:f}),iE(e,S.current))},k=()=>{iE(e,null),S.current&&(S.current.destroy(),S.current=null)};return ae.useEffect(()=>{!r&&S.current&&h&&k4(S.current,h)},[r,h]),ae.useEffect(()=>{!r&&S.current&&cI(S.current.config.data,c.labels)},[r,c.labels]),ae.useEffect(()=>{!r&&S.current&&c.datasets&&uI(S.current.config.data,c.datasets,o)},[r,c.datasets]),ae.useEffect(()=>{S.current&&(r?(k(),setTimeout(I)):S.current.update(y))},[r,h,c.labels,c.datasets,y]),ae.useEffect(()=>{S.current&&(k(),setTimeout(I))},[l]),ae.useEffect(()=>(I(),()=>k()),[]),b.jsx("canvas",{ref:x,role:"img",height:t,width:i,...v,children:m})}const P4=ae.forwardRef(C4);function My(n,e){return mf.register(e),ae.forwardRef((t,i)=>b.jsx(P4,{...t,ref:i,type:n}))}const R4=My("line",Jh),N4=My("bar",Xh),rE=My("doughnut",uc);mf.register(sg,og,td,fc,nd,u4,v4,l4,dc);const D4=({events:n})=>{const e=ae.useMemo(()=>{const m=[],y=[],v=[],x=[];for(let S=6;S>=0;S--){const I=_S(new Date,S),k=bo(I),N=df(I),L=n.filter(R=>kd(new Date(R.createdAt),{start:k,end:N})),B=L.filter(R=>R.type==="feeding"),W=L.filter(R=>R.type==="diaper"),K=B.map(R=>parseInt(R.duration||R.customDuration||0)).filter(R=>R>0),Z=K.length>0?K.reduce((R,C)=>R+C,0)/K.length:0;m.push(bc(I,"EEE",{locale:Wa})),y.push(B.length),v.push(W.length),x.push(Math.round(Z))}return{days:m,feedingCounts:y,diaperCounts:v,avgDurations:x}},[n]),t=ae.useMemo(()=>{const m=n.filter(x=>x.type==="diaper"&&x.diaperType==="pee").length,y=n.filter(x=>x.type==="diaper"&&x.diaperType==="poop").length,v=n.filter(x=>x.type==="diaper"&&x.diaperType==="both").length;return{peeCount:m,poopCount:y,bothCount:v}},[n]),i=ae.useMemo(()=>{const m=n.filter(v=>v.type==="feeding"&&v.breast==="left").length,y=n.filter(v=>v.type==="feeding"&&v.breast==="right").length;return{leftCount:m,rightCount:y}},[n]),r={labels:e.days,datasets:[{label:"Allaitements",data:e.feedingCounts,borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4},{label:"Couches",data:e.diaperCounts,borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4}]},o={labels:e.days,datasets:[{label:"Dure moyenne (min)",data:e.avgDurations,backgroundColor:"#3b82f6"}]},l={labels:["Pipi","Caca","Les deux"],datasets:[{data:[t.peeCount,t.poopCount,t.bothCount],backgroundColor:["#60a5fa","#f59e0b","#10b981"],borderColor:getComputedStyle(document.documentElement).getPropertyValue("--card-bg").trim(),borderWidth:3}]},c={labels:["Sein gauche","Sein droit"],datasets:[{data:[i.leftCount,i.rightCount],backgroundColor:["#3b82f6","#8b5cf6"],borderColor:getComputedStyle(document.documentElement).getPropertyValue("--card-bg").trim(),borderWidth:3}]},h={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:getComputedStyle(document.documentElement).getPropertyValue("--text-primary").trim(),font:{family:"Inter, system-ui, sans-serif"}}},tooltip:{backgroundColor:getComputedStyle(document.documentElement).getPropertyValue("--card-bg").trim(),titleColor:getComputedStyle(document.documentElement).getPropertyValue("--text-primary").trim(),bodyColor:getComputedStyle(document.documentElement).getPropertyValue("--text-secondary").trim(),borderColor:getComputedStyle(document.documentElement).getPropertyValue("--border-color").trim(),borderWidth:1}},scales:{y:{beginAtZero:!0,ticks:{color:getComputedStyle(document.documentElement).getPropertyValue("--text-secondary").trim(),stepSize:1},grid:{color:getComputedStyle(document.documentElement).getPropertyValue("--border-color").trim()}},x:{ticks:{color:getComputedStyle(document.documentElement).getPropertyValue("--text-secondary").trim()},grid:{color:getComputedStyle(document.documentElement).getPropertyValue("--border-color").trim()}}}},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:getComputedStyle(document.documentElement).getPropertyValue("--text-primary").trim(),font:{family:"Inter, system-ui, sans-serif"},padding:15}},tooltip:{backgroundColor:getComputedStyle(document.documentElement).getPropertyValue("--card-bg").trim(),titleColor:getComputedStyle(document.documentElement).getPropertyValue("--text-primary").trim(),bodyColor:getComputedStyle(document.documentElement).getPropertyValue("--text-secondary").trim(),borderColor:getComputedStyle(document.documentElement).getPropertyValue("--border-color").trim(),borderWidth:1}}};return b.jsxs("div",{className:"charts-container",children:[b.jsxs("div",{className:"chart-card",children:[b.jsx("h3",{className:"chart-title",children:"vnements quotidiens (7 derniers jours)"}),b.jsx("div",{className:"chart-wrapper",children:b.jsx(R4,{data:r,options:h})})]}),b.jsxs("div",{className:"chart-card",children:[b.jsx("h3",{className:"chart-title",children:"Dure moyenne d'allaitement (7 derniers jours)"}),b.jsx("div",{className:"chart-wrapper",children:b.jsx(N4,{data:o,options:h})})]}),b.jsxs("div",{className:"charts-row",children:[b.jsxs("div",{className:"chart-card chart-small",children:[b.jsx("h3",{className:"chart-title",children:"Rpartition des couches"}),b.jsx("div",{className:"chart-wrapper",children:b.jsx(rE,{data:l,options:f})})]}),b.jsxs("div",{className:"chart-card chart-small",children:[b.jsx("h3",{className:"chart-title",children:"Rpartition des seins"}),b.jsx("div",{className:"chart-wrapper",children:b.jsx(rE,{data:c,options:f})})]})]})]})},M4=({events:n})=>{const e=ae.useMemo(()=>{const t=n.filter(W=>W.type==="feeding"),i=n.filter(W=>W.type==="diaper"),r=n.filter(W=>W.type==="bath"),o=t.reduce((W,K)=>W+parseInt(K.duration||K.customDuration||0),0),l=i.filter(W=>W.diaperType==="pee"||W.diaperType==="both").length,c=i.filter(W=>W.diaperType==="poop"||W.diaperType==="both").length,h=t.filter(W=>W.breast==="left").length,f=t.filter(W=>W.breast==="right").length,m=n[n.length-1],y=m?T2(new Date,new Date(m.createdAt)):0,v=i.length,x=(v*.25).toFixed(2),S=(o/30*.15).toFixed(1),I=Math.round((y||1)*3),k=Math.round((v+t.length)*.5),N={};n.forEach(W=>{const K=new Date(W.createdAt).getHours();N[K]=(N[K]||0)+1});const L=Object.entries(N).sort((W,K)=>K[1]-W[1])[0];let B=1/0;for(let W=0;W<i.length-1;W++){const K=S2(new Date(i[W].createdAt),new Date(i[W+1].createdAt));K<B&&K>0&&(B=K)}return{totalDiapers:v,totalFeedings:t.length,totalBaths:r.length,totalFeedingHours:Math.floor(o/60),totalFeedingMinutes:o%60,peeCount:l,poopCount:c,leftCount:h,rightCount:f,daysSinceStart:y||1,diaperCost:x,milkInLiters:S,coffeeEquivalent:I,sleepLostHours:k,busiestHour:L?`${L[0]}h`:"",recordSpeed:B!==1/0?B:0,coffeeCansBought:Math.round(parseFloat(x)/3),netflixEpisodes:Math.round(o/45),songsListened:Math.round(o/3)}},[n]);return n.length===0?b.jsx("div",{className:"fun-features",children:b.jsxs("div",{className:"fun-empty",children:[b.jsx("div",{className:"fun-empty-icon",children:""}),b.jsx("h3",{children:"Rien  voir ici... encore !"}),b.jsx("p",{children:"Commencez  enregistrer des vnements pour dbloquer les statistiques inutiles mais amusantes !"})]})}):b.jsxs("div",{className:"fun-features",children:[b.jsxs("div",{className:"fun-header",children:[b.jsx("h2",{children:" Statistiques Compltement Inutiles"}),b.jsx("p",{className:"fun-subtitle",children:"Parce que tout mrite d'tre mesur, mme l'absurde"})]}),b.jsxs("section",{className:"fun-mega-counters",children:[b.jsxs("div",{className:"mega-counter purple",children:[b.jsx("div",{className:"mega-counter-icon",children:""}),b.jsxs("div",{className:"mega-counter-value",children:[e.diaperCost,""]}),b.jsx("div",{className:"mega-counter-label",children:"Dpenss en couches"}),b.jsxs("div",{className:"mega-counter-sub",children:["Soit ",e.coffeeCansBought," cafs non bus"]})]}),b.jsxs("div",{className:"mega-counter pink",children:[b.jsx("div",{className:"mega-counter-icon",children:""}),b.jsxs("div",{className:"mega-counter-value",children:[e.milkInLiters,"L"]}),b.jsx("div",{className:"mega-counter-label",children:"Lait produit (estim)"}),b.jsxs("div",{className:"mega-counter-sub",children:["Environ ",e.netflixEpisodes," pisodes Netflix"]})]}),b.jsxs("div",{className:"mega-counter cyan",children:[b.jsx("div",{className:"mega-counter-icon",children:""}),b.jsx("div",{className:"mega-counter-value",children:e.coffeeEquivalent}),b.jsx("div",{className:"mega-counter-label",children:"Cafs ncessaires"}),b.jsx("div",{className:"mega-counter-sub",children:"Pour tenir jusqu'ici"})]}),b.jsxs("div",{className:"mega-counter green",children:[b.jsx("div",{className:"mega-counter-icon",children:""}),b.jsxs("div",{className:"mega-counter-value",children:[e.sleepLostHours,"h"]}),b.jsx("div",{className:"mega-counter-label",children:"Sommeil perdu"}),b.jsx("div",{className:"mega-counter-sub",children:"Estimation trs optimiste"})]})]}),b.jsxs("section",{className:"fun-section",children:[b.jsx("h3",{children:" Records & Faits Marquants"}),b.jsxs("div",{className:"fun-facts-grid",children:[b.jsxs("div",{className:"fun-fact",children:[b.jsx("div",{className:"fun-fact-icon",children:""}),b.jsx("div",{className:"fun-fact-title",children:"Record de rapidit"}),b.jsx("div",{className:"fun-fact-value",children:e.recordSpeed>0?`${e.recordSpeed} minutes`:"Aucun encore"}),b.jsx("div",{className:"fun-fact-desc",children:"Entre deux couches"})]}),b.jsxs("div",{className:"fun-fact",children:[b.jsx("div",{className:"fun-fact-icon",children:""}),b.jsx("div",{className:"fun-fact-title",children:"Heure de pointe"}),b.jsx("div",{className:"fun-fact-value",children:e.busiestHour}),b.jsx("div",{className:"fun-fact-desc",children:"L'heure la plus charge"})]}),b.jsxs("div",{className:"fun-fact",children:[b.jsx("div",{className:"fun-fact-icon",children:""}),b.jsx("div",{className:"fun-fact-title",children:"Playlist quivalente"}),b.jsxs("div",{className:"fun-fact-value",children:[e.songsListened," chansons"]}),b.jsx("div",{className:"fun-fact-desc",children:"Pendant les allaitements"})]}),b.jsxs("div",{className:"fun-fact",children:[b.jsx("div",{className:"fun-fact-icon",children:""}),b.jsx("div",{className:"fun-fact-title",children:"Battle Gauche vs Droit"}),b.jsx("div",{className:"fun-fact-value",children:e.leftCount===e.rightCount?" galit parfaite !":e.leftCount>e.rightCount?` Gauche mne ${e.leftCount}-${e.rightCount}`:` Droit mne ${e.rightCount}-${e.leftCount}`}),b.jsx("div",{className:"fun-fact-desc",children:"Score actuel"})]})]})]}),b.jsxs("section",{className:"fun-section",children:[b.jsx("h3",{children:" Mises en Perspective Absurdes"}),b.jsxs("div",{className:"absurd-comparisons",children:[b.jsxs("div",{className:"comparison-item",children:[b.jsx("span",{className:"comparison-emoji",children:""}),b.jsxs("span",{className:"comparison-text",children:[b.jsxs("strong",{children:[e.totalDiapers," couches"]})," = ",(e.totalDiapers*.2).toFixed(0),"kg de dchets",b.jsx("span",{className:"comparison-note",children:"Poids d'un bb de 6 mois environ"})]})]}),b.jsxs("div",{className:"comparison-item",children:[b.jsx("span",{className:"comparison-emoji",children:""}),b.jsxs("span",{className:"comparison-text",children:[b.jsxs("strong",{children:[e.totalFeedingHours,"h ",e.totalFeedingMinutes,"min d'allaitement"]})," = ",e.netflixEpisodes," pisodes de srie",b.jsx("span",{className:"comparison-note",children:"Ou une saison complte"})]})]}),b.jsxs("div",{className:"comparison-item",children:[b.jsx("span",{className:"comparison-emoji",children:""}),b.jsxs("span",{className:"comparison-text",children:[b.jsxs("strong",{children:[e.diaperCost," en couches"]})," = ",Math.round(parseFloat(e.diaperCost)/10)," restaurants",b.jsxs("span",{className:"comparison-note",children:["Ou ",e.coffeeCansBought," cafs en terrasse"]})]})]}),b.jsxs("div",{className:"comparison-item",children:[b.jsx("span",{className:"comparison-emoji",children:""}),b.jsxs("span",{className:"comparison-text",children:[b.jsxs("strong",{children:[e.totalDiapers," changements"]})," = ",(e.totalDiapers*3).toFixed(0)," squats",b.jsx("span",{className:"comparison-note",children:"Vous tes un athlte olympique"})]})]}),b.jsxs("div",{className:"comparison-item",children:[b.jsx("span",{className:"comparison-emoji",children:""}),b.jsxs("span",{className:"comparison-text",children:[b.jsxs("strong",{children:[e.peeCount," pipis"]})," dtects avec une prcision militaire",b.jsx("span",{className:"comparison-note",children:"Mdaille de reconnaissance imminente"})]})]})]})]}),b.jsxs("section",{className:"fun-section",children:[b.jsx("h3",{children:" Progression de Survie"}),b.jsxs("div",{className:"survival-stats",children:[b.jsxs("div",{className:"survival-item",children:[b.jsxs("div",{className:"survival-header",children:[b.jsx("span",{className:"survival-label",children:"Jours de service"}),b.jsxs("span",{className:"survival-value",children:[e.daysSinceStart," jours"]})]}),b.jsx("div",{className:"survival-bar",children:b.jsx("div",{className:"survival-fill",style:{width:`${Math.min(e.daysSinceStart/365*100,100)}%`}})}),b.jsx("div",{className:"survival-note",children:"Objectif : 365 jours (1 an)"})]}),b.jsxs("div",{className:"survival-item",children:[b.jsxs("div",{className:"survival-header",children:[b.jsx("span",{className:"survival-label",children:"Couches changes"}),b.jsx("span",{className:"survival-value",children:e.totalDiapers})]}),b.jsx("div",{className:"survival-bar",children:b.jsx("div",{className:"survival-fill pink",style:{width:`${Math.min(e.totalDiapers/1e3*100,100)}%`}})}),b.jsx("div",{className:"survival-note",children:"Objectif : 1000 couches (niveau master)"})]}),b.jsxs("div",{className:"survival-item",children:[b.jsxs("div",{className:"survival-header",children:[b.jsx("span",{className:"survival-label",children:"Heures d'allaitement"}),b.jsxs("span",{className:"survival-value",children:[e.totalFeedingHours,"h"]})]}),b.jsx("div",{className:"survival-bar",children:b.jsx("div",{className:"survival-fill cyan",style:{width:`${Math.min(e.totalFeedingHours/100*100,100)}%`}})}),b.jsx("div",{className:"survival-note",children:"Objectif : 100h (marathonien)"})]})]})]}),b.jsxs("div",{className:"fun-motivation",children:[b.jsx("div",{className:"motivation-icon",children:""}),b.jsx("h3",{children:"Vous tes une lgende !"}),b.jsxs("p",{children:[e.daysSinceStart<7&&"Premire semaine : terrain de dcouverte. Courage !",e.daysSinceStart>=7&&e.daysSinceStart<30&&"Vous commencez  comprendre le truc. Respect !",e.daysSinceStart>=30&&e.daysSinceStart<90&&"Un mois ! Vous tes officiellement un parent chevronn.",e.daysSinceStart>=90&&"Champion du monde confirm. Flicitations ! "]})]})]})},O4=({events:n})=>{const[e,t]=ae.useState(!1),i=ae.useMemo(()=>{const o=new Date,l=bo(o),c=df(o),h=Ua(o,{weekStartsOn:1}),f=P2(o,{weekStartsOn:1}),m=n.filter(v=>kd(new Date(v.createdAt),{start:l,end:c})),y=n.filter(v=>kd(new Date(v.createdAt),{start:h,end:f}));return{today:{feedings:m.filter(v=>v.type==="feeding").length,diapers:m.filter(v=>v.type==="diaper").length,pee:m.filter(v=>v.type==="diaper"&&(v.diaperType==="pee"||v.diaperType==="both")).length,poop:m.filter(v=>v.type==="diaper"&&(v.diaperType==="poop"||v.diaperType==="both")).length},week:{feedings:y.filter(v=>v.type==="feeding").length,diapers:y.filter(v=>v.type==="diaper").length,pee:y.filter(v=>v.type==="diaper"&&(v.diaperType==="pee"||v.diaperType==="both")).length,poop:y.filter(v=>v.type==="diaper"&&(v.diaperType==="poop"||v.diaperType==="both")).length},total:{feedings:n.filter(v=>v.type==="feeding").length,diapers:n.filter(v=>v.type==="diaper").length}}},[n]),r=({title:o,icon:l,value:c,color:h})=>b.jsxs("div",{className:`stat-card ${h}`,children:[b.jsx("div",{className:"stat-icon",children:l}),b.jsxs("div",{className:"stat-info",children:[b.jsx("div",{className:"stat-value",children:c}),b.jsx("div",{className:"stat-label",children:o})]})]});return e?b.jsxs("div",{className:"statistics",children:[b.jsx("button",{className:"fun-back-button",onClick:()=>t(!1),children:" Retour aux statistiques"}),b.jsx(M4,{events:n})]}):b.jsxs("div",{className:"statistics",children:[b.jsxs("section",{className:"stat-section",children:[b.jsx("h3",{children:" Aujourd'hui"}),b.jsxs("div",{className:"stat-grid",children:[b.jsx(r,{title:"Allaitements",icon:"",value:i.today.feedings,color:"blue"}),b.jsx(r,{title:"Couches",icon:"",value:i.today.diapers,color:"green"}),b.jsx(r,{title:"Pipi",icon:"",value:i.today.pee,color:"cyan"}),b.jsx(r,{title:"Caca",icon:"",value:i.today.poop,color:"orange"})]})]}),b.jsxs("section",{className:"stat-section",children:[b.jsx("h3",{children:" Cette semaine"}),b.jsxs("div",{className:"stat-grid",children:[b.jsx(r,{title:"Allaitements",icon:"",value:i.week.feedings,color:"blue"}),b.jsx(r,{title:"Couches",icon:"",value:i.week.diapers,color:"green"}),b.jsx(r,{title:"Pipi",icon:"",value:i.week.pee,color:"cyan"}),b.jsx(r,{title:"Caca",icon:"",value:i.week.poop,color:"orange"})]})]}),b.jsxs("section",{className:"stat-section",children:[b.jsx("h3",{children:" Total"}),b.jsxs("div",{className:"stat-grid",children:[b.jsx(r,{title:"Allaitements",icon:"",value:i.total.feedings,color:"blue"}),b.jsx(r,{title:"Couches",icon:"",value:i.total.diapers,color:"green"})]})]}),n.length>0&&b.jsxs("section",{className:"stat-section",children:[b.jsx("h3",{children:" Graphiques"}),b.jsx(D4,{events:n})]}),n.length>0&&b.jsx("section",{className:"stat-section",children:b.jsxs("button",{className:"fun-access-button",onClick:()=>t(!0),children:[b.jsx("span",{className:"fun-icon",children:""}),b.jsxs("span",{className:"fun-text",children:[b.jsx("strong",{children:"Statistiques Inutiles mais Fun"}),b.jsx("small",{children:"Dcouvrir des infos compltement absurdes"})]}),b.jsx("span",{className:"fun-arrow",children:""})]})}),n.length===0&&b.jsxs("div",{className:"no-stats",children:[b.jsx("div",{className:"no-stats-icon",children:""}),b.jsx("p",{children:"Commencez  enregistrer des vnements pour voir vos statistiques"})]})]})},V4=()=>{const{activeBaby:n}=nl(),[e,t]=ae.useState([]),[i,r]=ae.useState(""),[o,l]=ae.useState(null),[c,h]=ae.useState("");ae.useEffect(()=>{if(!n)return;const N=Ba(un,"babies",n.id,"todos"),L=ny(N,kT("createdAt","desc")),B=DT(L,W=>{const K=W.docs.map(Z=>({id:Z.id,...Z.data()}));t(K)});return()=>B()},[n]);const f=async N=>{if(N.preventDefault(),!(!i.trim()||!n))try{const L=Ba(un,"babies",n.id,"todos");await oy(L,{text:i.trim(),completed:!1,createdAt:new Date().toISOString()}),r("")}catch(L){console.error("Erreur lors de l'ajout:",L)}},m=async N=>{try{const L=ji(un,"babies",n.id,"todos",N.id);await Ed(L,{completed:!N.completed})}catch(L){console.error("Erreur lors de la mise  jour:",L)}},y=async N=>{try{const L=ji(un,"babies",n.id,"todos",N);await NT(L)}catch(L){console.error("Erreur lors de la suppression:",L)}},v=N=>{l(N.id),h(N.text)},x=async N=>{if(c.trim())try{const L=ji(un,"babies",n.id,"todos",N);await Ed(L,{text:c.trim()}),l(null),h("")}catch(L){console.error("Erreur lors de la modification:",L)}},S=()=>{l(null),h("")},I=e.filter(N=>N.completed).length,k=e.length;return b.jsxs("div",{className:"todolist",children:[b.jsxs("div",{className:"todolist-header",children:[b.jsx("h2",{children:" To-Do List"}),b.jsx("p",{className:"todolist-subtitle",children:"Questions, tches, mmos... tout ce qui vous passe par la tte"}),k>0&&b.jsxs("div",{className:"todolist-progress",children:[b.jsxs("div",{className:"progress-text",children:[I," / ",k," compltes"]}),b.jsx("div",{className:"progress-bar",children:b.jsx("div",{className:"progress-fill",style:{width:`${k>0?I/k*100:0}%`}})})]})]}),b.jsxs("form",{className:"todolist-add-form",onSubmit:f,children:[b.jsx("input",{type:"text",value:i,onChange:N=>r(N.target.value),placeholder:"Ajouter une tche, question, mmo...",className:"todolist-input"}),b.jsx("button",{type:"submit",className:"todolist-add-button",children:" Ajouter"})]}),e.length===0?b.jsxs("div",{className:"todolist-empty",children:[b.jsx("div",{className:"empty-icon",children:""}),b.jsx("p",{children:"Aucune tche pour le moment"}),b.jsx("small",{children:"Ajoutez vos questions, ides ou choses  ne pas oublier"})]}):b.jsx("div",{className:"todolist-items",children:e.map(N=>b.jsx("div",{className:`todolist-item ${N.completed?"completed":""}`,children:o===N.id?b.jsxs("div",{className:"todolist-edit-mode",children:[b.jsx("input",{type:"text",value:c,onChange:L=>h(L.target.value),className:"todolist-edit-input",autoFocus:!0}),b.jsxs("div",{className:"todolist-edit-actions",children:[b.jsx("button",{onClick:()=>x(N.id),className:"todolist-save-button",children:" Sauvegarder"}),b.jsx("button",{onClick:S,className:"todolist-cancel-button",children:" Annuler"})]})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"todolist-item-content",children:[b.jsx("button",{className:"todolist-checkbox",onClick:()=>m(N),children:N.completed?"":""}),b.jsx("span",{className:"todolist-text",children:N.text})]}),b.jsxs("div",{className:"todolist-item-actions",children:[b.jsx("button",{onClick:()=>v(N),className:"todolist-edit-button",title:"Modifier",children:""}),b.jsx("button",{onClick:()=>y(N.id),className:"todolist-delete-button",title:"Supprimer",children:""})]})]})},N.id))})]})},L4=()=>{var c;const{activeBaby:n}=nl(),{user:e}=Ir(),[t,i]=ae.useState(!1);if(!n)return null;const r=`${window.location.origin}?invite=${n.id}`,o=async()=>{try{await navigator.clipboard.writeText(r),i(!0),setTimeout(()=>i(!1),3e3)}catch(h){console.error("Erreur lors de la copie:",h);const f=document.createElement("textarea");f.value=r,document.body.appendChild(f),f.select(),document.execCommand("copy"),document.body.removeChild(f),i(!0),setTimeout(()=>i(!1),3e3)}},l=async()=>{if(navigator.share)try{await navigator.share({title:`Rejoindre le suivi de ${n.name}`,text:`Clique sur ce lien pour suivre ${n.name} avec moi !`,url:r})}catch(h){h.name!=="AbortError"&&console.error("Erreur lors du partage:",h)}else o()};return b.jsxs("div",{className:"invite-link-container",children:[b.jsx("h3",{children:" Partager avec votre partenaire"}),b.jsxs("p",{className:"invite-description",children:["Partagez ce lien pour que votre partenaire puisse rejoindre le suivi de ",n.name]}),b.jsx("div",{className:"invite-link-box",children:b.jsx("input",{type:"text",value:r,readOnly:!0,className:"invite-link-input",onClick:h=>h.target.select()})}),b.jsxs("div",{className:"invite-actions",children:[b.jsx("button",{onClick:o,className:"btn-copy",children:t?" Copi !":" Copier le lien"}),navigator.share&&b.jsx("button",{onClick:l,className:"btn-share",children:" Partager"})]}),b.jsx("div",{className:"invite-info",children:b.jsx("p",{className:"info-text",children:" Votre partenaire doit tre connect avec son compte Google pour accepter l'invitation"})}),b.jsxs("div",{className:"current-members",children:[b.jsx("h4",{children:"Membres actuels :"}),b.jsx("ul",{children:(c=n.members)==null?void 0:c.map((h,f)=>b.jsxs("li",{children:[b.jsx("span",{className:"member-icon",children:h.role==="owner"?"":""}),b.jsx("span",{className:"member-name",children:h.displayName||h.email}),b.jsx("span",{className:"member-role",children:h.role==="owner"?"Propritaire":"Membre"})]},f))})]})]})},j4=()=>{const[n,e]=ae.useState(Notification.permission),[t,i]=ae.useState(""),[r,o]=ae.useState(!1);oE.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(()=>{o(!0)})},[]);const l=async()=>{try{const x=await Notification.requestPermission();e(x),i(x==="granted"?" Permission accorde !":x==="denied"?" Permission refuse. Sur mobile, vous devez peut-tre installer l'app comme PWA.":" Permission non dtermine")}catch(x){i(` Erreur: ${x.message}`)}},c=async()=>{if(n!=="granted"){i(" Vous devez d'abord autoriser les notifications");return}try{if(r&&"serviceWorker"in navigator)await(await navigator.serviceWorker.ready).showNotification(" Test d'allaitement",{body:"Ceci est une notification de test !",icon:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="0.9em" font-size="90"></text></svg>',badge:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="0.9em" font-size="90"></text></svg>',tag:"test-notification",requireInteraction:!1,timestamp:Date.now(),data:{url:window.location.href}}),i(" Notification envoye via Service Worker !");else{const x=new Notification(" Test d'allaitement",{body:"Ceci est une notification de test !",tag:"test-notification",requireInteraction:!1,timestamp:Date.now()});x.onclick=()=>{window.focus(),x.close()},i(" Notification envoye !"),setTimeout(()=>x.close(),5e3)}}catch(x){i(` Erreur: ${x.message}`)}},h=async()=>{if(n!=="granted"){i(" Vous devez d'abord autoriser les notifications");return}try{if(r&&"serviceWorker"in navigator)await(await navigator.serviceWorker.ready).showNotification(" Rappel d'allaitement",{body:"Il est temps de nourrir bb ! Dernier allaitement il y a 4 heures.",icon:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="0.9em" font-size="90"></text></svg>',badge:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="0.9em" font-size="90"></text></svg>',tag:"feeding-reminder",requireInteraction:!0,vibrate:[200,100,200],timestamp:Date.now(),data:{url:window.location.href}}),i(" Rappel d'allaitement envoy via Service Worker !");else{const x=new Notification(" Rappel d'allaitement",{body:"Il est temps de nourrir bb ! Dernier allaitement il y a 4 heures.",tag:"feeding-reminder",requireInteraction:!0,vibrate:[200,100,200],timestamp:Date.now()});x.onclick=()=>{window.focus(),x.close()},i(" Rappel d'allaitement envoy !")}}catch(x){i(` Erreur: ${x.message}`)}},f=async()=>{if(n!=="granted"){i(" Vous devez d'abord autoriser les notifications");return}try{if(r&&"serviceWorker"in navigator)await(await navigator.serviceWorker.ready).showNotification(" Changement de couche",{body:"N'oubliez pas de changer la couche de bb !",icon:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="0.9em" font-size="90"></text></svg>',badge:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="0.9em" font-size="90"></text></svg>',tag:"diaper-reminder",vibrate:[100,50,100],timestamp:Date.now(),data:{url:window.location.href}}),i(" Rappel de couche envoy via Service Worker !");else{const x=new Notification(" Changement de couche",{body:"N'oubliez pas de changer la couche de bb !",tag:"diaper-reminder",vibrate:[100,50,100],timestamp:Date.now()});x.onclick=()=>{window.focus(),x.close()},i(" Rappel de couche envoy !")}}catch(x){i(` Erreur: ${x.message}`)}},m=()=>{if(n!=="granted"){i(" Vous devez d'abord autoriser les notifications");return}i(" Notification programme dans 5 secondes..."),setTimeout(()=>{try{const x=new Notification(" Notification programme",{body:"Cette notification a t programme il y a 5 secondes !",icon:"/pwa-192x192.png",tag:"scheduled-notification"});x.onclick=()=>{window.focus(),x.close()},i(" Notification programme dclenche !")}catch(x){i(` Erreur: ${x.message}`)}},5e3)},v=(()=>{switch(n){case"granted":return{text:"Autorises ",color:"#10b981"};case"denied":return{text:"Refuses ",color:"#ef4444"};default:return{text:"Non demandes ",color:"#f59e0b"}}})();return b.jsxs("div",{className:"notification-test",children:[b.jsx("h2",{children:" Test des Notifications"}),b.jsxs("div",{className:"permission-status",style:{borderColor:v.color},children:[b.jsx("div",{className:"status-label",children:"Statut des permissions :"}),b.jsx("div",{className:"status-value",style:{color:v.color},children:v.text})]}),n!=="granted"&&b.jsx("div",{className:"permission-section",children:b.jsx("button",{onClick:l,className:"btn-permission",children:" Demander la permission"})}),n==="granted"&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"test-section",children:[b.jsx("h3",{children:"Tests basiques"}),b.jsxs("div",{className:"test-buttons",children:[b.jsx("button",{onClick:c,className:"btn-test",children:" Notification simple"}),b.jsx("button",{onClick:m,className:"btn-test",children:" Notification dans 5s"})]})]}),b.jsxs("div",{className:"test-section",children:[b.jsx("h3",{children:"Simulations relles"}),b.jsxs("div",{className:"test-buttons",children:[b.jsx("button",{onClick:h,className:"btn-test primary",children:" Rappel d'allaitement"}),b.jsx("button",{onClick:f,className:"btn-test secondary",children:" Rappel de couche"})]})]})]}),t&&b.jsx("div",{className:"test-result",children:t}),b.jsxs("div",{className:"info-section",children:[b.jsx("h3",{children:" Informations"}),b.jsxs("ul",{children:[b.jsxs("li",{children:[b.jsx("strong",{children:"Navigateur support :"})," ","Notification"in window?" Oui":" Non"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Service Worker :"})," ","serviceWorker"in navigator?r?" Prt":" Chargement...":" Non disponible"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Permission actuelle :"})," ",n]}),b.jsxs("li",{children:[b.jsx("strong",{children:"PWA installe :"})," ",window.matchMedia("(display-mode: standalone)").matches?" Oui":" Non (ouvrez depuis l'cran d'accueil)"]})]})]}),b.jsxs("div",{className:"instructions",children:[b.jsx("h3",{children:" Instructions"}),b.jsxs("ol",{children:[b.jsx("li",{children:'Cliquez sur "Demander la permission" pour autoriser les notifications'}),b.jsx("li",{children:"Testez les diffrents types de notifications"}),b.jsx("li",{children:"Vrifiez que vous recevez bien les notifications"}),b.jsx("li",{children:"Sur mobile : vrifiez que l'app vibre"})]}),!window.matchMedia("(display-mode: standalone)").matches&&b.jsxs("div",{className:"mobile-tip",style:{background:"#fef3c7",border:"2px solid #f59e0b",borderRadius:"8px",padding:"12px",marginTop:"12px"},children:[b.jsx("strong",{children:" Sur mobile Chrome :"}),b.jsxs("ol",{style:{marginTop:"8px",paddingLeft:"20px"},children:[b.jsx("li",{children:"Ouvrez le menu ()"}),b.jsx("li",{children:`Slectionnez "Ajouter  l'cran d'accueil" ou "Installer l'application"`}),b.jsx("li",{children:"Ouvrez l'app depuis l'icne sur votre cran d'accueil"}),b.jsx("li",{children:"Les notifications fonctionneront mieux depuis la PWA installe"})]})]})]})]})},F4=()=>{const[n,e]=ae.useState(null),[t,i]=ae.useState(!1);ae.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const o=l=>{l.preventDefault(),e(l)};return window.addEventListener("beforeinstallprompt",o),()=>{window.removeEventListener("beforeinstallprompt",o)}},[]);const r=async()=>{if(!n)return;n.prompt();const{outcome:o}=await n.userChoice;o==="accepted"&&i(!0),e(null)};return t||!n?null:b.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"16px",borderRadius:"12px",margin:"16px 0",display:"flex",alignItems:"center",gap:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:[b.jsx("div",{style:{fontSize:"32px"},children:""}),b.jsxs("div",{style:{flex:1},children:[b.jsx("strong",{style:{display:"block",marginBottom:"4px"},children:"Installer Baby Track"}),b.jsx("small",{children:"Installez l'app pour un accs rapide et des notifications push"})]}),b.jsx("button",{onClick:r,style:{background:"white",color:"#667eea",border:"none",padding:"10px 20px",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",fontSize:"14px",whiteSpace:"nowrap"},children:"Installer"})]})},z4=({onLogout:n})=>{const{user:e}=Ir(),{settings:t,updateSettings:i,toggleTheme:r}=tu(),[o,l]=ae.useState(t.feedingInterval),[c,h]=ae.useState(!1),f=async()=>{if(o<1||o>12){alert("L'intervalle doit tre entre 1 et 12 heures");return}try{h(!0),await i({feedingInterval:o}),alert("Paramtres sauvegards avec succs !")}catch{alert("Erreur lors de la sauvegarde des paramtres")}finally{h(!1)}},m=async()=>{try{const y=!t.notificationsEnabled;if(y&&"Notification"in window&&await Notification.requestPermission()!=="granted"){alert("Vous devez autoriser les notifications pour activer cette fonctionnalit");return}await i({notificationsEnabled:y})}catch(y){console.error("Erreur lors de la mise  jour des notifications:",y)}};return b.jsxs("div",{className:"settings",children:[b.jsx(F4,{}),b.jsxs("div",{className:"settings-section",children:[b.jsx("h3",{children:" Profil"}),b.jsxs("div",{className:"profile-info",children:[b.jsx("img",{src:e.photoURL||"/default-avatar.png",alt:e.displayName,className:"profile-avatar"}),b.jsxs("div",{className:"profile-details",children:[b.jsx("div",{className:"profile-name",children:e.displayName}),b.jsx("div",{className:"profile-email",children:e.email})]})]}),b.jsx("button",{className:"logout-button",onClick:n,children:"Dconnexion"})]}),b.jsxs("div",{className:"settings-section",children:[b.jsx("h3",{children:" Intervalle d'allaitement"}),b.jsx("p",{className:"setting-description",children:"Dfinissez l'intervalle de temps (en heures) entre chaque allaitement"}),b.jsxs("div",{className:"interval-setting",children:[b.jsx("input",{type:"number",min:"1",max:"12",value:o,onChange:y=>l(Number(y.target.value)),className:"interval-input"}),b.jsx("span",{className:"interval-unit",children:"heures"})]}),b.jsx("button",{className:"save-button",onClick:f,disabled:c||o===t.feedingInterval,children:c?"Sauvegarde...":"Sauvegarder"})]}),b.jsx("div",{className:"settings-section",children:b.jsx(L4,{})}),b.jsxs("div",{className:"settings-section",children:[b.jsx("h3",{children:" Apparence"}),b.jsxs("div",{className:"theme-setting",children:[b.jsxs("div",{className:"setting-info",children:[b.jsx("div",{className:"setting-label",children:"Thme"}),b.jsx("div",{className:"setting-value",children:t.theme==="dark"?"Sombre":"Clair"})]}),b.jsx("button",{className:"theme-button",onClick:r,children:t.theme==="dark"?" Mode clair":" Mode sombre"})]})]}),b.jsxs("div",{className:"settings-section",children:[b.jsx("h3",{children:" Notifications"}),b.jsxs("div",{className:"notification-setting",children:[b.jsxs("div",{className:"setting-info",children:[b.jsx("div",{className:"setting-label",children:"Notifications push"}),b.jsx("div",{className:"setting-description",children:"Recevoir des rappels pour les allaitements"})]}),b.jsxs("label",{className:"toggle-switch",children:[b.jsx("input",{type:"checkbox",checked:t.notificationsEnabled,onChange:m}),b.jsx("span",{className:"toggle-slider"})]})]})]}),b.jsx("div",{className:"settings-section",children:b.jsx(j4,{})}),b.jsxs("div",{className:"settings-section",children:[b.jsx("h3",{children:"  propos"}),b.jsxs("div",{className:"about-info",children:[b.jsxs("p",{children:[b.jsx("strong",{children:"Baby Track"})," v1.0.0"]}),b.jsx("p",{children:"Application de suivi d'allaitement et de couches"}),b.jsx("p",{className:"sync-info",children:" Synchronisation en temps rel active"})]})]})]})},B4=()=>{const{user:n}=Ir(),{refreshBabies:e}=nl(),[t,i]=ae.useState({name:"",birthDate:""}),[r,o]=ae.useState(!1),l=async c=>{if(c.preventDefault(),!t.name||!t.birthDate){alert("Veuillez remplir tous les champs");return}o(!0);try{await o2(n.uid,n.email,n.displayName,{name:t.name,birthDate:t.birthDate,photo:""}),await e()}catch(h){console.error("Erreur lors de la cration du bb:",h),alert("Erreur lors de la cration du profil bb")}finally{o(!1)}};return b.jsx("div",{className:"baby-setup-container",children:b.jsxs("div",{className:"baby-setup-card",children:[b.jsx("div",{className:"setup-icon",children:""}),b.jsx("h1",{children:"Crer le profil de votre bb"}),b.jsx("p",{className:"setup-description",children:"Commencez par crer le profil de votre bb. Vous pourrez ensuite inviter votre conjoint(e)  le partager."}),b.jsxs("form",{onSubmit:l,className:"baby-setup-form",children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"name",children:"Prnom du bb"}),b.jsx("input",{type:"text",id:"name",value:t.name,onChange:c=>i({...t,name:c.target.value}),placeholder:"Ex: Emma, Lucas...",required:!0})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"birthDate",children:"Date de naissance"}),b.jsx("input",{type:"date",id:"birthDate",value:t.birthDate,onChange:c=>i({...t,birthDate:c.target.value}),required:!0})]}),b.jsx("button",{type:"submit",className:"submit-button",disabled:r,children:r?"Cration...":"Crer le profil"})]})]})})},U4=()=>{const{user:n}=Ir(),{settings:e}=tu(),{activeBaby:t,loading:i}=nl(),[r,o]=ae.useState([]),[l,c]=ae.useState("home"),[h,f]=ae.useState(!0),[m,y]=ae.useState(null);u2(),ae.useEffect(()=>{if(t){const B=e2(t.id,W=>{o(W),f(!1)});return()=>B()}},[t]);const v=async B=>{try{if(!t){alert("Aucun bb slectionn");return}let W=new Date;if(B.customTime){const[Z,R]=B.customTime.split(":");W.setHours(parseInt(Z),parseInt(R),0,0)}const K={...B,createdAt:B.customTime?W.toISOString():new Date().toISOString()};delete K.customTime,await ZM(t.id,K,{userId:n.uid,displayName:n.displayName||n.email})}catch(W){console.error("Erreur lors de l'ajout de l'vnement:",W),alert("Erreur lors de l'ajout de l'vnement")}},x=B=>{y(B)},S=async B=>{try{if(!t){alert("Aucun bb slectionn");return}let W={...B};if(B.customTime){const K=m.createdAt?new Date(m.createdAt):new Date,[Z,R]=B.customTime.split(":");K.setHours(parseInt(Z),parseInt(R),0,0),W.createdAt=K.toISOString()}delete W.customTime,await i2(t.id,m.id,W),y(null)}catch(W){console.error("Erreur lors de la mise  jour de l'vnement:",W),alert("Erreur lors de la mise  jour de l'vnement")}},I=()=>{y(null)},k=async()=>{try{await QM()}catch(B){console.error("Erreur lors de la dconnexion:",B)}},N=()=>r.find(B=>B.type==="feeding"),L=()=>{switch(l){case"home":return b.jsxs(b.Fragment,{children:[b.jsx(sV,{events:r}),b.jsx(oV,{lastFeeding:N(),interval:e.feedingInterval}),b.jsx(aV,{onAddEvent:v,lastFeeding:N()}),b.jsx("div",{className:"section-title",children:"Timeline du jour"}),b.jsx(bS,{events:r,limit:10,onEditEvent:x})]});case"history":return b.jsx(lV,{events:r,showAll:!0,onEditEvent:x});case"statistics":return b.jsx(O4,{events:r});case"todos":return b.jsx(V4,{});case"settings":return b.jsx(z4,{onLogout:k});default:return null}};return i?b.jsxs("div",{className:"loading-container",children:[b.jsx("div",{className:"loading-spinner"}),b.jsx("p",{children:"Chargement..."})]}):t?h?b.jsxs("div",{className:"loading-container",children:[b.jsx("div",{className:"loading-spinner"}),b.jsx("p",{children:"Chargement des vnements..."})]}):b.jsxs("div",{className:"dashboard-container",children:[b.jsx(h2,{user:n,activeView:l,setActiveView:c}),b.jsx("main",{className:"dashboard-main",children:L()}),b.jsx(d2,{activeView:l,setActiveView:c}),m&&b.jsx(wS,{type:m.type,editEvent:m,onSubmit:S,onClose:I})]}):b.jsx(B4,{})},W4=({babyId:n,onAccepted:e,onCancel:t})=>{var k,N;const{user:i}=Ir(),{refreshBabies:r}=nl(),[o,l]=ae.useState(null),[c,h]=ae.useState(!0),[f,m]=ae.useState(!1),[y,v]=ae.useState(null),[x,S]=ae.useState(!1);ae.useEffect(()=>{i&&n&&(async()=>{var B;try{h(!0);const W=await Qm(n);if(!W){v("Ce bb n'existe pas ou a t supprim.");return}l(W);const K=(B=W.memberIds)==null?void 0:B.includes(i.uid);S(K)}catch(W){console.error("Erreur lors du chargement du bb:",W),v("Impossible de charger les informations du bb.")}finally{h(!1)}})()},[n,i]);const I=async()=>{try{m(!0),v(null),await a2(n,{userId:i.uid,email:i.email,displayName:i.displayName||i.email,role:"member"}),await r(),e&&e()}catch(L){console.error("Erreur lors de l'acceptation:",L),v("Erreur lors de l'acceptation de l'invitation. Ressayez.")}finally{m(!1)}};return c?b.jsxs("div",{className:"invite-accept-container",children:[b.jsx("div",{className:"loading-spinner"}),b.jsx("p",{children:"Chargement de l'invitation..."})]}):y?b.jsx("div",{className:"invite-accept-container",children:b.jsxs("div",{className:"invite-error",children:[b.jsx("span",{className:"error-icon",children:""}),b.jsx("h2",{children:"Erreur"}),b.jsx("p",{children:y}),t&&b.jsx("button",{onClick:t,className:"btn-cancel",children:"Retour"})]})}):x?b.jsx("div",{className:"invite-accept-container",children:b.jsxs("div",{className:"invite-already-member",children:[b.jsx("span",{className:"success-icon",children:""}),b.jsx("h2",{children:"Dj membre"}),b.jsxs("p",{children:["Vous faites dj partie du suivi de ",b.jsx("strong",{children:o.name})," !"]}),t&&b.jsx("button",{onClick:t,className:"btn-primary",children:"Continuer"})]})}):b.jsx("div",{className:"invite-accept-container",children:b.jsxs("div",{className:"invite-card",children:[b.jsxs("div",{className:"invite-header",children:[b.jsx("span",{className:"baby-icon",children:""}),b.jsx("h2",{children:"Invitation  rejoindre"})]}),b.jsxs("div",{className:"baby-info",children:[b.jsx("h3",{children:o.name}),o.birthDate&&b.jsxs("p",{className:"birth-date",children:["N(e) le ",new Date(o.birthDate).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})]})]}),b.jsx("div",{className:"invite-message",children:b.jsxs("p",{children:["Vous tes invit(e)  suivre l'allaitement et les couches de"," ",b.jsx("strong",{children:o.name})," avec les autres membres de la famille."]})}),b.jsxs("div",{className:"current-members-preview",children:[b.jsx("p",{className:"members-label",children:"Membres actuels :"}),b.jsxs("div",{className:"members-list",children:[(k=o.members)==null?void 0:k.slice(0,3).map((L,B)=>{var W;return b.jsx("div",{className:"member-avatar",children:((W=L.displayName)==null?void 0:W.charAt(0).toUpperCase())||"?"},B)}),((N=o.members)==null?void 0:N.length)>3&&b.jsxs("div",{className:"member-avatar more",children:["+",o.members.length-3]})]})]}),b.jsxs("div",{className:"invite-actions",children:[b.jsx("button",{onClick:I,disabled:f,className:"btn-accept",children:f?"Acceptation...":" Accepter l'invitation"}),t&&b.jsx("button",{onClick:t,className:"btn-decline",children:"Refuser"})]}),y&&b.jsx("div",{className:"error-message",children:y})]})})},H4=()=>{const{user:n}=Ir(),{settings:e}=tu(),[t,i]=ae.useState(null);return ae.useEffect(()=>{document.documentElement.setAttribute("data-theme",e.theme)},[e.theme]),ae.useEffect(()=>{const o=new URLSearchParams(window.location.search).get("invite");o&&i(o)},[]),n?t?b.jsx(W4,{babyId:t,onAccepted:()=>{window.history.replaceState({},document.title,window.location.pathname),i(null)},onCancel:()=>{window.history.replaceState({},document.title,window.location.pathname),i(null)}}):b.jsx(U4,{}):b.jsx(c2,{})};function $4(){return b.jsx(JM,{children:b.jsx(s2,{children:b.jsx(l2,{children:b.jsx(H4,{})})})})}S1.createRoot(document.getElementById("root")).render(b.jsx(oE.StrictMode,{children:b.jsx($4,{})}));
