var m1=Object.defineProperty;var g1=(n,e,t)=>e in n?m1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ge=(n,e,t)=>g1(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function oE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wp={exports:{}},tc={},Hp={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv;function y1(){if(Uv)return Me;Uv=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),_=Symbol.iterator;function y(U){return U===null||typeof U!="object"?null:(U=_&&U[_]||U["@@iterator"],typeof U=="function"?U:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,k={};function I(U,Q,pe){this.props=U,this.context=Q,this.refs=k,this.updater=pe||x}I.prototype.isReactComponent={},I.prototype.setState=function(U,Q){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Q,"setState")},I.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function N(){}N.prototype=I.prototype;function V(U,Q,pe){this.props=U,this.context=Q,this.refs=k,this.updater=pe||x}var z=V.prototype=new N;z.constructor=V,T(z,I.prototype),z.isPureReactComponent=!0;var q=Array.isArray,K=Object.prototype.hasOwnProperty,J={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function C(U,Q,pe){var xe,Ae={},Pe=null,He=null;if(Q!=null)for(xe in Q.ref!==void 0&&(He=Q.ref),Q.key!==void 0&&(Pe=""+Q.key),Q)K.call(Q,xe)&&!P.hasOwnProperty(xe)&&(Ae[xe]=Q[xe]);var $e=arguments.length-2;if($e===1)Ae.children=pe;else if(1<$e){for(var Ze=Array($e),Mt=0;Mt<$e;Mt++)Ze[Mt]=arguments[Mt+2];Ae.children=Ze}if(U&&U.defaultProps)for(xe in $e=U.defaultProps,$e)Ae[xe]===void 0&&(Ae[xe]=$e[xe]);return{$$typeof:n,type:U,key:Pe,ref:He,props:Ae,_owner:J.current}}function R(U,Q){return{$$typeof:n,type:U.type,key:Q,ref:U.ref,props:U.props,_owner:U._owner}}function O(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function L(U){var Q={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(pe){return Q[pe]})}var F=/\/+/g;function M(U,Q){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):Q.toString(36)}function Le(U,Q,pe,xe,Ae){var Pe=typeof U;(Pe==="undefined"||Pe==="boolean")&&(U=null);var He=!1;if(U===null)He=!0;else switch(Pe){case"string":case"number":He=!0;break;case"object":switch(U.$$typeof){case n:case e:He=!0}}if(He)return He=U,Ae=Ae(He),U=xe===""?"."+M(He,0):xe,q(Ae)?(pe="",U!=null&&(pe=U.replace(F,"$&/")+"/"),Le(Ae,Q,pe,"",function(Mt){return Mt})):Ae!=null&&(O(Ae)&&(Ae=R(Ae,pe+(!Ae.key||He&&He.key===Ae.key?"":(""+Ae.key).replace(F,"$&/")+"/")+U)),Q.push(Ae)),1;if(He=0,xe=xe===""?".":xe+":",q(U))for(var $e=0;$e<U.length;$e++){Pe=U[$e];var Ze=xe+M(Pe,$e);He+=Le(Pe,Q,pe,Ze,Ae)}else if(Ze=y(U),typeof Ze=="function")for(U=Ze.call(U),$e=0;!(Pe=U.next()).done;)Pe=Pe.value,Ze=xe+M(Pe,$e++),He+=Le(Pe,Q,pe,Ze,Ae);else if(Pe==="object")throw Q=String(U),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return He}function Ie(U,Q,pe){if(U==null)return U;var xe=[],Ae=0;return Le(U,xe,"","",function(Pe){return Q.call(pe,Pe,Ae++)}),xe}function Re(U){if(U._status===-1){var Q=U._result;Q=Q(),Q.then(function(pe){(U._status===0||U._status===-1)&&(U._status=1,U._result=pe)},function(pe){(U._status===0||U._status===-1)&&(U._status=2,U._result=pe)}),U._status===-1&&(U._status=0,U._result=Q)}if(U._status===1)return U._result.default;throw U._result}var be={current:null},ie={transition:null},ce={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:ie,ReactCurrentOwner:J};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:Ie,forEach:function(U,Q,pe){Ie(U,function(){Q.apply(this,arguments)},pe)},count:function(U){var Q=0;return Ie(U,function(){Q++}),Q},toArray:function(U){return Ie(U,function(Q){return Q})||[]},only:function(U){if(!O(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Me.Component=I,Me.Fragment=t,Me.Profiler=r,Me.PureComponent=V,Me.StrictMode=i,Me.Suspense=h,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Me.act=oe,Me.cloneElement=function(U,Q,pe){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var xe=T({},U.props),Ae=U.key,Pe=U.ref,He=U._owner;if(Q!=null){if(Q.ref!==void 0&&(Pe=Q.ref,He=J.current),Q.key!==void 0&&(Ae=""+Q.key),U.type&&U.type.defaultProps)var $e=U.type.defaultProps;for(Ze in Q)K.call(Q,Ze)&&!P.hasOwnProperty(Ze)&&(xe[Ze]=Q[Ze]===void 0&&$e!==void 0?$e[Ze]:Q[Ze])}var Ze=arguments.length-2;if(Ze===1)xe.children=pe;else if(1<Ze){$e=Array(Ze);for(var Mt=0;Mt<Ze;Mt++)$e[Mt]=arguments[Mt+2];xe.children=$e}return{$$typeof:n,type:U.type,key:Ae,ref:Pe,props:xe,_owner:He}},Me.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:o,_context:U},U.Consumer=U},Me.createElement=C,Me.createFactory=function(U){var Q=C.bind(null,U);return Q.type=U,Q},Me.createRef=function(){return{current:null}},Me.forwardRef=function(U){return{$$typeof:c,render:U}},Me.isValidElement=O,Me.lazy=function(U){return{$$typeof:m,_payload:{_status:-1,_result:U},_init:Re}},Me.memo=function(U,Q){return{$$typeof:f,type:U,compare:Q===void 0?null:Q}},Me.startTransition=function(U){var Q=ie.transition;ie.transition={};try{U()}finally{ie.transition=Q}},Me.unstable_act=oe,Me.useCallback=function(U,Q){return be.current.useCallback(U,Q)},Me.useContext=function(U){return be.current.useContext(U)},Me.useDebugValue=function(){},Me.useDeferredValue=function(U){return be.current.useDeferredValue(U)},Me.useEffect=function(U,Q){return be.current.useEffect(U,Q)},Me.useId=function(){return be.current.useId()},Me.useImperativeHandle=function(U,Q,pe){return be.current.useImperativeHandle(U,Q,pe)},Me.useInsertionEffect=function(U,Q){return be.current.useInsertionEffect(U,Q)},Me.useLayoutEffect=function(U,Q){return be.current.useLayoutEffect(U,Q)},Me.useMemo=function(U,Q){return be.current.useMemo(U,Q)},Me.useReducer=function(U,Q,pe){return be.current.useReducer(U,Q,pe)},Me.useRef=function(U){return be.current.useRef(U)},Me.useState=function(U){return be.current.useState(U)},Me.useSyncExternalStore=function(U,Q,pe){return be.current.useSyncExternalStore(U,Q,pe)},Me.useTransition=function(){return be.current.useTransition()},Me.version="18.3.1",Me}var Wv;function lg(){return Wv||(Wv=1,Hp.exports=y1()),Hp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function _1(){if(Hv)return tc;Hv=1;var n=lg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,f){var m,_={},y=null,x=null;f!==void 0&&(y=""+f),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(x=h.ref);for(m in h)i.call(h,m)&&!o.hasOwnProperty(m)&&(_[m]=h[m]);if(c&&c.defaultProps)for(m in h=c.defaultProps,h)_[m]===void 0&&(_[m]=h[m]);return{$$typeof:e,type:c,key:y,ref:x,props:_,_owner:r.current}}return tc.Fragment=t,tc.jsx=l,tc.jsxs=l,tc}var $v;function v1(){return $v||($v=1,Wp.exports=_1()),Wp.exports}var b=v1(),ae=lg();const aE=oE(ae);var vh={},$p={exports:{}},_n={},qp={exports:{}},Kp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function w1(){return qv||(qv=1,(function(n){function e(ie,ce){var oe=ie.length;ie.push(ce);e:for(;0<oe;){var U=oe-1>>>1,Q=ie[U];if(0<r(Q,ce))ie[U]=ce,ie[oe]=Q,oe=U;else break e}}function t(ie){return ie.length===0?null:ie[0]}function i(ie){if(ie.length===0)return null;var ce=ie[0],oe=ie.pop();if(oe!==ce){ie[0]=oe;e:for(var U=0,Q=ie.length,pe=Q>>>1;U<pe;){var xe=2*(U+1)-1,Ae=ie[xe],Pe=xe+1,He=ie[Pe];if(0>r(Ae,oe))Pe<Q&&0>r(He,Ae)?(ie[U]=He,ie[Pe]=oe,U=Pe):(ie[U]=Ae,ie[xe]=oe,U=xe);else if(Pe<Q&&0>r(He,oe))ie[U]=He,ie[Pe]=oe,U=Pe;else break e}}return ce}function r(ie,ce){var oe=ie.sortIndex-ce.sortIndex;return oe!==0?oe:ie.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],f=[],m=1,_=null,y=3,x=!1,T=!1,k=!1,I=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(ie){for(var ce=t(f);ce!==null;){if(ce.callback===null)i(f);else if(ce.startTime<=ie)i(f),ce.sortIndex=ce.expirationTime,e(h,ce);else break;ce=t(f)}}function q(ie){if(k=!1,z(ie),!T)if(t(h)!==null)T=!0,Re(K);else{var ce=t(f);ce!==null&&be(q,ce.startTime-ie)}}function K(ie,ce){T=!1,k&&(k=!1,N(C),C=-1),x=!0;var oe=y;try{for(z(ce),_=t(h);_!==null&&(!(_.expirationTime>ce)||ie&&!L());){var U=_.callback;if(typeof U=="function"){_.callback=null,y=_.priorityLevel;var Q=U(_.expirationTime<=ce);ce=n.unstable_now(),typeof Q=="function"?_.callback=Q:_===t(h)&&i(h),z(ce)}else i(h);_=t(h)}if(_!==null)var pe=!0;else{var xe=t(f);xe!==null&&be(q,xe.startTime-ce),pe=!1}return pe}finally{_=null,y=oe,x=!1}}var J=!1,P=null,C=-1,R=5,O=-1;function L(){return!(n.unstable_now()-O<R)}function F(){if(P!==null){var ie=n.unstable_now();O=ie;var ce=!0;try{ce=P(!0,ie)}finally{ce?M():(J=!1,P=null)}}else J=!1}var M;if(typeof V=="function")M=function(){V(F)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Ie=Le.port2;Le.port1.onmessage=F,M=function(){Ie.postMessage(null)}}else M=function(){I(F,0)};function Re(ie){P=ie,J||(J=!0,M())}function be(ie,ce){C=I(function(){ie(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){T||x||(T=!0,Re(K))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(ie){switch(y){case 1:case 2:case 3:var ce=3;break;default:ce=y}var oe=y;y=ce;try{return ie()}finally{y=oe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,ce){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var oe=y;y=ie;try{return ce()}finally{y=oe}},n.unstable_scheduleCallback=function(ie,ce,oe){var U=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?U+oe:U):oe=U,ie){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=oe+Q,ie={id:m++,callback:ce,priorityLevel:ie,startTime:oe,expirationTime:Q,sortIndex:-1},oe>U?(ie.sortIndex=oe,e(f,ie),t(h)===null&&ie===t(f)&&(k?(N(C),C=-1):k=!0,be(q,oe-U))):(ie.sortIndex=Q,e(h,ie),T||x||(T=!0,Re(K))),ie},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ie){var ce=y;return function(){var oe=y;y=ce;try{return ie.apply(this,arguments)}finally{y=oe}}}})(Kp)),Kp}var Kv;function b1(){return Kv||(Kv=1,qp.exports=w1()),qp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function E1(){if(Gv)return _n;Gv=1;var n=lg(),e=b1();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(r[s]=a,s=0;s<a.length;s++)i.add(a[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},_={};function y(s){return h.call(_,s)?!0:h.call(m,s)?!1:f.test(s)?_[s]=!0:(m[s]=!0,!1)}function x(s,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function T(s,a,u,p){if(a===null||typeof a>"u"||x(s,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function k(s,a,u,p,g,w,S){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=s,this.type=a,this.sanitizeURL=w,this.removeEmptyString=S}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){I[s]=new k(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];I[a]=new k(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){I[s]=new k(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){I[s]=new k(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){I[s]=new k(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){I[s]=new k(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){I[s]=new k(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){I[s]=new k(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){I[s]=new k(s,5,!1,s.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function V(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(N,V);I[a]=new k(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(N,V);I[a]=new k(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(N,V);I[a]=new k(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){I[s]=new k(s,1,!1,s.toLowerCase(),null,!1,!1)}),I.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){I[s]=new k(s,1,!1,s.toLowerCase(),null,!0,!0)});function z(s,a,u,p){var g=I.hasOwnProperty(a)?I[a]:null;(g!==null?g.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(T(a,u,g,p)&&(u=null),p||g===null?y(a)&&(u===null?s.removeAttribute(a):s.setAttribute(a,""+u)):g.mustUseProperty?s[g.propertyName]=u===null?g.type===3?!1:"":u:(a=g.attributeName,p=g.attributeNamespace,u===null?s.removeAttribute(a):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,p?s.setAttributeNS(p,a,u):s.setAttribute(a,u))))}var q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),J=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),L=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),Le=Symbol.for("react.suspense_list"),Ie=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ce(s){return s===null||typeof s!="object"?null:(s=ie&&s[ie]||s["@@iterator"],typeof s=="function"?s:null)}var oe=Object.assign,U;function Q(s){if(U===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);U=a&&a[1]||""}return`
`+U+s}var pe=!1;function xe(s,a){if(!s||pe)return"";pe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(G){var p=G}Reflect.construct(s,[],a)}else{try{a.call()}catch(G){p=G}s.call(a.prototype)}else{try{throw Error()}catch(G){p=G}s()}}catch(G){if(G&&p&&typeof G.stack=="string"){for(var g=G.stack.split(`
`),w=p.stack.split(`
`),S=g.length-1,D=w.length-1;1<=S&&0<=D&&g[S]!==w[D];)D--;for(;1<=S&&0<=D;S--,D--)if(g[S]!==w[D]){if(S!==1||D!==1)do if(S--,D--,0>D||g[S]!==w[D]){var j=`
`+g[S].replace(" at new "," at ");return s.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",s.displayName)),j}while(1<=S&&0<=D);break}}}finally{pe=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?Q(s):""}function Ae(s){switch(s.tag){case 5:return Q(s.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return s=xe(s.type,!1),s;case 11:return s=xe(s.type.render,!1),s;case 1:return s=xe(s.type,!0),s;default:return""}}function Pe(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case P:return"Fragment";case J:return"Portal";case R:return"Profiler";case C:return"StrictMode";case M:return"Suspense";case Le:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case L:return(s.displayName||"Context")+".Consumer";case O:return(s._context.displayName||"Context")+".Provider";case F:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ie:return a=s.displayName||null,a!==null?a:Pe(s.type)||"Memo";case Re:a=s._payload,s=s._init;try{return Pe(s(a))}catch{}}return null}function He(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(a);case 8:return a===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function $e(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ze(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Mt(s){var a=Ze(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),p=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,w=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(S){p=""+S,w.call(this,S)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(S){p=""+S},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function qi(s){s._valueTracker||(s._valueTracker=Mt(s))}function Po(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return s&&(p=Ze(s)?s.checked?"true":"false":s.value),s=p,s!==u?(a.setValue(s),!0):!1}function kr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ss(s,a){var u=a.checked;return oe({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function Ro(s,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=$e(a.value!=null?a.value:u),s._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function al(s,a){a=a.checked,a!=null&&z(s,"checked",a,!1)}function ll(s,a){al(s,a);var u=$e(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(p==="submit"||p==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?No(s,a.type,u):a.hasOwnProperty("defaultValue")&&No(s,a.type,$e(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function ru(s,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,u||a===s.value||(s.value=a),s.defaultValue=a}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function No(s,a,u){(a!=="number"||kr(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Ki=Array.isArray;function Gi(s,a,u,p){if(s=s.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=a.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&p&&(s[u].defaultSelected=!0)}else{for(u=""+$e(u),a=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,p&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function cl(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Do(s,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(Ki(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}s._wrapperState={initialValue:$e(u)}}function Mo(s,a){var u=$e(a.value),p=$e(a.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),a.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),p!=null&&(s.defaultValue=""+p)}function ul(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function It(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kt(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?It(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Yi,hl=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,g){MSApp.execUnsafeLocalFunction(function(){return s(a,u,p,g)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(Yi=Yi||document.createElement("div"),Yi.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Yi.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function Ar(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Is={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ks=["Webkit","ms","Moz","O"];Object.keys(Is).forEach(function(s){ks.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Is[a]=Is[s]})});function dl(s,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Is.hasOwnProperty(s)&&Is[s]?(""+a).trim():a+"px"}function fl(s,a){s=s.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,g=dl(u,a[u],p);u==="float"&&(u="cssFloat"),p?s.setProperty(u,g):s[u]=g}}var pl=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ml(s,a){if(a){if(pl[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function gl(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var As=null;function Oo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Vo=null,Dn=null,_i=null;function Lo(s){if(s=Bl(s)){if(typeof Vo!="function")throw Error(t(280));var a=s.stateNode;a&&(a=Mu(a),Vo(s.stateNode,s.type,a))}}function vi(s){Dn?_i?_i.push(s):_i=[s]:Dn=s}function yl(){if(Dn){var s=Dn,a=_i;if(_i=Dn=null,Lo(s),a)for(s=0;s<a.length;s++)Lo(a[s])}}function Cs(s,a){return s(a)}function _l(){}var Qi=!1;function vl(s,a,u){if(Qi)return s(a,u);Qi=!0;try{return Cs(s,a,u)}finally{Qi=!1,(Dn!==null||_i!==null)&&(_l(),yl())}}function gt(s,a){var u=s.stateNode;if(u===null)return null;var p=Mu(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var jo=!1;if(c)try{var Qn={};Object.defineProperty(Qn,"passive",{get:function(){jo=!0}}),window.addEventListener("test",Qn,Qn),window.removeEventListener("test",Qn,Qn)}catch{jo=!1}function Ps(s,a,u,p,g,w,S,D,j){var G=Array.prototype.slice.call(arguments,3);try{a.apply(u,G)}catch(te){this.onError(te)}}var Rs=!1,Fo=null,Xn=!1,wl=null,yf={onError:function(s){Rs=!0,Fo=s}};function Bo(s,a,u,p,g,w,S,D,j){Rs=!1,Fo=null,Ps.apply(yf,arguments)}function su(s,a,u,p,g,w,S,D,j){if(Bo.apply(this,arguments),Rs){if(Rs){var G=Fo;Rs=!1,Fo=null}else throw Error(t(198));Xn||(Xn=!0,wl=G)}}function Jn(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function Ns(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Zn(s){if(Jn(s)!==s)throw Error(t(188))}function ou(s){var a=s.alternate;if(!a){if(a=Jn(s),a===null)throw Error(t(188));return a!==s?null:s}for(var u=s,p=a;;){var g=u.return;if(g===null)break;var w=g.alternate;if(w===null){if(p=g.return,p!==null){u=p;continue}break}if(g.child===w.child){for(w=g.child;w;){if(w===u)return Zn(g),s;if(w===p)return Zn(g),a;w=w.sibling}throw Error(t(188))}if(u.return!==p.return)u=g,p=w;else{for(var S=!1,D=g.child;D;){if(D===u){S=!0,u=g,p=w;break}if(D===p){S=!0,p=g,u=w;break}D=D.sibling}if(!S){for(D=w.child;D;){if(D===u){S=!0,u=w,p=g;break}if(D===p){S=!0,p=w,u=g;break}D=D.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:a}function bl(s){return s=ou(s),s!==null?zo(s):null}function zo(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=zo(s);if(a!==null)return a;s=s.sibling}return null}var Uo=e.unstable_scheduleCallback,El=e.unstable_cancelCallback,au=e.unstable_shouldYield,_f=e.unstable_requestPaint,et=e.unstable_now,lu=e.unstable_getCurrentPriorityLevel,Ds=e.unstable_ImmediatePriority,Cr=e.unstable_UserBlockingPriority,Mn=e.unstable_NormalPriority,xl=e.unstable_LowPriority,cu=e.unstable_IdlePriority,Ms=null,Tn=null;function uu(s){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(Ms,s,void 0,(s.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:du,Tl=Math.log,hu=Math.LN2;function du(s){return s>>>=0,s===0?32:31-(Tl(s)/hu|0)|0}var Wo=64,Ho=4194304;function Pr(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Os(s,a){var u=s.pendingLanes;if(u===0)return 0;var p=0,g=s.suspendedLanes,w=s.pingedLanes,S=u&268435455;if(S!==0){var D=S&~g;D!==0?p=Pr(D):(w&=S,w!==0&&(p=Pr(w)))}else S=u&~g,S!==0?p=Pr(S):w!==0&&(p=Pr(w));if(p===0)return 0;if(a!==0&&a!==p&&(a&g)===0&&(g=p&-p,w=a&-a,g>=w||g===16&&(w&4194240)!==0))return a;if((p&4)!==0&&(p|=u&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=p;0<a;)u=31-on(a),g=1<<u,p|=s[u],a&=~g;return p}function vf(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xi(s,a){for(var u=s.suspendedLanes,p=s.pingedLanes,g=s.expirationTimes,w=s.pendingLanes;0<w;){var S=31-on(w),D=1<<S,j=g[S];j===-1?((D&u)===0||(D&p)!==0)&&(g[S]=vf(D,a)):j<=a&&(s.expiredLanes|=D),w&=~D}}function Sn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Vs(){var s=Wo;return Wo<<=1,(Wo&4194240)===0&&(Wo=64),s}function Rr(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Nr(s,a,u){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-on(a),s[a]=u}function Je(s,a){var u=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var p=s.eventTimes;for(s=s.expirationTimes;0<u;){var g=31-on(u),w=1<<g;a[g]=0,p[g]=-1,s[g]=-1,u&=~w}}function Dr(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var p=31-on(u),g=1<<p;g&a|s[p]&a&&(s[p]|=a),u&=~g}}var je=0;function Mr(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var fu,$o,pu,mu,gu,Sl=!1,wi=[],Bt=null,ei=null,ti=null,Or=new Map,On=new Map,bi=[],wf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yu(s,a){switch(s){case"focusin":case"focusout":Bt=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":Or.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":On.delete(a.pointerId)}}function hn(s,a,u,p,g,w){return s===null||s.nativeEvent!==w?(s={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:w,targetContainers:[g]},a!==null&&(a=Bl(a),a!==null&&$o(a)),s):(s.eventSystemFlags|=p,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function bf(s,a,u,p,g){switch(a){case"focusin":return Bt=hn(Bt,s,a,u,p,g),!0;case"dragenter":return ei=hn(ei,s,a,u,p,g),!0;case"mouseover":return ti=hn(ti,s,a,u,p,g),!0;case"pointerover":var w=g.pointerId;return Or.set(w,hn(Or.get(w)||null,s,a,u,p,g)),!0;case"gotpointercapture":return w=g.pointerId,On.set(w,hn(On.get(w)||null,s,a,u,p,g)),!0}return!1}function _u(s){var a=zs(s.target);if(a!==null){var u=Jn(a);if(u!==null){if(a=u.tag,a===13){if(a=Ns(u),a!==null){s.blockedOn=a,gu(s.priority,function(){pu(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ji(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=qo(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var p=new u.constructor(u.type,u);As=p,u.target.dispatchEvent(p),As=null}else return a=Bl(u),a!==null&&$o(a),s.blockedOn=u,!1;a.shift()}return!0}function Ls(s,a,u){Ji(s)&&u.delete(a)}function vu(){Sl=!1,Bt!==null&&Ji(Bt)&&(Bt=null),ei!==null&&Ji(ei)&&(ei=null),ti!==null&&Ji(ti)&&(ti=null),Or.forEach(Ls),On.forEach(Ls)}function ni(s,a){s.blockedOn===a&&(s.blockedOn=null,Sl||(Sl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vu)))}function ii(s){function a(g){return ni(g,s)}if(0<wi.length){ni(wi[0],s);for(var u=1;u<wi.length;u++){var p=wi[u];p.blockedOn===s&&(p.blockedOn=null)}}for(Bt!==null&&ni(Bt,s),ei!==null&&ni(ei,s),ti!==null&&ni(ti,s),Or.forEach(a),On.forEach(a),u=0;u<bi.length;u++)p=bi[u],p.blockedOn===s&&(p.blockedOn=null);for(;0<bi.length&&(u=bi[0],u.blockedOn===null);)_u(u),u.blockedOn===null&&bi.shift()}var Zi=q.ReactCurrentBatchConfig,Vr=!0;function at(s,a,u,p){var g=je,w=Zi.transition;Zi.transition=null;try{je=1,Il(s,a,u,p)}finally{je=g,Zi.transition=w}}function Ef(s,a,u,p){var g=je,w=Zi.transition;Zi.transition=null;try{je=4,Il(s,a,u,p)}finally{je=g,Zi.transition=w}}function Il(s,a,u,p){if(Vr){var g=qo(s,a,u,p);if(g===null)Df(s,a,p,js,u),yu(s,p);else if(bf(g,s,a,u,p))p.stopPropagation();else if(yu(s,p),a&4&&-1<wf.indexOf(s)){for(;g!==null;){var w=Bl(g);if(w!==null&&fu(w),w=qo(s,a,u,p),w===null&&Df(s,a,p,js,u),w===g)break;g=w}g!==null&&p.stopPropagation()}else Df(s,a,p,null,u)}}var js=null;function qo(s,a,u,p){if(js=null,s=Oo(p),s=zs(s),s!==null)if(a=Jn(s),a===null)s=null;else if(u=a.tag,u===13){if(s=Ns(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return js=s,null}function kl(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lu()){case Ds:return 1;case Cr:return 4;case Mn:case xl:return 16;case cu:return 536870912;default:return 16}default:return 16}}var In=null,Ko=null,dn=null;function Al(){if(dn)return dn;var s,a=Ko,u=a.length,p,g="value"in In?In.value:In.textContent,w=g.length;for(s=0;s<u&&a[s]===g[s];s++);var S=u-s;for(p=1;p<=S&&a[u-p]===g[w-p];p++);return dn=g.slice(s,1<p?1-p:void 0)}function Go(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Ei(){return!0}function Cl(){return!1}function zt(s){function a(u,p,g,w,S){this._reactName=u,this._targetInst=g,this.type=p,this.nativeEvent=w,this.target=S,this.currentTarget=null;for(var D in s)s.hasOwnProperty(D)&&(u=s[D],this[D]=u?u(w):w[D]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Ei:Cl,this.isPropagationStopped=Cl,this}return oe(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),a}var ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yo=zt(ri),xi=oe({},ri,{view:0,detail:0}),xf=zt(xi),Qo,er,Lr,Fs=oe({},xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ti,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Lr&&(Lr&&s.type==="mousemove"?(Qo=s.screenX-Lr.screenX,er=s.screenY-Lr.screenY):er=Qo=0,Lr=s),Qo)},movementY:function(s){return"movementY"in s?s.movementY:er}}),Xo=zt(Fs),Pl=oe({},Fs,{dataTransfer:0}),wu=zt(Pl),Jo=oe({},xi,{relatedTarget:0}),Zo=zt(Jo),bu=oe({},ri,{animationName:0,elapsedTime:0,pseudoElement:0}),tr=zt(bu),Eu=oe({},ri,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),xu=zt(Eu),Tu=oe({},ri,{data:0}),Rl=zt(Tu),ea={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},an={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iu(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Su[s])?!!a[s]:!1}function Ti(){return Iu}var d=oe({},xi,{key:function(s){if(s.key){var a=ea[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Go(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?an[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ti,charCode:function(s){return s.type==="keypress"?Go(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Go(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),v=zt(d),E=oe({},Fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A=zt(E),W=oe({},xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ti}),Y=zt(W),se=oe({},ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ge=zt(se),At=oe({},Fs,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=zt(At),Ot=[9,13,27,32],wt=c&&"CompositionEvent"in window,Vn=null;c&&"documentMode"in document&&(Vn=document.documentMode);var kn=c&&"TextEvent"in window&&!Vn,Bs=c&&(!wt||Vn&&8<Vn&&11>=Vn),ta=" ",Vy=!1;function Ly(s,a){switch(s){case"keyup":return Ot.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jy(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var na=!1;function dI(s,a){switch(s){case"compositionend":return jy(a);case"keypress":return a.which!==32?null:(Vy=!0,ta);case"textInput":return s=a.data,s===ta&&Vy?null:s;default:return null}}function fI(s,a){if(na)return s==="compositionend"||!wt&&Ly(s,a)?(s=Al(),dn=Ko=In=null,na=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Bs&&a.locale!=="ko"?null:a.data;default:return null}}var pI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fy(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!pI[s.type]:a==="textarea"}function By(s,a,u,p){vi(p),a=Ru(a,"onChange"),0<a.length&&(u=new Yo("onChange","change",null,u,p),s.push({event:u,listeners:a}))}var Nl=null,Dl=null;function mI(s){r_(s,0)}function ku(s){var a=aa(s);if(Po(a))return s}function gI(s,a){if(s==="change")return a}var zy=!1;if(c){var Tf;if(c){var Sf="oninput"in document;if(!Sf){var Uy=document.createElement("div");Uy.setAttribute("oninput","return;"),Sf=typeof Uy.oninput=="function"}Tf=Sf}else Tf=!1;zy=Tf&&(!document.documentMode||9<document.documentMode)}function Wy(){Nl&&(Nl.detachEvent("onpropertychange",Hy),Dl=Nl=null)}function Hy(s){if(s.propertyName==="value"&&ku(Dl)){var a=[];By(a,Dl,s,Oo(s)),vl(mI,a)}}function yI(s,a,u){s==="focusin"?(Wy(),Nl=a,Dl=u,Nl.attachEvent("onpropertychange",Hy)):s==="focusout"&&Wy()}function _I(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ku(Dl)}function vI(s,a){if(s==="click")return ku(a)}function wI(s,a){if(s==="input"||s==="change")return ku(a)}function bI(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var si=typeof Object.is=="function"?Object.is:bI;function Ml(s,a){if(si(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var g=u[p];if(!h.call(a,g)||!si(s[g],a[g]))return!1}return!0}function $y(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function qy(s,a){var u=$y(s);s=0;for(var p;u;){if(u.nodeType===3){if(p=s+u.textContent.length,s<=a&&p>=a)return{node:u,offset:a-s};s=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=$y(u)}}function Ky(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Ky(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Gy(){for(var s=window,a=kr();a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=kr(s.document)}return a}function If(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function EI(s){var a=Gy(),u=s.focusedElem,p=s.selectionRange;if(a!==u&&u&&u.ownerDocument&&Ky(u.ownerDocument.documentElement,u)){if(p!==null&&If(u)){if(a=p.start,s=p.end,s===void 0&&(s=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(s,u.value.length);else if(s=(a=u.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var g=u.textContent.length,w=Math.min(p.start,g);p=p.end===void 0?w:Math.min(p.end,g),!s.extend&&w>p&&(g=p,p=w,w=g),g=qy(u,w);var S=qy(u,p);g&&S&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==S.node||s.focusOffset!==S.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),s.removeAllRanges(),w>p?(s.addRange(a),s.extend(S.node,S.offset)):(a.setEnd(S.node,S.offset),s.addRange(a)))}}for(a=[],s=u;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)s=a[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var xI=c&&"documentMode"in document&&11>=document.documentMode,ia=null,kf=null,Ol=null,Af=!1;function Yy(s,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Af||ia==null||ia!==kr(p)||(p=ia,"selectionStart"in p&&If(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Ol&&Ml(Ol,p)||(Ol=p,p=Ru(kf,"onSelect"),0<p.length&&(a=new Yo("onSelect","select",null,a,u),s.push({event:a,listeners:p}),a.target=ia)))}function Au(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var ra={animationend:Au("Animation","AnimationEnd"),animationiteration:Au("Animation","AnimationIteration"),animationstart:Au("Animation","AnimationStart"),transitionend:Au("Transition","TransitionEnd")},Cf={},Qy={};c&&(Qy=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function Cu(s){if(Cf[s])return Cf[s];if(!ra[s])return s;var a=ra[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in Qy)return Cf[s]=a[u];return s}var Xy=Cu("animationend"),Jy=Cu("animationiteration"),Zy=Cu("animationstart"),e_=Cu("transitionend"),t_=new Map,n_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(s,a){t_.set(s,a),o(a,[s])}for(var Pf=0;Pf<n_.length;Pf++){var Rf=n_[Pf],TI=Rf.toLowerCase(),SI=Rf[0].toUpperCase()+Rf.slice(1);jr(TI,"on"+SI)}jr(Xy,"onAnimationEnd"),jr(Jy,"onAnimationIteration"),jr(Zy,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(e_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),II=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vl));function i_(s,a,u){var p=s.type||"unknown-event";s.currentTarget=u,su(p,a,void 0,s),s.currentTarget=null}function r_(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var p=s[u],g=p.event;p=p.listeners;e:{var w=void 0;if(a)for(var S=p.length-1;0<=S;S--){var D=p[S],j=D.instance,G=D.currentTarget;if(D=D.listener,j!==w&&g.isPropagationStopped())break e;i_(g,D,G),w=j}else for(S=0;S<p.length;S++){if(D=p[S],j=D.instance,G=D.currentTarget,D=D.listener,j!==w&&g.isPropagationStopped())break e;i_(g,D,G),w=j}}}if(Xn)throw s=wl,Xn=!1,wl=null,s}function it(s,a){var u=a[Ff];u===void 0&&(u=a[Ff]=new Set);var p=s+"__bubble";u.has(p)||(s_(a,s,2,!1),u.add(p))}function Nf(s,a,u){var p=0;a&&(p|=4),s_(u,s,p,a)}var Pu="_reactListening"+Math.random().toString(36).slice(2);function Ll(s){if(!s[Pu]){s[Pu]=!0,i.forEach(function(u){u!=="selectionchange"&&(II.has(u)||Nf(u,!1,s),Nf(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Pu]||(a[Pu]=!0,Nf("selectionchange",!1,a))}}function s_(s,a,u,p){switch(kl(a)){case 1:var g=at;break;case 4:g=Ef;break;default:g=Il}u=g.bind(null,a,u,s),g=void 0,!jo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),p?g!==void 0?s.addEventListener(a,u,{capture:!0,passive:g}):s.addEventListener(a,u,!0):g!==void 0?s.addEventListener(a,u,{passive:g}):s.addEventListener(a,u,!1)}function Df(s,a,u,p,g){var w=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var S=p.tag;if(S===3||S===4){var D=p.stateNode.containerInfo;if(D===g||D.nodeType===8&&D.parentNode===g)break;if(S===4)for(S=p.return;S!==null;){var j=S.tag;if((j===3||j===4)&&(j=S.stateNode.containerInfo,j===g||j.nodeType===8&&j.parentNode===g))return;S=S.return}for(;D!==null;){if(S=zs(D),S===null)return;if(j=S.tag,j===5||j===6){p=w=S;continue e}D=D.parentNode}}p=p.return}vl(function(){var G=w,te=Oo(u),ne=[];e:{var ee=t_.get(s);if(ee!==void 0){var ue=Yo,fe=s;switch(s){case"keypress":if(Go(u)===0)break e;case"keydown":case"keyup":ue=v;break;case"focusin":fe="focus",ue=Zo;break;case"focusout":fe="blur",ue=Zo;break;case"beforeblur":case"afterblur":ue=Zo;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Xo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=wu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=Y;break;case Xy:case Jy:case Zy:ue=tr;break;case e_:ue=Ge;break;case"scroll":ue=xf;break;case"wheel":ue=Fe;break;case"copy":case"cut":case"paste":ue=xu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=A}var me=(a&4)!==0,yt=!me&&s==="scroll",H=me?ee!==null?ee+"Capture":null:ee;me=[];for(var B=G,$;B!==null;){$=B;var re=$.stateNode;if($.tag===5&&re!==null&&($=re,H!==null&&(re=gt(B,H),re!=null&&me.push(jl(B,re,$)))),yt)break;B=B.return}0<me.length&&(ee=new ue(ee,fe,null,u,te),ne.push({event:ee,listeners:me}))}}if((a&7)===0){e:{if(ee=s==="mouseover"||s==="pointerover",ue=s==="mouseout"||s==="pointerout",ee&&u!==As&&(fe=u.relatedTarget||u.fromElement)&&(zs(fe)||fe[nr]))break e;if((ue||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,ue?(fe=u.relatedTarget||u.toElement,ue=G,fe=fe?zs(fe):null,fe!==null&&(yt=Jn(fe),fe!==yt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ue=null,fe=G),ue!==fe)){if(me=Xo,re="onMouseLeave",H="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(me=A,re="onPointerLeave",H="onPointerEnter",B="pointer"),yt=ue==null?ee:aa(ue),$=fe==null?ee:aa(fe),ee=new me(re,B+"leave",ue,u,te),ee.target=yt,ee.relatedTarget=$,re=null,zs(te)===G&&(me=new me(H,B+"enter",fe,u,te),me.target=$,me.relatedTarget=yt,re=me),yt=re,ue&&fe)t:{for(me=ue,H=fe,B=0,$=me;$;$=sa($))B++;for($=0,re=H;re;re=sa(re))$++;for(;0<B-$;)me=sa(me),B--;for(;0<$-B;)H=sa(H),$--;for(;B--;){if(me===H||H!==null&&me===H.alternate)break t;me=sa(me),H=sa(H)}me=null}else me=null;ue!==null&&o_(ne,ee,ue,me,!1),fe!==null&&yt!==null&&o_(ne,yt,fe,me,!0)}}e:{if(ee=G?aa(G):window,ue=ee.nodeName&&ee.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ee.type==="file")var ye=gI;else if(Fy(ee))if(zy)ye=wI;else{ye=_I;var ve=yI}else(ue=ee.nodeName)&&ue.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(ye=vI);if(ye&&(ye=ye(s,G))){By(ne,ye,u,te);break e}ve&&ve(s,ee,G),s==="focusout"&&(ve=ee._wrapperState)&&ve.controlled&&ee.type==="number"&&No(ee,"number",ee.value)}switch(ve=G?aa(G):window,s){case"focusin":(Fy(ve)||ve.contentEditable==="true")&&(ia=ve,kf=G,Ol=null);break;case"focusout":Ol=kf=ia=null;break;case"mousedown":Af=!0;break;case"contextmenu":case"mouseup":case"dragend":Af=!1,Yy(ne,u,te);break;case"selectionchange":if(xI)break;case"keydown":case"keyup":Yy(ne,u,te)}var we;if(wt)e:{switch(s){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else na?Ly(s,u)&&(Te="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Te="onCompositionStart");Te&&(Bs&&u.locale!=="ko"&&(na||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&na&&(we=Al()):(In=te,Ko="value"in In?In.value:In.textContent,na=!0)),ve=Ru(G,Te),0<ve.length&&(Te=new Rl(Te,s,null,u,te),ne.push({event:Te,listeners:ve}),we?Te.data=we:(we=jy(u),we!==null&&(Te.data=we)))),(we=kn?dI(s,u):fI(s,u))&&(G=Ru(G,"onBeforeInput"),0<G.length&&(te=new Rl("onBeforeInput","beforeinput",null,u,te),ne.push({event:te,listeners:G}),te.data=we))}r_(ne,a)})}function jl(s,a,u){return{instance:s,listener:a,currentTarget:u}}function Ru(s,a){for(var u=a+"Capture",p=[];s!==null;){var g=s,w=g.stateNode;g.tag===5&&w!==null&&(g=w,w=gt(s,u),w!=null&&p.unshift(jl(s,w,g)),w=gt(s,a),w!=null&&p.push(jl(s,w,g))),s=s.return}return p}function sa(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function o_(s,a,u,p,g){for(var w=a._reactName,S=[];u!==null&&u!==p;){var D=u,j=D.alternate,G=D.stateNode;if(j!==null&&j===p)break;D.tag===5&&G!==null&&(D=G,g?(j=gt(u,w),j!=null&&S.unshift(jl(u,j,D))):g||(j=gt(u,w),j!=null&&S.push(jl(u,j,D)))),u=u.return}S.length!==0&&s.push({event:a,listeners:S})}var kI=/\r\n?/g,AI=/\u0000|\uFFFD/g;function a_(s){return(typeof s=="string"?s:""+s).replace(kI,`
`).replace(AI,"")}function Nu(s,a,u){if(a=a_(a),a_(s)!==a&&u)throw Error(t(425))}function Du(){}var Mf=null,Of=null;function Vf(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Lf=typeof setTimeout=="function"?setTimeout:void 0,CI=typeof clearTimeout=="function"?clearTimeout:void 0,l_=typeof Promise=="function"?Promise:void 0,PI=typeof queueMicrotask=="function"?queueMicrotask:typeof l_<"u"?function(s){return l_.resolve(null).then(s).catch(RI)}:Lf;function RI(s){setTimeout(function(){throw s})}function jf(s,a){var u=a,p=0;do{var g=u.nextSibling;if(s.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(p===0){s.removeChild(g),ii(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=g}while(u);ii(a)}function Fr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function c_(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}var oa=Math.random().toString(36).slice(2),Si="__reactFiber$"+oa,Fl="__reactProps$"+oa,nr="__reactContainer$"+oa,Ff="__reactEvents$"+oa,NI="__reactListeners$"+oa,DI="__reactHandles$"+oa;function zs(s){var a=s[Si];if(a)return a;for(var u=s.parentNode;u;){if(a=u[nr]||u[Si]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=c_(s);s!==null;){if(u=s[Si])return u;s=c_(s)}return a}s=u,u=s.parentNode}return null}function Bl(s){return s=s[Si]||s[nr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function aa(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Mu(s){return s[Fl]||null}var Bf=[],la=-1;function Br(s){return{current:s}}function rt(s){0>la||(s.current=Bf[la],Bf[la]=null,la--)}function tt(s,a){la++,Bf[la]=s.current,s.current=a}var zr={},Kt=Br(zr),fn=Br(!1),Us=zr;function ca(s,a){var u=s.type.contextTypes;if(!u)return zr;var p=s.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var g={},w;for(w in u)g[w]=a[w];return p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=g),g}function pn(s){return s=s.childContextTypes,s!=null}function Ou(){rt(fn),rt(Kt)}function u_(s,a,u){if(Kt.current!==zr)throw Error(t(168));tt(Kt,a),tt(fn,u)}function h_(s,a,u){var p=s.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var g in p)if(!(g in a))throw Error(t(108,He(s)||"Unknown",g));return oe({},u,p)}function Vu(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||zr,Us=Kt.current,tt(Kt,s),tt(fn,fn.current),!0}function d_(s,a,u){var p=s.stateNode;if(!p)throw Error(t(169));u?(s=h_(s,a,Us),p.__reactInternalMemoizedMergedChildContext=s,rt(fn),rt(Kt),tt(Kt,s)):rt(fn),tt(fn,u)}var ir=null,Lu=!1,zf=!1;function f_(s){ir===null?ir=[s]:ir.push(s)}function MI(s){Lu=!0,f_(s)}function Ur(){if(!zf&&ir!==null){zf=!0;var s=0,a=je;try{var u=ir;for(je=1;s<u.length;s++){var p=u[s];do p=p(!0);while(p!==null)}ir=null,Lu=!1}catch(g){throw ir!==null&&(ir=ir.slice(s+1)),Uo(Ds,Ur),g}finally{je=a,zf=!1}}return null}var ua=[],ha=0,ju=null,Fu=0,Ln=[],jn=0,Ws=null,rr=1,sr="";function Hs(s,a){ua[ha++]=Fu,ua[ha++]=ju,ju=s,Fu=a}function p_(s,a,u){Ln[jn++]=rr,Ln[jn++]=sr,Ln[jn++]=Ws,Ws=s;var p=rr;s=sr;var g=32-on(p)-1;p&=~(1<<g),u+=1;var w=32-on(a)+g;if(30<w){var S=g-g%5;w=(p&(1<<S)-1).toString(32),p>>=S,g-=S,rr=1<<32-on(a)+g|u<<g|p,sr=w+s}else rr=1<<w|u<<g|p,sr=s}function Uf(s){s.return!==null&&(Hs(s,1),p_(s,1,0))}function Wf(s){for(;s===ju;)ju=ua[--ha],ua[ha]=null,Fu=ua[--ha],ua[ha]=null;for(;s===Ws;)Ws=Ln[--jn],Ln[jn]=null,sr=Ln[--jn],Ln[jn]=null,rr=Ln[--jn],Ln[jn]=null}var An=null,Cn=null,lt=!1,oi=null;function m_(s,a){var u=Un(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=s,a=s.deletions,a===null?(s.deletions=[u],s.flags|=16):a.push(u)}function g_(s,a){switch(s.tag){case 5:var u=s.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,An=s,Cn=Fr(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,An=s,Cn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=Ws!==null?{id:rr,overflow:sr}:null,s.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=Un(18,null,null,0),u.stateNode=a,u.return=s,s.child=u,An=s,Cn=null,!0):!1;default:return!1}}function Hf(s){return(s.mode&1)!==0&&(s.flags&128)===0}function $f(s){if(lt){var a=Cn;if(a){var u=a;if(!g_(s,a)){if(Hf(s))throw Error(t(418));a=Fr(u.nextSibling);var p=An;a&&g_(s,a)?m_(p,u):(s.flags=s.flags&-4097|2,lt=!1,An=s)}}else{if(Hf(s))throw Error(t(418));s.flags=s.flags&-4097|2,lt=!1,An=s}}}function y_(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;An=s}function Bu(s){if(s!==An)return!1;if(!lt)return y_(s),lt=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Vf(s.type,s.memoizedProps)),a&&(a=Cn)){if(Hf(s))throw __(),Error(t(418));for(;a;)m_(s,a),a=Fr(a.nextSibling)}if(y_(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(a===0){Cn=Fr(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}s=s.nextSibling}Cn=null}}else Cn=An?Fr(s.stateNode.nextSibling):null;return!0}function __(){for(var s=Cn;s;)s=Fr(s.nextSibling)}function da(){Cn=An=null,lt=!1}function qf(s){oi===null?oi=[s]:oi.push(s)}var OI=q.ReactCurrentBatchConfig;function zl(s,a,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,s));var g=p,w=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===w?a.ref:(a=function(S){var D=g.refs;S===null?delete D[w]:D[w]=S},a._stringRef=w,a)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function zu(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function v_(s){var a=s._init;return a(s._payload)}function w_(s){function a(H,B){if(s){var $=H.deletions;$===null?(H.deletions=[B],H.flags|=16):$.push(B)}}function u(H,B){if(!s)return null;for(;B!==null;)a(H,B),B=B.sibling;return null}function p(H,B){for(H=new Map;B!==null;)B.key!==null?H.set(B.key,B):H.set(B.index,B),B=B.sibling;return H}function g(H,B){return H=Qr(H,B),H.index=0,H.sibling=null,H}function w(H,B,$){return H.index=$,s?($=H.alternate,$!==null?($=$.index,$<B?(H.flags|=2,B):$):(H.flags|=2,B)):(H.flags|=1048576,B)}function S(H){return s&&H.alternate===null&&(H.flags|=2),H}function D(H,B,$,re){return B===null||B.tag!==6?(B=Lp($,H.mode,re),B.return=H,B):(B=g(B,$),B.return=H,B)}function j(H,B,$,re){var ye=$.type;return ye===P?te(H,B,$.props.children,re,$.key):B!==null&&(B.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Re&&v_(ye)===B.type)?(re=g(B,$.props),re.ref=zl(H,B,$),re.return=H,re):(re=hh($.type,$.key,$.props,null,H.mode,re),re.ref=zl(H,B,$),re.return=H,re)}function G(H,B,$,re){return B===null||B.tag!==4||B.stateNode.containerInfo!==$.containerInfo||B.stateNode.implementation!==$.implementation?(B=jp($,H.mode,re),B.return=H,B):(B=g(B,$.children||[]),B.return=H,B)}function te(H,B,$,re,ye){return B===null||B.tag!==7?(B=Js($,H.mode,re,ye),B.return=H,B):(B=g(B,$),B.return=H,B)}function ne(H,B,$){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Lp(""+B,H.mode,$),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case K:return $=hh(B.type,B.key,B.props,null,H.mode,$),$.ref=zl(H,null,B),$.return=H,$;case J:return B=jp(B,H.mode,$),B.return=H,B;case Re:var re=B._init;return ne(H,re(B._payload),$)}if(Ki(B)||ce(B))return B=Js(B,H.mode,$,null),B.return=H,B;zu(H,B)}return null}function ee(H,B,$,re){var ye=B!==null?B.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return ye!==null?null:D(H,B,""+$,re);if(typeof $=="object"&&$!==null){switch($.$$typeof){case K:return $.key===ye?j(H,B,$,re):null;case J:return $.key===ye?G(H,B,$,re):null;case Re:return ye=$._init,ee(H,B,ye($._payload),re)}if(Ki($)||ce($))return ye!==null?null:te(H,B,$,re,null);zu(H,$)}return null}function ue(H,B,$,re,ye){if(typeof re=="string"&&re!==""||typeof re=="number")return H=H.get($)||null,D(B,H,""+re,ye);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case K:return H=H.get(re.key===null?$:re.key)||null,j(B,H,re,ye);case J:return H=H.get(re.key===null?$:re.key)||null,G(B,H,re,ye);case Re:var ve=re._init;return ue(H,B,$,ve(re._payload),ye)}if(Ki(re)||ce(re))return H=H.get($)||null,te(B,H,re,ye,null);zu(B,re)}return null}function fe(H,B,$,re){for(var ye=null,ve=null,we=B,Te=B=0,jt=null;we!==null&&Te<$.length;Te++){we.index>Te?(jt=we,we=null):jt=we.sibling;var We=ee(H,we,$[Te],re);if(We===null){we===null&&(we=jt);break}s&&we&&We.alternate===null&&a(H,we),B=w(We,B,Te),ve===null?ye=We:ve.sibling=We,ve=We,we=jt}if(Te===$.length)return u(H,we),lt&&Hs(H,Te),ye;if(we===null){for(;Te<$.length;Te++)we=ne(H,$[Te],re),we!==null&&(B=w(we,B,Te),ve===null?ye=we:ve.sibling=we,ve=we);return lt&&Hs(H,Te),ye}for(we=p(H,we);Te<$.length;Te++)jt=ue(we,H,Te,$[Te],re),jt!==null&&(s&&jt.alternate!==null&&we.delete(jt.key===null?Te:jt.key),B=w(jt,B,Te),ve===null?ye=jt:ve.sibling=jt,ve=jt);return s&&we.forEach(function(Xr){return a(H,Xr)}),lt&&Hs(H,Te),ye}function me(H,B,$,re){var ye=ce($);if(typeof ye!="function")throw Error(t(150));if($=ye.call($),$==null)throw Error(t(151));for(var ve=ye=null,we=B,Te=B=0,jt=null,We=$.next();we!==null&&!We.done;Te++,We=$.next()){we.index>Te?(jt=we,we=null):jt=we.sibling;var Xr=ee(H,we,We.value,re);if(Xr===null){we===null&&(we=jt);break}s&&we&&Xr.alternate===null&&a(H,we),B=w(Xr,B,Te),ve===null?ye=Xr:ve.sibling=Xr,ve=Xr,we=jt}if(We.done)return u(H,we),lt&&Hs(H,Te),ye;if(we===null){for(;!We.done;Te++,We=$.next())We=ne(H,We.value,re),We!==null&&(B=w(We,B,Te),ve===null?ye=We:ve.sibling=We,ve=We);return lt&&Hs(H,Te),ye}for(we=p(H,we);!We.done;Te++,We=$.next())We=ue(we,H,Te,We.value,re),We!==null&&(s&&We.alternate!==null&&we.delete(We.key===null?Te:We.key),B=w(We,B,Te),ve===null?ye=We:ve.sibling=We,ve=We);return s&&we.forEach(function(p1){return a(H,p1)}),lt&&Hs(H,Te),ye}function yt(H,B,$,re){if(typeof $=="object"&&$!==null&&$.type===P&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case K:e:{for(var ye=$.key,ve=B;ve!==null;){if(ve.key===ye){if(ye=$.type,ye===P){if(ve.tag===7){u(H,ve.sibling),B=g(ve,$.props.children),B.return=H,H=B;break e}}else if(ve.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Re&&v_(ye)===ve.type){u(H,ve.sibling),B=g(ve,$.props),B.ref=zl(H,ve,$),B.return=H,H=B;break e}u(H,ve);break}else a(H,ve);ve=ve.sibling}$.type===P?(B=Js($.props.children,H.mode,re,$.key),B.return=H,H=B):(re=hh($.type,$.key,$.props,null,H.mode,re),re.ref=zl(H,B,$),re.return=H,H=re)}return S(H);case J:e:{for(ve=$.key;B!==null;){if(B.key===ve)if(B.tag===4&&B.stateNode.containerInfo===$.containerInfo&&B.stateNode.implementation===$.implementation){u(H,B.sibling),B=g(B,$.children||[]),B.return=H,H=B;break e}else{u(H,B);break}else a(H,B);B=B.sibling}B=jp($,H.mode,re),B.return=H,H=B}return S(H);case Re:return ve=$._init,yt(H,B,ve($._payload),re)}if(Ki($))return fe(H,B,$,re);if(ce($))return me(H,B,$,re);zu(H,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,B!==null&&B.tag===6?(u(H,B.sibling),B=g(B,$),B.return=H,H=B):(u(H,B),B=Lp($,H.mode,re),B.return=H,H=B),S(H)):u(H,B)}return yt}var fa=w_(!0),b_=w_(!1),Uu=Br(null),Wu=null,pa=null,Kf=null;function Gf(){Kf=pa=Wu=null}function Yf(s){var a=Uu.current;rt(Uu),s._currentValue=a}function Qf(s,a,u){for(;s!==null;){var p=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),s===u)break;s=s.return}}function ma(s,a){Wu=s,Kf=pa=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(mn=!0),s.firstContext=null)}function Fn(s){var a=s._currentValue;if(Kf!==s)if(s={context:s,memoizedValue:a,next:null},pa===null){if(Wu===null)throw Error(t(308));pa=s,Wu.dependencies={lanes:0,firstContext:s}}else pa=pa.next=s;return a}var $s=null;function Xf(s){$s===null?$s=[s]:$s.push(s)}function E_(s,a,u,p){var g=a.interleaved;return g===null?(u.next=u,Xf(a)):(u.next=g.next,g.next=u),a.interleaved=u,or(s,p)}function or(s,a){s.lanes|=a;var u=s.alternate;for(u!==null&&(u.lanes|=a),u=s,s=s.return;s!==null;)s.childLanes|=a,u=s.alternate,u!==null&&(u.childLanes|=a),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Wr=!1;function Jf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function x_(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ar(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function Hr(s,a,u){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(ze&2)!==0){var g=p.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),p.pending=a,or(s,u)}return g=p.interleaved,g===null?(a.next=a,Xf(p)):(a.next=g.next,g.next=a),p.interleaved=a,or(s,u)}function Hu(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=s.pendingLanes,u|=p,a.lanes=u,Dr(s,u)}}function T_(s,a){var u=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var g=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?g=w=S:w=w.next=S,u=u.next}while(u!==null);w===null?g=w=a:w=w.next=a}else g=w=a;u={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:w,shared:p.shared,effects:p.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}function $u(s,a,u,p){var g=s.updateQueue;Wr=!1;var w=g.firstBaseUpdate,S=g.lastBaseUpdate,D=g.shared.pending;if(D!==null){g.shared.pending=null;var j=D,G=j.next;j.next=null,S===null?w=G:S.next=G,S=j;var te=s.alternate;te!==null&&(te=te.updateQueue,D=te.lastBaseUpdate,D!==S&&(D===null?te.firstBaseUpdate=G:D.next=G,te.lastBaseUpdate=j))}if(w!==null){var ne=g.baseState;S=0,te=G=j=null,D=w;do{var ee=D.lane,ue=D.eventTime;if((p&ee)===ee){te!==null&&(te=te.next={eventTime:ue,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var fe=s,me=D;switch(ee=a,ue=u,me.tag){case 1:if(fe=me.payload,typeof fe=="function"){ne=fe.call(ue,ne,ee);break e}ne=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=me.payload,ee=typeof fe=="function"?fe.call(ue,ne,ee):fe,ee==null)break e;ne=oe({},ne,ee);break e;case 2:Wr=!0}}D.callback!==null&&D.lane!==0&&(s.flags|=64,ee=g.effects,ee===null?g.effects=[D]:ee.push(D))}else ue={eventTime:ue,lane:ee,tag:D.tag,payload:D.payload,callback:D.callback,next:null},te===null?(G=te=ue,j=ne):te=te.next=ue,S|=ee;if(D=D.next,D===null){if(D=g.shared.pending,D===null)break;ee=D,D=ee.next,ee.next=null,g.lastBaseUpdate=ee,g.shared.pending=null}}while(!0);if(te===null&&(j=ne),g.baseState=j,g.firstBaseUpdate=G,g.lastBaseUpdate=te,a=g.shared.interleaved,a!==null){g=a;do S|=g.lane,g=g.next;while(g!==a)}else w===null&&(g.shared.lanes=0);Gs|=S,s.lanes=S,s.memoizedState=ne}}function S_(s,a,u){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var p=s[a],g=p.callback;if(g!==null){if(p.callback=null,p=u,typeof g!="function")throw Error(t(191,g));g.call(p)}}}var Ul={},Ii=Br(Ul),Wl=Br(Ul),Hl=Br(Ul);function qs(s){if(s===Ul)throw Error(t(174));return s}function Zf(s,a){switch(tt(Hl,a),tt(Wl,s),tt(Ii,Ul),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:kt(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=kt(a,s)}rt(Ii),tt(Ii,a)}function ga(){rt(Ii),rt(Wl),rt(Hl)}function I_(s){qs(Hl.current);var a=qs(Ii.current),u=kt(a,s.type);a!==u&&(tt(Wl,s),tt(Ii,u))}function ep(s){Wl.current===s&&(rt(Ii),rt(Wl))}var ut=Br(0);function qu(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var tp=[];function np(){for(var s=0;s<tp.length;s++)tp[s]._workInProgressVersionPrimary=null;tp.length=0}var Ku=q.ReactCurrentDispatcher,ip=q.ReactCurrentBatchConfig,Ks=0,ht=null,Ct=null,Vt=null,Gu=!1,$l=!1,ql=0,VI=0;function Gt(){throw Error(t(321))}function rp(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!si(s[u],a[u]))return!1;return!0}function sp(s,a,u,p,g,w){if(Ks=w,ht=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ku.current=s===null||s.memoizedState===null?BI:zI,s=u(p,g),$l){w=0;do{if($l=!1,ql=0,25<=w)throw Error(t(301));w+=1,Vt=Ct=null,a.updateQueue=null,Ku.current=UI,s=u(p,g)}while($l)}if(Ku.current=Xu,a=Ct!==null&&Ct.next!==null,Ks=0,Vt=Ct=ht=null,Gu=!1,a)throw Error(t(300));return s}function op(){var s=ql!==0;return ql=0,s}function ki(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?ht.memoizedState=Vt=s:Vt=Vt.next=s,Vt}function Bn(){if(Ct===null){var s=ht.alternate;s=s!==null?s.memoizedState:null}else s=Ct.next;var a=Vt===null?ht.memoizedState:Vt.next;if(a!==null)Vt=a,Ct=s;else{if(s===null)throw Error(t(310));Ct=s,s={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Vt===null?ht.memoizedState=Vt=s:Vt=Vt.next=s}return Vt}function Kl(s,a){return typeof a=="function"?a(s):a}function ap(s){var a=Bn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var p=Ct,g=p.baseQueue,w=u.pending;if(w!==null){if(g!==null){var S=g.next;g.next=w.next,w.next=S}p.baseQueue=g=w,u.pending=null}if(g!==null){w=g.next,p=p.baseState;var D=S=null,j=null,G=w;do{var te=G.lane;if((Ks&te)===te)j!==null&&(j=j.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),p=G.hasEagerState?G.eagerState:s(p,G.action);else{var ne={lane:te,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};j===null?(D=j=ne,S=p):j=j.next=ne,ht.lanes|=te,Gs|=te}G=G.next}while(G!==null&&G!==w);j===null?S=p:j.next=D,si(p,a.memoizedState)||(mn=!0),a.memoizedState=p,a.baseState=S,a.baseQueue=j,u.lastRenderedState=p}if(s=u.interleaved,s!==null){g=s;do w=g.lane,ht.lanes|=w,Gs|=w,g=g.next;while(g!==s)}else g===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function lp(s){var a=Bn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var p=u.dispatch,g=u.pending,w=a.memoizedState;if(g!==null){u.pending=null;var S=g=g.next;do w=s(w,S.action),S=S.next;while(S!==g);si(w,a.memoizedState)||(mn=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),u.lastRenderedState=w}return[w,p]}function k_(){}function A_(s,a){var u=ht,p=Bn(),g=a(),w=!si(p.memoizedState,g);if(w&&(p.memoizedState=g,mn=!0),p=p.queue,cp(R_.bind(null,u,p,s),[s]),p.getSnapshot!==a||w||Vt!==null&&Vt.memoizedState.tag&1){if(u.flags|=2048,Gl(9,P_.bind(null,u,p,g,a),void 0,null),Lt===null)throw Error(t(349));(Ks&30)!==0||C_(u,a,g)}return g}function C_(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=ht.updateQueue,a===null?(a={lastEffect:null,stores:null},ht.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function P_(s,a,u,p){a.value=u,a.getSnapshot=p,N_(a)&&D_(s)}function R_(s,a,u){return u(function(){N_(a)&&D_(s)})}function N_(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!si(s,u)}catch{return!0}}function D_(s){var a=or(s,1);a!==null&&ui(a,s,1,-1)}function M_(s){var a=ki();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kl,lastRenderedState:s},a.queue=s,s=s.dispatch=FI.bind(null,ht,s),[a.memoizedState,s]}function Gl(s,a,u,p){return s={tag:s,create:a,destroy:u,deps:p,next:null},a=ht.updateQueue,a===null?(a={lastEffect:null,stores:null},ht.updateQueue=a,a.lastEffect=s.next=s):(u=a.lastEffect,u===null?a.lastEffect=s.next=s:(p=u.next,u.next=s,s.next=p,a.lastEffect=s)),s}function O_(){return Bn().memoizedState}function Yu(s,a,u,p){var g=ki();ht.flags|=s,g.memoizedState=Gl(1|a,u,void 0,p===void 0?null:p)}function Qu(s,a,u,p){var g=Bn();p=p===void 0?null:p;var w=void 0;if(Ct!==null){var S=Ct.memoizedState;if(w=S.destroy,p!==null&&rp(p,S.deps)){g.memoizedState=Gl(a,u,w,p);return}}ht.flags|=s,g.memoizedState=Gl(1|a,u,w,p)}function V_(s,a){return Yu(8390656,8,s,a)}function cp(s,a){return Qu(2048,8,s,a)}function L_(s,a){return Qu(4,2,s,a)}function j_(s,a){return Qu(4,4,s,a)}function F_(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function B_(s,a,u){return u=u!=null?u.concat([s]):null,Qu(4,4,F_.bind(null,a,s),u)}function up(){}function z_(s,a){var u=Bn();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&rp(a,p[1])?p[0]:(u.memoizedState=[s,a],s)}function U_(s,a){var u=Bn();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&rp(a,p[1])?p[0]:(s=s(),u.memoizedState=[s,a],s)}function W_(s,a,u){return(Ks&21)===0?(s.baseState&&(s.baseState=!1,mn=!0),s.memoizedState=u):(si(u,a)||(u=Vs(),ht.lanes|=u,Gs|=u,s.baseState=!0),a)}function LI(s,a){var u=je;je=u!==0&&4>u?u:4,s(!0);var p=ip.transition;ip.transition={};try{s(!1),a()}finally{je=u,ip.transition=p}}function H_(){return Bn().memoizedState}function jI(s,a,u){var p=Gr(s);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},$_(s))q_(a,u);else if(u=E_(s,a,u,p),u!==null){var g=cn();ui(u,s,p,g),K_(u,a,p)}}function FI(s,a,u){var p=Gr(s),g={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if($_(s))q_(a,g);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var S=a.lastRenderedState,D=w(S,u);if(g.hasEagerState=!0,g.eagerState=D,si(D,S)){var j=a.interleaved;j===null?(g.next=g,Xf(a)):(g.next=j.next,j.next=g),a.interleaved=g;return}}catch{}finally{}u=E_(s,a,g,p),u!==null&&(g=cn(),ui(u,s,p,g),K_(u,a,p))}}function $_(s){var a=s.alternate;return s===ht||a!==null&&a===ht}function q_(s,a){$l=Gu=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function K_(s,a,u){if((u&4194240)!==0){var p=a.lanes;p&=s.pendingLanes,u|=p,a.lanes=u,Dr(s,u)}}var Xu={readContext:Fn,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},BI={readContext:Fn,useCallback:function(s,a){return ki().memoizedState=[s,a===void 0?null:a],s},useContext:Fn,useEffect:V_,useImperativeHandle:function(s,a,u){return u=u!=null?u.concat([s]):null,Yu(4194308,4,F_.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Yu(4194308,4,s,a)},useInsertionEffect:function(s,a){return Yu(4,2,s,a)},useMemo:function(s,a){var u=ki();return a=a===void 0?null:a,s=s(),u.memoizedState=[s,a],s},useReducer:function(s,a,u){var p=ki();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},p.queue=s,s=s.dispatch=jI.bind(null,ht,s),[p.memoizedState,s]},useRef:function(s){var a=ki();return s={current:s},a.memoizedState=s},useState:M_,useDebugValue:up,useDeferredValue:function(s){return ki().memoizedState=s},useTransition:function(){var s=M_(!1),a=s[0];return s=LI.bind(null,s[1]),ki().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,u){var p=ht,g=ki();if(lt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Lt===null)throw Error(t(349));(Ks&30)!==0||C_(p,a,u)}g.memoizedState=u;var w={value:u,getSnapshot:a};return g.queue=w,V_(R_.bind(null,p,w,s),[s]),p.flags|=2048,Gl(9,P_.bind(null,p,w,u,a),void 0,null),u},useId:function(){var s=ki(),a=Lt.identifierPrefix;if(lt){var u=sr,p=rr;u=(p&~(1<<32-on(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=ql++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=VI++,a=":"+a+"r"+u.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},zI={readContext:Fn,useCallback:z_,useContext:Fn,useEffect:cp,useImperativeHandle:B_,useInsertionEffect:L_,useLayoutEffect:j_,useMemo:U_,useReducer:ap,useRef:O_,useState:function(){return ap(Kl)},useDebugValue:up,useDeferredValue:function(s){var a=Bn();return W_(a,Ct.memoizedState,s)},useTransition:function(){var s=ap(Kl)[0],a=Bn().memoizedState;return[s,a]},useMutableSource:k_,useSyncExternalStore:A_,useId:H_,unstable_isNewReconciler:!1},UI={readContext:Fn,useCallback:z_,useContext:Fn,useEffect:cp,useImperativeHandle:B_,useInsertionEffect:L_,useLayoutEffect:j_,useMemo:U_,useReducer:lp,useRef:O_,useState:function(){return lp(Kl)},useDebugValue:up,useDeferredValue:function(s){var a=Bn();return Ct===null?a.memoizedState=s:W_(a,Ct.memoizedState,s)},useTransition:function(){var s=lp(Kl)[0],a=Bn().memoizedState;return[s,a]},useMutableSource:k_,useSyncExternalStore:A_,useId:H_,unstable_isNewReconciler:!1};function ai(s,a){if(s&&s.defaultProps){a=oe({},a),s=s.defaultProps;for(var u in s)a[u]===void 0&&(a[u]=s[u]);return a}return a}function hp(s,a,u,p){a=s.memoizedState,u=u(p,a),u=u==null?a:oe({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Ju={isMounted:function(s){return(s=s._reactInternals)?Jn(s)===s:!1},enqueueSetState:function(s,a,u){s=s._reactInternals;var p=cn(),g=Gr(s),w=ar(p,g);w.payload=a,u!=null&&(w.callback=u),a=Hr(s,w,g),a!==null&&(ui(a,s,g,p),Hu(a,s,g))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var p=cn(),g=Gr(s),w=ar(p,g);w.tag=1,w.payload=a,u!=null&&(w.callback=u),a=Hr(s,w,g),a!==null&&(ui(a,s,g,p),Hu(a,s,g))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=cn(),p=Gr(s),g=ar(u,p);g.tag=2,a!=null&&(g.callback=a),a=Hr(s,g,p),a!==null&&(ui(a,s,p,u),Hu(a,s,p))}};function G_(s,a,u,p,g,w,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,w,S):a.prototype&&a.prototype.isPureReactComponent?!Ml(u,p)||!Ml(g,w):!0}function Y_(s,a,u){var p=!1,g=zr,w=a.contextType;return typeof w=="object"&&w!==null?w=Fn(w):(g=pn(a)?Us:Kt.current,p=a.contextTypes,w=(p=p!=null)?ca(s,g):zr),a=new a(u,w),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Ju,s.stateNode=a,a._reactInternals=s,p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=w),a}function Q_(s,a,u,p){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==s&&Ju.enqueueReplaceState(a,a.state,null)}function dp(s,a,u,p){var g=s.stateNode;g.props=u,g.state=s.memoizedState,g.refs={},Jf(s);var w=a.contextType;typeof w=="object"&&w!==null?g.context=Fn(w):(w=pn(a)?Us:Kt.current,g.context=ca(s,w)),g.state=s.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(hp(s,a,w,u),g.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&Ju.enqueueReplaceState(g,g.state,null),$u(s,u,g,p),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function ya(s,a){try{var u="",p=a;do u+=Ae(p),p=p.return;while(p);var g=u}catch(w){g=`
Error generating stack: `+w.message+`
`+w.stack}return{value:s,source:a,stack:g,digest:null}}function fp(s,a,u){return{value:s,source:null,stack:u??null,digest:a??null}}function pp(s,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var WI=typeof WeakMap=="function"?WeakMap:Map;function X_(s,a,u){u=ar(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){sh||(sh=!0,Cp=p),pp(s,a)},u}function J_(s,a,u){u=ar(-1,u),u.tag=3;var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var g=a.value;u.payload=function(){return p(g)},u.callback=function(){pp(s,a)}}var w=s.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){pp(s,a),typeof p!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var S=a.stack;this.componentDidCatch(a.value,{componentStack:S!==null?S:""})}),u}function Z_(s,a,u){var p=s.pingCache;if(p===null){p=s.pingCache=new WI;var g=new Set;p.set(a,g)}else g=p.get(a),g===void 0&&(g=new Set,p.set(a,g));g.has(u)||(g.add(u),s=i1.bind(null,s,a,u),a.then(s,s))}function ev(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function tv(s,a,u,p,g){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=ar(-1,1),a.tag=2,Hr(u,a,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=g,s)}var HI=q.ReactCurrentOwner,mn=!1;function ln(s,a,u,p){a.child=s===null?b_(a,null,u,p):fa(a,s.child,u,p)}function nv(s,a,u,p,g){u=u.render;var w=a.ref;return ma(a,g),p=sp(s,a,u,p,w,g),u=op(),s!==null&&!mn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~g,lr(s,a,g)):(lt&&u&&Uf(a),a.flags|=1,ln(s,a,p,g),a.child)}function iv(s,a,u,p,g){if(s===null){var w=u.type;return typeof w=="function"&&!Vp(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=w,rv(s,a,w,p,g)):(s=hh(u.type,null,p,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(w=s.child,(s.lanes&g)===0){var S=w.memoizedProps;if(u=u.compare,u=u!==null?u:Ml,u(S,p)&&s.ref===a.ref)return lr(s,a,g)}return a.flags|=1,s=Qr(w,p),s.ref=a.ref,s.return=a,a.child=s}function rv(s,a,u,p,g){if(s!==null){var w=s.memoizedProps;if(Ml(w,p)&&s.ref===a.ref)if(mn=!1,a.pendingProps=p=w,(s.lanes&g)!==0)(s.flags&131072)!==0&&(mn=!0);else return a.lanes=s.lanes,lr(s,a,g)}return mp(s,a,u,p,g)}function sv(s,a,u){var p=a.pendingProps,g=p.children,w=s!==null?s.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(va,Pn),Pn|=u;else{if((u&1073741824)===0)return s=w!==null?w.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,tt(va,Pn),Pn|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:u,tt(va,Pn),Pn|=p}else w!==null?(p=w.baseLanes|u,a.memoizedState=null):p=u,tt(va,Pn),Pn|=p;return ln(s,a,g,u),a.child}function ov(s,a){var u=a.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function mp(s,a,u,p,g){var w=pn(u)?Us:Kt.current;return w=ca(a,w),ma(a,g),u=sp(s,a,u,p,w,g),p=op(),s!==null&&!mn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~g,lr(s,a,g)):(lt&&p&&Uf(a),a.flags|=1,ln(s,a,u,g),a.child)}function av(s,a,u,p,g){if(pn(u)){var w=!0;Vu(a)}else w=!1;if(ma(a,g),a.stateNode===null)eh(s,a),Y_(a,u,p),dp(a,u,p,g),p=!0;else if(s===null){var S=a.stateNode,D=a.memoizedProps;S.props=D;var j=S.context,G=u.contextType;typeof G=="object"&&G!==null?G=Fn(G):(G=pn(u)?Us:Kt.current,G=ca(a,G));var te=u.getDerivedStateFromProps,ne=typeof te=="function"||typeof S.getSnapshotBeforeUpdate=="function";ne||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==p||j!==G)&&Q_(a,S,p,G),Wr=!1;var ee=a.memoizedState;S.state=ee,$u(a,p,S,g),j=a.memoizedState,D!==p||ee!==j||fn.current||Wr?(typeof te=="function"&&(hp(a,u,te,p),j=a.memoizedState),(D=Wr||G_(a,u,D,p,ee,j,G))?(ne||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=j),S.props=p,S.state=j,S.context=G,p=D):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{S=a.stateNode,x_(s,a),D=a.memoizedProps,G=a.type===a.elementType?D:ai(a.type,D),S.props=G,ne=a.pendingProps,ee=S.context,j=u.contextType,typeof j=="object"&&j!==null?j=Fn(j):(j=pn(u)?Us:Kt.current,j=ca(a,j));var ue=u.getDerivedStateFromProps;(te=typeof ue=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==ne||ee!==j)&&Q_(a,S,p,j),Wr=!1,ee=a.memoizedState,S.state=ee,$u(a,p,S,g);var fe=a.memoizedState;D!==ne||ee!==fe||fn.current||Wr?(typeof ue=="function"&&(hp(a,u,ue,p),fe=a.memoizedState),(G=Wr||G_(a,u,G,p,ee,fe,j)||!1)?(te||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,fe,j),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,fe,j)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||D===s.memoizedProps&&ee===s.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&ee===s.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=fe),S.props=p,S.state=fe,S.context=j,p=G):(typeof S.componentDidUpdate!="function"||D===s.memoizedProps&&ee===s.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&ee===s.memoizedState||(a.flags|=1024),p=!1)}return gp(s,a,u,p,w,g)}function gp(s,a,u,p,g,w){ov(s,a);var S=(a.flags&128)!==0;if(!p&&!S)return g&&d_(a,u,!1),lr(s,a,w);p=a.stateNode,HI.current=a;var D=S&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,s!==null&&S?(a.child=fa(a,s.child,null,w),a.child=fa(a,null,D,w)):ln(s,a,D,w),a.memoizedState=p.state,g&&d_(a,u,!0),a.child}function lv(s){var a=s.stateNode;a.pendingContext?u_(s,a.pendingContext,a.pendingContext!==a.context):a.context&&u_(s,a.context,!1),Zf(s,a.containerInfo)}function cv(s,a,u,p,g){return da(),qf(g),a.flags|=256,ln(s,a,u,p),a.child}var yp={dehydrated:null,treeContext:null,retryLane:0};function _p(s){return{baseLanes:s,cachePool:null,transitions:null}}function uv(s,a,u){var p=a.pendingProps,g=ut.current,w=!1,S=(a.flags&128)!==0,D;if((D=S)||(D=s!==null&&s.memoizedState===null?!1:(g&2)!==0),D?(w=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),tt(ut,g&1),s===null)return $f(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(S=p.children,s=p.fallback,w?(p=a.mode,w=a.child,S={mode:"hidden",children:S},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=S):w=dh(S,p,0,null),s=Js(s,p,u,null),w.return=a,s.return=a,w.sibling=s,a.child=w,a.child.memoizedState=_p(u),a.memoizedState=yp,s):vp(a,S));if(g=s.memoizedState,g!==null&&(D=g.dehydrated,D!==null))return $I(s,a,S,p,D,g,u);if(w){w=p.fallback,S=a.mode,g=s.child,D=g.sibling;var j={mode:"hidden",children:p.children};return(S&1)===0&&a.child!==g?(p=a.child,p.childLanes=0,p.pendingProps=j,a.deletions=null):(p=Qr(g,j),p.subtreeFlags=g.subtreeFlags&14680064),D!==null?w=Qr(D,w):(w=Js(w,S,u,null),w.flags|=2),w.return=a,p.return=a,p.sibling=w,a.child=p,p=w,w=a.child,S=s.child.memoizedState,S=S===null?_p(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},w.memoizedState=S,w.childLanes=s.childLanes&~u,a.memoizedState=yp,p}return w=s.child,s=w.sibling,p=Qr(w,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=u),p.return=a,p.sibling=null,s!==null&&(u=a.deletions,u===null?(a.deletions=[s],a.flags|=16):u.push(s)),a.child=p,a.memoizedState=null,p}function vp(s,a){return a=dh({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function Zu(s,a,u,p){return p!==null&&qf(p),fa(a,s.child,null,u),s=vp(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function $I(s,a,u,p,g,w,S){if(u)return a.flags&256?(a.flags&=-257,p=fp(Error(t(422))),Zu(s,a,S,p)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(w=p.fallback,g=a.mode,p=dh({mode:"visible",children:p.children},g,0,null),w=Js(w,g,S,null),w.flags|=2,p.return=a,w.return=a,p.sibling=w,a.child=p,(a.mode&1)!==0&&fa(a,s.child,null,S),a.child.memoizedState=_p(S),a.memoizedState=yp,w);if((a.mode&1)===0)return Zu(s,a,S,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var D=p.dgst;return p=D,w=Error(t(419)),p=fp(w,p,void 0),Zu(s,a,S,p)}if(D=(S&s.childLanes)!==0,mn||D){if(p=Lt,p!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(p.suspendedLanes|S))!==0?0:g,g!==0&&g!==w.retryLane&&(w.retryLane=g,or(s,g),ui(p,s,g,-1))}return Op(),p=fp(Error(t(421))),Zu(s,a,S,p)}return g.data==="$?"?(a.flags|=128,a.child=s.child,a=r1.bind(null,s),g._reactRetry=a,null):(s=w.treeContext,Cn=Fr(g.nextSibling),An=a,lt=!0,oi=null,s!==null&&(Ln[jn++]=rr,Ln[jn++]=sr,Ln[jn++]=Ws,rr=s.id,sr=s.overflow,Ws=a),a=vp(a,p.children),a.flags|=4096,a)}function hv(s,a,u){s.lanes|=a;var p=s.alternate;p!==null&&(p.lanes|=a),Qf(s.return,a,u)}function wp(s,a,u,p,g){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:g}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=u,w.tailMode=g)}function dv(s,a,u){var p=a.pendingProps,g=p.revealOrder,w=p.tail;if(ln(s,a,p.children,u),p=ut.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&hv(s,u,a);else if(s.tag===19)hv(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}if(tt(ut,p),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(u=a.child,g=null;u!==null;)s=u.alternate,s!==null&&qu(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),wp(a,!1,g,u,w);break;case"backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&qu(s)===null){a.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}wp(a,!0,u,null,w);break;case"together":wp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function eh(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function lr(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),Gs|=a.lanes,(u&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,u=Qr(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=Qr(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function qI(s,a,u){switch(a.tag){case 3:lv(a),da();break;case 5:I_(a);break;case 1:pn(a.type)&&Vu(a);break;case 4:Zf(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,g=a.memoizedProps.value;tt(Uu,p._currentValue),p._currentValue=g;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(tt(ut,ut.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?uv(s,a,u):(tt(ut,ut.current&1),s=lr(s,a,u),s!==null?s.sibling:null);tt(ut,ut.current&1);break;case 19:if(p=(u&a.childLanes)!==0,(s.flags&128)!==0){if(p)return dv(s,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),tt(ut,ut.current),p)break;return null;case 22:case 23:return a.lanes=0,sv(s,a,u)}return lr(s,a,u)}var fv,bp,pv,mv;fv=function(s,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},bp=function(){},pv=function(s,a,u,p){var g=s.memoizedProps;if(g!==p){s=a.stateNode,qs(Ii.current);var w=null;switch(u){case"input":g=Ss(s,g),p=Ss(s,p),w=[];break;case"select":g=oe({},g,{value:void 0}),p=oe({},p,{value:void 0}),w=[];break;case"textarea":g=cl(s,g),p=cl(s,p),w=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(s.onclick=Du)}ml(u,p);var S;u=null;for(G in g)if(!p.hasOwnProperty(G)&&g.hasOwnProperty(G)&&g[G]!=null)if(G==="style"){var D=g[G];for(S in D)D.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(r.hasOwnProperty(G)?w||(w=[]):(w=w||[]).push(G,null));for(G in p){var j=p[G];if(D=g!=null?g[G]:void 0,p.hasOwnProperty(G)&&j!==D&&(j!=null||D!=null))if(G==="style")if(D){for(S in D)!D.hasOwnProperty(S)||j&&j.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in j)j.hasOwnProperty(S)&&D[S]!==j[S]&&(u||(u={}),u[S]=j[S])}else u||(w||(w=[]),w.push(G,u)),u=j;else G==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,D=D?D.__html:void 0,j!=null&&D!==j&&(w=w||[]).push(G,j)):G==="children"?typeof j!="string"&&typeof j!="number"||(w=w||[]).push(G,""+j):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(r.hasOwnProperty(G)?(j!=null&&G==="onScroll"&&it("scroll",s),w||D===j||(w=[])):(w=w||[]).push(G,j))}u&&(w=w||[]).push("style",u);var G=w;(a.updateQueue=G)&&(a.flags|=4)}},mv=function(s,a,u,p){u!==p&&(a.flags|=4)};function Yl(s,a){if(!lt)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function Yt(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,p=0;if(a)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=p,s.childLanes=u,a}function KI(s,a,u){var p=a.pendingProps;switch(Wf(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(a),null;case 1:return pn(a.type)&&Ou(),Yt(a),null;case 3:return p=a.stateNode,ga(),rt(fn),rt(Kt),np(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(Bu(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,oi!==null&&(Np(oi),oi=null))),bp(s,a),Yt(a),null;case 5:ep(a);var g=qs(Hl.current);if(u=a.type,s!==null&&a.stateNode!=null)pv(s,a,u,p,g),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return Yt(a),null}if(s=qs(Ii.current),Bu(a)){p=a.stateNode,u=a.type;var w=a.memoizedProps;switch(p[Si]=a,p[Fl]=w,s=(a.mode&1)!==0,u){case"dialog":it("cancel",p),it("close",p);break;case"iframe":case"object":case"embed":it("load",p);break;case"video":case"audio":for(g=0;g<Vl.length;g++)it(Vl[g],p);break;case"source":it("error",p);break;case"img":case"image":case"link":it("error",p),it("load",p);break;case"details":it("toggle",p);break;case"input":Ro(p,w),it("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},it("invalid",p);break;case"textarea":Do(p,w),it("invalid",p)}ml(u,w),g=null;for(var S in w)if(w.hasOwnProperty(S)){var D=w[S];S==="children"?typeof D=="string"?p.textContent!==D&&(w.suppressHydrationWarning!==!0&&Nu(p.textContent,D,s),g=["children",D]):typeof D=="number"&&p.textContent!==""+D&&(w.suppressHydrationWarning!==!0&&Nu(p.textContent,D,s),g=["children",""+D]):r.hasOwnProperty(S)&&D!=null&&S==="onScroll"&&it("scroll",p)}switch(u){case"input":qi(p),ru(p,w,!0);break;case"textarea":qi(p),ul(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=Du)}p=g,a.updateQueue=p,p!==null&&(a.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=It(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=S.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof p.is=="string"?s=S.createElement(u,{is:p.is}):(s=S.createElement(u),u==="select"&&(S=s,p.multiple?S.multiple=!0:p.size&&(S.size=p.size))):s=S.createElementNS(s,u),s[Si]=a,s[Fl]=p,fv(s,a,!1,!1),a.stateNode=s;e:{switch(S=gl(u,p),u){case"dialog":it("cancel",s),it("close",s),g=p;break;case"iframe":case"object":case"embed":it("load",s),g=p;break;case"video":case"audio":for(g=0;g<Vl.length;g++)it(Vl[g],s);g=p;break;case"source":it("error",s),g=p;break;case"img":case"image":case"link":it("error",s),it("load",s),g=p;break;case"details":it("toggle",s),g=p;break;case"input":Ro(s,p),g=Ss(s,p),it("invalid",s);break;case"option":g=p;break;case"select":s._wrapperState={wasMultiple:!!p.multiple},g=oe({},p,{value:void 0}),it("invalid",s);break;case"textarea":Do(s,p),g=cl(s,p),it("invalid",s);break;default:g=p}ml(u,g),D=g;for(w in D)if(D.hasOwnProperty(w)){var j=D[w];w==="style"?fl(s,j):w==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&hl(s,j)):w==="children"?typeof j=="string"?(u!=="textarea"||j!=="")&&Ar(s,j):typeof j=="number"&&Ar(s,""+j):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(r.hasOwnProperty(w)?j!=null&&w==="onScroll"&&it("scroll",s):j!=null&&z(s,w,j,S))}switch(u){case"input":qi(s),ru(s,p,!1);break;case"textarea":qi(s),ul(s);break;case"option":p.value!=null&&s.setAttribute("value",""+$e(p.value));break;case"select":s.multiple=!!p.multiple,w=p.value,w!=null?Gi(s,!!p.multiple,w,!1):p.defaultValue!=null&&Gi(s,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=Du)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Yt(a),null;case 6:if(s&&a.stateNode!=null)mv(s,a,s.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(u=qs(Hl.current),qs(Ii.current),Bu(a)){if(p=a.stateNode,u=a.memoizedProps,p[Si]=a,(w=p.nodeValue!==u)&&(s=An,s!==null))switch(s.tag){case 3:Nu(p.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Nu(p.nodeValue,u,(s.mode&1)!==0)}w&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Si]=a,a.stateNode=p}return Yt(a),null;case 13:if(rt(ut),p=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(lt&&Cn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)__(),da(),a.flags|=98560,w=!1;else if(w=Bu(a),p!==null&&p.dehydrated!==null){if(s===null){if(!w)throw Error(t(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Si]=a}else da(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Yt(a),w=!1}else oi!==null&&(Np(oi),oi=null),w=!0;if(!w)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(p=p!==null,p!==(s!==null&&s.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(ut.current&1)!==0?Pt===0&&(Pt=3):Op())),a.updateQueue!==null&&(a.flags|=4),Yt(a),null);case 4:return ga(),bp(s,a),s===null&&Ll(a.stateNode.containerInfo),Yt(a),null;case 10:return Yf(a.type._context),Yt(a),null;case 17:return pn(a.type)&&Ou(),Yt(a),null;case 19:if(rt(ut),w=a.memoizedState,w===null)return Yt(a),null;if(p=(a.flags&128)!==0,S=w.rendering,S===null)if(p)Yl(w,!1);else{if(Pt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(S=qu(s),S!==null){for(a.flags|=128,Yl(w,!1),p=S.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)w=u,s=p,w.flags&=14680066,S=w.alternate,S===null?(w.childLanes=0,w.lanes=s,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=S.childLanes,w.lanes=S.lanes,w.child=S.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=S.memoizedProps,w.memoizedState=S.memoizedState,w.updateQueue=S.updateQueue,w.type=S.type,s=S.dependencies,w.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return tt(ut,ut.current&1|2),a.child}s=s.sibling}w.tail!==null&&et()>wa&&(a.flags|=128,p=!0,Yl(w,!1),a.lanes=4194304)}else{if(!p)if(s=qu(S),s!==null){if(a.flags|=128,p=!0,u=s.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Yl(w,!0),w.tail===null&&w.tailMode==="hidden"&&!S.alternate&&!lt)return Yt(a),null}else 2*et()-w.renderingStartTime>wa&&u!==1073741824&&(a.flags|=128,p=!0,Yl(w,!1),a.lanes=4194304);w.isBackwards?(S.sibling=a.child,a.child=S):(u=w.last,u!==null?u.sibling=S:a.child=S,w.last=S)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=et(),a.sibling=null,u=ut.current,tt(ut,p?u&1|2:u&1),a):(Yt(a),null);case 22:case 23:return Mp(),p=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(Pn&1073741824)!==0&&(Yt(a),a.subtreeFlags&6&&(a.flags|=8192)):Yt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function GI(s,a){switch(Wf(a),a.tag){case 1:return pn(a.type)&&Ou(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ga(),rt(fn),rt(Kt),np(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return ep(a),null;case 13:if(rt(ut),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));da()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return rt(ut),null;case 4:return ga(),null;case 10:return Yf(a.type._context),null;case 22:case 23:return Mp(),null;case 24:return null;default:return null}}var th=!1,Qt=!1,YI=typeof WeakSet=="function"?WeakSet:Set,de=null;function _a(s,a){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){ft(s,a,p)}else u.current=null}function Ep(s,a,u){try{u()}catch(p){ft(s,a,p)}}var gv=!1;function QI(s,a){if(Mf=Vr,s=Gy(),If(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var g=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var S=0,D=-1,j=-1,G=0,te=0,ne=s,ee=null;t:for(;;){for(var ue;ne!==u||g!==0&&ne.nodeType!==3||(D=S+g),ne!==w||p!==0&&ne.nodeType!==3||(j=S+p),ne.nodeType===3&&(S+=ne.nodeValue.length),(ue=ne.firstChild)!==null;)ee=ne,ne=ue;for(;;){if(ne===s)break t;if(ee===u&&++G===g&&(D=S),ee===w&&++te===p&&(j=S),(ue=ne.nextSibling)!==null)break;ne=ee,ee=ne.parentNode}ne=ue}u=D===-1||j===-1?null:{start:D,end:j}}else u=null}u=u||{start:0,end:0}}else u=null;for(Of={focusedElem:s,selectionRange:u},Vr=!1,de=a;de!==null;)if(a=de,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,de=s;else for(;de!==null;){a=de;try{var fe=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var me=fe.memoizedProps,yt=fe.memoizedState,H=a.stateNode,B=H.getSnapshotBeforeUpdate(a.elementType===a.type?me:ai(a.type,me),yt);H.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var $=a.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){ft(a,a.return,re)}if(s=a.sibling,s!==null){s.return=a.return,de=s;break}de=a.return}return fe=gv,gv=!1,fe}function Ql(s,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&s)===s){var w=g.destroy;g.destroy=void 0,w!==void 0&&Ep(a,u,w)}g=g.next}while(g!==p)}}function nh(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&s)===s){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function xp(s){var a=s.ref;if(a!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof a=="function"?a(s):a.current=s}}function yv(s){var a=s.alternate;a!==null&&(s.alternate=null,yv(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Si],delete a[Fl],delete a[Ff],delete a[NI],delete a[DI])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function _v(s){return s.tag===5||s.tag===3||s.tag===4}function vv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||_v(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Tp(s,a,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(s,a):u.insertBefore(s,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(s,u)):(a=u,a.appendChild(s)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Du));else if(p!==4&&(s=s.child,s!==null))for(Tp(s,a,u),s=s.sibling;s!==null;)Tp(s,a,u),s=s.sibling}function Sp(s,a,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(p!==4&&(s=s.child,s!==null))for(Sp(s,a,u),s=s.sibling;s!==null;)Sp(s,a,u),s=s.sibling}var Ut=null,li=!1;function $r(s,a,u){for(u=u.child;u!==null;)wv(s,a,u),u=u.sibling}function wv(s,a,u){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(Ms,u)}catch{}switch(u.tag){case 5:Qt||_a(u,a);case 6:var p=Ut,g=li;Ut=null,$r(s,a,u),Ut=p,li=g,Ut!==null&&(li?(s=Ut,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Ut.removeChild(u.stateNode));break;case 18:Ut!==null&&(li?(s=Ut,u=u.stateNode,s.nodeType===8?jf(s.parentNode,u):s.nodeType===1&&jf(s,u),ii(s)):jf(Ut,u.stateNode));break;case 4:p=Ut,g=li,Ut=u.stateNode.containerInfo,li=!0,$r(s,a,u),Ut=p,li=g;break;case 0:case 11:case 14:case 15:if(!Qt&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var w=g,S=w.destroy;w=w.tag,S!==void 0&&((w&2)!==0||(w&4)!==0)&&Ep(u,a,S),g=g.next}while(g!==p)}$r(s,a,u);break;case 1:if(!Qt&&(_a(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(D){ft(u,a,D)}$r(s,a,u);break;case 21:$r(s,a,u);break;case 22:u.mode&1?(Qt=(p=Qt)||u.memoizedState!==null,$r(s,a,u),Qt=p):$r(s,a,u);break;default:$r(s,a,u)}}function bv(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new YI),a.forEach(function(p){var g=s1.bind(null,s,p);u.has(p)||(u.add(p),p.then(g,g))})}}function ci(s,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var g=u[p];try{var w=s,S=a,D=S;e:for(;D!==null;){switch(D.tag){case 5:Ut=D.stateNode,li=!1;break e;case 3:Ut=D.stateNode.containerInfo,li=!0;break e;case 4:Ut=D.stateNode.containerInfo,li=!0;break e}D=D.return}if(Ut===null)throw Error(t(160));wv(w,S,g),Ut=null,li=!1;var j=g.alternate;j!==null&&(j.return=null),g.return=null}catch(G){ft(g,a,G)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Ev(a,s),a=a.sibling}function Ev(s,a){var u=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ci(a,s),Ai(s),p&4){try{Ql(3,s,s.return),nh(3,s)}catch(me){ft(s,s.return,me)}try{Ql(5,s,s.return)}catch(me){ft(s,s.return,me)}}break;case 1:ci(a,s),Ai(s),p&512&&u!==null&&_a(u,u.return);break;case 5:if(ci(a,s),Ai(s),p&512&&u!==null&&_a(u,u.return),s.flags&32){var g=s.stateNode;try{Ar(g,"")}catch(me){ft(s,s.return,me)}}if(p&4&&(g=s.stateNode,g!=null)){var w=s.memoizedProps,S=u!==null?u.memoizedProps:w,D=s.type,j=s.updateQueue;if(s.updateQueue=null,j!==null)try{D==="input"&&w.type==="radio"&&w.name!=null&&al(g,w),gl(D,S);var G=gl(D,w);for(S=0;S<j.length;S+=2){var te=j[S],ne=j[S+1];te==="style"?fl(g,ne):te==="dangerouslySetInnerHTML"?hl(g,ne):te==="children"?Ar(g,ne):z(g,te,ne,G)}switch(D){case"input":ll(g,w);break;case"textarea":Mo(g,w);break;case"select":var ee=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!w.multiple;var ue=w.value;ue!=null?Gi(g,!!w.multiple,ue,!1):ee!==!!w.multiple&&(w.defaultValue!=null?Gi(g,!!w.multiple,w.defaultValue,!0):Gi(g,!!w.multiple,w.multiple?[]:"",!1))}g[Fl]=w}catch(me){ft(s,s.return,me)}}break;case 6:if(ci(a,s),Ai(s),p&4){if(s.stateNode===null)throw Error(t(162));g=s.stateNode,w=s.memoizedProps;try{g.nodeValue=w}catch(me){ft(s,s.return,me)}}break;case 3:if(ci(a,s),Ai(s),p&4&&u!==null&&u.memoizedState.isDehydrated)try{ii(a.containerInfo)}catch(me){ft(s,s.return,me)}break;case 4:ci(a,s),Ai(s);break;case 13:ci(a,s),Ai(s),g=s.child,g.flags&8192&&(w=g.memoizedState!==null,g.stateNode.isHidden=w,!w||g.alternate!==null&&g.alternate.memoizedState!==null||(Ap=et())),p&4&&bv(s);break;case 22:if(te=u!==null&&u.memoizedState!==null,s.mode&1?(Qt=(G=Qt)||te,ci(a,s),Qt=G):ci(a,s),Ai(s),p&8192){if(G=s.memoizedState!==null,(s.stateNode.isHidden=G)&&!te&&(s.mode&1)!==0)for(de=s,te=s.child;te!==null;){for(ne=de=te;de!==null;){switch(ee=de,ue=ee.child,ee.tag){case 0:case 11:case 14:case 15:Ql(4,ee,ee.return);break;case 1:_a(ee,ee.return);var fe=ee.stateNode;if(typeof fe.componentWillUnmount=="function"){p=ee,u=ee.return;try{a=p,fe.props=a.memoizedProps,fe.state=a.memoizedState,fe.componentWillUnmount()}catch(me){ft(p,u,me)}}break;case 5:_a(ee,ee.return);break;case 22:if(ee.memoizedState!==null){Sv(ne);continue}}ue!==null?(ue.return=ee,de=ue):Sv(ne)}te=te.sibling}e:for(te=null,ne=s;;){if(ne.tag===5){if(te===null){te=ne;try{g=ne.stateNode,G?(w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(D=ne.stateNode,j=ne.memoizedProps.style,S=j!=null&&j.hasOwnProperty("display")?j.display:null,D.style.display=dl("display",S))}catch(me){ft(s,s.return,me)}}}else if(ne.tag===6){if(te===null)try{ne.stateNode.nodeValue=G?"":ne.memoizedProps}catch(me){ft(s,s.return,me)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===s)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===s)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===s)break e;te===ne&&(te=null),ne=ne.return}te===ne&&(te=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:ci(a,s),Ai(s),p&4&&bv(s);break;case 21:break;default:ci(a,s),Ai(s)}}function Ai(s){var a=s.flags;if(a&2){try{e:{for(var u=s.return;u!==null;){if(_v(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&(Ar(g,""),p.flags&=-33);var w=vv(s);Sp(s,w,g);break;case 3:case 4:var S=p.stateNode.containerInfo,D=vv(s);Tp(s,D,S);break;default:throw Error(t(161))}}catch(j){ft(s,s.return,j)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function XI(s,a,u){de=s,xv(s)}function xv(s,a,u){for(var p=(s.mode&1)!==0;de!==null;){var g=de,w=g.child;if(g.tag===22&&p){var S=g.memoizedState!==null||th;if(!S){var D=g.alternate,j=D!==null&&D.memoizedState!==null||Qt;D=th;var G=Qt;if(th=S,(Qt=j)&&!G)for(de=g;de!==null;)S=de,j=S.child,S.tag===22&&S.memoizedState!==null?Iv(g):j!==null?(j.return=S,de=j):Iv(g);for(;w!==null;)de=w,xv(w),w=w.sibling;de=g,th=D,Qt=G}Tv(s)}else(g.subtreeFlags&8772)!==0&&w!==null?(w.return=g,de=w):Tv(s)}}function Tv(s){for(;de!==null;){var a=de;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Qt||nh(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!Qt)if(u===null)p.componentDidMount();else{var g=a.elementType===a.type?u.memoizedProps:ai(a.type,u.memoizedProps);p.componentDidUpdate(g,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=a.updateQueue;w!==null&&S_(a,w,p);break;case 3:var S=a.updateQueue;if(S!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}S_(a,S,u)}break;case 5:var D=a.stateNode;if(u===null&&a.flags&4){u=D;var j=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&u.focus();break;case"img":j.src&&(u.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var G=a.alternate;if(G!==null){var te=G.memoizedState;if(te!==null){var ne=te.dehydrated;ne!==null&&ii(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Qt||a.flags&512&&xp(a)}catch(ee){ft(a,a.return,ee)}}if(a===s){de=null;break}if(u=a.sibling,u!==null){u.return=a.return,de=u;break}de=a.return}}function Sv(s){for(;de!==null;){var a=de;if(a===s){de=null;break}var u=a.sibling;if(u!==null){u.return=a.return,de=u;break}de=a.return}}function Iv(s){for(;de!==null;){var a=de;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{nh(4,a)}catch(j){ft(a,u,j)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var g=a.return;try{p.componentDidMount()}catch(j){ft(a,g,j)}}var w=a.return;try{xp(a)}catch(j){ft(a,w,j)}break;case 5:var S=a.return;try{xp(a)}catch(j){ft(a,S,j)}}}catch(j){ft(a,a.return,j)}if(a===s){de=null;break}var D=a.sibling;if(D!==null){D.return=a.return,de=D;break}de=a.return}}var JI=Math.ceil,ih=q.ReactCurrentDispatcher,Ip=q.ReactCurrentOwner,zn=q.ReactCurrentBatchConfig,ze=0,Lt=null,bt=null,Wt=0,Pn=0,va=Br(0),Pt=0,Xl=null,Gs=0,rh=0,kp=0,Jl=null,gn=null,Ap=0,wa=1/0,cr=null,sh=!1,Cp=null,qr=null,oh=!1,Kr=null,ah=0,Zl=0,Pp=null,lh=-1,ch=0;function cn(){return(ze&6)!==0?et():lh!==-1?lh:lh=et()}function Gr(s){return(s.mode&1)===0?1:(ze&2)!==0&&Wt!==0?Wt&-Wt:OI.transition!==null?(ch===0&&(ch=Vs()),ch):(s=je,s!==0||(s=window.event,s=s===void 0?16:kl(s.type)),s)}function ui(s,a,u,p){if(50<Zl)throw Zl=0,Pp=null,Error(t(185));Nr(s,u,p),((ze&2)===0||s!==Lt)&&(s===Lt&&((ze&2)===0&&(rh|=u),Pt===4&&Yr(s,Wt)),yn(s,p),u===1&&ze===0&&(a.mode&1)===0&&(wa=et()+500,Lu&&Ur()))}function yn(s,a){var u=s.callbackNode;Xi(s,a);var p=Os(s,s===Lt?Wt:0);if(p===0)u!==null&&El(u),s.callbackNode=null,s.callbackPriority=0;else if(a=p&-p,s.callbackPriority!==a){if(u!=null&&El(u),a===1)s.tag===0?MI(Av.bind(null,s)):f_(Av.bind(null,s)),PI(function(){(ze&6)===0&&Ur()}),u=null;else{switch(Mr(p)){case 1:u=Ds;break;case 4:u=Cr;break;case 16:u=Mn;break;case 536870912:u=cu;break;default:u=Mn}u=Vv(u,kv.bind(null,s))}s.callbackPriority=a,s.callbackNode=u}}function kv(s,a){if(lh=-1,ch=0,(ze&6)!==0)throw Error(t(327));var u=s.callbackNode;if(ba()&&s.callbackNode!==u)return null;var p=Os(s,s===Lt?Wt:0);if(p===0)return null;if((p&30)!==0||(p&s.expiredLanes)!==0||a)a=uh(s,p);else{a=p;var g=ze;ze|=2;var w=Pv();(Lt!==s||Wt!==a)&&(cr=null,wa=et()+500,Qs(s,a));do try{t1();break}catch(D){Cv(s,D)}while(!0);Gf(),ih.current=w,ze=g,bt!==null?a=0:(Lt=null,Wt=0,a=Pt)}if(a!==0){if(a===2&&(g=Sn(s),g!==0&&(p=g,a=Rp(s,g))),a===1)throw u=Xl,Qs(s,0),Yr(s,p),yn(s,et()),u;if(a===6)Yr(s,p);else{if(g=s.current.alternate,(p&30)===0&&!ZI(g)&&(a=uh(s,p),a===2&&(w=Sn(s),w!==0&&(p=w,a=Rp(s,w))),a===1))throw u=Xl,Qs(s,0),Yr(s,p),yn(s,et()),u;switch(s.finishedWork=g,s.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:Xs(s,gn,cr);break;case 3:if(Yr(s,p),(p&130023424)===p&&(a=Ap+500-et(),10<a)){if(Os(s,0)!==0)break;if(g=s.suspendedLanes,(g&p)!==p){cn(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=Lf(Xs.bind(null,s,gn,cr),a);break}Xs(s,gn,cr);break;case 4:if(Yr(s,p),(p&4194240)===p)break;for(a=s.eventTimes,g=-1;0<p;){var S=31-on(p);w=1<<S,S=a[S],S>g&&(g=S),p&=~w}if(p=g,p=et()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*JI(p/1960))-p,10<p){s.timeoutHandle=Lf(Xs.bind(null,s,gn,cr),p);break}Xs(s,gn,cr);break;case 5:Xs(s,gn,cr);break;default:throw Error(t(329))}}}return yn(s,et()),s.callbackNode===u?kv.bind(null,s):null}function Rp(s,a){var u=Jl;return s.current.memoizedState.isDehydrated&&(Qs(s,a).flags|=256),s=uh(s,a),s!==2&&(a=gn,gn=u,a!==null&&Np(a)),s}function Np(s){gn===null?gn=s:gn.push.apply(gn,s)}function ZI(s){for(var a=s;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var g=u[p],w=g.getSnapshot;g=g.value;try{if(!si(w(),g))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Yr(s,a){for(a&=~kp,a&=~rh,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var u=31-on(a),p=1<<u;s[u]=-1,a&=~p}}function Av(s){if((ze&6)!==0)throw Error(t(327));ba();var a=Os(s,0);if((a&1)===0)return yn(s,et()),null;var u=uh(s,a);if(s.tag!==0&&u===2){var p=Sn(s);p!==0&&(a=p,u=Rp(s,p))}if(u===1)throw u=Xl,Qs(s,0),Yr(s,a),yn(s,et()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,Xs(s,gn,cr),yn(s,et()),null}function Dp(s,a){var u=ze;ze|=1;try{return s(a)}finally{ze=u,ze===0&&(wa=et()+500,Lu&&Ur())}}function Ys(s){Kr!==null&&Kr.tag===0&&(ze&6)===0&&ba();var a=ze;ze|=1;var u=zn.transition,p=je;try{if(zn.transition=null,je=1,s)return s()}finally{je=p,zn.transition=u,ze=a,(ze&6)===0&&Ur()}}function Mp(){Pn=va.current,rt(va)}function Qs(s,a){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,CI(u)),bt!==null)for(u=bt.return;u!==null;){var p=u;switch(Wf(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Ou();break;case 3:ga(),rt(fn),rt(Kt),np();break;case 5:ep(p);break;case 4:ga();break;case 13:rt(ut);break;case 19:rt(ut);break;case 10:Yf(p.type._context);break;case 22:case 23:Mp()}u=u.return}if(Lt=s,bt=s=Qr(s.current,null),Wt=Pn=a,Pt=0,Xl=null,kp=rh=Gs=0,gn=Jl=null,$s!==null){for(a=0;a<$s.length;a++)if(u=$s[a],p=u.interleaved,p!==null){u.interleaved=null;var g=p.next,w=u.pending;if(w!==null){var S=w.next;w.next=g,p.next=S}u.pending=p}$s=null}return s}function Cv(s,a){do{var u=bt;try{if(Gf(),Ku.current=Xu,Gu){for(var p=ht.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}Gu=!1}if(Ks=0,Vt=Ct=ht=null,$l=!1,ql=0,Ip.current=null,u===null||u.return===null){Pt=1,Xl=a,bt=null;break}e:{var w=s,S=u.return,D=u,j=a;if(a=Wt,D.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var G=j,te=D,ne=te.tag;if((te.mode&1)===0&&(ne===0||ne===11||ne===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var ue=ev(S);if(ue!==null){ue.flags&=-257,tv(ue,S,D,w,a),ue.mode&1&&Z_(w,G,a),a=ue,j=G;var fe=a.updateQueue;if(fe===null){var me=new Set;me.add(j),a.updateQueue=me}else fe.add(j);break e}else{if((a&1)===0){Z_(w,G,a),Op();break e}j=Error(t(426))}}else if(lt&&D.mode&1){var yt=ev(S);if(yt!==null){(yt.flags&65536)===0&&(yt.flags|=256),tv(yt,S,D,w,a),qf(ya(j,D));break e}}w=j=ya(j,D),Pt!==4&&(Pt=2),Jl===null?Jl=[w]:Jl.push(w),w=S;do{switch(w.tag){case 3:w.flags|=65536,a&=-a,w.lanes|=a;var H=X_(w,j,a);T_(w,H);break e;case 1:D=j;var B=w.type,$=w.stateNode;if((w.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(qr===null||!qr.has($)))){w.flags|=65536,a&=-a,w.lanes|=a;var re=J_(w,D,a);T_(w,re);break e}}w=w.return}while(w!==null)}Nv(u)}catch(ye){a=ye,bt===u&&u!==null&&(bt=u=u.return);continue}break}while(!0)}function Pv(){var s=ih.current;return ih.current=Xu,s===null?Xu:s}function Op(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Lt===null||(Gs&268435455)===0&&(rh&268435455)===0||Yr(Lt,Wt)}function uh(s,a){var u=ze;ze|=2;var p=Pv();(Lt!==s||Wt!==a)&&(cr=null,Qs(s,a));do try{e1();break}catch(g){Cv(s,g)}while(!0);if(Gf(),ze=u,ih.current=p,bt!==null)throw Error(t(261));return Lt=null,Wt=0,Pt}function e1(){for(;bt!==null;)Rv(bt)}function t1(){for(;bt!==null&&!au();)Rv(bt)}function Rv(s){var a=Ov(s.alternate,s,Pn);s.memoizedProps=s.pendingProps,a===null?Nv(s):bt=a,Ip.current=null}function Nv(s){var a=s;do{var u=a.alternate;if(s=a.return,(a.flags&32768)===0){if(u=KI(u,a,Pn),u!==null){bt=u;return}}else{if(u=GI(u,a),u!==null){u.flags&=32767,bt=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Pt=6,bt=null;return}}if(a=a.sibling,a!==null){bt=a;return}bt=a=s}while(a!==null);Pt===0&&(Pt=5)}function Xs(s,a,u){var p=je,g=zn.transition;try{zn.transition=null,je=1,n1(s,a,u,p)}finally{zn.transition=g,je=p}return null}function n1(s,a,u,p){do ba();while(Kr!==null);if((ze&6)!==0)throw Error(t(327));u=s.finishedWork;var g=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var w=u.lanes|u.childLanes;if(Je(s,w),s===Lt&&(bt=Lt=null,Wt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||oh||(oh=!0,Vv(Mn,function(){return ba(),null})),w=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||w){w=zn.transition,zn.transition=null;var S=je;je=1;var D=ze;ze|=4,Ip.current=null,QI(s,u),Ev(u,s),EI(Of),Vr=!!Mf,Of=Mf=null,s.current=u,XI(u),_f(),ze=D,je=S,zn.transition=w}else s.current=u;if(oh&&(oh=!1,Kr=s,ah=g),w=s.pendingLanes,w===0&&(qr=null),uu(u.stateNode),yn(s,et()),a!==null)for(p=s.onRecoverableError,u=0;u<a.length;u++)g=a[u],p(g.value,{componentStack:g.stack,digest:g.digest});if(sh)throw sh=!1,s=Cp,Cp=null,s;return(ah&1)!==0&&s.tag!==0&&ba(),w=s.pendingLanes,(w&1)!==0?s===Pp?Zl++:(Zl=0,Pp=s):Zl=0,Ur(),null}function ba(){if(Kr!==null){var s=Mr(ah),a=zn.transition,u=je;try{if(zn.transition=null,je=16>s?16:s,Kr===null)var p=!1;else{if(s=Kr,Kr=null,ah=0,(ze&6)!==0)throw Error(t(331));var g=ze;for(ze|=4,de=s.current;de!==null;){var w=de,S=w.child;if((de.flags&16)!==0){var D=w.deletions;if(D!==null){for(var j=0;j<D.length;j++){var G=D[j];for(de=G;de!==null;){var te=de;switch(te.tag){case 0:case 11:case 15:Ql(8,te,w)}var ne=te.child;if(ne!==null)ne.return=te,de=ne;else for(;de!==null;){te=de;var ee=te.sibling,ue=te.return;if(yv(te),te===G){de=null;break}if(ee!==null){ee.return=ue,de=ee;break}de=ue}}}var fe=w.alternate;if(fe!==null){var me=fe.child;if(me!==null){fe.child=null;do{var yt=me.sibling;me.sibling=null,me=yt}while(me!==null)}}de=w}}if((w.subtreeFlags&2064)!==0&&S!==null)S.return=w,de=S;else e:for(;de!==null;){if(w=de,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Ql(9,w,w.return)}var H=w.sibling;if(H!==null){H.return=w.return,de=H;break e}de=w.return}}var B=s.current;for(de=B;de!==null;){S=de;var $=S.child;if((S.subtreeFlags&2064)!==0&&$!==null)$.return=S,de=$;else e:for(S=B;de!==null;){if(D=de,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:nh(9,D)}}catch(ye){ft(D,D.return,ye)}if(D===S){de=null;break e}var re=D.sibling;if(re!==null){re.return=D.return,de=re;break e}de=D.return}}if(ze=g,Ur(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(Ms,s)}catch{}p=!0}return p}finally{je=u,zn.transition=a}}return!1}function Dv(s,a,u){a=ya(u,a),a=X_(s,a,1),s=Hr(s,a,1),a=cn(),s!==null&&(Nr(s,1,a),yn(s,a))}function ft(s,a,u){if(s.tag===3)Dv(s,s,u);else for(;a!==null;){if(a.tag===3){Dv(a,s,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(qr===null||!qr.has(p))){s=ya(u,s),s=J_(a,s,1),a=Hr(a,s,1),s=cn(),a!==null&&(Nr(a,1,s),yn(a,s));break}}a=a.return}}function i1(s,a,u){var p=s.pingCache;p!==null&&p.delete(a),a=cn(),s.pingedLanes|=s.suspendedLanes&u,Lt===s&&(Wt&u)===u&&(Pt===4||Pt===3&&(Wt&130023424)===Wt&&500>et()-Ap?Qs(s,0):kp|=u),yn(s,a)}function Mv(s,a){a===0&&((s.mode&1)===0?a=1:(a=Ho,Ho<<=1,(Ho&130023424)===0&&(Ho=4194304)));var u=cn();s=or(s,a),s!==null&&(Nr(s,a,u),yn(s,u))}function r1(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),Mv(s,u)}function s1(s,a){var u=0;switch(s.tag){case 13:var p=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:p=s.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),Mv(s,u)}var Ov;Ov=function(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps||fn.current)mn=!0;else{if((s.lanes&u)===0&&(a.flags&128)===0)return mn=!1,qI(s,a,u);mn=(s.flags&131072)!==0}else mn=!1,lt&&(a.flags&1048576)!==0&&p_(a,Fu,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;eh(s,a),s=a.pendingProps;var g=ca(a,Kt.current);ma(a,u),g=sp(null,a,p,s,g,u);var w=op();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,pn(p)?(w=!0,Vu(a)):w=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Jf(a),g.updater=Ju,a.stateNode=g,g._reactInternals=a,dp(a,p,s,u),a=gp(null,a,p,!0,w,u)):(a.tag=0,lt&&w&&Uf(a),ln(null,a,g,u),a=a.child),a;case 16:p=a.elementType;e:{switch(eh(s,a),s=a.pendingProps,g=p._init,p=g(p._payload),a.type=p,g=a.tag=a1(p),s=ai(p,s),g){case 0:a=mp(null,a,p,s,u);break e;case 1:a=av(null,a,p,s,u);break e;case 11:a=nv(null,a,p,s,u);break e;case 14:a=iv(null,a,p,ai(p.type,s),u);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:ai(p,g),mp(s,a,p,g,u);case 1:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:ai(p,g),av(s,a,p,g,u);case 3:e:{if(lv(a),s===null)throw Error(t(387));p=a.pendingProps,w=a.memoizedState,g=w.element,x_(s,a),$u(a,p,null,u);var S=a.memoizedState;if(p=S.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){g=ya(Error(t(423)),a),a=cv(s,a,p,u,g);break e}else if(p!==g){g=ya(Error(t(424)),a),a=cv(s,a,p,u,g);break e}else for(Cn=Fr(a.stateNode.containerInfo.firstChild),An=a,lt=!0,oi=null,u=b_(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(da(),p===g){a=lr(s,a,u);break e}ln(s,a,p,u)}a=a.child}return a;case 5:return I_(a),s===null&&$f(a),p=a.type,g=a.pendingProps,w=s!==null?s.memoizedProps:null,S=g.children,Vf(p,g)?S=null:w!==null&&Vf(p,w)&&(a.flags|=32),ov(s,a),ln(s,a,S,u),a.child;case 6:return s===null&&$f(a),null;case 13:return uv(s,a,u);case 4:return Zf(a,a.stateNode.containerInfo),p=a.pendingProps,s===null?a.child=fa(a,null,p,u):ln(s,a,p,u),a.child;case 11:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:ai(p,g),nv(s,a,p,g,u);case 7:return ln(s,a,a.pendingProps,u),a.child;case 8:return ln(s,a,a.pendingProps.children,u),a.child;case 12:return ln(s,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,g=a.pendingProps,w=a.memoizedProps,S=g.value,tt(Uu,p._currentValue),p._currentValue=S,w!==null)if(si(w.value,S)){if(w.children===g.children&&!fn.current){a=lr(s,a,u);break e}}else for(w=a.child,w!==null&&(w.return=a);w!==null;){var D=w.dependencies;if(D!==null){S=w.child;for(var j=D.firstContext;j!==null;){if(j.context===p){if(w.tag===1){j=ar(-1,u&-u),j.tag=2;var G=w.updateQueue;if(G!==null){G=G.shared;var te=G.pending;te===null?j.next=j:(j.next=te.next,te.next=j),G.pending=j}}w.lanes|=u,j=w.alternate,j!==null&&(j.lanes|=u),Qf(w.return,u,a),D.lanes|=u;break}j=j.next}}else if(w.tag===10)S=w.type===a.type?null:w.child;else if(w.tag===18){if(S=w.return,S===null)throw Error(t(341));S.lanes|=u,D=S.alternate,D!==null&&(D.lanes|=u),Qf(S,u,a),S=w.sibling}else S=w.child;if(S!==null)S.return=w;else for(S=w;S!==null;){if(S===a){S=null;break}if(w=S.sibling,w!==null){w.return=S.return,S=w;break}S=S.return}w=S}ln(s,a,g.children,u),a=a.child}return a;case 9:return g=a.type,p=a.pendingProps.children,ma(a,u),g=Fn(g),p=p(g),a.flags|=1,ln(s,a,p,u),a.child;case 14:return p=a.type,g=ai(p,a.pendingProps),g=ai(p.type,g),iv(s,a,p,g,u);case 15:return rv(s,a,a.type,a.pendingProps,u);case 17:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:ai(p,g),eh(s,a),a.tag=1,pn(p)?(s=!0,Vu(a)):s=!1,ma(a,u),Y_(a,p,g),dp(a,p,g,u),gp(null,a,p,!0,s,u);case 19:return dv(s,a,u);case 22:return sv(s,a,u)}throw Error(t(156,a.tag))};function Vv(s,a){return Uo(s,a)}function o1(s,a,u,p){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(s,a,u,p){return new o1(s,a,u,p)}function Vp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function a1(s){if(typeof s=="function")return Vp(s)?1:0;if(s!=null){if(s=s.$$typeof,s===F)return 11;if(s===Ie)return 14}return 2}function Qr(s,a){var u=s.alternate;return u===null?(u=Un(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function hh(s,a,u,p,g,w){var S=2;if(p=s,typeof s=="function")Vp(s)&&(S=1);else if(typeof s=="string")S=5;else e:switch(s){case P:return Js(u.children,g,w,a);case C:S=8,g|=8;break;case R:return s=Un(12,u,a,g|2),s.elementType=R,s.lanes=w,s;case M:return s=Un(13,u,a,g),s.elementType=M,s.lanes=w,s;case Le:return s=Un(19,u,a,g),s.elementType=Le,s.lanes=w,s;case be:return dh(u,g,w,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case O:S=10;break e;case L:S=9;break e;case F:S=11;break e;case Ie:S=14;break e;case Re:S=16,p=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=Un(S,u,a,g),a.elementType=s,a.type=p,a.lanes=w,a}function Js(s,a,u,p){return s=Un(7,s,p,a),s.lanes=u,s}function dh(s,a,u,p){return s=Un(22,s,p,a),s.elementType=be,s.lanes=u,s.stateNode={isHidden:!1},s}function Lp(s,a,u){return s=Un(6,s,null,a),s.lanes=u,s}function jp(s,a,u){return a=Un(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function l1(s,a,u,p,g){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rr(0),this.expirationTimes=Rr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rr(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Fp(s,a,u,p,g,w,S,D,j){return s=new l1(s,a,u,D,j),a===1?(a=1,w===!0&&(a|=8)):a=0,w=Un(3,null,null,a),s.current=w,w.stateNode=s,w.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jf(w),s}function c1(s,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:p==null?null:""+p,children:s,containerInfo:a,implementation:u}}function Lv(s){if(!s)return zr;s=s._reactInternals;e:{if(Jn(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(pn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(pn(u))return h_(s,u,a)}return a}function jv(s,a,u,p,g,w,S,D,j){return s=Fp(u,p,!0,s,g,w,S,D,j),s.context=Lv(null),u=s.current,p=cn(),g=Gr(u),w=ar(p,g),w.callback=a??null,Hr(u,w,g),s.current.lanes=g,Nr(s,g,p),yn(s,p),s}function fh(s,a,u,p){var g=a.current,w=cn(),S=Gr(g);return u=Lv(u),a.context===null?a.context=u:a.pendingContext=u,a=ar(w,S),a.payload={element:s},p=p===void 0?null:p,p!==null&&(a.callback=p),s=Hr(g,a,S),s!==null&&(ui(s,g,S,w),Hu(s,g,S)),S}function ph(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Fv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function Bp(s,a){Fv(s,a),(s=s.alternate)&&Fv(s,a)}function u1(){return null}var Bv=typeof reportError=="function"?reportError:function(s){console.error(s)};function zp(s){this._internalRoot=s}mh.prototype.render=zp.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));fh(s,a,null,null)},mh.prototype.unmount=zp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Ys(function(){fh(null,s,null,null)}),a[nr]=null}};function mh(s){this._internalRoot=s}mh.prototype.unstable_scheduleHydration=function(s){if(s){var a=mu();s={blockedOn:null,target:s,priority:a};for(var u=0;u<bi.length&&a!==0&&a<bi[u].priority;u++);bi.splice(u,0,s),u===0&&_u(s)}};function Up(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function gh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function zv(){}function h1(s,a,u,p,g){if(g){if(typeof p=="function"){var w=p;p=function(){var G=ph(S);w.call(G)}}var S=jv(a,p,s,0,null,!1,!1,"",zv);return s._reactRootContainer=S,s[nr]=S.current,Ll(s.nodeType===8?s.parentNode:s),Ys(),S}for(;g=s.lastChild;)s.removeChild(g);if(typeof p=="function"){var D=p;p=function(){var G=ph(j);D.call(G)}}var j=Fp(s,0,!1,null,null,!1,!1,"",zv);return s._reactRootContainer=j,s[nr]=j.current,Ll(s.nodeType===8?s.parentNode:s),Ys(function(){fh(a,j,u,p)}),j}function yh(s,a,u,p,g){var w=u._reactRootContainer;if(w){var S=w;if(typeof g=="function"){var D=g;g=function(){var j=ph(S);D.call(j)}}fh(a,S,s,g)}else S=h1(u,a,s,g,p);return ph(S)}fu=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var u=Pr(a.pendingLanes);u!==0&&(Dr(a,u|1),yn(a,et()),(ze&6)===0&&(wa=et()+500,Ur()))}break;case 13:Ys(function(){var p=or(s,1);if(p!==null){var g=cn();ui(p,s,1,g)}}),Bp(s,1)}},$o=function(s){if(s.tag===13){var a=or(s,134217728);if(a!==null){var u=cn();ui(a,s,134217728,u)}Bp(s,134217728)}},pu=function(s){if(s.tag===13){var a=Gr(s),u=or(s,a);if(u!==null){var p=cn();ui(u,s,a,p)}Bp(s,a)}},mu=function(){return je},gu=function(s,a){var u=je;try{return je=s,a()}finally{je=u}},Vo=function(s,a,u){switch(a){case"input":if(ll(s,u),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==s&&p.form===s.form){var g=Mu(p);if(!g)throw Error(t(90));Po(p),ll(p,g)}}}break;case"textarea":Mo(s,u);break;case"select":a=u.value,a!=null&&Gi(s,!!u.multiple,a,!1)}},Cs=Dp,_l=Ys;var d1={usingClientEntryPoint:!1,Events:[Bl,aa,Mu,vi,yl,Dp]},ec={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},f1={bundleType:ec.bundleType,version:ec.version,rendererPackageName:ec.rendererPackageName,rendererConfig:ec.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=bl(s),s===null?null:s.stateNode},findFiberByHostInstance:ec.findFiberByHostInstance||u1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_h.isDisabled&&_h.supportsFiber)try{Ms=_h.inject(f1),Tn=_h}catch{}}return _n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d1,_n.createPortal=function(s,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Up(a))throw Error(t(200));return c1(s,a,null,u)},_n.createRoot=function(s,a){if(!Up(s))throw Error(t(299));var u=!1,p="",g=Bv;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=Fp(s,1,!1,null,null,u,!1,p,g),s[nr]=a.current,Ll(s.nodeType===8?s.parentNode:s),new zp(a)},_n.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=bl(a),s=s===null?null:s.stateNode,s},_n.flushSync=function(s){return Ys(s)},_n.hydrate=function(s,a,u){if(!gh(a))throw Error(t(200));return yh(null,s,a,!0,u)},_n.hydrateRoot=function(s,a,u){if(!Up(s))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,g=!1,w="",S=Bv;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),a=jv(a,null,s,1,u??null,g,!1,w,S),s[nr]=a.current,Ll(s),p)for(s=0;s<p.length;s++)u=p[s],g=u._getVersion,g=g(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,g]:a.mutableSourceEagerHydrationData.push(u,g);return new mh(a)},_n.render=function(s,a,u){if(!gh(a))throw Error(t(200));return yh(null,s,a,!1,u)},_n.unmountComponentAtNode=function(s){if(!gh(s))throw Error(t(40));return s._reactRootContainer?(Ys(function(){yh(null,null,s,!1,function(){s._reactRootContainer=null,s[nr]=null})}),!0):!1},_n.unstable_batchedUpdates=Dp,_n.unstable_renderSubtreeIntoContainer=function(s,a,u,p){if(!gh(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return yh(s,a,u,!1,p)},_n.version="18.3.1-next-f1338f8080-20240426",_n}var Yv;function x1(){if(Yv)return $p.exports;Yv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$p.exports=E1(),$p.exports}var Qv;function T1(){if(Qv)return vh;Qv=1;var n=x1();return vh.createRoot=n.createRoot,vh.hydrateRoot=n.hydrateRoot,vh}var S1=T1();const I1=oE(S1),k1=()=>{};var Xv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},A1=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[t++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[t++],l=n[t++],c=n[t++],h=((r&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},cE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],l=r+1<n.length,c=l?n[r+1]:0,h=r+2<n.length,f=h?n[r+2]:0,m=o>>2,_=(o&3)<<4|c>>4;let y=(c&15)<<2|f>>6,x=f&63;h||(x=64,l||(y=64)),i.push(t[m],t[_],t[y],t[x])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(lE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):A1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;const f=r<n.length?t[n.charAt(r)]:64;++r;const _=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||c==null||f==null||_==null)throw new C1;const y=o<<2|c>>4;if(i.push(y),f!==64){const x=c<<4&240|f>>2;if(i.push(x),_!==64){const T=f<<6&192|_;i.push(T)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class C1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const P1=function(n){const e=lE(n);return cE.encodeByteArray(e,!0)},id=function(n){return P1(n).replace(/\./g,"")},uE=function(n){try{return cE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=()=>R1().__FIREBASE_DEFAULTS__,D1=()=>{if(typeof process>"u"||typeof Xv>"u")return;const n=Xv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},M1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&uE(n[1]);return e&&JSON.parse(e)},Vd=()=>{try{return k1()||N1()||D1()||M1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},hE=n=>{var e,t;return(t=(e=Vd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},O1=n=>{const e=hE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},dE=()=>{var n;return(n=Vd())===null||n===void 0?void 0:n.config},fE=n=>{var e;return(e=Vd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[id(JSON.stringify(t)),id(JSON.stringify(l)),""].join(".")}const yc={};function j1(){const n={prod:[],emulator:[]};for(const e of Object.keys(yc))yc[e]?n.emulator.push(e):n.prod.push(e);return n}function F1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Jv=!1;function mE(n,e){if(typeof window>"u"||typeof document>"u"||!Ga(window.location.host)||yc[n]===e||yc[n]||Jv)return;yc[n]=e;function t(y){return`__firebase__banner__${y}`}const i="__firebase__banner",o=j1().prod.length>0;function l(){const y=document.getElementById(i);y&&y.remove()}function c(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function h(y,x){y.setAttribute("width","24"),y.setAttribute("id",x),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function f(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{Jv=!0,l()},y}function m(y,x){y.setAttribute("id",x),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function _(){const y=F1(i),x=t("text"),T=document.getElementById(x)||document.createElement("span"),k=t("learnmore"),I=document.getElementById(k)||document.createElement("a"),N=t("preprendIcon"),V=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const z=y.element;c(z),m(I,k);const q=f();h(V,N),z.append(V,T,I,q),document.body.appendChild(z)}o?(T.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function B1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function z1(){var n;const e=(n=Vd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function U1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function W1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function H1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $1(){const n=sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function q1(){return!z1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gE(){try{return typeof indexedDB=="object"}catch{return!1}}function yE(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function K1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="FirebaseError";class $i extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=G1,Object.setPrototypeOf(this,$i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,So.prototype.create)}}class So{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?Y1(o,i):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new $i(r,c,i)}}function Y1(n,e){return n.replace(Q1,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Q1=/\{\$([^}]+)}/g;function X1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function fs(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const o=n[r],l=e[r];if(Zv(o)&&Zv(l)){if(!fs(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function Zv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function J1(n,e){const t=new Z1(n,e);return t.subscribe.bind(t)}class Z1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");ek(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Gp),r.error===void 0&&(r.error=Gp),r.complete===void 0&&(r.complete=Gp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ek(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Gp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(n){return n&&n._delegate?n._delegate:n}class mi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new V1;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ik(e))try{this.getOrInitializeService({instanceIdentifier:no})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=no){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=no){return this.instances.has(e)}getOptions(e=no){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&l.resolve(r)}return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:nk(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=no){return this.component?this.component.multipleInstances?e:no:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nk(n){return n===no?void 0:n}function ik(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Oe||(Oe={}));const sk={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},ok=Oe.INFO,ak={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},lk=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=ak[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cg{constructor(e){this.name=e,this._logLevel=ok,this._logHandler=lk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const ck=(n,e)=>e.some(t=>n instanceof t);let e0,t0;function uk(){return e0||(e0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hk(){return t0||(t0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _E=new WeakMap,xm=new WeakMap,vE=new WeakMap,Yp=new WeakMap,ug=new WeakMap;function dk(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(vr(n.result)),r()},l=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&_E.set(t,n)}).catch(()=>{}),ug.set(e,n),e}function fk(n){if(xm.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),r()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});xm.set(n,e)}let Tm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function pk(n){Tm=n(Tm)}function mk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Qp(this),e,...t);return vE.set(i,e.sort?e.sort():[e]),vr(i)}:hk().includes(n)?function(...e){return n.apply(Qp(this),e),vr(_E.get(this))}:function(...e){return vr(n.apply(Qp(this),e))}}function gk(n){return typeof n=="function"?mk(n):(n instanceof IDBTransaction&&fk(n),ck(n,uk())?new Proxy(n,Tm):n)}function vr(n){if(n instanceof IDBRequest)return dk(n);if(Yp.has(n))return Yp.get(n);const e=gk(n);return e!==n&&(Yp.set(n,e),ug.set(e,n)),e}const Qp=n=>ug.get(n);function Ld(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(n,e),c=vr(l);return i&&l.addEventListener("upgradeneeded",h=>{i(vr(l.result),h.oldVersion,h.newVersion,vr(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}function Xp(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",i=>e(i.oldVersion,i)),vr(t).then(()=>{})}const yk=["get","getKey","getAll","getAllKeys","count"],_k=["put","add","delete","clear"],Jp=new Map;function n0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Jp.get(e))return Jp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=_k.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||yk.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),r&&h.done]))[0]};return Jp.set(e,o),o}pk(n=>({...n,get:(e,t,i)=>n0(e,t)||n.get(e,t,i),has:(e,t)=>!!n0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(wk(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function wk(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sm="@firebase/app",i0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new cg("@firebase/app"),bk="@firebase/app-compat",Ek="@firebase/analytics-compat",xk="@firebase/analytics",Tk="@firebase/app-check-compat",Sk="@firebase/app-check",Ik="@firebase/auth",kk="@firebase/auth-compat",Ak="@firebase/database",Ck="@firebase/data-connect",Pk="@firebase/database-compat",Rk="@firebase/functions",Nk="@firebase/functions-compat",Dk="@firebase/installations",Mk="@firebase/installations-compat",Ok="@firebase/messaging",Vk="@firebase/messaging-compat",Lk="@firebase/performance",jk="@firebase/performance-compat",Fk="@firebase/remote-config",Bk="@firebase/remote-config-compat",zk="@firebase/storage",Uk="@firebase/storage-compat",Wk="@firebase/firestore",Hk="@firebase/ai",$k="@firebase/firestore-compat",qk="firebase",Kk="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="[DEFAULT]",Gk={[Sm]:"fire-core",[bk]:"fire-core-compat",[xk]:"fire-analytics",[Ek]:"fire-analytics-compat",[Sk]:"fire-app-check",[Tk]:"fire-app-check-compat",[Ik]:"fire-auth",[kk]:"fire-auth-compat",[Ak]:"fire-rtdb",[Ck]:"fire-data-connect",[Pk]:"fire-rtdb-compat",[Rk]:"fire-fn",[Nk]:"fire-fn-compat",[Dk]:"fire-iid",[Mk]:"fire-iid-compat",[Ok]:"fire-fcm",[Vk]:"fire-fcm-compat",[Lk]:"fire-perf",[jk]:"fire-perf-compat",[Fk]:"fire-rc",[Bk]:"fire-rc-compat",[zk]:"fire-gcs",[Uk]:"fire-gcs-compat",[Wk]:"fire-fst",[$k]:"fire-fst-compat",[Hk]:"fire-vertex","fire-js":"fire-js",[qk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd=new Map,Yk=new Map,km=new Map;function r0(n,e){try{n.container.addComponent(e)}catch(t){br.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ui(n){const e=n.name;if(km.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;km.set(e,n);for(const t of rd.values())r0(t,n);for(const t of Yk.values())r0(t,n);return!0}function Ya(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function di(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cs=new So("app","Firebase",Qk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new mi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=Kk;function wE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Im,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw cs.create("bad-app-name",{appName:String(r)});if(t||(t=dE()),!t)throw cs.create("no-options");const o=rd.get(r);if(o){if(fs(t,o.options)&&fs(i,o.config))return o;throw cs.create("duplicate-app",{appName:r})}const l=new rk(r);for(const h of km.values())l.addComponent(h);const c=new Xk(t,i,l);return rd.set(r,c),c}function hg(n=Im){const e=rd.get(n);if(!e&&n===Im&&dE())return wE();if(!e)throw cs.create("no-app",{appName:n});return e}function qn(n,e,t){var i;let r=(i=Gk[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(c.join(" "));return}Ui(new mi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="firebase-heartbeat-database",Zk=1,kc="firebase-heartbeat-store";let Zp=null;function bE(){return Zp||(Zp=Ld(Jk,Zk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(kc)}catch(t){console.warn(t)}}}}).catch(n=>{throw cs.create("idb-open",{originalErrorMessage:n.message})})),Zp}async function eA(n){try{const t=(await bE()).transaction(kc),i=await t.objectStore(kc).get(EE(n));return await t.done,i}catch(e){if(e instanceof $i)br.warn(e.message);else{const t=cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});br.warn(t.message)}}}async function s0(n,e){try{const i=(await bE()).transaction(kc,"readwrite");await i.objectStore(kc).put(e,EE(n)),await i.done}catch(t){if(t instanceof $i)br.warn(t.message);else{const i=cs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});br.warn(i.message)}}}function EE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=1024,nA=30;class iA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sA(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=o0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>nA){const l=oA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){br.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=o0(),{heartbeatsToSend:i,unsentEntries:r}=rA(this._heartbeatsCache.heartbeats),o=id(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return br.warn(t),""}}}function o0(){return new Date().toISOString().substring(0,10)}function rA(n,e=tA){const t=[];let i=n.slice();for(const r of n){const o=t.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),a0(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),a0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class sA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gE()?yE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return s0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return s0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function a0(n){return id(JSON.stringify({version:2,heartbeats:n})).length}function oA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(n){Ui(new mi("platform-logger",e=>new vk(e),"PRIVATE")),Ui(new mi("heartbeat",e=>new iA(e),"PRIVATE")),qn(Sm,i0,n),qn(Sm,i0,"esm2017"),qn("fire-js","")}aA("");function dg(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function xE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lA=xE,TE=new So("auth","Firebase",xE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=new cg("@firebase/auth");function cA(n,...e){sd.logLevel<=Oe.WARN&&sd.warn(`Auth (${Qa}): ${n}`,...e)}function Bh(n,...e){sd.logLevel<=Oe.ERROR&&sd.error(`Auth (${Qa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(n,...e){throw pg(n,...e)}function pi(n,...e){return pg(n,...e)}function fg(n,e,t){const i=Object.assign(Object.assign({},lA()),{[e]:t});return new So("auth","Firebase",i).create(e,{appName:n.name})}function uo(n){return fg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uA(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Wi(n,"argument-error"),fg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pg(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return TE.create(n,...e)}function Se(n,e,...t){if(!n)throw pg(e,...t)}function gr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Bh(e),new Error(e)}function Er(n,e){n||gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function hA(){return l0()==="http:"||l0()==="https:"}function l0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hA()||W1()||"connection"in navigator)?navigator.onLine:!0}function fA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Er(t>e,"Short delay should be less than long delay!"),this.isMobile=B1()||H1()}get(){return dA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(n,e){Er(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gA=new Kc(3e4,6e4);function gg(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Xa(n,e,t,i,r={}){return IE(n,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const c=qc(Object.assign({key:n.config.apiKey},l)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:h},o);return U1()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Ga(n.emulatorConfig.host)&&(f.credentials="include"),SE.fetch()(await kE(n,n.config.apiHost,t,c),f)})}async function IE(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},pA),e);try{const r=new _A(n),o=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw wh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,f]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw wh(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw wh(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw wh(n,"user-disabled",l);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw fg(n,m,f);Wi(n,m)}}catch(r){if(r instanceof $i)throw r;Wi(n,"network-request-failed",{message:String(r)})}}async function yA(n,e,t,i,r={}){const o=await Xa(n,e,t,i,r);return"mfaPendingCredential"in o&&Wi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function kE(n,e,t,i){const r=`${e}${t}?${i}`,o=n,l=o.config.emulator?mg(n.config,r):`${n.config.apiScheme}://${r}`;return mA.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}class _A{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(pi(this.auth,"network-request-failed")),gA.get())})}}function wh(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=pi(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vA(n,e){return Xa(n,"POST","/v1/accounts:delete",e)}async function od(n,e){return Xa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wA(n,e=!1){const t=St(n),i=await t.getIdToken(e),r=yg(i);Se(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:_c(em(r.auth_time)),issuedAtTime:_c(em(r.iat)),expirationTime:_c(em(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function em(n){return Number(n)*1e3}function yg(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Bh("JWT malformed, contained fewer than 3 sections"),null;try{const r=uE(t);return r?JSON.parse(r):(Bh("Failed to decode base64 JWT payload"),null)}catch(r){return Bh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function c0(n){const e=yg(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof $i&&bA(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function bA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_c(this.lastLoginAt),this.creationTime=_c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(n){var e;const t=n.auth,i=await n.getIdToken(),r=await Ac(n,od(t,{idToken:i}));Se(r==null?void 0:r.users.length,t,"internal-error");const o=r.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?AE(o.providerUserInfo):[],c=TA(n.providerData,l),h=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),m=h?f:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Cm(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,_)}async function xA(n){const e=St(n);await ad(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TA(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function AE(n){return n.map(e=>{var{providerId:t}=e,i=dg(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(n,e){const t=await IE(n,{},async()=>{const i=qc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,l=await kE(n,r,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:i};return n.emulatorConfig&&Ga(n.emulatorConfig.host)&&(h.credentials="include"),SE.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function IA(n,e){return Xa(n,"POST","/v2/accounts:revokeToken",gg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):c0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=c0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:o}=await SA(e,t);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:o}=t,l=new Ca;return i&&(Se(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(Se(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(Se(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ca,this.toJSON())}_performRefresh(){return gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fi{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,o=dg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Cm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ac(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return wA(this,e)}reload(){return xA(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ad(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(di(this.auth.app))return Promise.reject(uo(this.auth));const e=await this.getIdToken();return await Ac(this,vA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,o,l,c,h,f,m;const _=(i=t.displayName)!==null&&i!==void 0?i:void 0,y=(r=t.email)!==null&&r!==void 0?r:void 0,x=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,T=(l=t.photoURL)!==null&&l!==void 0?l:void 0,k=(c=t.tenantId)!==null&&c!==void 0?c:void 0,I=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,N=(f=t.createdAt)!==null&&f!==void 0?f:void 0,V=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:z,emailVerified:q,isAnonymous:K,providerData:J,stsTokenManager:P}=t;Se(z&&P,e,"internal-error");const C=Ca.fromJSON(this.name,P);Se(typeof z=="string",e,"internal-error"),Jr(_,e.name),Jr(y,e.name),Se(typeof q=="boolean",e,"internal-error"),Se(typeof K=="boolean",e,"internal-error"),Jr(x,e.name),Jr(T,e.name),Jr(k,e.name),Jr(I,e.name),Jr(N,e.name),Jr(V,e.name);const R=new fi({uid:z,auth:e,email:y,emailVerified:q,displayName:_,isAnonymous:K,photoURL:T,phoneNumber:x,tenantId:k,stsTokenManager:C,createdAt:N,lastLoginAt:V});return J&&Array.isArray(J)&&(R.providerData=J.map(O=>Object.assign({},O))),I&&(R._redirectEventId=I),R}static async _fromIdTokenResponse(e,t,i=!1){const r=new Ca;r.updateFromServerResponse(t);const o=new fi({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await ad(o),o}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Se(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?AE(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),c=new Ca;c.updateFromIdToken(i);const h=new fi({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Cm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=new Map;function yr(n){Er(n instanceof Function,"Expected a class definition");let e=u0.get(n);return e?(Er(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,u0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}CE.type="NONE";const h0=CE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(n,e,t){return`firebase:${n}:${e}:${t}`}class Pa{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=zh(this.userKey,r.apiKey,o),this.fullPersistenceKey=zh("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await od(this.auth,{idToken:e}).catch(()=>{});return t?fi._fromGetAccountInfoResponse(this.auth,t,e):null}return fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Pa(yr(h0),e,i);const r=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||yr(h0);const l=zh(i,e.config.apiKey,e.name);let c=null;for(const f of t)try{const m=await f._get(l);if(m){let _;if(typeof m=="string"){const y=await od(e,{idToken:m}).catch(()=>{});if(!y)break;_=await fi._fromGetAccountInfoResponse(e,y,m)}else _=fi._fromJSON(e,m);f!==o&&(c=_),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Pa(o,e,i):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new Pa(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OE(e))return"Blackberry";if(VE(e))return"Webos";if(RE(e))return"Safari";if((e.includes("chrome/")||NE(e))&&!e.includes("edge/"))return"Chrome";if(ME(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function PE(n=sn()){return/firefox\//i.test(n)}function RE(n=sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NE(n=sn()){return/crios\//i.test(n)}function DE(n=sn()){return/iemobile/i.test(n)}function ME(n=sn()){return/android/i.test(n)}function OE(n=sn()){return/blackberry/i.test(n)}function VE(n=sn()){return/webos/i.test(n)}function _g(n=sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function kA(n=sn()){var e;return _g(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function AA(){return $1()&&document.documentMode===10}function LE(n=sn()){return _g(n)||ME(n)||VE(n)||OE(n)||/windows phone/i.test(n)||DE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(n,e=[]){let t;switch(n){case"Browser":t=d0(sn());break;case"Worker":t=`${d0(sn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA(n,e={}){return Xa(n,"GET","/v2/passwordPolicy",gg(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=6;class NA{constructor(e){var t,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:RA,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,o,l,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(i=h.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(r=h.containsLowercaseLetter)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f0(this),this.idTokenSubscription=new f0(this),this.beforeStateQueue=new CA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yr(t)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Pa.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await od(this,{idToken:e}),i=await fi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(di(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(r=h.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ad(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(di(this.app))return Promise.reject(uo(this));const t=e?St(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return di(this.app)?Promise.reject(uo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return di(this.app)?Promise.reject(uo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PA(this),t=new NA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new So("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await IA(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Pa.create(this,[yr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,i,r);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(di(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&cA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function jd(n){return St(n)}class f0{constructor(e){this.auth=e,this.observer=null,this.addObserver=J1(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MA(n){vg=n}function OA(n){return vg.loadJS(n)}function VA(){return vg.gapiScript}function LA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(n,e){const t=Ya(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),o=t.getOptions();if(fs(o,e??{}))return r;Wi(r,"already-initialized")}return t.initialize({options:e})}function FA(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(yr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function BA(n,e,t){const i=jd(n);Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=FE(e),{host:l,port:c}=zA(e),h=c===null?"":`:${c}`,f={url:`${o}//${l}${h}/`},m=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Se(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Se(fs(f,i.config.emulator)&&fs(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,Ga(l)?(pE(`${o}//${l}${h}`),mE("Auth",!0)):UA()}function FE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function zA(n){const e=FE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:p0(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:p0(l)}}}function p0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function UA(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gr("not implemented")}_getIdTokenResponse(e){return gr("not implemented")}_linkToIdToken(e,t){return gr("not implemented")}_getReauthenticationResolver(e){return gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(n,e){return yA(n,"POST","/v1/accounts:signInWithIdp",gg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="http://localhost";class yo extends BE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new yo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,o=dg(t,["providerId","signInMethod"]);if(!i||!r)return null;const l=new yo(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ra(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ra(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ra(e,t)}buildRequest(){const e={requestUri:WA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends wg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Gc{constructor(){super("facebook.com")}static credential(e){return yo._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";ts.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Gc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return yo._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return mr.credential(t,i)}catch{return null}}}mr.GOOGLE_SIGN_IN_METHOD="google.com";mr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Gc{constructor(){super("github.com")}static credential(e){return yo._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.GITHUB_SIGN_IN_METHOD="github.com";ns.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Gc{constructor(){super("twitter.com")}static credential(e,t){return yo._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return is.credential(t,i)}catch{return null}}}is.TWITTER_SIGN_IN_METHOD="twitter.com";is.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const o=await fi._fromIdTokenResponse(e,i,r),l=m0(i);return new La({user:o,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=m0(i);return new La({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function m0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld extends $i{constructor(e,t,i,r){var o;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,ld.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new ld(e,t,i,r)}}function zE(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ld._fromErrorAndOperation(n,o,e,i):o})}async function HA(n,e,t=!1){const i=await Ac(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return La._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(n,e,t=!1){const{auth:i}=n;if(di(i.app))return Promise.reject(uo(i));const r="reauthenticate";try{const o=await Ac(n,zE(i,r,e,n),t);Se(o.idToken,i,"internal-error");const l=yg(o.idToken);Se(l,i,"internal-error");const{sub:c}=l;return Se(n.uid===c,i,"user-mismatch"),La._forOperation(n,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Wi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qA(n,e,t=!1){if(di(n.app))return Promise.reject(uo(n));const i="signIn",r=await zE(n,i,e),o=await La._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(o.user),o}function KA(n,e,t,i){return St(n).onIdTokenChanged(e,t,i)}function GA(n,e,t){return St(n).beforeAuthStateChanged(e,t)}function YA(n,e,t,i){return St(n).onAuthStateChanged(e,t,i)}function QA(n){return St(n).signOut()}const cd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cd,"1"),this.storage.removeItem(cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=1e3,JA=10;class WE extends UE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=LE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);AA()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,JA):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},XA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}WE.type="LOCAL";const ZA=WE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE extends UE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}HE.type="SESSION";const $E=HE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new Fd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:o}=t.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(l).map(async f=>f(t.origin,o)),h=await eC(c);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const f=bg("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(_){const y=_;if(y.data.eventId===f)switch(y.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(y.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function nC(n){Oi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function iC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rC(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function sC(){return qE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="firebaseLocalStorageDb",oC=1,ud="firebaseLocalStorage",GE="fbase_key";class Yc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bd(n,e){return n.transaction([ud],e?"readwrite":"readonly").objectStore(ud)}function aC(){const n=indexedDB.deleteDatabase(KE);return new Yc(n).toPromise()}function Pm(){const n=indexedDB.open(KE,oC);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(ud,{keyPath:GE})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(ud)?e(i):(i.close(),await aC(),e(await Pm()))})})}async function g0(n,e,t){const i=Bd(n,!0).put({[GE]:e,value:t});return new Yc(i).toPromise()}async function lC(n,e){const t=Bd(n,!1).get(e),i=await new Yc(t).toPromise();return i===void 0?null:i.value}function y0(n,e){const t=Bd(n,!0).delete(e);return new Yc(t).toPromise()}const cC=800,uC=3;class YE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>uC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fd._getInstance(sC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await iC(),!this.activeServiceWorker)return;this.sender=new tC(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pm();return await g0(e,cd,"1"),await y0(e,cd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>g0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>lC(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>y0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Bd(r,!1).getAll();return new Yc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YE.type="LOCAL";const hC=YE;new Kc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n,e){return e?yr(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg extends BE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ra(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ra(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ra(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function dC(n){return qA(n.auth,new Eg(n),n.bypassAuthState)}function fC(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),$A(t,new Eg(n),n.bypassAuthState)}async function pC(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),HA(t,new Eg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dC;case"linkViaPopup":case"linkViaRedirect":return pC;case"reauthViaPopup":case"reauthViaRedirect":return fC;default:Wi(this.auth,"internal-error")}}resolve(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new Kc(2e3,1e4);async function gC(n,e,t){if(di(n.app))return Promise.reject(pi(n,"operation-not-supported-in-this-environment"));const i=jd(n);uA(n,e,wg);const r=QE(i,t);return new oo(i,"signInViaPopup",e,r).executeNotNull()}class oo extends XE{constructor(e,t,i,r,o){super(e,t,r,o),this.provider=i,this.authWindow=null,this.pollId=null,oo.currentPopupAction&&oo.currentPopupAction.cancel(),oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Er(this.filter.length===1,"Popup operations only handle one event");const e=bg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mC.get())};e()}}oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="pendingRedirect",Uh=new Map;class _C extends XE{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Uh.get(this.auth._key());if(!e){try{const i=await vC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Uh.set(this.auth._key(),e)}return this.bypassAuthState||Uh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vC(n,e){const t=EC(e),i=bC(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function wC(n,e){Uh.set(n._key(),e)}function bC(n){return yr(n._redirectPersistence)}function EC(n){return zh(yC,n.config.apiKey,n.name)}async function xC(n,e,t=!1){if(di(n.app))return Promise.reject(uo(n));const i=jd(n),r=QE(i,e),l=await new _C(i,r,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=600*1e3;class SC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!JE(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(pi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TC&&this.cachedEventUids.clear(),this.cachedEventUids.has(_0(e))}saveEventToCache(e){this.cachedEventUids.add(_0(e)),this.lastProcessedEventTime=Date.now()}}function _0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function JE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function IC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kC(n,e={}){return Xa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CC=/^https?/;async function PC(n){if(n.config.emulator)return;const{authorizedDomains:e}=await kC(n);for(const t of e)try{if(RC(t))return}catch{}Wi(n,"unauthorized-domain")}function RC(n){const e=Am(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!CC.test(t))return!1;if(AC.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new Kc(3e4,6e4);function v0(){const n=Oi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function DC(n){return new Promise((e,t)=>{var i,r,o;function l(){v0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v0(),t(pi(n,"network-request-failed"))},timeout:NC.get()})}if(!((r=(i=Oi().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Oi().gapi)===null||o===void 0)&&o.load)l();else{const c=LA("iframefcb");return Oi()[c]=()=>{gapi.load?l():t(pi(n,"network-request-failed"))},OA(`${VA()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw Wh=null,e})}let Wh=null;function MC(n){return Wh=Wh||DC(n),Wh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=new Kc(5e3,15e3),VC="__/auth/iframe",LC="emulator/auth/iframe",jC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BC(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?mg(e,LC):`https://${n.config.authDomain}/${VC}`,i={apiKey:e.apiKey,appName:n.name,v:Qa},r=FC.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${qc(i).slice(1)}`}async function zC(n){const e=await MC(n),t=Oi().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:BC(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jC,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=pi(n,"network-request-failed"),c=Oi().setTimeout(()=>{o(l)},OC.get());function h(){Oi().clearTimeout(c),r(i)}i.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WC=500,HC=600,$C="_blank",qC="http://localhost";class w0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KC(n,e,t,i=WC,r=HC){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const h=Object.assign(Object.assign({},UC),{width:i.toString(),height:r.toString(),top:o,left:l}),f=sn().toLowerCase();t&&(c=NE(f)?$C:t),PE(f)&&(e=e||qC,h.scrollbars="yes");const m=Object.entries(h).reduce((y,[x,T])=>`${y}${x}=${T},`,"");if(kA(f)&&c!=="_self")return GC(e||"",c),new w0(null);const _=window.open(e||"",c,m);Se(_,n,"popup-blocked");try{_.focus()}catch{}return new w0(_)}function GC(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="__/auth/handler",QC="emulator/auth/handler",XC=encodeURIComponent("fac");async function b0(n,e,t,i,r,o){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Qa,eventId:r};if(e instanceof wg){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",X1(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,_]of Object.entries({}))l[m]=_}if(e instanceof Gc){const m=e.getScopes().filter(_=>_!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await n._getAppCheckToken(),f=h?`#${XC}=${encodeURIComponent(h)}`:"";return`${JC(n)}?${qc(c).slice(1)}${f}`}function JC({config:n}){return n.emulator?mg(n,QC):`https://${n.authDomain}/${YC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="webStorageSupport";class ZC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$E,this._completeRedirectFn=xC,this._overrideRedirectResult=wC}async _openPopup(e,t,i,r){var o;Er((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await b0(e,t,i,Am(),r);return KC(e,l,bg())}async _openRedirect(e,t,i,r){await this._originValidation(e);const o=await b0(e,t,i,Am(),r);return nC(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(Er(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await zC(e),i=new SC(e);return t.register("authEvent",r=>(Se(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tm,{type:tm},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[tm];l!==void 0&&t(!!l),Wi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=PC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return LE()||RE()||_g()}}const eP=ZC;var E0="@firebase/auth",x0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iP(n){Ui(new mi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Se(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jE(n)},f=new DA(i,r,o,h);return FA(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ui(new mi("auth-internal",e=>{const t=jd(e.getProvider("auth").getImmediate());return(i=>new tP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qn(E0,x0,nP(n)),qn(E0,x0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=300,sP=fE("authIdTokenMaxAge")||rP;let T0=null;const oP=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>sP)return;const r=t==null?void 0:t.token;T0!==r&&(T0=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function aP(n=hg()){const e=Ya(n,"auth");if(e.isInitialized())return e.getImmediate();const t=jA(n,{popupRedirectResolver:eP,persistence:[hC,ZA,$E]}),i=fE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=oP(o.toString());GA(t,l,()=>l(t.currentUser)),KA(t,c=>l(c))}}const r=hE("auth");return r&&BA(t,`http://${r}`),t}function lP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}MA({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const o=pi("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",lP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iP("Browser");var cP="firebase",uP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn(cP,uP,"app");var S0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,ZE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,C){function R(){}R.prototype=C.prototype,P.D=C.prototype,P.prototype=new R,P.prototype.constructor=P,P.C=function(O,L,F){for(var M=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)M[Le-2]=arguments[Le];return C.prototype[L].apply(O,M)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(P,C,R){R||(R=0);var O=Array(16);if(typeof C=="string")for(var L=0;16>L;++L)O[L]=C.charCodeAt(R++)|C.charCodeAt(R++)<<8|C.charCodeAt(R++)<<16|C.charCodeAt(R++)<<24;else for(L=0;16>L;++L)O[L]=C[R++]|C[R++]<<8|C[R++]<<16|C[R++]<<24;C=P.g[0],R=P.g[1],L=P.g[2];var F=P.g[3],M=C+(F^R&(L^F))+O[0]+3614090360&4294967295;C=R+(M<<7&4294967295|M>>>25),M=F+(L^C&(R^L))+O[1]+3905402710&4294967295,F=C+(M<<12&4294967295|M>>>20),M=L+(R^F&(C^R))+O[2]+606105819&4294967295,L=F+(M<<17&4294967295|M>>>15),M=R+(C^L&(F^C))+O[3]+3250441966&4294967295,R=L+(M<<22&4294967295|M>>>10),M=C+(F^R&(L^F))+O[4]+4118548399&4294967295,C=R+(M<<7&4294967295|M>>>25),M=F+(L^C&(R^L))+O[5]+1200080426&4294967295,F=C+(M<<12&4294967295|M>>>20),M=L+(R^F&(C^R))+O[6]+2821735955&4294967295,L=F+(M<<17&4294967295|M>>>15),M=R+(C^L&(F^C))+O[7]+4249261313&4294967295,R=L+(M<<22&4294967295|M>>>10),M=C+(F^R&(L^F))+O[8]+1770035416&4294967295,C=R+(M<<7&4294967295|M>>>25),M=F+(L^C&(R^L))+O[9]+2336552879&4294967295,F=C+(M<<12&4294967295|M>>>20),M=L+(R^F&(C^R))+O[10]+4294925233&4294967295,L=F+(M<<17&4294967295|M>>>15),M=R+(C^L&(F^C))+O[11]+2304563134&4294967295,R=L+(M<<22&4294967295|M>>>10),M=C+(F^R&(L^F))+O[12]+1804603682&4294967295,C=R+(M<<7&4294967295|M>>>25),M=F+(L^C&(R^L))+O[13]+4254626195&4294967295,F=C+(M<<12&4294967295|M>>>20),M=L+(R^F&(C^R))+O[14]+2792965006&4294967295,L=F+(M<<17&4294967295|M>>>15),M=R+(C^L&(F^C))+O[15]+1236535329&4294967295,R=L+(M<<22&4294967295|M>>>10),M=C+(L^F&(R^L))+O[1]+4129170786&4294967295,C=R+(M<<5&4294967295|M>>>27),M=F+(R^L&(C^R))+O[6]+3225465664&4294967295,F=C+(M<<9&4294967295|M>>>23),M=L+(C^R&(F^C))+O[11]+643717713&4294967295,L=F+(M<<14&4294967295|M>>>18),M=R+(F^C&(L^F))+O[0]+3921069994&4294967295,R=L+(M<<20&4294967295|M>>>12),M=C+(L^F&(R^L))+O[5]+3593408605&4294967295,C=R+(M<<5&4294967295|M>>>27),M=F+(R^L&(C^R))+O[10]+38016083&4294967295,F=C+(M<<9&4294967295|M>>>23),M=L+(C^R&(F^C))+O[15]+3634488961&4294967295,L=F+(M<<14&4294967295|M>>>18),M=R+(F^C&(L^F))+O[4]+3889429448&4294967295,R=L+(M<<20&4294967295|M>>>12),M=C+(L^F&(R^L))+O[9]+568446438&4294967295,C=R+(M<<5&4294967295|M>>>27),M=F+(R^L&(C^R))+O[14]+3275163606&4294967295,F=C+(M<<9&4294967295|M>>>23),M=L+(C^R&(F^C))+O[3]+4107603335&4294967295,L=F+(M<<14&4294967295|M>>>18),M=R+(F^C&(L^F))+O[8]+1163531501&4294967295,R=L+(M<<20&4294967295|M>>>12),M=C+(L^F&(R^L))+O[13]+2850285829&4294967295,C=R+(M<<5&4294967295|M>>>27),M=F+(R^L&(C^R))+O[2]+4243563512&4294967295,F=C+(M<<9&4294967295|M>>>23),M=L+(C^R&(F^C))+O[7]+1735328473&4294967295,L=F+(M<<14&4294967295|M>>>18),M=R+(F^C&(L^F))+O[12]+2368359562&4294967295,R=L+(M<<20&4294967295|M>>>12),M=C+(R^L^F)+O[5]+4294588738&4294967295,C=R+(M<<4&4294967295|M>>>28),M=F+(C^R^L)+O[8]+2272392833&4294967295,F=C+(M<<11&4294967295|M>>>21),M=L+(F^C^R)+O[11]+1839030562&4294967295,L=F+(M<<16&4294967295|M>>>16),M=R+(L^F^C)+O[14]+4259657740&4294967295,R=L+(M<<23&4294967295|M>>>9),M=C+(R^L^F)+O[1]+2763975236&4294967295,C=R+(M<<4&4294967295|M>>>28),M=F+(C^R^L)+O[4]+1272893353&4294967295,F=C+(M<<11&4294967295|M>>>21),M=L+(F^C^R)+O[7]+4139469664&4294967295,L=F+(M<<16&4294967295|M>>>16),M=R+(L^F^C)+O[10]+3200236656&4294967295,R=L+(M<<23&4294967295|M>>>9),M=C+(R^L^F)+O[13]+681279174&4294967295,C=R+(M<<4&4294967295|M>>>28),M=F+(C^R^L)+O[0]+3936430074&4294967295,F=C+(M<<11&4294967295|M>>>21),M=L+(F^C^R)+O[3]+3572445317&4294967295,L=F+(M<<16&4294967295|M>>>16),M=R+(L^F^C)+O[6]+76029189&4294967295,R=L+(M<<23&4294967295|M>>>9),M=C+(R^L^F)+O[9]+3654602809&4294967295,C=R+(M<<4&4294967295|M>>>28),M=F+(C^R^L)+O[12]+3873151461&4294967295,F=C+(M<<11&4294967295|M>>>21),M=L+(F^C^R)+O[15]+530742520&4294967295,L=F+(M<<16&4294967295|M>>>16),M=R+(L^F^C)+O[2]+3299628645&4294967295,R=L+(M<<23&4294967295|M>>>9),M=C+(L^(R|~F))+O[0]+4096336452&4294967295,C=R+(M<<6&4294967295|M>>>26),M=F+(R^(C|~L))+O[7]+1126891415&4294967295,F=C+(M<<10&4294967295|M>>>22),M=L+(C^(F|~R))+O[14]+2878612391&4294967295,L=F+(M<<15&4294967295|M>>>17),M=R+(F^(L|~C))+O[5]+4237533241&4294967295,R=L+(M<<21&4294967295|M>>>11),M=C+(L^(R|~F))+O[12]+1700485571&4294967295,C=R+(M<<6&4294967295|M>>>26),M=F+(R^(C|~L))+O[3]+2399980690&4294967295,F=C+(M<<10&4294967295|M>>>22),M=L+(C^(F|~R))+O[10]+4293915773&4294967295,L=F+(M<<15&4294967295|M>>>17),M=R+(F^(L|~C))+O[1]+2240044497&4294967295,R=L+(M<<21&4294967295|M>>>11),M=C+(L^(R|~F))+O[8]+1873313359&4294967295,C=R+(M<<6&4294967295|M>>>26),M=F+(R^(C|~L))+O[15]+4264355552&4294967295,F=C+(M<<10&4294967295|M>>>22),M=L+(C^(F|~R))+O[6]+2734768916&4294967295,L=F+(M<<15&4294967295|M>>>17),M=R+(F^(L|~C))+O[13]+1309151649&4294967295,R=L+(M<<21&4294967295|M>>>11),M=C+(L^(R|~F))+O[4]+4149444226&4294967295,C=R+(M<<6&4294967295|M>>>26),M=F+(R^(C|~L))+O[11]+3174756917&4294967295,F=C+(M<<10&4294967295|M>>>22),M=L+(C^(F|~R))+O[2]+718787259&4294967295,L=F+(M<<15&4294967295|M>>>17),M=R+(F^(L|~C))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+C&4294967295,P.g[1]=P.g[1]+(L+(M<<21&4294967295|M>>>11))&4294967295,P.g[2]=P.g[2]+L&4294967295,P.g[3]=P.g[3]+F&4294967295}i.prototype.u=function(P,C){C===void 0&&(C=P.length);for(var R=C-this.blockSize,O=this.B,L=this.h,F=0;F<C;){if(L==0)for(;F<=R;)r(this,P,F),F+=this.blockSize;if(typeof P=="string"){for(;F<C;)if(O[L++]=P.charCodeAt(F++),L==this.blockSize){r(this,O),L=0;break}}else for(;F<C;)if(O[L++]=P[F++],L==this.blockSize){r(this,O),L=0;break}}this.h=L,this.o+=C},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var C=1;C<P.length-8;++C)P[C]=0;var R=8*this.o;for(C=P.length-8;C<P.length;++C)P[C]=R&255,R/=256;for(this.u(P),P=Array(16),C=R=0;4>C;++C)for(var O=0;32>O;O+=8)P[R++]=this.g[C]>>>O&255;return P};function o(P,C){var R=c;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=C(P)}function l(P,C){this.h=C;for(var R=[],O=!0,L=P.length-1;0<=L;L--){var F=P[L]|0;O&&F==C||(R[L]=F,O=!1)}this.g=R}var c={};function h(P){return-128<=P&&128>P?o(P,function(C){return new l([C|0],0>C?-1:0)}):new l([P|0],0>P?-1:0)}function f(P){if(isNaN(P)||!isFinite(P))return _;if(0>P)return I(f(-P));for(var C=[],R=1,O=0;P>=R;O++)C[O]=P/R|0,R*=4294967296;return new l(C,0)}function m(P,C){if(P.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(P.charAt(0)=="-")return I(m(P.substring(1),C));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=f(Math.pow(C,8)),O=_,L=0;L<P.length;L+=8){var F=Math.min(8,P.length-L),M=parseInt(P.substring(L,L+F),C);8>F?(F=f(Math.pow(C,F)),O=O.j(F).add(f(M))):(O=O.j(R),O=O.add(f(M)))}return O}var _=h(0),y=h(1),x=h(16777216);n=l.prototype,n.m=function(){if(k(this))return-I(this).m();for(var P=0,C=1,R=0;R<this.g.length;R++){var O=this.i(R);P+=(0<=O?O:4294967296+O)*C,C*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(T(this))return"0";if(k(this))return"-"+I(this).toString(P);for(var C=f(Math.pow(P,6)),R=this,O="";;){var L=q(R,C).g;R=N(R,L.j(C));var F=((0<R.g.length?R.g[0]:R.h)>>>0).toString(P);if(R=L,T(R))return F+O;for(;6>F.length;)F="0"+F;O=F+O}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function T(P){if(P.h!=0)return!1;for(var C=0;C<P.g.length;C++)if(P.g[C]!=0)return!1;return!0}function k(P){return P.h==-1}n.l=function(P){return P=N(this,P),k(P)?-1:T(P)?0:1};function I(P){for(var C=P.g.length,R=[],O=0;O<C;O++)R[O]=~P.g[O];return new l(R,~P.h).add(y)}n.abs=function(){return k(this)?I(this):this},n.add=function(P){for(var C=Math.max(this.g.length,P.g.length),R=[],O=0,L=0;L<=C;L++){var F=O+(this.i(L)&65535)+(P.i(L)&65535),M=(F>>>16)+(this.i(L)>>>16)+(P.i(L)>>>16);O=M>>>16,F&=65535,M&=65535,R[L]=M<<16|F}return new l(R,R[R.length-1]&-2147483648?-1:0)};function N(P,C){return P.add(I(C))}n.j=function(P){if(T(this)||T(P))return _;if(k(this))return k(P)?I(this).j(I(P)):I(I(this).j(P));if(k(P))return I(this.j(I(P)));if(0>this.l(x)&&0>P.l(x))return f(this.m()*P.m());for(var C=this.g.length+P.g.length,R=[],O=0;O<2*C;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var L=0;L<P.g.length;L++){var F=this.i(O)>>>16,M=this.i(O)&65535,Le=P.i(L)>>>16,Ie=P.i(L)&65535;R[2*O+2*L]+=M*Ie,V(R,2*O+2*L),R[2*O+2*L+1]+=F*Ie,V(R,2*O+2*L+1),R[2*O+2*L+1]+=M*Le,V(R,2*O+2*L+1),R[2*O+2*L+2]+=F*Le,V(R,2*O+2*L+2)}for(O=0;O<C;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=C;O<2*C;O++)R[O]=0;return new l(R,0)};function V(P,C){for(;(P[C]&65535)!=P[C];)P[C+1]+=P[C]>>>16,P[C]&=65535,C++}function z(P,C){this.g=P,this.h=C}function q(P,C){if(T(C))throw Error("division by zero");if(T(P))return new z(_,_);if(k(P))return C=q(I(P),C),new z(I(C.g),I(C.h));if(k(C))return C=q(P,I(C)),new z(I(C.g),C.h);if(30<P.g.length){if(k(P)||k(C))throw Error("slowDivide_ only works with positive integers.");for(var R=y,O=C;0>=O.l(P);)R=K(R),O=K(O);var L=J(R,1),F=J(O,1);for(O=J(O,2),R=J(R,2);!T(O);){var M=F.add(O);0>=M.l(P)&&(L=L.add(R),F=M),O=J(O,1),R=J(R,1)}return C=N(P,L.j(C)),new z(L,C)}for(L=_;0<=P.l(C);){for(R=Math.max(1,Math.floor(P.m()/C.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),F=f(R),M=F.j(C);k(M)||0<M.l(P);)R-=O,F=f(R),M=F.j(C);T(F)&&(F=y),L=L.add(F),P=N(P,M)}return new z(L,P)}n.A=function(P){return q(this,P).h},n.and=function(P){for(var C=Math.max(this.g.length,P.g.length),R=[],O=0;O<C;O++)R[O]=this.i(O)&P.i(O);return new l(R,this.h&P.h)},n.or=function(P){for(var C=Math.max(this.g.length,P.g.length),R=[],O=0;O<C;O++)R[O]=this.i(O)|P.i(O);return new l(R,this.h|P.h)},n.xor=function(P){for(var C=Math.max(this.g.length,P.g.length),R=[],O=0;O<C;O++)R[O]=this.i(O)^P.i(O);return new l(R,this.h^P.h)};function K(P){for(var C=P.g.length+1,R=[],O=0;O<C;O++)R[O]=P.i(O)<<1|P.i(O-1)>>>31;return new l(R,P.h)}function J(P,C){var R=C>>5;C%=32;for(var O=P.g.length-R,L=[],F=0;F<O;F++)L[F]=0<C?P.i(F+R)>>>C|P.i(F+R+1)<<32-C:P.i(F+R);return new l(L,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ZE=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=m,us=l}).apply(typeof S0<"u"?S0:typeof self<"u"?self:typeof window<"u"?window:{});var bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ex,ac,tx,Hh,Rm,nx,ix,rx;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,E){return d==Array.prototype||d==Object.prototype||(d[v]=E.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof bh=="object"&&bh];for(var v=0;v<d.length;++v){var E=d[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function r(d,v){if(v)e:{var E=i;d=d.split(".");for(var A=0;A<d.length-1;A++){var W=d[A];if(!(W in E))break e;E=E[W]}d=d[d.length-1],A=E[d],v=v(A),v!=A&&v!=null&&e(E,d,{configurable:!0,writable:!0,value:v})}}function o(d,v){d instanceof String&&(d+="");var E=0,A=!1,W={next:function(){if(!A&&E<d.length){var Y=E++;return{value:v(Y,d[Y]),done:!1}}return A=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}r("Array.prototype.values",function(d){return d||function(){return o(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function f(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function m(d,v,E){return d.call.apply(d.bind,arguments)}function _(d,v,E){if(!d)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,A),d.apply(v,W)}}return function(){return d.apply(v,arguments)}}function y(d,v,E){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:_,y.apply(null,arguments)}function x(d,v){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function T(d,v){function E(){}E.prototype=v.prototype,d.aa=v.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(A,W,Y){for(var se=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)se[Ge-2]=arguments[Ge];return v.prototype[W].apply(A,se)}}function k(d){const v=d.length;if(0<v){const E=Array(v);for(let A=0;A<v;A++)E[A]=d[A];return E}return[]}function I(d,v){for(let E=1;E<arguments.length;E++){const A=arguments[E];if(h(A)){const W=d.length||0,Y=A.length||0;d.length=W+Y;for(let se=0;se<Y;se++)d[W+se]=A[se]}else d.push(A)}}class N{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function V(d){return/^[\s\xa0]*$/.test(d)}function z(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function q(d){return q[" "](d),d}q[" "]=function(){};var K=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function J(d,v,E){for(const A in d)v.call(E,d[A],A,d)}function P(d,v){for(const E in d)v.call(void 0,d[E],E,d)}function C(d){const v={};for(const E in d)v[E]=d[E];return v}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(d,v){let E,A;for(let W=1;W<arguments.length;W++){A=arguments[W];for(E in A)d[E]=A[E];for(let Y=0;Y<R.length;Y++)E=R[Y],Object.prototype.hasOwnProperty.call(A,E)&&(d[E]=A[E])}}function L(d){var v=1;d=d.split(":");const E=[];for(;0<v&&d.length;)E.push(d.shift()),v--;return d.length&&E.push(d.join(":")),E}function F(d){c.setTimeout(()=>{throw d},0)}function M(){var d=ce;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class Le{constructor(){this.h=this.g=null}add(v,E){const A=Ie.get();A.set(v,E),this.h?this.h.next=A:this.g=A,this.h=A}}var Ie=new N(()=>new Re,d=>d.reset());class Re{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let be,ie=!1,ce=new Le,oe=()=>{const d=c.Promise.resolve(void 0);be=()=>{d.then(U)}};var U=()=>{for(var d;d=M();){try{d.h.call(d.g)}catch(E){F(E)}var v=Ie;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}ie=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var xe=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};c.addEventListener("test",E,v),c.removeEventListener("test",E,v)}catch{}return d})();function Ae(d,v){if(pe.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(K){e:{try{q(v.nodeName);var W=!0;break e}catch{}W=!1}W||(v=null)}}else E=="mouseover"?v=d.fromElement:E=="mouseout"&&(v=d.toElement);this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Pe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ae.aa.h.call(this)}}T(Ae,pe);var Pe={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var He="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Ze(d,v,E,A,W){this.listener=d,this.proxy=null,this.src=v,this.type=E,this.capture=!!A,this.ha=W,this.key=++$e,this.da=this.fa=!1}function Mt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function qi(d){this.src=d,this.g={},this.h=0}qi.prototype.add=function(d,v,E,A,W){var Y=d.toString();d=this.g[Y],d||(d=this.g[Y]=[],this.h++);var se=kr(d,v,A,W);return-1<se?(v=d[se],E||(v.fa=!1)):(v=new Ze(v,this.src,Y,!!A,W),v.fa=E,d.push(v)),v};function Po(d,v){var E=v.type;if(E in d.g){var A=d.g[E],W=Array.prototype.indexOf.call(A,v,void 0),Y;(Y=0<=W)&&Array.prototype.splice.call(A,W,1),Y&&(Mt(v),d.g[E].length==0&&(delete d.g[E],d.h--))}}function kr(d,v,E,A){for(var W=0;W<d.length;++W){var Y=d[W];if(!Y.da&&Y.listener==v&&Y.capture==!!E&&Y.ha==A)return W}return-1}var Ss="closure_lm_"+(1e6*Math.random()|0),Ro={};function al(d,v,E,A,W){if(Array.isArray(v)){for(var Y=0;Y<v.length;Y++)al(d,v[Y],E,A,W);return null}return E=ul(E),d&&d[He]?d.K(v,E,f(A)?!!A.capture:!1,W):ll(d,v,E,!1,A,W)}function ll(d,v,E,A,W,Y){if(!v)throw Error("Invalid event type");var se=f(W)?!!W.capture:!!W,Ge=Do(d);if(Ge||(d[Ss]=Ge=new qi(d)),E=Ge.add(v,E,A,se,Y),E.proxy)return E;if(A=ru(),E.proxy=A,A.src=d,A.listener=E,d.addEventListener)xe||(W=se),W===void 0&&(W=!1),d.addEventListener(v.toString(),A,W);else if(d.attachEvent)d.attachEvent(Gi(v.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function ru(){function d(E){return v.call(d.src,d.listener,E)}const v=cl;return d}function No(d,v,E,A,W){if(Array.isArray(v))for(var Y=0;Y<v.length;Y++)No(d,v[Y],E,A,W);else A=f(A)?!!A.capture:!!A,E=ul(E),d&&d[He]?(d=d.i,v=String(v).toString(),v in d.g&&(Y=d.g[v],E=kr(Y,E,A,W),-1<E&&(Mt(Y[E]),Array.prototype.splice.call(Y,E,1),Y.length==0&&(delete d.g[v],d.h--)))):d&&(d=Do(d))&&(v=d.g[v.toString()],d=-1,v&&(d=kr(v,E,A,W)),(E=-1<d?v[d]:null)&&Ki(E))}function Ki(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[He])Po(v.i,d);else{var E=d.type,A=d.proxy;v.removeEventListener?v.removeEventListener(E,A,d.capture):v.detachEvent?v.detachEvent(Gi(E),A):v.addListener&&v.removeListener&&v.removeListener(A),(E=Do(v))?(Po(E,d),E.h==0&&(E.src=null,v[Ss]=null)):Mt(d)}}}function Gi(d){return d in Ro?Ro[d]:Ro[d]="on"+d}function cl(d,v){if(d.da)d=!0;else{v=new Ae(v,this);var E=d.listener,A=d.ha||d.src;d.fa&&Ki(d),d=E.call(A,v)}return d}function Do(d){return d=d[Ss],d instanceof qi?d:null}var Mo="__closure_events_fn_"+(1e9*Math.random()>>>0);function ul(d){return typeof d=="function"?d:(d[Mo]||(d[Mo]=function(v){return d.handleEvent(v)}),d[Mo])}function It(){Q.call(this),this.i=new qi(this),this.M=this,this.F=null}T(It,Q),It.prototype[He]=!0,It.prototype.removeEventListener=function(d,v,E,A){No(this,d,v,E,A)};function kt(d,v){var E,A=d.F;if(A)for(E=[];A;A=A.F)E.push(A);if(d=d.M,A=v.type||v,typeof v=="string")v=new pe(v,d);else if(v instanceof pe)v.target=v.target||d;else{var W=v;v=new pe(A,d),O(v,W)}if(W=!0,E)for(var Y=E.length-1;0<=Y;Y--){var se=v.g=E[Y];W=Yi(se,A,!0,v)&&W}if(se=v.g=d,W=Yi(se,A,!0,v)&&W,W=Yi(se,A,!1,v)&&W,E)for(Y=0;Y<E.length;Y++)se=v.g=E[Y],W=Yi(se,A,!1,v)&&W}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var E=d.g[v],A=0;A<E.length;A++)Mt(E[A]);delete d.g[v],d.h--}}this.F=null},It.prototype.K=function(d,v,E,A){return this.i.add(String(d),v,!1,E,A)},It.prototype.L=function(d,v,E,A){return this.i.add(String(d),v,!0,E,A)};function Yi(d,v,E,A){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var W=!0,Y=0;Y<v.length;++Y){var se=v[Y];if(se&&!se.da&&se.capture==E){var Ge=se.listener,At=se.ha||se.src;se.fa&&Po(d.i,se),W=Ge.call(At,A)!==!1&&W}}return W&&!A.defaultPrevented}function hl(d,v,E){if(typeof d=="function")E&&(d=y(d,E));else if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:c.setTimeout(d,v||0)}function Ar(d){d.g=hl(()=>{d.g=null,d.i&&(d.i=!1,Ar(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class Is extends Q{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Ar(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ks(d){Q.call(this),this.h=d,this.g={}}T(ks,Q);var dl=[];function fl(d){J(d.g,function(v,E){this.g.hasOwnProperty(E)&&Ki(v)},d),d.g={}}ks.prototype.N=function(){ks.aa.N.call(this),fl(this)},ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pl=c.JSON.stringify,ml=c.JSON.parse,gl=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function As(){}As.prototype.h=null;function Oo(d){return d.h||(d.h=d.i())}function Vo(){}var Dn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _i(){pe.call(this,"d")}T(_i,pe);function Lo(){pe.call(this,"c")}T(Lo,pe);var vi={},yl=null;function Cs(){return yl=yl||new It}vi.La="serverreachability";function _l(d){pe.call(this,vi.La,d)}T(_l,pe);function Qi(d){const v=Cs();kt(v,new _l(v))}vi.STAT_EVENT="statevent";function vl(d,v){pe.call(this,vi.STAT_EVENT,d),this.stat=v}T(vl,pe);function gt(d){const v=Cs();kt(v,new vl(v,d))}vi.Ma="timingevent";function jo(d,v){pe.call(this,vi.Ma,d),this.size=v}T(jo,pe);function Qn(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},v)}function Ps(){this.g=!0}Ps.prototype.xa=function(){this.g=!1};function Rs(d,v,E,A,W,Y){d.info(function(){if(d.g)if(Y)for(var se="",Ge=Y.split("&"),At=0;At<Ge.length;At++){var Fe=Ge[At].split("=");if(1<Fe.length){var Ot=Fe[0];Fe=Fe[1];var wt=Ot.split("_");se=2<=wt.length&&wt[1]=="type"?se+(Ot+"="+Fe+"&"):se+(Ot+"=redacted&")}}else se=null;else se=Y;return"XMLHTTP REQ ("+A+") [attempt "+W+"]: "+v+`
`+E+`
`+se})}function Fo(d,v,E,A,W,Y,se){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+W+"]: "+v+`
`+E+`
`+Y+" "+se})}function Xn(d,v,E,A){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+yf(d,E)+(A?" "+A:"")})}function wl(d,v){d.info(function(){return"TIMEOUT: "+v})}Ps.prototype.info=function(){};function yf(d,v){if(!d.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var A=E[d];if(!(2>A.length)){var W=A[1];if(Array.isArray(W)&&!(1>W.length)){var Y=W[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var se=1;se<W.length;se++)W[se]=""}}}}return pl(E)}catch{return v}}var Bo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},su={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jn;function Ns(){}T(Ns,As),Ns.prototype.g=function(){return new XMLHttpRequest},Ns.prototype.i=function(){return{}},Jn=new Ns;function Zn(d,v,E,A){this.j=d,this.i=v,this.l=E,this.R=A||1,this.U=new ks(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ou}function ou(){this.i=null,this.g="",this.h=!1}var bl={},zo={};function Uo(d,v,E){d.L=1,d.v=Dr(Sn(v)),d.m=E,d.P=!0,El(d,null)}function El(d,v){d.F=Date.now(),et(d),d.A=Sn(d.v);var E=d.A,A=d.R;Array.isArray(A)||(A=[String(A)]),Or(E.i,"t",A),d.C=0,E=d.j.J,d.h=new ou,d.g=Tu(d.j,E?v:null,!d.m),0<d.O&&(d.M=new Is(y(d.Y,d,d.g),d.O)),v=d.U,E=d.g,A=d.ca;var W="readystatechange";Array.isArray(W)||(W&&(dl[0]=W.toString()),W=dl);for(var Y=0;Y<W.length;Y++){var se=al(E,W[Y],A||v.handleEvent,!1,v.h||v);if(!se)break;v.g[se.key]=se}v=d.H?C(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),Qi(),Rs(d.i,d.u,d.A,d.l,d.R,d.m)}Zn.prototype.ca=function(d){d=d.target;const v=this.M;v&&dn(d)==3?v.j():this.Y(d)},Zn.prototype.Y=function(d){try{if(d==this.g)e:{const wt=dn(this.g);var v=this.g.Ba();const Vn=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||Al(this.g)))){this.J||wt!=4||v==7||(v==8||0>=Vn?Qi(3):Qi(2)),Ds(this);var E=this.g.Z();this.X=E;t:if(au(this)){var A=Al(this.g);d="";var W=A.length,Y=dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mn(this),Cr(this);var se="";break t}this.h.i=new c.TextDecoder}for(v=0;v<W;v++)this.h.h=!0,d+=this.h.i.decode(A[v],{stream:!(Y&&v==W-1)});A.length=0,this.h.g+=d,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=E==200,Fo(this.i,this.u,this.A,this.l,this.R,wt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,At=this.g;if((Ge=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Ge)){var Fe=Ge;break t}}Fe=null}if(E=Fe)Xn(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xl(this,E);else{this.o=!1,this.s=3,gt(12),Mn(this),Cr(this);break e}}if(this.P){E=!0;let kn;for(;!this.J&&this.C<se.length;)if(kn=_f(this,se),kn==zo){wt==4&&(this.s=4,gt(14),E=!1),Xn(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==bl){this.s=4,gt(15),Xn(this.i,this.l,se,"[Invalid Chunk]"),E=!1;break}else Xn(this.i,this.l,kn,null),xl(this,kn);if(au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||se.length!=0||this.h.h||(this.s=1,gt(16),E=!1),this.o=this.o&&E,!E)Xn(this.i,this.l,se,"[Invalid Chunked Response]"),Mn(this),Cr(this);else if(0<se.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Pl(Ot),Ot.M=!0,gt(11))}}else Xn(this.i,this.l,se,null),xl(this,se);wt==4&&Mn(this),this.o&&!this.J&&(wt==4?Zo(this.j,this):(this.o=!1,et(this)))}else Go(this.g),E==400&&0<se.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),Mn(this),Cr(this)}}}catch{}finally{}};function au(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function _f(d,v){var E=d.C,A=v.indexOf(`
`,E);return A==-1?zo:(E=Number(v.substring(E,A)),isNaN(E)?bl:(A+=1,A+E>v.length?zo:(v=v.slice(A,A+E),d.C=A+E,v)))}Zn.prototype.cancel=function(){this.J=!0,Mn(this)};function et(d){d.S=Date.now()+d.I,lu(d,d.I)}function lu(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Qn(y(d.ba,d),v)}function Ds(d){d.B&&(c.clearTimeout(d.B),d.B=null)}Zn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(wl(this.i,this.A),this.L!=2&&(Qi(),gt(17)),Mn(this),this.s=2,Cr(this)):lu(this,this.S-d)};function Cr(d){d.j.G==0||d.J||Zo(d.j,d)}function Mn(d){Ds(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,fl(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function xl(d,v){try{var E=d.j;if(E.G!=0&&(E.g==d||on(E.h,d))){if(!d.K&&on(E.h,d)&&E.G==3){try{var A=E.Da.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var W=A;if(W[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)Jo(E),ri(E);else break e;Xo(E),gt(18)}}else E.za=W[1],0<E.za-E.T&&37500>W[2]&&E.F&&E.v==0&&!E.C&&(E.C=Qn(y(E.Za,E),6e3));if(1>=uu(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else tr(E,11)}else if((d.K||E.g==d)&&Jo(E),!V(v))for(W=E.Da.g.parse(v),v=0;v<W.length;v++){let Fe=W[v];if(E.T=Fe[0],Fe=Fe[1],E.G==2)if(Fe[0]=="c"){E.K=Fe[1],E.ia=Fe[2];const Ot=Fe[3];Ot!=null&&(E.la=Ot,E.j.info("VER="+E.la));const wt=Fe[4];wt!=null&&(E.Aa=wt,E.j.info("SVER="+E.Aa));const Vn=Fe[5];Vn!=null&&typeof Vn=="number"&&0<Vn&&(A=1.5*Vn,E.L=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const kn=d.g;if(kn){const Bs=kn.g?kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bs){var Y=A.h;Y.g||Bs.indexOf("spdy")==-1&&Bs.indexOf("quic")==-1&&Bs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Tl(Y,Y.h),Y.h=null))}if(A.D){const ta=kn.g?kn.g.getResponseHeader("X-HTTP-Session-Id"):null;ta&&(A.ya=ta,Je(A.I,A.D,ta))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),A=E;var se=d;if(A.qa=xu(A,A.J?A.ia:null,A.W),se.K){hu(A.h,se);var Ge=se,At=A.L;At&&(Ge.I=At),Ge.B&&(Ds(Ge),et(Ge)),A.g=se}else Fs(A);0<E.i.length&&xi(E)}else Fe[0]!="stop"&&Fe[0]!="close"||tr(E,7);else E.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?tr(E,7):zt(E):Fe[0]!="noop"&&E.l&&E.l.ta(Fe),E.v=0)}}Qi(4)}catch{}}var cu=class{constructor(d,v){this.g=d,this.map=v}};function Ms(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tn(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function uu(d){return d.h?1:d.g?d.g.size:0}function on(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function Tl(d,v){d.g?d.g.add(v):d.h=v}function hu(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Ms.prototype.cancel=function(){if(this.i=du(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function du(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const E of d.g.values())v=v.concat(E.D);return v}return k(d.i)}function Wo(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(h(d)){for(var v=[],E=d.length,A=0;A<E;A++)v.push(d[A]);return v}v=[],E=0;for(A in d)v[E++]=d[A];return v}function Ho(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(h(d)||typeof d=="string"){var v=[];d=d.length;for(var E=0;E<d;E++)v.push(E);return v}v=[],E=0;for(const A in d)v[E++]=A;return v}}}function Pr(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(h(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var E=Ho(d),A=Wo(d),W=A.length,Y=0;Y<W;Y++)v.call(void 0,A[Y],E&&E[Y],d)}var Os=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vf(d,v){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var A=d[E].indexOf("="),W=null;if(0<=A){var Y=d[E].substring(0,A);W=d[E].substring(A+1)}else Y=d[E];v(Y,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Xi(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Xi){this.h=d.h,Vs(this,d.j),this.o=d.o,this.g=d.g,Rr(this,d.s),this.l=d.l;var v=d.i,E=new wi;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),Nr(this,E),this.m=d.m}else d&&(v=String(d).match(Os))?(this.h=!1,Vs(this,v[1]||"",!0),this.o=je(v[2]||""),this.g=je(v[3]||"",!0),Rr(this,v[4]),this.l=je(v[5]||"",!0),Nr(this,v[6]||"",!0),this.m=je(v[7]||"")):(this.h=!1,this.i=new wi(null,this.h))}Xi.prototype.toString=function(){var d=[],v=this.j;v&&d.push(Mr(v,$o,!0),":");var E=this.g;return(E||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Mr(v,$o,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Mr(E,E.charAt(0)=="/"?mu:pu,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Mr(E,Sl)),d.join("")};function Sn(d){return new Xi(d)}function Vs(d,v,E){d.j=E?je(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Rr(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function Nr(d,v,E){v instanceof wi?(d.i=v,bi(d.i,d.h)):(E||(v=Mr(v,gu)),d.i=new wi(v,d.h))}function Je(d,v,E){d.i.set(v,E)}function Dr(d){return Je(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function je(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Mr(d,v,E){return typeof d=="string"?(d=encodeURI(d).replace(v,fu),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function fu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var $o=/[#\/\?@]/g,pu=/[#\?:]/g,mu=/[#\?]/g,gu=/[#\?@]/g,Sl=/#/g;function wi(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Bt(d){d.g||(d.g=new Map,d.h=0,d.i&&vf(d.i,function(v,E){d.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=wi.prototype,n.add=function(d,v){Bt(this),this.i=null,d=On(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(v),this.h+=1,this};function ei(d,v){Bt(d),v=On(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function ti(d,v){return Bt(d),v=On(d,v),d.g.has(v)}n.forEach=function(d,v){Bt(this),this.g.forEach(function(E,A){E.forEach(function(W){d.call(v,W,A,this)},this)},this)},n.na=function(){Bt(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let A=0;A<v.length;A++){const W=d[A];for(let Y=0;Y<W.length;Y++)E.push(v[A])}return E},n.V=function(d){Bt(this);let v=[];if(typeof d=="string")ti(this,d)&&(v=v.concat(this.g.get(On(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)v=v.concat(d[E])}return v},n.set=function(d,v){return Bt(this),this.i=null,d=On(this,d),ti(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},n.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function Or(d,v,E){ei(d,v),0<E.length&&(d.i=null,d.g.set(On(d,v),k(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var A=v[E];const Y=encodeURIComponent(String(A)),se=this.V(A);for(A=0;A<se.length;A++){var W=Y;se[A]!==""&&(W+="="+encodeURIComponent(String(se[A]))),d.push(W)}}return this.i=d.join("&")};function On(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function bi(d,v){v&&!d.j&&(Bt(d),d.i=null,d.g.forEach(function(E,A){var W=A.toLowerCase();A!=W&&(ei(this,A),Or(this,W,E))},d)),d.j=v}function wf(d,v){const E=new Ps;if(c.Image){const A=new Image;A.onload=x(hn,E,"TestLoadImage: loaded",!0,v,A),A.onerror=x(hn,E,"TestLoadImage: error",!1,v,A),A.onabort=x(hn,E,"TestLoadImage: abort",!1,v,A),A.ontimeout=x(hn,E,"TestLoadImage: timeout",!1,v,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else v(!1)}function yu(d,v){const E=new Ps,A=new AbortController,W=setTimeout(()=>{A.abort(),hn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:A.signal}).then(Y=>{clearTimeout(W),Y.ok?hn(E,"TestPingServer: ok",!0,v):hn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(W),hn(E,"TestPingServer: error",!1,v)})}function hn(d,v,E,A,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),A(E)}catch{}}function bf(){this.g=new gl}function _u(d,v,E){const A=E||"";try{Pr(d,function(W,Y){let se=W;f(W)&&(se=pl(W)),v.push(A+Y+"="+encodeURIComponent(se))})}catch(W){throw v.push(A+"type="+encodeURIComponent("_badmap")),W}}function Ji(d){this.l=d.Ub||null,this.j=d.eb||!1}T(Ji,As),Ji.prototype.g=function(){return new Ls(this.l,this.j)},Ji.prototype.i=(function(d){return function(){return d}})({});function Ls(d,v){It.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Ls,It),n=Ls.prototype,n.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,ii(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||c).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ni(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vu(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function vu(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?ni(this):ii(this),this.readyState==3&&vu(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,ni(this))},n.Qa=function(d){this.g&&(this.response=d,ni(this))},n.ga=function(){this.g&&ni(this)};function ni(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ii(d)}n.setRequestHeader=function(d,v){this.u.append(d,v)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=v.next();return d.join(`\r
`)};function ii(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Zi(d){let v="";return J(d,function(E,A){v+=A,v+=":",v+=E,v+=`\r
`}),v}function Vr(d,v,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=Zi(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):Je(d,v,E))}function at(d){It.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(at,It);var Ef=/^https?$/i,Il=["POST","PUT"];n=at.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,v,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jn.g(),this.v=this.o?Oo(this.o):Oo(Jn),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(Y){js(this,Y);return}if(d=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var W in A)E.set(W,A[W]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Y of A.keys())E.set(Y,A.get(Y));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(Y=>Y.toLowerCase()=="content-type"),W=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Il,v,void 0))||A||W||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,se]of E)this.g.setRequestHeader(Y,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ko(this),this.u=!0,this.g.send(d),this.u=!1}catch(Y){js(this,Y)}};function js(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,qo(d),In(d)}function qo(d){d.A||(d.A=!0,kt(d,"complete"),kt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,kt(this,"complete"),kt(this,"abort"),In(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),In(this,!0)),at.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?kl(this):this.bb())},n.bb=function(){kl(this)};function kl(d){if(d.h&&typeof l<"u"&&(!d.v[1]||dn(d)!=4||d.Z()!=2)){if(d.u&&dn(d)==4)hl(d.Ea,0,d);else if(kt(d,"readystatechange"),dn(d)==4){d.h=!1;try{const se=d.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var A;if(A=se===0){var W=String(d.D).match(Os)[1]||null;!W&&c.self&&c.self.location&&(W=c.self.location.protocol.slice(0,-1)),A=!Ef.test(W?W.toLowerCase():"")}E=A}if(E)kt(d,"complete"),kt(d,"success");else{d.m=6;try{var Y=2<dn(d)?d.g.statusText:""}catch{Y=""}d.l=Y+" ["+d.Z()+"]",qo(d)}}finally{In(d)}}}}function In(d,v){if(d.g){Ko(d);const E=d.g,A=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||kt(d,"ready");try{E.onreadystatechange=A}catch{}}}function Ko(d){d.I&&(c.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function dn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<dn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),ml(v)}};function Al(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Go(d){const v={};d=(d.g&&2<=dn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if(V(d[A]))continue;var E=L(d[A]);const W=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Y=v[W]||[];v[W]=Y,Y.push(E)}P(v,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(d,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||v}function Cl(d){this.Aa=0,this.i=[],this.j=new Ps,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ei("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ei("baseRetryDelayMs",5e3,d),this.cb=Ei("retryDelaySeedMs",1e4,d),this.Wa=Ei("forwardChannelMaxRetries",2,d),this.wa=Ei("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Ms(d&&d.concurrentRequestLimit),this.Da=new bf,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Cl.prototype,n.la=8,n.G=1,n.connect=function(d,v,E,A){gt(0),this.W=d,this.H=v||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.I=xu(this,null,this.W),xi(this)};function zt(d){if(Yo(d),d.G==3){var v=d.U++,E=Sn(d.I);if(Je(E,"SID",d.K),Je(E,"RID",v),Je(E,"TYPE","terminate"),er(d,E),v=new Zn(d,d.j,v),v.L=2,v.v=Dr(Sn(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&c.Image&&(new Image().src=v.v,E=!0),E||(v.g=Tu(v.j,null),v.g.ea(v.v)),v.F=Date.now(),et(v)}Eu(d)}function ri(d){d.g&&(Pl(d),d.g.cancel(),d.g=null)}function Yo(d){ri(d),d.u&&(c.clearTimeout(d.u),d.u=null),Jo(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function xi(d){if(!Tn(d.h)&&!d.s){d.s=!0;var v=d.Ga;be||oe(),ie||(be(),ie=!0),ce.add(v,d),d.B=0}}function xf(d,v){return uu(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Qn(y(d.Ga,d,v),bu(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const W=new Zn(this,this.j,d);let Y=this.o;if(this.S&&(Y?(Y=C(Y),O(Y,this.S)):Y=this.S),this.m!==null||this.O||(W.H=Y,Y=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=Lr(this,W,v),E=Sn(this.I),Je(E,"RID",d),Je(E,"CVER",22),this.D&&Je(E,"X-HTTP-Session-Id",this.D),er(this,E),Y&&(this.O?v="headers="+encodeURIComponent(String(Zi(Y)))+"&"+v:this.m&&Vr(E,this.m,Y)),Tl(this.h,W),this.Ua&&Je(E,"TYPE","init"),this.P?(Je(E,"$req",v),Je(E,"SID","null"),W.T=!0,Uo(W,E,null)):Uo(W,E,v),this.G=2}}else this.G==3&&(d?Qo(this,d):this.i.length==0||Tn(this.h)||Qo(this))};function Qo(d,v){var E;v?E=v.l:E=d.U++;const A=Sn(d.I);Je(A,"SID",d.K),Je(A,"RID",E),Je(A,"AID",d.T),er(d,A),d.m&&d.o&&Vr(A,d.m,d.o),E=new Zn(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),v&&(d.i=v.D.concat(d.i)),v=Lr(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Tl(d.h,E),Uo(E,A,v)}function er(d,v){d.H&&J(d.H,function(E,A){Je(v,A,E)}),d.l&&Pr({},function(E,A){Je(v,A,E)})}function Lr(d,v,E){E=Math.min(d.i.length,E);var A=d.l?y(d.l.Na,d.l,d):null;e:{var W=d.i;let Y=-1;for(;;){const se=["count="+E];Y==-1?0<E?(Y=W[0].g,se.push("ofs="+Y)):Y=0:se.push("ofs="+Y);let Ge=!0;for(let At=0;At<E;At++){let Fe=W[At].g;const Ot=W[At].map;if(Fe-=Y,0>Fe)Y=Math.max(0,W[At].g-100),Ge=!1;else try{_u(Ot,se,"req"+Fe+"_")}catch{A&&A(Ot)}}if(Ge){A=se.join("&");break e}}}return d=d.i.splice(0,E),v.D=d,A}function Fs(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;be||oe(),ie||(be(),ie=!0),ce.add(v,d),d.v=0}}function Xo(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Qn(y(d.Fa,d),bu(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,wu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Qn(y(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),ri(this),wu(this))};function Pl(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function wu(d){d.g=new Zn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=Sn(d.qa);Je(v,"RID","rpc"),Je(v,"SID",d.K),Je(v,"AID",d.T),Je(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&Je(v,"TO",d.ja),Je(v,"TYPE","xmlhttp"),er(d,v),d.m&&d.o&&Vr(v,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=Dr(Sn(v)),E.m=null,E.P=!0,El(E,d)}n.Za=function(){this.C!=null&&(this.C=null,ri(this),Xo(this),gt(19))};function Jo(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function Zo(d,v){var E=null;if(d.g==v){Jo(d),Pl(d),d.g=null;var A=2}else if(on(d.h,v))E=v.D,hu(d.h,v),A=1;else return;if(d.G!=0){if(v.o)if(A==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var W=d.B;A=Cs(),kt(A,new jo(A,E)),xi(d)}else Fs(d);else if(W=v.s,W==3||W==0&&0<v.X||!(A==1&&xf(d,v)||A==2&&Xo(d)))switch(E&&0<E.length&&(v=d.h,v.i=v.i.concat(E)),W){case 1:tr(d,5);break;case 4:tr(d,10);break;case 3:tr(d,6);break;default:tr(d,2)}}}function bu(d,v){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*v}function tr(d,v){if(d.j.info("Error code "+v),v==2){var E=y(d.fb,d),A=d.Xa;const W=!A;A=new Xi(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Vs(A,"https"),Dr(A),W?wf(A.toString(),E):yu(A.toString(),E)}else gt(2);d.G=0,d.l&&d.l.sa(v),Eu(d),Yo(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Eu(d){if(d.G=0,d.ka=[],d.l){const v=du(d.h);(v.length!=0||d.i.length!=0)&&(I(d.ka,v),I(d.ka,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.ra()}}function xu(d,v,E){var A=E instanceof Xi?Sn(E):new Xi(E);if(A.g!="")v&&(A.g=v+"."+A.g),Rr(A,A.s);else{var W=c.location;A=W.protocol,v=v?v+"."+W.hostname:W.hostname,W=+W.port;var Y=new Xi(null);A&&Vs(Y,A),v&&(Y.g=v),W&&Rr(Y,W),E&&(Y.l=E),A=Y}return E=d.D,v=d.ya,E&&v&&Je(A,E,v),Je(A,"VER",d.la),er(d,A),A}function Tu(d,v,E){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new at(new Ji({eb:E})):new at(d.pa),v.Ha(d.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rl(){}n=Rl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ea(){}ea.prototype.g=function(d,v){return new an(d,v)};function an(d,v){It.call(this),this.g=new Cl(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!V(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!V(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Ti(this)}T(an,It),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){zt(this.g)},an.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=pl(d),d=E);v.i.push(new cu(v.Ya++,d)),v.G==3&&xi(v)},an.prototype.N=function(){this.g.l=null,delete this.j,zt(this.g),delete this.g,an.aa.N.call(this)};function Su(d){_i.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const E in v){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}T(Su,_i);function Iu(){Lo.call(this),this.status=1}T(Iu,Lo);function Ti(d){this.g=d}T(Ti,Rl),Ti.prototype.ua=function(){kt(this.g,"a")},Ti.prototype.ta=function(d){kt(this.g,new Su(d))},Ti.prototype.sa=function(d){kt(this.g,new Iu)},Ti.prototype.ra=function(){kt(this.g,"b")},ea.prototype.createWebChannel=ea.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,rx=function(){return new ea},ix=function(){return Cs()},nx=vi,Rm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bo.NO_ERROR=0,Bo.TIMEOUT=8,Bo.HTTP_ERROR=6,Hh=Bo,su.COMPLETE="complete",tx=su,Vo.EventType=Dn,Dn.OPEN="a",Dn.CLOSE="b",Dn.ERROR="c",Dn.MESSAGE="d",It.prototype.listen=It.prototype.K,ac=Vo,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,ex=at}).apply(typeof bh<"u"?bh:typeof self<"u"?self:typeof window<"u"?window:{});const I0="@firebase/firestore",k0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=new cg("@firebase/firestore");function Sa(){return _o.logLevel}function he(n,...e){if(_o.logLevel<=Oe.DEBUG){const t=e.map(xg);_o.debug(`Firestore (${Ja}): ${n}`,...t)}}function xr(n,...e){if(_o.logLevel<=Oe.ERROR){const t=e.map(xg);_o.error(`Firestore (${Ja}): ${n}`,...t)}}function ps(n,...e){if(_o.logLevel<=Oe.WARN){const t=e.map(xg);_o.warn(`Firestore (${Ja}): ${n}`,...t)}}function xg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,sx(n,i,t)}function sx(n,e,t){let i=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw xr(i),new Error(i)}function Ke(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||sx(e,r,i)}function Ce(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends $i{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Zt.UNAUTHENTICATED)))}shutdown(){}}class dP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class fP{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,t(h)):Promise.resolve();let o=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new wr,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await r(this.currentUser)}))},c=h=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>c(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new wr)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string",31837,{l:i}),new ox(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class pP{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class mP{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new pP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class A0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,di(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const i=o=>{o.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,he("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const r=o=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new A0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new A0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=yP(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%62))}return i}}function Ne(n,e){return n<e?-1:n>e?1:0}function Nm(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),r=e.codePointAt(t);if(i!==r){if(i<128&&r<128)return Ne(i,r);{const o=ax(),l=_P(o.encode(C0(n,t)),o.encode(C0(e,t)));return l!==0?l:Ne(i,r)}}t+=i>65535?2:1}return Ne(n.length,e.length)}function C0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function _P(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ne(n[t],e[t]);return Ne(n.length,e.length)}function ja(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="__name__";class Ni{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ee(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const o=Ni.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return Ne(e.length,t.length)}static compareSegments(e,t){const i=Ni.isNumericId(e),r=Ni.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Ni.extractNumericId(e).compare(Ni.extractNumericId(t)):Nm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return us.fromString(e.substring(4,e.length-2))}}class nt extends Ni{construct(e,t,i){return new nt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new le(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new nt(t)}static emptyPath(){return new nt([])}}const vP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Ni{construct(e,t,i){return new $t(e,t,i)}static isValidIdentifier(e){return vP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===P0}static keyField(){return new $t([P0])}static fromServerFormat(e){const t=[];let i="",r=0;const o=()=>{if(i.length===0)throw new le(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new le(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new le(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else c==="`"?(l=!l,r++):c!=="."||l?(i+=c,r++):(o(),r++)}if(o(),l)throw new le(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(t)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(nt.fromString(e))}static fromName(e){return new _e(nt.fromString(e).popFirst(5))}static empty(){return new _e(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(n,e,t){if(!t)throw new le(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wP(n,e,t,i){if(e===!0&&i===!0)throw new le(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function R0(n){if(!_e.isDocumentKey(n))throw new le(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function N0(n){if(_e.isDocumentKey(n))throw new le(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function zd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function xn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zd(n);throw new le(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Qc(n,e){if(!cx(n))throw new le(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(r&&typeof l!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new le(X.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=-62135596800,M0=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*M0);return new ot(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<D0)throw new le(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/M0}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qc(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-D0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:Tt("string",ot._jsonSchemaVersion),seconds:Tt("number"),nanoseconds:Tt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new ot(0,0))}static max(){return new ke(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=-1;function bP(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=ke.fromTimestamp(i===1e9?new ot(t+1,0):new ot(t,i));return new ms(r,_e.empty(),e)}function EP(n){return new ms(n.readTime,n.key,Cc)}class ms{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ms(ke.min(),_e.empty(),Cc)}static max(){return new ms(ke.max(),_e.empty(),Cc)}}function xP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Ne(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==TP)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.reject(t)}static resolve(e){return new Z(((t,i)=>{t(e)}))}static reject(e){return new Z(((t,i)=>{i(e)}))}static waitFor(e){return new Z(((t,i)=>{let r=0,o=0,l=!1;e.forEach((c=>{++r,c.next((()=>{++o,l&&o===r&&t()}),(h=>i(h)))})),l=!0,o===r&&t()}))}static or(e){let t=Z.resolve(!1);for(const i of e)t=t.next((r=>r?Z.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,o)=>{i.push(t.call(this,r,o))})),this.waitFor(i)}static mapArray(e,t){return new Z(((i,r)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const f=h;t(e[f]).next((m=>{l[f]=m,++c,c===o&&i(l)}),(m=>r(m)))}}))}static doWhile(e,t){return new Z(((i,r)=>{const o=()=>{e()===!0?t().next((()=>{o()}),r):i()};o()}))}}function IP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function el(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Ud.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg=-1;function Wd(n){return n==null}function hd(n){return n===0&&1/n==-1/0}function kP(n){return typeof n=="number"&&Number.isInteger(n)&&!hd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="";function AP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=O0(e)),e=CP(n.get(t),e);return O0(e)}function CP(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":t+="";break;case ux:t+="";break;default:t+=o}}return t}function O0(n){return n+ux+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Es(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||Ht.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eh(this.root,e,this.comparator,!0)}}class Eh{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??Ht.RED,this.left=r??Ht.EMPTY,this.right=o??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new Ht(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Ht.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,i,r,o){return this}insert(e,t,i){return new Ht(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new L0(this.data.getIterator())}getIteratorFrom(e){return new L0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Dt(this.comparator);return t.data=e,t}}class L0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new Rn([])}unionWith(e){let t=new Dt($t.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Rn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ja(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new dx("Invalid base64 string: "+o):o}})(e);return new qt(t)}static fromUint8Array(e){const t=(function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o})(e);return new qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const PP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gs(n){if(Ke(!!n,39018),typeof n=="string"){let e=0;const t=PP.exec(n);if(Ke(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:_t(n.seconds),nanos:_t(n.nanos)}}function _t(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ys(n){return typeof n=="string"?qt.fromBase64String(n):qt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="server_timestamp",px="__type__",mx="__previous_value__",gx="__local_write_time__";function Ig(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[px])===null||t===void 0?void 0:t.stringValue)===fx}function Hd(n){const e=n.mapValue.fields[mx];return Ig(e)?Hd(e):e}function Pc(n){const e=gs(n.mapValue.fields[gx].timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,t,i,r,o,l,c,h,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const dd="(default)";class Rc{constructor(e,t){this.projectId=e,this.database=t||dd}static empty(){return new Rc("","")}get isDefaultDatabase(){return this.database===dd}isEqual(e){return e instanceof Rc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx="__type__",NP="__max__",xh={mapValue:{}},_x="__vector__",fd="value";function _s(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ig(n)?4:MP(n)?9007199254740991:DP(n)?10:11:Ee(28295,{value:n})}function Hi(n,e){if(n===e)return!0;const t=_s(n);if(t!==_s(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pc(n).isEqual(Pc(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=gs(r.timestampValue),c=gs(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,o){return ys(r.bytesValue).isEqual(ys(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,o){return _t(r.geoPointValue.latitude)===_t(o.geoPointValue.latitude)&&_t(r.geoPointValue.longitude)===_t(o.geoPointValue.longitude)})(n,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return _t(r.integerValue)===_t(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=_t(r.doubleValue),c=_t(o.doubleValue);return l===c?hd(l)===hd(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return ja(n.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return(function(r,o){const l=r.mapValue.fields||{},c=o.mapValue.fields||{};if(V0(l)!==V0(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!Hi(l[h],c[h])))return!1;return!0})(n,e);default:return Ee(52216,{left:n})}}function Nc(n,e){return(n.values||[]).find((t=>Hi(t,e)))!==void 0}function Fa(n,e){if(n===e)return 0;const t=_s(n),i=_s(e);if(t!==i)return Ne(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=_t(o.integerValue||o.doubleValue),h=_t(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1})(n,e);case 3:return j0(n.timestampValue,e.timestampValue);case 4:return j0(Pc(n),Pc(e));case 5:return Nm(n.stringValue,e.stringValue);case 6:return(function(o,l){const c=ys(o),h=ys(l);return c.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),h=l.split("/");for(let f=0;f<c.length&&f<h.length;f++){const m=Ne(c[f],h[f]);if(m!==0)return m}return Ne(c.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Ne(_t(o.latitude),_t(l.latitude));return c!==0?c:Ne(_t(o.longitude),_t(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return F0(n.arrayValue,e.arrayValue);case 10:return(function(o,l){var c,h,f,m;const _=o.fields||{},y=l.fields||{},x=(c=_[fd])===null||c===void 0?void 0:c.arrayValue,T=(h=y[fd])===null||h===void 0?void 0:h.arrayValue,k=Ne(((f=x==null?void 0:x.values)===null||f===void 0?void 0:f.length)||0,((m=T==null?void 0:T.values)===null||m===void 0?void 0:m.length)||0);return k!==0?k:F0(x,T)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===xh.mapValue&&l===xh.mapValue)return 0;if(o===xh.mapValue)return 1;if(l===xh.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),f=l.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let _=0;_<h.length&&_<m.length;++_){const y=Nm(h[_],m[_]);if(y!==0)return y;const x=Fa(c[h[_]],f[m[_]]);if(x!==0)return x}return Ne(h.length,m.length)})(n.mapValue,e.mapValue);default:throw Ee(23264,{le:t})}}function j0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ne(n,e);const t=gs(n),i=gs(e),r=Ne(t.seconds,i.seconds);return r!==0?r:Ne(t.nanos,i.nanos)}function F0(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const o=Fa(t[r],i[r]);if(o)return o}return Ne(t.length,i.length)}function Ba(n){return Dm(n)}function Dm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=gs(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ys(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const o of t.values||[])r?r=!1:i+=",",i+=Dm(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${Dm(t.fields[l])}`;return r+"}"})(n.mapValue):Ee(61005,{value:n})}function $h(n){switch(_s(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hd(n);return e?16+$h(e):16;case 5:return 2*n.stringValue.length;case 6:return ys(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+$h(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Es(i.fields,((o,l)=>{r+=o.length+$h(l)})),r})(n.mapValue);default:throw Ee(13486,{value:n})}}function B0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Mm(n){return!!n&&"integerValue"in n}function kg(n){return!!n&&"arrayValue"in n}function z0(n){return!!n&&"nullValue"in n}function U0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qh(n){return!!n&&"mapValue"in n}function DP(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[yx])===null||t===void 0?void 0:t.stringValue)===_x}function vc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Es(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=vc(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function MP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===NP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!qh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vc(t)}setAll(e){let t=$t.emptyPath(),i={},r=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,i,r),i={},r=[],t=c.popLast()}l?i[c.lastSegment()]=vc(l):r.push(c.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){const t=this.field(e.popLast());qh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];qh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Es(t,((r,o)=>e[r]=o));for(const r of i)delete e[r]}clone(){return new bn(vc(this.value))}}function vx(n){const e=[];return Es(n.fields,((t,i)=>{const r=new $t([t]);if(qh(i)){const o=vx(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)})),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t,i,r,o,l,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new en(e,0,ke.min(),ke.min(),ke.min(),bn.empty(),0)}static newFoundDocument(e,t,i,r){return new en(e,1,t,ke.min(),i,r,0)}static newNoDocument(e,t){return new en(e,2,t,ke.min(),ke.min(),bn.empty(),0)}static newUnknownDocument(e,t){return new en(e,3,t,ke.min(),ke.min(),bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t){this.position=e,this.inclusive=t}}function W0(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const o=e[r],l=n.position[r];if(o.field.isKeyField()?i=_e.comparator(_e.fromName(l.referenceValue),t.key):i=Fa(l,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function H0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t="asc"){this.field=e,this.dir=t}}function OP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{}class xt extends wx{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new LP(e,t,i):t==="array-contains"?new BP(e,i):t==="in"?new zP(e,i):t==="not-in"?new UP(e,i):t==="array-contains-any"?new WP(e,i):new xt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new jP(e,i):new FP(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Fa(t,this.value)):t!==null&&_s(this.value)===_s(t)&&this.matchesComparison(Fa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gi extends wx{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new gi(e,t)}matches(e){return bx(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function bx(n){return n.op==="and"}function Ex(n){return VP(n)&&bx(n)}function VP(n){for(const e of n.filters)if(e instanceof gi)return!1;return!0}function Om(n){if(n instanceof xt)return n.field.canonicalString()+n.op.toString()+Ba(n.value);if(Ex(n))return n.filters.map((e=>Om(e))).join(",");{const e=n.filters.map((t=>Om(t))).join(",");return`${n.op}(${e})`}}function xx(n,e){return n instanceof xt?(function(i,r){return r instanceof xt&&i.op===r.op&&i.field.isEqual(r.field)&&Hi(i.value,r.value)})(n,e):n instanceof gi?(function(i,r){return r instanceof gi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,l,c)=>o&&xx(l,r.filters[c])),!0):!1})(n,e):void Ee(19439)}function Tx(n){return n instanceof xt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ba(t.value)}`})(n):n instanceof gi?(function(t){return t.op.toString()+" {"+t.getFilters().map(Tx).join(" ,")+"}"})(n):"Filter"}class LP extends xt{constructor(e,t,i){super(e,t,i),this.key=_e.fromName(i.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class jP extends xt{constructor(e,t){super(e,"in",t),this.keys=Sx("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class FP extends xt{constructor(e,t){super(e,"not-in",t),this.keys=Sx("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Sx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>_e.fromName(i.referenceValue)))}class BP extends xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kg(t)&&Nc(t.arrayValue,this.value)}}class zP extends xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Nc(this.value.arrayValue,t)}}class UP extends xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Nc(this.value.arrayValue,t)}}class WP extends xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Nc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,t=null,i=[],r=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=c,this.Pe=null}}function $0(n,e=null,t=[],i=[],r=null,o=null,l=null){return new HP(n,e,t,i,r,o,l)}function Ag(n){const e=Ce(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Om(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Wd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ba(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ba(i))).join(",")),e.Pe=t}return e.Pe}function Cg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!OP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!H0(n.startAt,e.startAt)&&H0(n.endAt,e.endAt)}function Vm(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,t=null,i=[],r=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function $P(n,e,t,i,r,o,l,c){return new tl(n,e,t,i,r,o,l,c)}function $d(n){return new tl(n)}function q0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ix(n){return n.collectionGroup!==null}function wc(n){const e=Ce(n);if(e.Te===null){e.Te=[];const t=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Dt($t.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Dc(o,i))})),t.has($t.keyField().canonicalString())||e.Te.push(new Dc($t.keyField(),i))}return e.Te}function Vi(n){const e=Ce(n);return e.Ie||(e.Ie=qP(e,wc(n))),e.Ie}function qP(n,e){if(n.limitType==="F")return $0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new Dc(r.field,o)}));const t=n.endAt?new pd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new pd(n.startAt.position,n.startAt.inclusive):null;return $0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Lm(n,e){const t=n.filters.concat([e]);return new tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function jm(n,e,t){return new tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qd(n,e){return Cg(Vi(n),Vi(e))&&n.limitType===e.limitType}function kx(n){return`${Ag(Vi(n))}|lt:${n.limitType}`}function Ia(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>Tx(r))).join(", ")}]`),Wd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Ba(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Ba(r))).join(",")),`Target(${i})`})(Vi(n))}; limitType=${n.limitType})`}function Kd(n,e){return e.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):_e.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,r){for(const o of wc(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(l,c,h){const f=W0(l,c,h);return l.inclusive?f<=0:f<0})(i.startAt,wc(i),r)||i.endAt&&!(function(l,c,h){const f=W0(l,c,h);return l.inclusive?f>=0:f>0})(i.endAt,wc(i),r))})(n,e)}function KP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ax(n){return(e,t)=>{let i=!1;for(const r of wc(n)){const o=GP(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function GP(n,e,t){const i=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(o,l,c){const h=l.data.field(o),f=c.data.field(o);return h!==null&&f!==null?Fa(h,f):Ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ee(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,((t,i)=>{for(const[r,o]of i)e(r,o)}))}isEmpty(){return hx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=new dt(_e.comparator);function Tr(){return YP}const Cx=new dt(_e.comparator);function lc(...n){let e=Cx;for(const t of n)e=e.insert(t.key,t);return e}function Px(n){let e=Cx;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ao(){return bc()}function Rx(){return bc()}function bc(){return new Io((n=>n.toString()),((n,e)=>n.isEqual(e)))}const QP=new dt(_e.comparator),XP=new Dt(_e.comparator);function Ve(...n){let e=XP;for(const t of n)e=e.add(t);return e}const JP=new Dt(Ne);function ZP(){return JP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hd(e)?"-0":e}}function Nx(n){return{integerValue:""+n}}function eR(n,e){return kP(e)?Nx(e):Pg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(){this._=void 0}}function tR(n,e,t){return n instanceof Mc?(function(r,o){const l={fields:{[px]:{stringValue:fx},[gx]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Ig(o)&&(o=Hd(o)),o&&(l.fields[mx]=o),{mapValue:l}})(t,e):n instanceof za?Mx(n,e):n instanceof Oc?Ox(n,e):(function(r,o){const l=Dx(r,o),c=K0(l)+K0(r.Ee);return Mm(l)&&Mm(r.Ee)?Nx(c):Pg(r.serializer,c)})(n,e)}function nR(n,e,t){return n instanceof za?Mx(n,e):n instanceof Oc?Ox(n,e):t}function Dx(n,e){return n instanceof md?(function(i){return Mm(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Mc extends Gd{}class za extends Gd{constructor(e){super(),this.elements=e}}function Mx(n,e){const t=Vx(e);for(const i of n.elements)t.some((r=>Hi(r,i)))||t.push(i);return{arrayValue:{values:t}}}class Oc extends Gd{constructor(e){super(),this.elements=e}}function Ox(n,e){let t=Vx(e);for(const i of n.elements)t=t.filter((r=>!Hi(r,i)));return{arrayValue:{values:t}}}class md extends Gd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function K0(n){return _t(n.integerValue||n.doubleValue)}function Vx(n){return kg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,t){this.field=e,this.transform=t}}function iR(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof za&&r instanceof za||i instanceof Oc&&r instanceof Oc?ja(i.elements,r.elements,Hi):i instanceof md&&r instanceof md?Hi(i.Ee,r.Ee):i instanceof Mc&&r instanceof Mc})(n.transform,e.transform)}class rR{constructor(e,t){this.version=e,this.transformResults=t}}class Kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Yd{}function jx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Rg(n.key,Kn.none()):new Xc(n.key,n.data,Kn.none());{const t=n.data,i=bn.empty();let r=new Dt($t.comparator);for(let o of e.fields)if(!r.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new xs(n.key,i,new Rn(r.toArray()),Kn.none())}}function sR(n,e,t){n instanceof Xc?(function(r,o,l){const c=r.value.clone(),h=Y0(r.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof xs?(function(r,o,l){if(!Kh(r.precondition,o))return void o.convertToUnknownDocument(l.version);const c=Y0(r.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(Fx(r)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):(function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Ec(n,e,t,i){return n instanceof Xc?(function(o,l,c,h){if(!Kh(o.precondition,l))return c;const f=o.value.clone(),m=Q0(o.fieldTransforms,h,l);return f.setAll(m),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof xs?(function(o,l,c,h){if(!Kh(o.precondition,l))return c;const f=Q0(o.fieldTransforms,h,l),m=l.data;return m.setAll(Fx(o)),m.setAll(f),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(n,e,t,i):(function(o,l,c){return Kh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function oR(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),o=Dx(i.transform,r||null);o!=null&&(t===null&&(t=bn.empty()),t.set(i.field,o))}return t||null}function G0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ja(i,r,((o,l)=>iR(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Xc extends Yd{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class xs extends Yd{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Fx(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Y0(n,e,t){const i=new Map;Ke(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let r=0;r<t.length;r++){const o=n[r],l=o.transform,c=e.data.field(o.field);i.set(o.field,nR(l,c,t[r]))}return i}function Q0(n,e,t){const i=new Map;for(const r of n){const o=r.transform,l=t.data.field(r.field);i.set(r.field,tR(o,l,e))}return i}class Rg extends Yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aR extends Yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&sR(o,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ec(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ec(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Rx();return this.mutations.forEach((r=>{const o=e.get(r.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(r.key)?null:c;const h=jx(l,c);h!==null&&i.set(r.key,h),l.isValidDocument()||l.convertToNoDocument(ke.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&ja(this.mutations,e.mutations,((t,i)=>G0(t,i)))&&ja(this.baseMutations,e.baseMutations,((t,i)=>G0(t,i)))}}class Ng{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Ke(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=(function(){return QP})();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new Ng(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et,Be;function hR(n){switch(n){case X.OK:return Ee(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function Bx(n){if(n===void 0)return xr("GRPC error has no .code"),X.UNKNOWN;switch(n){case Et.OK:return X.OK;case Et.CANCELLED:return X.CANCELLED;case Et.UNKNOWN:return X.UNKNOWN;case Et.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Et.INTERNAL:return X.INTERNAL;case Et.UNAVAILABLE:return X.UNAVAILABLE;case Et.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Et.NOT_FOUND:return X.NOT_FOUND;case Et.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Et.ABORTED:return X.ABORTED;case Et.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Et.DATA_LOSS:return X.DATA_LOSS;default:return Ee(39323,{code:n})}}(Be=Et||(Et={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=new us([4294967295,4294967295],0);function X0(n){const e=ax().encode(n),t=new ZE;return t.update(e),new Uint8Array(t.digest())}function J0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new us([t,i],0),new us([r,o],0)]}class Dg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new cc(`Invalid padding: ${t}`);if(i<0)throw new cc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new cc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new cc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=us.fromNumber(this.fe)}pe(e,t,i){let r=e.add(t.multiply(us.fromNumber(i)));return r.compare(dR)===1&&(r=new us([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=X0(e),[i,r]=J0(t);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);if(!this.ye(l))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Dg(o,r,t);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.fe===0)return;const t=X0(e),[i,r]=J0(t);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);this.we(l)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Jc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Qd(ke.min(),r,new dt(Ne),Tr(),Ve())}}class Jc{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Jc(i,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=r}}class zx{constructor(e,t){this.targetId=e,this.De=t}}class Ux{constructor(e,t,i=qt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class Z0{constructor(){this.ve=0,this.Ce=ew(),this.Fe=qt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ve(),t=Ve(),i=Ve();return this.Ce.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Ee(38017,{changeType:o})}})),new Jc(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=ew()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class fR{constructor(e){this.We=e,this.Ge=new Map,this.ze=Tr(),this.je=Th(),this.Je=Th(),this.He=new dt(Ne)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,r)=>{this.nt(r)&&t(r)}))}it(e){const t=e.targetId,i=e.De.count,r=this.st(t);if(r){const o=r.target;if(Vm(o))if(i===0){const l=new _e(o.path);this.Xe(t,l,en.newNoDocument(l,ke.min()))}else Ke(i===1,20013,{expectedCount:i});else{const l=this.ot(t);if(l!==i){const c=this._t(e),h=c?this.ut(c,e,l):1;if(h!==0){this.rt(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,f)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t;let l,c;try{l=ys(i).toUint8Array()}catch(h){if(h instanceof dx)return ps("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new Dg(l,r,o)}catch(h){return ps(h instanceof cc?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.fe===0?null:c}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let r=0;return i.forEach((o=>{const l=this.We.lt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(t,o,null),r++)})),r}Pt(e){const t=new Map;this.Ge.forEach(((o,l)=>{const c=this.st(l);if(c){if(o.current&&Vm(c.target)){const h=new _e(c.target.path);this.Tt(h).has(l)||this.It(l,h)||this.Xe(l,h,en.newNoDocument(h,e))}o.Ne&&(t.set(l,o.Le()),o.ke())}}));let i=Ve();this.Je.forEach(((o,l)=>{let c=!0;l.forEachWhile((h=>{const f=this.st(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(o))})),this.ze.forEach(((o,l)=>l.setReadTime(e)));const r=new Qd(e,t,this.He,this.ze,i);return this.ze=Tr(),this.je=Th(),this.Je=Th(),this.He=new dt(Ne),r}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Z0,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Dt(Ne),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Dt(Ne),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Z0),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Th(){return new dt(_e.comparator)}function ew(){return new dt(_e.comparator)}const pR={asc:"ASCENDING",desc:"DESCENDING"},mR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gR={and:"AND",or:"OR"};class yR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fm(n,e){return n.useProto3Json||Wd(e)?e:{value:e}}function gd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _R(n,e){return gd(n,e.toTimestamp())}function Li(n){return Ke(!!n,49232),ke.fromTimestamp((function(t){const i=gs(t);return new ot(i.seconds,i.nanos)})(n))}function Mg(n,e){return Bm(n,e).canonicalString()}function Bm(n,e){const t=(function(r){return new nt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Hx(n){const e=nt.fromString(n);return Ke(Yx(e),10190,{key:e.toString()}),e}function zm(n,e){return Mg(n.databaseId,e.path)}function nm(n,e){const t=Hx(e);if(t.get(1)!==n.databaseId.projectId)throw new le(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(qx(t))}function $x(n,e){return Mg(n.databaseId,e)}function vR(n){const e=Hx(n);return e.length===4?nt.emptyPath():qx(e)}function Um(n){return new nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qx(n){return Ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function tw(n,e,t){return{name:zm(n,e),fields:t.value.mapValue.fields}}function wR(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ee(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(f,m){return f.useProto3Json?(Ke(m===void 0||typeof m=="string",58123),qt.fromBase64String(m||"")):(Ke(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),qt.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(f){const m=f.code===void 0?X.UNKNOWN:Bx(f.code);return new le(m,f.message||"")})(l);t=new Ux(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=nm(n,i.document.name),o=Li(i.document.updateTime),l=i.document.createTime?Li(i.document.createTime):ke.min(),c=new bn({mapValue:{fields:i.document.fields}}),h=en.newFoundDocument(r,o,l,c),f=i.targetIds||[],m=i.removedTargetIds||[];t=new Gh(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=nm(n,i.document),o=i.readTime?Li(i.readTime):ke.min(),l=en.newNoDocument(r,o),c=i.removedTargetIds||[];t=new Gh([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=nm(n,i.document),o=i.removedTargetIds||[];t=new Gh([],o,r,null)}else{if(!("filter"in e))return Ee(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new uR(r,o),c=i.targetId;t=new zx(c,l)}}return t}function bR(n,e){let t;if(e instanceof Xc)t={update:tw(n,e.key,e.value)};else if(e instanceof Rg)t={delete:zm(n,e.key)};else if(e instanceof xs)t={update:tw(n,e.key,e.data),updateMask:PR(e.fieldMask)};else{if(!(e instanceof aR))return Ee(16599,{Rt:e.type});t={verify:zm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const c=l.transform;if(c instanceof Mc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof za)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Oc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof md)return{fieldPath:l.field.canonicalString(),increment:c.Ee};throw Ee(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:_R(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ee(27497)})(n,e.precondition)),t}function ER(n,e){return n&&n.length>0?(Ke(e!==void 0,14353),n.map((t=>(function(r,o){let l=r.updateTime?Li(r.updateTime):Li(o);return l.isEqual(ke.min())&&(l=Li(o)),new rR(l,r.transformResults||[])})(t,e)))):[]}function xR(n,e){return{documents:[$x(n,e.path)]}}function TR(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=$x(n,r);const o=(function(f){if(f.length!==0)return Gx(gi.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((m=>(function(y){return{field:ka(y.field),direction:kR(y.dir)}})(m)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Fm(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:t,parent:r}}function SR(n){let e=vR(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Ke(i===1,65062);const m=t.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=(function(_){const y=Kx(_);return y instanceof gi&&Ex(y)?y.getFilters():[y]})(t.where));let l=[];t.orderBy&&(l=(function(_){return _.map((y=>(function(T){return new Dc(Aa(T.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(y)))})(t.orderBy));let c=null;t.limit&&(c=(function(_){let y;return y=typeof _=="object"?_.value:_,Wd(y)?null:y})(t.limit));let h=null;t.startAt&&(h=(function(_){const y=!!_.before,x=_.values||[];return new pd(x,y)})(t.startAt));let f=null;return t.endAt&&(f=(function(_){const y=!_.before,x=_.values||[];return new pd(x,y)})(t.endAt)),$P(e,r,l,o,c,"F",h,f)}function IR(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Kx(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Aa(t.unaryFilter.field);return xt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Aa(t.unaryFilter.field);return xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Aa(t.unaryFilter.field);return xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Aa(t.unaryFilter.field);return xt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return xt.create(Aa(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return gi.create(t.compositeFilter.filters.map((i=>Kx(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(n):Ee(30097,{filter:n})}function kR(n){return pR[n]}function AR(n){return mR[n]}function CR(n){return gR[n]}function ka(n){return{fieldPath:n.canonicalString()}}function Aa(n){return $t.fromServerFormat(n.fieldPath)}function Gx(n){return n instanceof xt?(function(t){if(t.op==="=="){if(U0(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NAN"}};if(z0(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(U0(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NAN"}};if(z0(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(t.field),op:AR(t.op),value:t.value}}})(n):n instanceof gi?(function(t){const i=t.getFilters().map((r=>Gx(r)));return i.length===1?i[0]:{compositeFilter:{op:CR(t.op),filters:i}}})(n):Ee(54877,{filter:n})}function PR(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Yx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,t,i,r,o=ke.min(),l=ke.min(),c=qt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.gt=e}}function NR(n){const e=SR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.Dn=new MR}addToCollectionParentIndex(e,t){return this.Dn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(ms.min())}updateCollectionGroup(e,t,i){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class MR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Dt(nt.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Dt(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qx=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(Qx,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ua(0)}static ur(){return new Ua(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="LruGarbageCollector",OR=1048576;function rw([n,e],[t,i]){const r=Ne(n,t);return r===0?Ne(e,i):r}class VR{constructor(e){this.Tr=e,this.buffer=new Dt(rw),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();rw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class LR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){he(iw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){el(t)?he(iw,"Ignoring IndexedDB error during garbage collection: ",t):await Za(t)}await this.Rr(3e5)}))}}class jR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(Ud.ue);const i=new VR(t);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.gr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(nw)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nw):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,r,o,l,c,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,l=Date.now(),this.nthSequenceNumber(e,r)))).next((_=>(i=_,c=Date.now(),this.removeTargets(e,i,t)))).next((_=>(o=_,h=Date.now(),this.removeOrphanedDocuments(e,i)))).next((_=>(f=Date.now(),Sa()<=Oe.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${r} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${_} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_}))))}}function FR(n,e){return new jR(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.changes=new Io((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Z.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&Ec(i.mutation,r,Rn.empty(),ot.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ve()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ve()){const r=ao();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((o=>{let l=lc();return o.forEach(((c,h)=>{l=l.insert(c,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const i=ao();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ve())))}populateOverlays(e,t,i){const r=[];return i.forEach((o=>{t.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,i,r){let o=Tr();const l=bc(),c=(function(){return bc()})();return t.forEach(((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof xs)?o=o.insert(f.key,f):m!==void 0?(l.set(f.key,m.mutation.getFieldMask()),Ec(m.mutation,f,m.mutation.getFieldMask(),ot.now())):l.set(f.key,Rn.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,m)=>l.set(f,m))),t.forEach(((f,m)=>{var _;return c.set(f,new zR(m,(_=l.get(f))!==null&&_!==void 0?_:null))})),c)))}recalculateAndSaveOverlays(e,t){const i=bc();let r=new dt(((l,c)=>l-c)),o=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((h=>{const f=t.get(h);if(f===null)return;let m=i.get(h)||Rn.empty();m=c.applyToLocalView(f,m),i.set(h,m);const _=(r.get(c.batchId)||Ve()).add(h);r=r.insert(c.batchId,_)}))})).next((()=>{const l=[],c=r.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),f=h.key,m=h.value,_=Rx();m.forEach((y=>{if(!o.has(y)){const x=jx(t.get(y),i.get(y));x!==null&&_.set(y,x),o=o.add(y)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,_))}return Z.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return(function(l){return _e.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ix(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):Z.resolve(ao());let c=Cc,h=o;return l.next((f=>Z.forEach(f,((m,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),o.get(m)?Z.resolve():this.remoteDocumentCache.getEntry(e,m).next((y=>{h=h.insert(m,y)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,Ve()))).next((m=>({batchId:c,changes:Px(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((i=>{let r=lc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const o=t.collectionGroup;let l=lc();return this.indexManager.getCollectionParents(e,o).next((c=>Z.forEach(c,(h=>{const f=(function(_,y){return new tl(y,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next((m=>{m.forEach(((_,y)=>{l=l.insert(_,y)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r)))).next((l=>{o.forEach(((h,f)=>{const m=f.getKey();l.get(m)===null&&(l=l.insert(m,en.newInvalidDocument(m)))}));let c=lc();return l.forEach(((h,f)=>{const m=o.get(h);m!==void 0&&Ec(m.mutation,f,Rn.empty(),ot.now()),Kd(t,f)&&(c=c.insert(h,f))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Z.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Li(r.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(r){return{name:r.name,query:NR(r.bundledQuery),readTime:Li(r.readTime)}})(t)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.overlays=new dt(_e.comparator),this.kr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ao();return Z.forEach(t,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,o)=>{this.wt(e,t,o)})),Z.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.kr.delete(i)),Z.resolve()}getOverlaysForCollection(e,t,i){const r=ao(),o=t.length+1,l=new _e(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return Z.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new dt(((f,m)=>f-m));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=ao(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const c=ao(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,m)=>c.set(f,m))),!(c.size()>=r)););return Z.resolve(c)}wt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new cR(t,i));let o=this.kr.get(t);o===void 0&&(o=Ve(),this.kr.set(t,o)),this.kr.set(t,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.qr=new Dt(Ft.Qr),this.$r=new Dt(Ft.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new Ft(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Ft(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new _e(new nt([])),i=new Ft(t,e),r=new Ft(t,e+1),o=[];return this.$r.forEachInRange([i,r],(l=>{this.Wr(l),o.push(l.key)})),o}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new _e(new nt([])),i=new Ft(t,e),r=new Ft(t,e+1);let o=Ve();return this.$r.forEachInRange([i,r],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new Ft(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ft{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return _e.comparator(e.key,t.key)||Ne(e.Hr,t.Hr)}static Ur(e,t){return Ne(e.Hr,t.Hr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Dt(Ft.Qr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new lR(o,t,i,r);this.mutationQueue.push(l);for(const c of r)this.Yr=this.Yr.add(new Ft(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Z.resolve(l)}lookupMutationBatch(e,t){return Z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Xr(i),o=r<0?0:r;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Sg:this.er-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ft(t,0),r=new Ft(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],(l=>{const c=this.Zr(l.Hr);o.push(c)})),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Dt(Ne);return t.forEach((r=>{const o=new Ft(r,0),l=new Ft(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,l],(c=>{i=i.add(c.Hr)}))})),Z.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let o=i;_e.isDocumentKey(o)||(o=o.child(""));const l=new Ft(new _e(o),0);let c=new Dt(Ne);return this.Yr.forEachWhile((h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(h.Hr)),!0)}),l),Z.resolve(this.ei(c))}ei(e){const t=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){Ke(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return Z.forEach(t.mutations,(r=>{const o=new Ft(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new Ft(t,0),r=this.Yr.firstAfterOrEqual(i);return Z.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.ni=e,this.docs=(function(){return new dt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),o=r?r.size:0,l=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Z.resolve(i?i.document.mutableCopy():en.newInvalidDocument(t))}getEntries(e,t){let i=Tr();return t.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():en.newInvalidDocument(r))})),Z.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=Tr();const l=t.path,c=new _e(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||xP(EP(m),i)<=0||(r.has(m.key)||Kd(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,t,i,r){Ee(9500)}ri(e,t){return Z.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new GR(this)}getSize(e){return Z.resolve(this.size)}}class GR extends BR{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)})),Z.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.persistence=e,this.ii=new Io((t=>Ag(t)),Cg),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.si=0,this.oi=new Og,this.targetCount=0,this._i=Ua.ar()}forEachTarget(e,t){return this.ii.forEach(((i,r)=>t(r))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),Z.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Ua(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.hr(t),Z.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,i){let r=0;const o=[];return this.ii.forEach(((l,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.ii.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),Z.waitFor(o).next((()=>r))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return Z.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),Z.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach((l=>{o.push(r.markPotentiallyOrphaned(e,l))})),Z.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return Z.resolve(i)}containsKey(e,t){return Z.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,t){this.ai={},this.overlays={},this.ui=new Ud(0),this.ci=!1,this.ci=!0,this.li=new $R,this.referenceDelegate=e(this),this.hi=new YR(this),this.indexManager=new DR,this.remoteDocumentCache=(function(r){return new KR(r)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new RR(t),this.Ti=new WR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new qR(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){he("MemoryPersistence","Starting transaction:",e);const r=new QR(this.ui.next());return this.referenceDelegate.Ii(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ei(e,t){return Z.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class QR extends SP{constructor(e){super(),this.currentSequenceNumber=e}}class Vg{constructor(e){this.persistence=e,this.Ai=new Og,this.Ri=null}static Vi(e){return new Vg(e)}get mi(){if(this.Ri)return this.Ri;throw Ee(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),Z.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((r=>this.mi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((o=>this.mi.add(o.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.mi,(i=>{const r=_e.fromPath(i);return this.fi(e,r).next((o=>{o||t.removeEntry(r,ke.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return Z.or([()=>Z.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class yd{constructor(e,t){this.persistence=e,this.gi=new Io((i=>AP(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=FR(this,t)}static Vi(e,t){return new yd(e,t)}Ii(){}di(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return Z.forEach(this.gi,((i,r)=>this.Sr(e,i,r).next((o=>o?Z.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(e,(l=>this.Sr(e,l,t).next((c=>{c||(i++,o.removeEntry(l,ke.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Z.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$h(e.data.value)),t}Sr(e,t,i){return Z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.gi.get(t);return Z.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=r}static Es(e,t){let i=Ve(),r=Ve();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Lg(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return q1()?8:IP(sn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,r){const o={result:null};return this.ps(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ys(e,t,r,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new XR;return this.ws(e,t,l).next((c=>{if(o.result=c,this.Rs)return this.Ss(e,t,l,c.size)}))})).next((()=>o.result))}Ss(e,t,i,r){return i.documentReadCount<this.Vs?(Sa()<=Oe.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Ia(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(Sa()<=Oe.DEBUG&&he("QueryEngine","Query:",Ia(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Sa()<=Oe.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Ia(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vi(t))):Z.resolve())}ps(e,t){if(q0(t))return Z.resolve(null);let i=Vi(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=jm(t,null,"F"),i=Vi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=Ve(...o);return this.gs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((h=>{const f=this.bs(t,c);return this.Ds(t,f,l,h.readTime)?this.ps(e,jm(t,null,"F")):this.vs(e,f,t,h)}))))})))))}ys(e,t,i,r){return q0(t)||r.isEqual(ke.min())?Z.resolve(null):this.gs.getDocuments(e,i).next((o=>{const l=this.bs(t,o);return this.Ds(t,l,i,r)?Z.resolve(null):(Sa()<=Oe.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ia(t)),this.vs(e,l,t,bP(r,Cc)).next((c=>c)))}))}bs(e,t){let i=new Dt(Ax(e));return t.forEach(((r,o)=>{Kd(e,o)&&(i=i.add(o))})),i}Ds(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(e,t,i){return Sa()<=Oe.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Ia(t)),this.gs.getDocumentsMatchingQuery(e,t,ms.min(),i)}vs(e,t,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="LocalStore",ZR=3e8;class eN{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new dt(Ne),this.Ms=new Io((o=>Ag(o)),Cg),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function tN(n,e,t,i){return new eN(n,e,t,i)}async function Jx(n,e){const t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],c=[];let h=Ve();for(const f of r){l.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){c.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return t.localDocuments.getDocuments(i,h).next((f=>({Bs:f,removedBatchIds:l,addedBatchIds:c})))}))}))}function nN(n,e){const t=Ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(c,h,f,m){const _=f.batch,y=_.keys();let x=Z.resolve();return y.forEach((T=>{x=x.next((()=>m.getEntry(h,T))).next((k=>{const I=f.docVersions.get(T);Ke(I!==null,48541),k.version.compareTo(I)<0&&(_.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),m.addEntry(k)))}))})),x.next((()=>c.mutationQueue.removeMutationBatch(h,_)))})(t,i,e,o).next((()=>o.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let h=Ve();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(h=h.add(c.batch.mutations[f].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function Zx(n){const e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function iN(n,e){const t=Ce(n),i=e.snapshotVersion;let r=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Os.newChangeBuffer({trackRemovals:!0});r=t.Fs;const c=[];e.targetChanges.forEach(((m,_)=>{const y=r.get(_);if(!y)return;c.push(t.hi.removeMatchingKeys(o,m.removedDocuments,_).next((()=>t.hi.addMatchingKeys(o,m.addedDocuments,_))));let x=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?x=x.withResumeToken(qt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):m.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(m.resumeToken,i)),r=r.insert(_,x),(function(k,I,N){return k.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=ZR?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(y,x,m)&&c.push(t.hi.updateTargetData(o,x))}));let h=Tr(),f=Ve();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))})),c.push(rN(o,l,e.documentUpdates).next((m=>{h=m.Ls,f=m.ks}))),!i.isEqual(ke.min())){const m=t.hi.getLastRemoteSnapshotVersion(o).next((_=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,i)));c.push(m)}return Z.waitFor(c).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,h,f))).next((()=>h))})).then((o=>(t.Fs=r,o)))}function rN(n,e,t){let i=Ve(),r=Ve();return t.forEach((o=>i=i.add(o))),e.getEntries(n,i).next((o=>{let l=Tr();return t.forEach(((c,h)=>{const f=o.get(c);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),h.isNoDocument()&&h.version.isEqual(ke.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):he(jg,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)})),{Ls:l,ks:r}}))}function sN(n,e){const t=Ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Sg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function oN(n,e){const t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.hi.getTargetData(i,e).next((o=>o?(r=o,Z.resolve(r)):t.hi.allocateTargetId(i).next((l=>(r=new rs(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function Wm(n,e,t){const i=Ce(n),r=i.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!el(l))throw l;he(jg,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function sw(n,e,t){const i=Ce(n);let r=ke.min(),o=Ve();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,f,m){const _=Ce(h),y=_.Ms.get(m);return y!==void 0?Z.resolve(_.Fs.get(y)):_.hi.getTargetData(f,m)})(i,l,Vi(e)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(l,c.targetId).next((h=>{o=h}))})).next((()=>i.Cs.getDocumentsMatchingQuery(l,e,t?r:ke.min(),t?o:Ve()))).next((c=>(aN(i,KP(e),c),{documents:c,qs:o})))))}function aN(n,e,t){let i=n.xs.get(e)||ke.min();t.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.xs.set(e,i)}class ow{constructor(){this.activeTargetIds=ZP()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lN{constructor(){this.Fo=new ow,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ow,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="ConnectivityMonitor";class lw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){he(aw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){he(aw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh=null;function Hm(){return Sh===null?Sh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sh++,"0x"+Sh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="RestConnection",uN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hN{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===dd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,o){const l=Hm(),c=this.Go(e,t.toUriEncodedString());he(im,`Sending RPC '${e}' ${l}:`,c,i);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,r,o);const{host:f}=new URL(c),m=Ga(f);return this.jo(e,c,h,i,m).then((_=>(he(im,`Received RPC '${e}' ${l}: `,_),_)),(_=>{throw ps(im,`RPC '${e}' ${l} failed with error: `,_,"url: ",c,"request:",i),_}))}Jo(e,t,i,r,o,l){return this.Wo(e,t,i,r,o)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ja})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,o)=>e[o]=r)),i&&i.headers.forEach(((r,o)=>e[o]=r))}Go(e,t){const i=uN[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class fN extends hN{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,r,o){const l=Hm();return new Promise(((c,h)=>{const f=new ex;f.setWithCredentials(!0),f.listenOnce(tx.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Hh.NO_ERROR:const _=f.getResponseJson();he(Xt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),c(_);break;case Hh.TIMEOUT:he(Xt,`RPC '${e}' ${l} timed out`),h(new le(X.DEADLINE_EXCEEDED,"Request time out"));break;case Hh.HTTP_ERROR:const y=f.getStatus();if(he(Xt,`RPC '${e}' ${l} failed with status:`,y,"response text:",f.getResponseText()),y>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const T=x==null?void 0:x.error;if(T&&T.status&&T.message){const k=(function(N){const V=N.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(V)>=0?V:X.UNKNOWN})(T.status);h(new le(k,T.message))}else h(new le(X.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new le(X.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{c_:e,streamId:l,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{he(Xt,`RPC '${e}' ${l} completed.`)}}));const m=JSON.stringify(r);he(Xt,`RPC '${e}' ${l} sending request:`,r),f.send(t,"POST",m,i,15)}))}P_(e,t,i){const r=Hm(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=rx(),c=ix(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,t,i),h.encodeInitMessageHeaders=!0;const m=o.join("");he(Xt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const _=l.createWebChannel(m,h);this.T_(_);let y=!1,x=!1;const T=new dN({Ho:I=>{x?he(Xt,`Not sending because RPC '${e}' stream ${r} is closed:`,I):(y||(he(Xt,`Opening RPC '${e}' stream ${r} transport.`),_.open(),y=!0),he(Xt,`RPC '${e}' stream ${r} sending:`,I),_.send(I))},Yo:()=>_.close()}),k=(I,N,V)=>{I.listen(N,(z=>{try{V(z)}catch(q){setTimeout((()=>{throw q}),0)}}))};return k(_,ac.EventType.OPEN,(()=>{x||(he(Xt,`RPC '${e}' stream ${r} transport opened.`),T.s_())})),k(_,ac.EventType.CLOSE,(()=>{x||(x=!0,he(Xt,`RPC '${e}' stream ${r} transport closed`),T.__(),this.I_(_))})),k(_,ac.EventType.ERROR,(I=>{x||(x=!0,ps(Xt,`RPC '${e}' stream ${r} transport errored. Name:`,I.name,"Message:",I.message),T.__(new le(X.UNAVAILABLE,"The operation could not be completed")))})),k(_,ac.EventType.MESSAGE,(I=>{var N;if(!x){const V=I.data[0];Ke(!!V,16349);const z=V,q=(z==null?void 0:z.error)||((N=z[0])===null||N===void 0?void 0:N.error);if(q){he(Xt,`RPC '${e}' stream ${r} received error:`,q);const K=q.status;let J=(function(R){const O=Et[R];if(O!==void 0)return Bx(O)})(K),P=q.message;J===void 0&&(J=X.INTERNAL,P="Unknown error status: "+K+" with message "+q.message),x=!0,T.__(new le(J,P)),_.close()}else he(Xt,`RPC '${e}' stream ${r} received:`,V),T.a_(V)}})),k(c,nx.STAT_EVENT,(I=>{I.stat===Rm.PROXY?he(Xt,`RPC '${e}' stream ${r} detected buffering proxy`):I.stat===Rm.NOPROXY&&he(Xt,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{T.o_()}),0),T}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(n){return new yR(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,t,i=1e3,r=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-i);r>0&&he("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="PersistentStream";class tT{constructor(e,t,i,r,o,l,c,h){this.Fi=e,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new eT(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(xr(t.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.b_===t&&this.W_(i,r)}),(i=>{e((()=>{const r=new le(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((r=>{i((()=>this.G_(r)))})),this.stream.onMessage((r=>{i((()=>++this.C_==1?this.j_(r):this.onNext(r)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return he(cw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(he(cw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class pN extends tT{constructor(e,t,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=wR(this.serializer,e),i=(function(o){if(!("targetChange"in o))return ke.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ke.min():l.readTime?Li(l.readTime):ke.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=Um(this.serializer),t.addTarget=(function(o,l){let c;const h=l.target;if(c=Vm(h)?{documents:xR(o,h)}:{query:TR(o,h).Vt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=Wx(o,l.resumeToken);const f=Fm(o,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(ke.min())>0){c.readTime=gd(o,l.snapshotVersion.toTimestamp());const f=Fm(o,l.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,e);const i=IR(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=Um(this.serializer),t.removeTarget=e,this.k_(t)}}class mN extends tT{constructor(e,t,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=ER(e.writeResults,e.commitTime),i=Li(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=Um(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>bR(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{}class yN extends gN{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new le(X.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Wo(e,Bm(t,i),r,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(X.UNKNOWN,o.toString())}))}Jo(e,t,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Jo(e,Bm(t,i),r,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le(X.UNKNOWN,l.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class _N{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xr(t),this._a=!1):he("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="RemoteStore";class vN{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo((l=>{i.enqueueAndForget((async()=>{ko(this)&&(he(vo,"Restarting streams for network reachability change."),await(async function(h){const f=Ce(h);f.Ia.add(4),await Zc(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Jd(f)})(this))}))})),this.Aa=new _N(i,r)}}async function Jd(n){if(ko(n))for(const e of n.da)await e(!0)}async function Zc(n){for(const e of n.da)await e(!1)}function nT(n,e){const t=Ce(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Ug(t)?zg(t):nl(t).x_()&&Bg(t,e))}function Fg(n,e){const t=Ce(n),i=nl(t);t.Ta.delete(e),i.x_()&&iT(t,e),t.Ta.size===0&&(i.x_()?i.B_():ko(t)&&t.Aa.set("Unknown"))}function Bg(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nl(n).H_(e)}function iT(n,e){n.Ra.$e(e),nl(n).Y_(e)}function zg(n){n.Ra=new fR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),nl(n).start(),n.Aa.aa()}function Ug(n){return ko(n)&&!nl(n).M_()&&n.Ta.size>0}function ko(n){return Ce(n).Ia.size===0}function rT(n){n.Ra=void 0}async function wN(n){n.Aa.set("Online")}async function bN(n){n.Ta.forEach(((e,t)=>{Bg(n,e)}))}async function EN(n,e){rT(n),Ug(n)?(n.Aa.la(e),zg(n)):n.Aa.set("Unknown")}async function xN(n,e,t){if(n.Aa.set("Online"),e instanceof Ux&&e.state===2&&e.cause)try{await(async function(r,o){const l=o.cause;for(const c of o.targetIds)r.Ta.has(c)&&(await r.remoteSyncer.rejectListen(c,l),r.Ta.delete(c),r.Ra.removeTarget(c))})(n,e)}catch(i){he(vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await _d(n,i)}else if(e instanceof Gh?n.Ra.Ye(e):e instanceof zx?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ke.min()))try{const i=await Zx(n.localStore);t.compareTo(i)>=0&&await(function(o,l){const c=o.Ra.Pt(l);return c.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ta.get(f);m&&o.Ta.set(f,m.withResumeToken(h.resumeToken,l))}})),c.targetMismatches.forEach(((h,f)=>{const m=o.Ta.get(h);if(!m)return;o.Ta.set(h,m.withResumeToken(qt.EMPTY_BYTE_STRING,m.snapshotVersion)),iT(o,h);const _=new rs(m.target,h,f,m.sequenceNumber);Bg(o,_)})),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(i){he(vo,"Failed to raise snapshot:",i),await _d(n,i)}}async function _d(n,e,t){if(!el(e))throw e;n.Ia.add(1),await Zc(n),n.Aa.set("Offline"),t||(t=()=>Zx(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{he(vo,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Jd(n)}))}function sT(n,e){return e().catch((t=>_d(n,t,e)))}async function Zd(n){const e=Ce(n),t=vs(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Sg;for(;TN(e);)try{const r=await sN(e.localStore,i);if(r===null){e.Pa.length===0&&t.B_();break}i=r.batchId,SN(e,r)}catch(r){await _d(e,r)}oT(e)&&aT(e)}function TN(n){return ko(n)&&n.Pa.length<10}function SN(n,e){n.Pa.push(e);const t=vs(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function oT(n){return ko(n)&&!vs(n).M_()&&n.Pa.length>0}function aT(n){vs(n).start()}async function IN(n){vs(n).na()}async function kN(n){const e=vs(n);for(const t of n.Pa)e.X_(t.mutations)}async function AN(n,e,t){const i=n.Pa.shift(),r=Ng.from(i,e,t);await sT(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Zd(n)}async function CN(n,e){e&&vs(n).Z_&&await(async function(i,r){if((function(l){return hR(l)&&l!==X.ABORTED})(r.code)){const o=i.Pa.shift();vs(i).N_(),await sT(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Zd(i)}})(n,e),oT(n)&&aT(n)}async function uw(n,e){const t=Ce(n);t.asyncQueue.verifyOperationInProgress(),he(vo,"RemoteStore received new credentials");const i=ko(t);t.Ia.add(3),await Zc(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Jd(t)}async function PN(n,e){const t=Ce(n);e?(t.Ia.delete(2),await Jd(t)):e||(t.Ia.add(2),await Zc(t),t.Aa.set("Unknown"))}function nl(n){return n.Va||(n.Va=(function(t,i,r){const o=Ce(t);return o.ia(),new pN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Zo:wN.bind(null,n),e_:bN.bind(null,n),n_:EN.bind(null,n),J_:xN.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Ug(n)?zg(n):n.Aa.set("Unknown")):(await n.Va.stop(),rT(n))}))),n.Va}function vs(n){return n.ma||(n.ma=(function(t,i,r){const o=Ce(t);return o.ia(),new mN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:IN.bind(null,n),n_:CN.bind(null,n),ea:kN.bind(null,n),ta:AN.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await Zd(n)):(await n.ma.stop(),n.Pa.length>0&&(he(vo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){const l=Date.now()+i,c=new Wg(e,t,l,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hg(n,e){if(xr("AsyncQueue",`${e}: ${n}`),el(n))return new le(X.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{static emptySet(e){return new Na(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||_e.comparator(t.key,i.key):(t,i)=>_e.comparator(t.key,i.key),this.keyedMap=lc(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Na)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Na;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(){this.fa=new dt(_e.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ee(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Wa{constructor(e,t,i,r,o,l,c,h,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,o){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new Wa(e,t,Na.emptySet(t),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class NN{constructor(){this.queries=dw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const r=Ce(t),o=r.queries;r.queries=dw(),o.forEach(((l,c)=>{for(const h of c.wa)h.onError(i)}))})(this,new le(X.ABORTED,"Firestore shutting down"))}}function dw(){return new Io((n=>kx(n)),qd)}async function $g(n,e){const t=Ce(n);let i=3;const r=e.query;let o=t.queries.get(r);o?!o.Sa()&&e.ba()&&(i=2):(o=new RN,i=e.ba()?0:1);try{switch(i){case 0:o.ya=await t.onListen(r,!0);break;case 1:o.ya=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(l){const c=Hg(l,`Initialization of query '${Ia(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&Kg(t)}async function qg(n,e){const t=Ce(n),i=e.query;let r=3;const o=t.queries.get(i);if(o){const l=o.wa.indexOf(e);l>=0&&(o.wa.splice(l,1),o.wa.length===0?r=e.ba()?0:1:!o.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function DN(n,e){const t=Ce(n);let i=!1;for(const r of e){const o=r.query,l=t.queries.get(o);if(l){for(const c of l.wa)c.Ca(r)&&(i=!0);l.ya=r}}i&&Kg(t)}function MN(n,e,t){const i=Ce(n),r=i.queries.get(e);if(r)for(const o of r.wa)o.onError(t);i.queries.delete(e)}function Kg(n){n.Da.forEach((e=>{e.next()}))}var $m,fw;(fw=$m||($m={})).Fa="default",fw.Cache="cache";class Gg{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Wa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==$m.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e){this.key=e}}class cT{constructor(e){this.key=e}}class ON{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ve(),this.mutatedKeys=Ve(),this.Xa=Ax(e),this.eu=new Na(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new hw,r=t?t.eu:this.eu;let o=t?t.mutatedKeys:this.mutatedKeys,l=r,c=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((m,_)=>{const y=r.get(m),x=Kd(this.query,_)?_:null,T=!!y&&this.mutatedKeys.has(y.key),k=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let I=!1;y&&x?y.data.isEqual(x.data)?T!==k&&(i.track({type:3,doc:x}),I=!0):this.iu(y,x)||(i.track({type:2,doc:x}),I=!0,(h&&this.Xa(x,h)>0||f&&this.Xa(x,f)<0)&&(c=!0)):!y&&x?(i.track({type:0,doc:x}),I=!0):y&&!x&&(i.track({type:1,doc:y}),I=!0,(h||f)&&(c=!0)),I&&(x?(l=l.add(x),o=k?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{eu:l,ru:i,Ds:c,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort(((m,_)=>(function(x,T){const k=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{At:I})}};return k(x)-k(T)})(m.type,_.type)||this.Xa(m.doc,_.doc))),this.su(i),r=r!=null&&r;const c=t&&!r?this.ou():[],h=this.Za.size===0&&this.current&&!r?1:0,f=h!==this.Ya;return this.Ya=h,l.length!==0||f?{snapshot:new Wa(this.query,e.eu,o,l,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new hw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ve(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new cT(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new lT(i))})),t}uu(e){this.Ha=e.qs,this.Za=Ve();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Wa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Yg="SyncEngine";class VN{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class LN{constructor(e){this.key=e,this.lu=!1}}class jN{constructor(e,t,i,r,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new Io((c=>kx(c)),qd),this.Tu=new Map,this.Iu=new Set,this.du=new dt(_e.comparator),this.Eu=new Map,this.Au=new Og,this.Ru={},this.Vu=new Map,this.mu=Ua.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function FN(n,e,t=!0){const i=mT(n);let r;const o=i.Pu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=await uT(i,e,t,!0),r}async function BN(n,e){const t=mT(n);await uT(t,e,!0,!1)}async function uT(n,e,t,i){const r=await oN(n.localStore,Vi(e)),o=r.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return i&&(c=await zN(n,e,o,l==="current",r.resumeToken)),n.isPrimaryClient&&t&&nT(n.remoteStore,r),c}async function zN(n,e,t,i,r){n.gu=(_,y,x)=>(async function(k,I,N,V){let z=I.view.nu(N);z.Ds&&(z=await sw(k.localStore,I.query,!1).then((({documents:P})=>I.view.nu(P,z))));const q=V&&V.targetChanges.get(I.targetId),K=V&&V.targetMismatches.get(I.targetId)!=null,J=I.view.applyChanges(z,k.isPrimaryClient,q,K);return mw(k,I.targetId,J._u),J.snapshot})(n,_,y,x);const o=await sw(n.localStore,e,!0),l=new ON(e,o.qs),c=l.nu(o.documents),h=Jc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=l.applyChanges(c,n.isPrimaryClient,h);mw(n,t,f._u);const m=new VN(e,t,l);return n.Pu.set(e,m),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),f.snapshot}async function UN(n,e,t){const i=Ce(n),r=i.Pu.get(e),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter((l=>!qd(l,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Wm(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&Fg(i.remoteStore,r.targetId),qm(i,r.targetId)})).catch(Za)):(qm(i,r.targetId),await Wm(i.localStore,r.targetId,!0))}async function WN(n,e){const t=Ce(n),i=t.Pu.get(e),r=t.Tu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Fg(t.remoteStore,i.targetId))}async function HN(n,e,t){const i=XN(n);try{const r=await(function(l,c){const h=Ce(l),f=ot.now(),m=c.reduce(((x,T)=>x.add(T.key)),Ve());let _,y;return h.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let T=Tr(),k=Ve();return h.Os.getEntries(x,m).next((I=>{T=I,T.forEach(((N,V)=>{V.isValidDocument()||(k=k.add(N))}))})).next((()=>h.localDocuments.getOverlayedDocuments(x,T))).next((I=>{_=I;const N=[];for(const V of c){const z=oR(V,_.get(V.key).overlayedDocument);z!=null&&N.push(new xs(V.key,z,vx(z.value.mapValue),Kn.exists(!0)))}return h.mutationQueue.addMutationBatch(x,f,N,c)})).next((I=>{y=I;const N=I.applyToLocalDocumentSet(_,k);return h.documentOverlayCache.saveOverlays(x,I.batchId,N)}))})).then((()=>({batchId:y.batchId,changes:Px(_)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(l,c,h){let f=l.Ru[l.currentUser.toKey()];f||(f=new dt(Ne)),f=f.insert(c,h),l.Ru[l.currentUser.toKey()]=f})(i,r.batchId,t),await eu(i,r.changes),await Zd(i.remoteStore)}catch(r){const o=Hg(r,"Failed to persist write");t.reject(o)}}async function hT(n,e){const t=Ce(n);try{const i=await iN(t.localStore,e);e.targetChanges.forEach(((r,o)=>{const l=t.Eu.get(o);l&&(Ke(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.lu=!0:r.modifiedDocuments.size>0?Ke(l.lu,14607):r.removedDocuments.size>0&&(Ke(l.lu,42227),l.lu=!1))})),await eu(t,i,e)}catch(i){await Za(i)}}function pw(n,e,t){const i=Ce(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Pu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(l,c){const h=Ce(l);h.onlineState=c;let f=!1;h.queries.forEach(((m,_)=>{for(const y of _.wa)y.va(c)&&(f=!0)})),f&&Kg(h)})(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function $N(n,e,t){const i=Ce(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Eu.get(e),o=r&&r.key;if(o){let l=new dt(_e.comparator);l=l.insert(o,en.newNoDocument(o,ke.min()));const c=Ve().add(o),h=new Qd(ke.min(),new Map,new dt(Ne),l,c);await hT(i,h),i.du=i.du.remove(o),i.Eu.delete(e),Qg(i)}else await Wm(i.localStore,e,!1).then((()=>qm(i,e,t))).catch(Za)}async function qN(n,e){const t=Ce(n),i=e.batch.batchId;try{const r=await nN(t.localStore,e);fT(t,i,null),dT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await eu(t,r)}catch(r){await Za(r)}}async function KN(n,e,t){const i=Ce(n);try{const r=await(function(l,c){const h=Ce(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let m;return h.mutationQueue.lookupMutationBatch(f,c).next((_=>(Ke(_!==null,37113),m=_.keys(),h.mutationQueue.removeMutationBatch(f,_)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,c))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m))).next((()=>h.localDocuments.getDocuments(f,m)))}))})(i.localStore,e);fT(i,e,t),dT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await eu(i,r)}catch(r){await Za(r)}}function dT(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function fT(n,e,t){const i=Ce(n);let r=i.Ru[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function qm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||pT(n,i)}))}function pT(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Fg(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Qg(n))}function mw(n,e,t){for(const i of t)i instanceof lT?(n.Au.addReference(i.key,e),GN(n,i)):i instanceof cT?(he(Yg,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||pT(n,i.key)):Ee(19791,{yu:i})}function GN(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(he(Yg,"New document in limbo: "+t),n.Iu.add(i),Qg(n))}function Qg(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new _e(nt.fromString(e)),i=n.mu.next();n.Eu.set(i,new LN(t)),n.du=n.du.insert(t,i),nT(n.remoteStore,new rs(Vi($d(t.path)),i,"TargetPurposeLimboResolution",Ud.ue))}}async function eu(n,e,t){const i=Ce(n),r=[],o=[],l=[];i.Pu.isEmpty()||(i.Pu.forEach(((c,h)=>{l.push(i.gu(h,e,t).then((f=>{var m;if((f||t)&&i.isPrimaryClient){const _=f?!f.fromCache:(m=t==null?void 0:t.targetChanges.get(h.targetId))===null||m===void 0?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,_?"current":"not-current")}if(f){r.push(f);const _=Lg.Es(h.targetId,f);o.push(_)}})))})),await Promise.all(l),i.hu.J_(r),await(async function(h,f){const m=Ce(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>Z.forEach(f,(y=>Z.forEach(y.Is,(x=>m.persistence.referenceDelegate.addReference(_,y.targetId,x))).next((()=>Z.forEach(y.ds,(x=>m.persistence.referenceDelegate.removeReference(_,y.targetId,x)))))))))}catch(_){if(!el(_))throw _;he(jg,"Failed to update sequence numbers: "+_)}for(const _ of f){const y=_.targetId;if(!_.fromCache){const x=m.Fs.get(y),T=x.snapshotVersion,k=x.withLastLimboFreeSnapshotVersion(T);m.Fs=m.Fs.insert(y,k)}}})(i.localStore,o))}async function YN(n,e){const t=Ce(n);if(!t.currentUser.isEqual(e)){he(Yg,"User change. New user:",e.toKey());const i=await Jx(t.localStore,e);t.currentUser=e,(function(o,l){o.Vu.forEach((c=>{c.forEach((h=>{h.reject(new le(X.CANCELLED,l))}))})),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await eu(t,i.Bs)}}function QN(n,e){const t=Ce(n),i=t.Eu.get(e);if(i&&i.lu)return Ve().add(i.key);{let r=Ve();const o=t.Tu.get(e);if(!o)return r;for(const l of o){const c=t.Pu.get(l);r=r.unionWith(c.view.tu)}return r}}function mT(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$N.bind(null,e),e.hu.J_=DN.bind(null,e.eventManager),e.hu.pu=MN.bind(null,e.eventManager),e}function XN(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KN.bind(null,e),e}class vd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return tN(this.persistence,new JR,e.initialUser,this.serializer)}Du(e){return new Xx(Vg.Vi,this.serializer)}bu(e){return new lN}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vd.provider={build:()=>new vd};class JN extends vd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ke(this.persistence.referenceDelegate instanceof yd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new LR(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new Xx((i=>yd.Vi(i,t)),this.serializer)}}class Km{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>pw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=YN.bind(null,this.syncEngine),await PN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new NN})()}createDatastore(e){const t=Xd(e.databaseInfo.databaseId),i=(function(o){return new fN(o)})(e.databaseInfo);return(function(o,l,c,h){return new yN(o,l,c,h)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,o,l,c){return new vN(i,r,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>pw(this.syncEngine,t,0)),(function(){return lw.C()?new lw:new cN})())}createSyncEngine(e,t){return(function(r,o,l,c,h,f,m){const _=new jN(r,o,l,c,h,f);return m&&(_.fu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const o=Ce(r);he(vo,"RemoteStore shutting down."),o.Ia.add(5),await Zc(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Km.provider={build:()=>new Km};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="FirestoreClient";class ZN{constructor(e,t,i,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Zt.UNAUTHENTICATED,this.clientId=Tg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{he(ws,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(he(ws,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Hg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function sm(n,e){n.asyncQueue.verifyOperationInProgress(),he(ws,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await Jx(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>{ps("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{he("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((r=>{ps("Terminating Firestore due to IndexedDb database deletion failed",r)}))})),n._offlineComponents=e}async function gw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await eD(n);he(ws,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>uw(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>uw(e.remoteStore,r))),n._onlineComponents=e}async function eD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(ws,"Using user provided OfflineComponentProvider");try{await sm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===X.FAILED_PRECONDITION||r.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;ps("Error using user provided cache. Falling back to memory cache: "+t),await sm(n,new vd)}}else he(ws,"Using default OfflineComponentProvider"),await sm(n,new JN(void 0));return n._offlineComponents}async function gT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(ws,"Using user provided OnlineComponentProvider"),await gw(n,n._uninitializedComponentsProvider._online)):(he(ws,"Using default OnlineComponentProvider"),await gw(n,new Km))),n._onlineComponents}function tD(n){return gT(n).then((e=>e.syncEngine))}async function wd(n){const e=await gT(n),t=e.eventManager;return t.onListen=FN.bind(null,e.syncEngine),t.onUnlisten=UN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=WN.bind(null,e.syncEngine),t}function nD(n,e,t={}){const i=new wr;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,h,f){const m=new Xg({next:y=>{m.Ou(),l.enqueueAndForget((()=>qg(o,_)));const x=y.docs.has(c);!x&&y.fromCache?f.reject(new le(X.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&y.fromCache&&h&&h.source==="server"?f.reject(new le(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(y)},error:y=>f.reject(y)}),_=new Gg($d(c.path),m,{includeMetadataChanges:!0,ka:!0});return $g(o,_)})(await wd(n),n.asyncQueue,e,t,i))),i.promise}function iD(n,e,t={}){const i=new wr;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,h,f){const m=new Xg({next:y=>{m.Ou(),l.enqueueAndForget((()=>qg(o,_))),y.fromCache&&h.source==="server"?f.reject(new le(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(y)},error:y=>f.reject(y)}),_=new Gg(c,m,{includeMetadataChanges:!0,ka:!0});return $g(o,_)})(await wd(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="firestore.googleapis.com",_w=!0;class vw{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new le(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_T,this.ssl=_w}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:_w;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Qx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OR)throw new le(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yT((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ef{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new hP;switch(i.type){case"firstParty":return new mP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new le(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=yw.get(t);i&&(he("ComponentProvider","Removing Datastore"),yw.delete(t),i.terminate())})(this),Promise.resolve()}}function rD(n,e,t,i={}){var r;n=xn(n,ef);const o=Ga(e),l=n._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:n._getEmulatorOptions()}),h=`${e}:${t}`;o&&(pE(`https://${h}`),mE("Firestore",!0)),l.host!==_T&&l.host!==h&&ps("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},l),{host:h,ssl:o,emulatorOptions:i});if(!fs(f,c)&&(n._setSettings(f),i.mockUserToken)){let m,_;if(typeof i.mockUserToken=="string")m=i.mockUserToken,_=Zt.MOCK_USER;else{m=L1(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new le(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Zt(y)}n._authCredentials=new dP(new ox(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ts(this.firestore,e,this._query)}}class pt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Qc(t,pt._jsonSchema))return new pt(e,i||null,new _e(nt.fromString(t.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:Tt("string",pt._jsonSchemaVersion),referencePath:Tt("string")};class hs extends Ts{constructor(e,t,i){super(e,t,$d(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new _e(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function Ha(n,e,...t){if(n=St(n),lx("collection","path",e),n instanceof ef){const i=nt.fromString(e,...t);return N0(i),new hs(n,null,i)}{if(!(n instanceof pt||n instanceof hs))throw new le(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(nt.fromString(e,...t));return N0(i),new hs(n.firestore,null,i)}}function ji(n,e,...t){if(n=St(n),arguments.length===1&&(e=Tg.newId()),lx("doc","path",e),n instanceof ef){const i=nt.fromString(e,...t);return R0(i),new pt(n,null,new _e(i))}{if(!(n instanceof pt||n instanceof hs))throw new le(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(nt.fromString(e,...t));return R0(i),new pt(n.firestore,n instanceof hs?n.converter:null,new _e(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="AsyncQueue";class bw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new eT(this,"async_queue_retry"),this.oc=()=>{const i=rm();i&&he(ww,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=rm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=rm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new wr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!el(e))throw e;he(ww,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,xr("INTERNAL UNHANDLED ERROR: ",Ew(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const r=Wg.createAndSchedule(this,e,t,i,(o=>this.lc(o)));return this.ec.push(r),r}ac(){this.tc&&Ee(47125,{hc:Ew(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Ew(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(n,["next","error","complete"])}class Sr extends ef{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new bw,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bw(e),this._firestoreClient=void 0,await e}}}function sD(n,e){const t=typeof n=="object"?n:hg(),i=typeof n=="string"?n:dd,r=Ya(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=O1("firestore");o&&rD(r,...o)}return r}function tf(n){if(n._terminated)throw new le(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||oD(n),n._firestoreClient}function oD(n){var e,t,i;const r=n._freezeSettings(),o=(function(c,h,f,m){return new RP(c,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,yT(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new ZN(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hn(qt.fromBase64String(e))}catch(t){throw new le(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hn(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qc(e,Hn._jsonSchema))return Hn.fromBase64String(e.bytes)}}Hn._jsonSchemaVersion="firestore/bytes/1.0",Hn._jsonSchema={type:Tt("string",Hn._jsonSchemaVersion),bytes:Tt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fi._jsonSchemaVersion}}static fromJSON(e){if(Qc(e,Fi._jsonSchema))return new Fi(e.latitude,e.longitude)}}Fi._jsonSchemaVersion="firestore/geoPoint/1.0",Fi._jsonSchema={type:Tt("string",Fi._jsonSchemaVersion),latitude:Tt("number"),longitude:Tt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Bi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qc(e,Bi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Bi(e.vectorValues);throw new le(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Bi._jsonSchemaVersion="firestore/vectorValue/1.0",Bi._jsonSchema={type:Tt("string",Bi._jsonSchemaVersion),vectorValues:Tt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=/^__.*__$/;class lD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new xs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xc(e,this.data,t,this.fieldTransforms)}}class vT{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new xs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ec:n})}}class rf{constructor(e,t,i,r,o,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new rf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return bd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(wT(this.Ec)&&aD.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class cD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Xd(e)}Dc(e,t,i,r=!1){return new rf({Ec:e,methodName:t,bc:i,path:$t.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sf(n){const e=n._freezeSettings(),t=Xd(n._databaseId);return new cD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bT(n,e,t,i,r,o={}){const l=n.Dc(o.merge||o.mergeFields?2:0,e,t,r);ey("Data must be an object, but it was:",l,i);const c=ET(i,l);let h,f;if(o.merge)h=new Rn(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const _ of o.mergeFields){const y=Gm(e,_,t);if(!l.contains(y))throw new le(X.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);TT(m,y)||m.push(y)}h=new Rn(m),f=l.fieldTransforms.filter((_=>h.covers(_.field)))}else h=null,f=l.fieldTransforms;return new lD(new bn(c),h,f)}class of extends tu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof of}}function uD(n,e,t){return new rf({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Jg extends tu{_toFieldTransform(e){return new Lx(e.path,new Mc)}isEqual(e){return e instanceof Jg}}class Zg extends tu{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=uD(this,e,!0),i=this.vc.map((o=>il(o,t))),r=new za(i);return new Lx(e.path,r)}isEqual(e){return e instanceof Zg&&fs(this.vc,e.vc)}}function hD(n,e,t,i){const r=n.Dc(1,e,t);ey("Data must be an object, but it was:",r,i);const o=[],l=bn.empty();Es(i,((h,f)=>{const m=ty(e,h,t);f=St(f);const _=r.gc(m);if(f instanceof of)o.push(m);else{const y=il(f,_);y!=null&&(o.push(m),l.set(m,y))}}));const c=new Rn(o);return new vT(l,c,r.fieldTransforms)}function dD(n,e,t,i,r,o){const l=n.Dc(1,e,t),c=[Gm(e,i,t)],h=[r];if(o.length%2!=0)throw new le(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)c.push(Gm(e,o[y])),h.push(o[y+1]);const f=[],m=bn.empty();for(let y=c.length-1;y>=0;--y)if(!TT(f,c[y])){const x=c[y];let T=h[y];T=St(T);const k=l.gc(x);if(T instanceof of)f.push(x);else{const I=il(T,k);I!=null&&(f.push(x),m.set(x,I))}}const _=new Rn(f);return new vT(m,_,l.fieldTransforms)}function fD(n,e,t,i=!1){return il(t,n.Dc(i?4:3,e))}function il(n,e){if(xT(n=St(n)))return ey("Unsupported field value:",e,n),ET(n,e);if(n instanceof tu)return(function(i,r){if(!wT(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,r){const o=[];let l=0;for(const c of i){let h=il(c,r.yc(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}})(n,e)}return(function(i,r){if((i=St(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return eR(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=ot.fromDate(i);return{timestampValue:gd(r.serializer,o)}}if(i instanceof ot){const o=new ot(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:gd(r.serializer,o)}}if(i instanceof Fi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Hn)return{bytesValue:Wx(r.serializer,i._byteString)};if(i instanceof pt){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Mg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Bi)return(function(l,c){return{mapValue:{fields:{[yx]:{stringValue:_x},[fd]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw c.wc("VectorValues must only contain numeric values.");return Pg(c.serializer,f)}))}}}}}})(i,r);throw r.wc(`Unsupported field value: ${zd(i)}`)})(n,e)}function ET(n,e){const t={};return hx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(n,((i,r)=>{const o=il(r,e.Vc(i));o!=null&&(t[i]=o)})),{mapValue:{fields:t}}}function xT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ot||n instanceof Fi||n instanceof Hn||n instanceof pt||n instanceof tu||n instanceof Bi)}function ey(n,e,t){if(!xT(t)||!cx(t)){const i=zd(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function Gm(n,e,t){if((e=St(e))instanceof nf)return e._internalPath;if(typeof e=="string")return ty(n,e);throw bd("Field path arguments must be of type string or ",n,!1,void 0,t)}const pD=new RegExp("[~\\*/\\[\\]]");function ty(n,e,t){if(e.search(pD)>=0)throw bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nf(...e.split("."))._internalPath}catch{throw bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bd(n,e,t,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${i}`),l&&(h+=` in document ${r}`),h+=")"),new le(X.INVALID_ARGUMENT,c+n+h)}function TT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(af("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class mD extends ST{data(){return super.data()}}function af(n,e){return typeof e=="string"?ty(n,e):e instanceof nf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new le(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ny{}class kT extends ny{}function iy(n,e,...t){let i=[];e instanceof ny&&i.push(e),i=i.concat(t),(function(o){const l=o.filter((h=>h instanceof ry)).length,c=o.filter((h=>h instanceof lf)).length;if(l>1||l>0&&c>0)throw new le(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class lf extends kT{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new lf(e,t,i)}_apply(e){const t=this._parse(e);return CT(e._query,t),new Ts(e.firestore,e.converter,Lm(e._query,t))}_parse(e){const t=sf(e.firestore);return(function(o,l,c,h,f,m,_){let y;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new le(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Sw(_,m);const T=[];for(const k of _)T.push(Tw(h,o,k));y={arrayValue:{values:T}}}else y=Tw(h,o,_)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Sw(_,m),y=fD(c,l,_,m==="in"||m==="not-in");return xt.create(f,m,y)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function gD(n,e,t){const i=e,r=af("where",n);return lf._create(r,i,t)}class ry extends ny{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ry(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:gi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,o){let l=r;const c=o.getFlattenedFilters();for(const h of c)CT(l,h),l=Lm(l,h)})(e._query,t),new Ts(e.firestore,e.converter,Lm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sy extends kT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sy(e,t)}_apply(e){const t=(function(r,o,l){if(r.startAt!==null)throw new le(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new le(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dc(o,l)})(e._query,this._field,this._direction);return new Ts(e.firestore,e.converter,(function(r,o){const l=r.explicitOrderBy.concat([o]);return new tl(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}}function AT(n,e="asc"){const t=e,i=af("orderBy",n);return sy._create(i,t)}function Tw(n,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new le(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ix(e)&&t.indexOf("/")!==-1)throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(nt.fromString(t));if(!_e.isDocumentKey(i))throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return B0(n,new _e(i))}if(t instanceof pt)return B0(n,t._key);throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zd(t)}.`)}function Sw(n,e){if(!Array.isArray(n)||n.length===0)throw new le(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CT(n,e){const t=(function(r,o){for(const l of r)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class yD{convertValue(e,t="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Es(e,((r,o)=>{i[r]=this.convertValue(o,t)})),i}convertVectorValue(e){var t,i,r;const o=(r=(i=(t=e.fields)===null||t===void 0?void 0:t[fd].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map((l=>_t(l.doubleValue)));return new Bi(o)}convertGeoPoint(e){return new Fi(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Hd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Pc(e));default:return null}}convertTimestamp(e){const t=gs(e);return new ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=nt.fromString(e);Ke(Yx(i),9688,{name:e});const r=new Rc(i.get(1),i.get(3)),o=new _e(i.popFirst(5));return r.isEqual(t)||xr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class uc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ho extends ST{constructor(e,t,i,r,o,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(af("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ho._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ho._jsonSchemaVersion="firestore/documentSnapshot/1.0",ho._jsonSchema={type:Tt("string",ho._jsonSchemaVersion),bundleSource:Tt("string","DocumentSnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class Yh extends ho{data(e={}){return super.data(e)}}class fo{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new uc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Yh(this._firestore,this._userDataWriter,i.key,i,new uc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((c=>{const h=new Yh(r._firestore,r._userDataWriter,c.doc.key,c.doc,new uc(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const h=new Yh(r._firestore,r._userDataWriter,c.doc.key,c.doc,new uc(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),m=l.indexOf(c.doc.key)),{type:_D(c.type),doc:h,oldIndex:f,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _D(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(n){n=xn(n,pt);const e=xn(n.firestore,Sr);return nD(tf(e),n._key).then((t=>OT(e,n,t)))}fo._jsonSchemaVersion="firestore/querySnapshot/1.0",fo._jsonSchema={type:Tt("string",fo._jsonSchemaVersion),bundleSource:Tt("string","QuerySnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class oy extends yD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,t)}}function vD(n){n=xn(n,Ts);const e=xn(n.firestore,Sr),t=tf(e),i=new oy(e);return IT(n._query),iD(t,n._query).then((r=>new fo(e,i,n,r)))}function NT(n,e,t){n=xn(n,pt);const i=xn(n.firestore,Sr),r=PT(n.converter,e,t);return cf(i,[bT(sf(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Kn.none())])}function Ed(n,e,t,...i){n=xn(n,pt);const r=xn(n.firestore,Sr),o=sf(r);let l;return l=typeof(e=St(e))=="string"||e instanceof nf?dD(o,"updateDoc",n._key,e,t,i):hD(o,"updateDoc",n._key,e),cf(r,[l.toMutation(n._key,Kn.exists(!0))])}function DT(n){return cf(xn(n.firestore,Sr),[new Rg(n._key,Kn.none())])}function ay(n,e){const t=xn(n.firestore,Sr),i=ji(n),r=PT(n.converter,e);return cf(t,[bT(sf(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Kn.exists(!1))]).then((()=>i))}function MT(n,...e){var t,i,r;n=St(n);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||xw(e[l])||(o=e[l++]);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(xw(e[l])){const _=e[l];e[l]=(t=_.next)===null||t===void 0?void 0:t.bind(_),e[l+1]=(i=_.error)===null||i===void 0?void 0:i.bind(_),e[l+2]=(r=_.complete)===null||r===void 0?void 0:r.bind(_)}let h,f,m;if(n instanceof pt)f=xn(n.firestore,Sr),m=$d(n._key.path),h={next:_=>{e[l]&&e[l](OT(f,n,_))},error:e[l+1],complete:e[l+2]};else{const _=xn(n,Ts);f=xn(_.firestore,Sr),m=_._query;const y=new oy(f);h={next:x=>{e[l]&&e[l](new fo(f,y,_,x))},error:e[l+1],complete:e[l+2]},IT(n._query)}return(function(y,x,T,k){const I=new Xg(k),N=new Gg(x,I,T);return y.asyncQueue.enqueueAndForget((async()=>$g(await wd(y),N))),()=>{I.Ou(),y.asyncQueue.enqueueAndForget((async()=>qg(await wd(y),N)))}})(tf(f),m,c,h)}function cf(n,e){return(function(i,r){const o=new wr;return i.asyncQueue.enqueueAndForget((async()=>HN(await tD(i),r,o))),o.promise})(tf(n),e)}function OT(n,e,t){const i=t.docs.get(e._key),r=new oy(n);return new ho(n,r,e._key,i,new uc(t.hasPendingWrites,t.fromCache),e.converter)}function xd(){return new Jg("serverTimestamp")}function Iw(...n){return new Zg("arrayUnion",n)}(function(e,t=!0){(function(r){Ja=r})(Qa),Ui(new mi("firestore",((i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),c=new Sr(new fP(i.getProvider("auth-internal")),new gP(l,i.getProvider("app-check-internal")),(function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new le(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rc(f.options.projectId,m)})(l,r),l);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),qn(I0,k0,e),qn(I0,k0,"esm2017")})();const VT="@firebase/installations",ly="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=1e4,jT=`w:${ly}`,FT="FIS_v2",wD="https://firebaseinstallations.googleapis.com/v1",bD=3600*1e3,ED="installations",xD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},wo=new So(ED,xD,TD);function BT(n){return n instanceof $i&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT({projectId:n}){return`${wD}/projects/${n}/installations`}function UT(n){return{token:n.token,requestStatus:2,expiresIn:ID(n.expiresIn),creationTime:Date.now()}}async function WT(n,e){const i=(await e.json()).error;return wo.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function HT({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function SD(n,{refreshToken:e}){const t=HT(n);return t.append("Authorization",kD(e)),t}async function $T(n){const e=await n();return e.status>=500&&e.status<600?n():e}function ID(n){return Number(n.replace("s","000"))}function kD(n){return`${FT} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=zT(n),r=HT(n),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const l={fid:t,authVersion:FT,appId:n.appId,sdkVersion:jT},c={method:"POST",headers:r,body:JSON.stringify(l)},h=await $T(()=>fetch(i,c));if(h.ok){const f=await h.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:UT(f.authToken)}}else throw await WT("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=/^[cdef][\w-]{21}$/,Ym="";function RD(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=ND(n);return PD.test(t)?t:Ym}catch{return Ym}}function ND(n){return CD(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=new Map;function GT(n,e){const t=uf(n);YT(t,e),DD(t,e)}function YT(n,e){const t=KT.get(n);if(t)for(const i of t)i(e)}function DD(n,e){const t=MD();t&&t.postMessage({key:n,fid:e}),OD()}let lo=null;function MD(){return!lo&&"BroadcastChannel"in self&&(lo=new BroadcastChannel("[Firebase] FID Change"),lo.onmessage=n=>{YT(n.data.key,n.data.fid)}),lo}function OD(){KT.size===0&&lo&&(lo.close(),lo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="firebase-installations-database",LD=1,bo="firebase-installations-store";let om=null;function cy(){return om||(om=Ld(VD,LD,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(bo)}}})),om}async function Td(n,e){const t=uf(n),r=(await cy()).transaction(bo,"readwrite"),o=r.objectStore(bo),l=await o.get(t);return await o.put(e,t),await r.done,(!l||l.fid!==e.fid)&&GT(n,e.fid),e}async function QT(n){const e=uf(n),i=(await cy()).transaction(bo,"readwrite");await i.objectStore(bo).delete(e),await i.done}async function hf(n,e){const t=uf(n),r=(await cy()).transaction(bo,"readwrite"),o=r.objectStore(bo),l=await o.get(t),c=e(l);return c===void 0?await o.delete(t):await o.put(c,t),await r.done,c&&(!l||l.fid!==c.fid)&&GT(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uy(n){let e;const t=await hf(n.appConfig,i=>{const r=jD(i),o=FD(n,r);return e=o.registrationPromise,o.installationEntry});return t.fid===Ym?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function jD(n){const e=n||{fid:RD(),registrationStatus:0};return XT(e)}function FD(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(wo.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=BD(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:zD(n)}:{installationEntry:e}}async function BD(n,e){try{const t=await AD(n,e);return Td(n.appConfig,t)}catch(t){throw BT(t)&&t.customData.serverCode===409?await QT(n.appConfig):await Td(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function zD(n){let e=await kw(n.appConfig);for(;e.registrationStatus===1;)await qT(100),e=await kw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await uy(n);return i||t}return e}function kw(n){return hf(n,e=>{if(!e)throw wo.create("installation-not-found");return XT(e)})}function XT(n){return UD(n)?{fid:n.fid,registrationStatus:0}:n}function UD(n){return n.registrationStatus===1&&n.registrationTime+LT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD({appConfig:n,heartbeatServiceProvider:e},t){const i=HD(n,t),r=SD(n,t),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const l={installation:{sdkVersion:jT,appId:n.appId}},c={method:"POST",headers:r,body:JSON.stringify(l)},h=await $T(()=>fetch(i,c));if(h.ok){const f=await h.json();return UT(f)}else throw await WT("Generate Auth Token",h)}function HD(n,{fid:e}){return`${zT(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hy(n,e=!1){let t;const i=await hf(n.appConfig,o=>{if(!JT(o))throw wo.create("not-registered");const l=o.authToken;if(!e&&KD(l))return o;if(l.requestStatus===1)return t=$D(n,e),o;{if(!navigator.onLine)throw wo.create("app-offline");const c=YD(o);return t=qD(n,c),c}});return t?await t:i.authToken}async function $D(n,e){let t=await Aw(n.appConfig);for(;t.authToken.requestStatus===1;)await qT(100),t=await Aw(n.appConfig);const i=t.authToken;return i.requestStatus===0?hy(n,e):i}function Aw(n){return hf(n,e=>{if(!JT(e))throw wo.create("not-registered");const t=e.authToken;return QD(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function qD(n,e){try{const t=await WD(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return await Td(n.appConfig,i),t}catch(t){if(BT(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await QT(n.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Td(n.appConfig,i)}throw t}}function JT(n){return n!==void 0&&n.registrationStatus===2}function KD(n){return n.requestStatus===2&&!GD(n)}function GD(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+bD}function YD(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function QD(n){return n.requestStatus===1&&n.requestTime+LT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(n){const e=n,{installationEntry:t,registrationPromise:i}=await uy(e);return i?i.catch(console.error):hy(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JD(n,e=!1){const t=n;return await ZD(t),(await hy(t,e)).token}async function ZD(n){const{registrationPromise:e}=await uy(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(n){if(!n||!n.options)throw am("App Configuration");if(!n.name)throw am("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw am(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function am(n){return wo.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="installations",tM="installations-internal",nM=n=>{const e=n.getProvider("app").getImmediate(),t=eM(e),i=Ya(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},iM=n=>{const e=n.getProvider("app").getImmediate(),t=Ya(e,ZT).getImmediate();return{getId:()=>XD(t),getToken:r=>JD(t,r)}};function rM(){Ui(new mi(ZT,nM,"PUBLIC")),Ui(new mi(tM,iM,"PRIVATE"))}rM();qn(VT,ly);qn(VT,ly,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM="/firebase-messaging-sw.js",oM="/firebase-cloud-messaging-push-scope",eS="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",aM="https://fcmregistrations.googleapis.com/v1",tS="google.c.a.c_id",lM="google.c.a.c_l",cM="google.c.a.ts",uM="google.c.a.e",Cw=1e4;var Pw;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Pw||(Pw={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Vc;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(Vc||(Vc={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function hM(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),r=new Uint8Array(i.length);for(let o=0;o<i.length;++o)r[o]=i.charCodeAt(o);return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="fcm_token_details_db",dM=5,Rw="fcm_token_object_Store";async function fM(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(lm))return null;let e=null;return(await Ld(lm,dM,{upgrade:async(i,r,o,l)=>{var c;if(r<2||!i.objectStoreNames.contains(Rw))return;const h=l.objectStore(Rw),f=await h.index("fcmSenderId").get(n);if(await h.clear(),!!f){if(r===2){const m=f;if(!m.auth||!m.p256dh||!m.endpoint)return;e={token:m.fcmToken,createTime:(c=m.createTime)!==null&&c!==void 0?c:Date.now(),subscriptionOptions:{auth:m.auth,p256dh:m.p256dh,endpoint:m.endpoint,swScope:m.swScope,vapidKey:typeof m.vapidKey=="string"?m.vapidKey:fr(m.vapidKey)}}}else if(r===3){const m=f;e={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:fr(m.auth),p256dh:fr(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:fr(m.vapidKey)}}}else if(r===4){const m=f;e={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:fr(m.auth),p256dh:fr(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:fr(m.vapidKey)}}}}}})).close(),await Xp(lm),await Xp("fcm_vapid_details_db"),await Xp("undefined"),pM(e)?e:null}function pM(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM="firebase-messaging-database",gM=1,Lc="firebase-messaging-store";let cm=null;function nS(){return cm||(cm=Ld(mM,gM,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Lc)}}})),cm}async function yM(n){const e=iS(n),i=await(await nS()).transaction(Lc).objectStore(Lc).get(e);if(i)return i;{const r=await fM(n.appConfig.senderId);if(r)return await dy(n,r),r}}async function dy(n,e){const t=iS(n),r=(await nS()).transaction(Lc,"readwrite");return await r.objectStore(Lc).put(e,t),await r.done,e}function iS({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},rn=new So("messaging","Messaging",_M);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vM(n,e){const t=await py(n),i=rS(e),r={method:"POST",headers:t,body:JSON.stringify(i)};let o;try{o=await(await fetch(fy(n.appConfig),r)).json()}catch(l){throw rn.create("token-subscribe-failed",{errorInfo:l==null?void 0:l.toString()})}if(o.error){const l=o.error.message;throw rn.create("token-subscribe-failed",{errorInfo:l})}if(!o.token)throw rn.create("token-subscribe-no-token");return o.token}async function wM(n,e){const t=await py(n),i=rS(e.subscriptionOptions),r={method:"PATCH",headers:t,body:JSON.stringify(i)};let o;try{o=await(await fetch(`${fy(n.appConfig)}/${e.token}`,r)).json()}catch(l){throw rn.create("token-update-failed",{errorInfo:l==null?void 0:l.toString()})}if(o.error){const l=o.error.message;throw rn.create("token-update-failed",{errorInfo:l})}if(!o.token)throw rn.create("token-update-no-token");return o.token}async function bM(n,e){const i={method:"DELETE",headers:await py(n)};try{const o=await(await fetch(`${fy(n.appConfig)}/${e}`,i)).json();if(o.error){const l=o.error.message;throw rn.create("token-unsubscribe-failed",{errorInfo:l})}}catch(r){throw rn.create("token-unsubscribe-failed",{errorInfo:r==null?void 0:r.toString()})}}function fy({projectId:n}){return`${aM}/projects/${n}/registrations`}async function py({appConfig:n,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function rS({p256dh:n,auth:e,endpoint:t,vapidKey:i}){const r={web:{endpoint:t,auth:e,p256dh:n}};return i!==eS&&(r.web.applicationPubKey=i),r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=10080*60*1e3;async function xM(n){const e=await SM(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:fr(e.getKey("auth")),p256dh:fr(e.getKey("p256dh"))},i=await yM(n.firebaseDependencies);if(i){if(IM(i.subscriptionOptions,t))return Date.now()>=i.createTime+EM?TM(n,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{await bM(n.firebaseDependencies,i.token)}catch(r){console.warn(r)}return Nw(n.firebaseDependencies,t)}else return Nw(n.firebaseDependencies,t)}async function TM(n,e){try{const t=await wM(n.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return await dy(n.firebaseDependencies,i),t}catch(t){throw t}}async function Nw(n,e){const i={token:await vM(n,e),createTime:Date.now(),subscriptionOptions:e};return await dy(n,i),i.token}async function SM(n,e){const t=await n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:hM(e)})}function IM(n,e){const t=e.vapidKey===n.vapidKey,i=e.endpoint===n.endpoint,r=e.auth===n.auth,o=e.p256dh===n.p256dh;return t&&i&&r&&o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return kM(e,n),AM(e,n),CM(e,n),e}function kM(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const i=e.notification.body;i&&(n.notification.body=i);const r=e.notification.image;r&&(n.notification.image=r);const o=e.notification.icon;o&&(n.notification.icon=o)}function AM(n,e){e.data&&(n.data=e.data)}function CM(n,e){var t,i,r,o,l;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};const c=(r=(i=e.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&r!==void 0?r:(o=e.notification)===null||o===void 0?void 0:o.click_action;c&&(n.fcmOptions.link=c);const h=(l=e.fcmOptions)===null||l===void 0?void 0:l.analytics_label;h&&(n.fcmOptions.analyticsLabel=h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(n){return typeof n=="object"&&!!n&&tS in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(n){if(!n||!n.options)throw um("App Configuration Object");if(!n.name)throw um("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const i of e)if(!t[i])throw um(i);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function um(n){return rn.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=RM(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DM(n){try{n.swRegistration=await navigator.serviceWorker.register(sM,{scope:oM}),n.swRegistration.update().catch(()=>{}),await MM(n.swRegistration)}catch(e){throw rn.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function MM(n){return new Promise((e,t)=>{const i=setTimeout(()=>t(new Error(`Service worker not registered after ${Cw} ms`)),Cw),r=n.installing||n.waiting;n.active?(clearTimeout(i),e()):r?r.onstatechange=o=>{var l;((l=o.target)===null||l===void 0?void 0:l.state)==="activated"&&(r.onstatechange=null,clearTimeout(i),e())}:(clearTimeout(i),t(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(n,e){if(!e&&!n.swRegistration&&await DM(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw rn.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=eS)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM(n,e){if(!navigator)throw rn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw rn.create("permission-blocked");return await VM(n,e==null?void 0:e.vapidKey),await OM(n,e==null?void 0:e.serviceWorkerRegistration),xM(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jM(n,e,t){const i=FM(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:t[tS],message_name:t[lM],message_time:t[cM],message_device_time:Math.floor(Date.now()/1e3)})}function FM(n){switch(n){case Vc.NOTIFICATION_CLICKED:return"notification_open";case Vc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BM(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Vc.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(Dw(t)):n.onMessageHandler.next(Dw(t)));const i=t.data;PM(i)&&i[uM]==="1"&&await jM(n,t.messageType,i)}const Mw="@firebase/messaging",Ow="0.12.22";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=n=>{const e=new NM(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>BM(e,t)),e},UM=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:i=>LM(e,i)}};function WM(){Ui(new mi("messaging",zM,"PUBLIC")),Ui(new mi("messaging-internal",UM,"PRIVATE")),qn(Mw,Ow),qn(Mw,Ow,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sS(){try{await yE()}catch{return!1}return typeof window<"u"&&gE()&&K1()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(n,e){if(!navigator)throw rn.create("only-available-in-window");return n.onMessageHandler=e,()=>{n.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(n=hg()){return sS().then(e=>{if(!e)throw rn.create("unsupported-browser")},e=>{throw rn.create("indexed-db-unsupported")}),Ya(St(n),"messaging").getImmediate()}function qM(n,e){return n=St(n),HM(n,e)}WM();const KM={apiKey:"AIzaSyCIo66QQPVKEk6UfYJ6ecBM6rppt9i8BtU",authDomain:"baby-track-53ba7.firebaseapp.com",projectId:"baby-track-53ba7",storageBucket:"baby-track-53ba7.firebasestorage.app",messagingSenderId:"329413034582",appId:"1:329413034582:web:60e08368d9c5636855b1f7",measurementId:"G-2V9JR0J8VW"},my=wE(KM),gy=aP(my),GM=new mr,un=sD(my),YM=async()=>await sS()?$M(my):null,QM=async()=>{try{return(await gC(gy,GM)).user}catch(n){throw console.error("Erreur lors de la connexion:",n),n}},XM=async()=>{try{await QA(gy)}catch(n){throw console.error("Erreur lors de la dconnexion:",n),n}},JM=n=>YA(gy,n),oS=ae.createContext(),Ir=()=>{const n=ae.useContext(oS);if(!n)throw new Error("useAuth doit tre utilis dans un AuthProvider");return n},ZM=({children:n})=>{const[e,t]=ae.useState(null),[i,r]=ae.useState(!0);ae.useEffect(()=>{const l=JM(c=>{t(c),r(!1)});return()=>l()},[]);const o={user:e,loading:i};return b.jsx(oS.Provider,{value:o,children:!i&&n})},e2=async(n,e,t={})=>{try{const i=Ha(un,"babies",n,"events");return(await ay(i,{...e,addedBy:t,timestamp:xd(),createdAt:e.createdAt||new Date().toISOString()})).id}catch(i){throw console.error("Erreur lors de l'ajout de l'vnement:",i),i}},t2=(n,e)=>{const t=Ha(un,"babies",n,"events"),i=iy(t,AT("createdAt","desc"));return MT(i,r=>{const o=[];r.forEach(l=>{o.push({id:l.id,...l.data()})}),e(o)})},n2=async n=>{try{const e=ji(un,"users",n,"settings","preferences"),t=await RT(e);if(t.exists())return t.data();{const i={feedingInterval:4,theme:"dark",notificationsEnabled:!0};return await NT(e,i),i}}catch(e){throw console.error("Erreur lors de la rcupration des paramtres:",e),e}},i2=async(n,e)=>{try{const t=ji(un,"users",n,"settings","preferences");await NT(t,e,{merge:!0})}catch(t){throw console.error("Erreur lors de la mise  jour des paramtres:",t),t}},r2=async(n,e,t)=>{try{const i=ji(un,"babies",n,"events",e);await Ed(i,t)}catch(i){throw console.error("Erreur lors de la mise  jour de l'vnement:",i),i}},s2=async(n,e)=>{try{const t=ji(un,"babies",n,"events",e);await DT(t)}catch(t){throw console.error("Erreur lors de la suppression de l'vnement:",t),t}},aS=ae.createContext(),rl=()=>{const n=ae.useContext(aS);if(!n)throw new Error("useSettings doit tre utilis dans un SettingsProvider");return n},o2=({children:n})=>{const{user:e}=Ir(),[t,i]=ae.useState({feedingInterval:4,theme:"dark",notificationsEnabled:!0}),[r,o]=ae.useState(!0);ae.useEffect(()=>{e?l():o(!1)},[e]);const l=async()=>{try{const m=await n2(e.uid);i(m)}catch(m){console.error("Erreur lors du chargement des paramtres:",m)}finally{o(!1)}},c=async m=>{try{const _={...t,...m};await i2(e.uid,_),i(_)}catch(_){throw console.error("Erreur lors de la mise  jour des paramtres:",_),_}},f={settings:t,loading:r,updateSettings:c,toggleTheme:()=>{const m=t.theme==="dark"?"light":"dark";c({theme:m})}};return b.jsx(aS.Provider,{value:f,children:n})},a2=async(n,e,t,i)=>{try{const r=Ha(un,"babies");return(await ay(r,{...i,createdBy:n,memberIds:[n],members:[{userId:n,email:e,displayName:t,role:"owner"}],createdAt:xd(),updatedAt:xd()})).id}catch(r){throw console.error("Erreur lors de la cration du bb:",r),r}},Vw=async n=>{try{const e=Ha(un,"babies"),t=iy(e,gD("memberIds","array-contains",n)),i=await vD(t),r=[];return i.forEach(o=>{r.push({id:o.id,...o.data()})}),r}catch(e){throw console.error("Erreur lors de la rcupration des bbs:",e),e}},Qm=async n=>{try{const e=ji(un,"babies",n),t=await RT(e);return t.exists()?{id:t.id,...t.data()}:null}catch(e){throw console.error("Erreur lors de la rcupration du bb:",e),e}},l2=async(n,e)=>{try{const t=ji(un,"babies",n);await Ed(t,{memberIds:Iw(e.userId),members:Iw(e),updatedAt:xd()})}catch(t){throw console.error("Erreur lors de l'ajout du membre:",t),t}},lS=ae.createContext(),Ao=()=>{const n=ae.useContext(lS);if(!n)throw new Error("useBaby must be used within BabyProvider");return n},c2=({children:n})=>{const{user:e}=Ir(),[t,i]=ae.useState([]),[r,o]=ae.useState(null),[l,c]=ae.useState(!0);ae.useEffect(()=>{(async()=>{if(!e){i([]),o(null),c(!1);return}try{c(!0);const y=await Vw(e.uid);i(y);const x=localStorage.getItem("activeBabyId");if(x&&y.find(T=>T.id===x)){const T=await Qm(x);o(T)}else y.length>0&&(o(y[0]),localStorage.setItem("activeBabyId",y[0].id))}catch(y){console.error("Erreur lors du chargement des bbs:",y)}finally{c(!1)}})()},[e]);const m={babies:t,activeBaby:r,loading:l,switchBaby:async _=>{try{const y=await Qm(_);o(y),localStorage.setItem("activeBabyId",_)}catch(y){console.error("Erreur lors du changement de bb:",y)}},refreshBabies:async()=>{if(e)try{const _=await Vw(e.uid);if(i(_),r){const y=_.find(x=>x.id===r.id);y&&o(y)}}catch(_){console.error("Erreur lors du rafrachissement des bbs:",_)}}};return b.jsx(lS.Provider,{value:m,children:n})},u2=()=>{const[n,e]=ae.useState(""),[t,i]=ae.useState(!1),r=async()=>{try{i(!0),e(""),await QM()}catch(o){e("Erreur lors de la connexion. Veuillez ressayer."),console.error(o)}finally{i(!1)}};return b.jsx("div",{className:"login-container",children:b.jsxs("div",{className:"login-card",children:[b.jsxs("div",{className:"login-header",children:[b.jsx("div",{className:"baby-icon",children:""}),b.jsx("h1",{children:"Baby Track"}),b.jsx("p",{children:"Suivez l'allaitement et les couches de votre bb"})]}),b.jsxs("button",{className:"google-signin-button",onClick:r,disabled:t,children:[b.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[b.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),b.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),b.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),b.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),t?"Connexion...":"Se connecter avec Google"]}),n&&b.jsx("div",{className:"error-message",children:n}),b.jsx("div",{className:"login-footer",children:b.jsx("p",{children:" Vos donnes sont scurises et synchronises en temps rel"})})]})})},h2=()=>{const{user:n}=Ir(),{settings:e}=rl();ae.useEffect(()=>{if(!n||!e.notificationsEnabled)return;(async()=>{try{if(!("Notification"in window)){console.log("Les notifications ne sont pas supportes par ce navigateur");return}if(await Notification.requestPermission()!=="granted"){console.log("Permission de notification refuse");return}const r=await YM();if(!r){console.log("Firebase Messaging non support");return}qM(r,o=>{console.log("Message reu en foreground:",o),o.notification&&new Notification(o.notification.title,{body:o.notification.body,icon:"/pwa-192x192.png",badge:"/pwa-192x192.png",vibrate:[200,100,200],tag:"baby-track-notification"})})}catch(i){console.error("Erreur lors de la configuration des notifications:",i)}})()},[n,e.notificationsEnabled])},cS=6048e5,d2=864e5,f2=36e5,Ih=43200,Lw=1440,jw=Symbol.for("constructDateFrom");function Nn(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&jw in n?n[jw](e):n instanceof Date?new n.constructor(e):new Date(e)}function ct(n,e){return Nn(e||n,n)}function p2(n,e,t){const i=ct(n,t==null?void 0:t.in);return isNaN(e)?Nn(n,NaN):(e&&i.setDate(i.getDate()+e),i)}function m2(n,e,t){return Nn(n,+ct(n)+e)}function g2(n,e,t){return m2(n,e*f2)}let y2={};function nu(){return y2}function $a(n,e){var c,h,f,m;const t=nu(),i=(e==null?void 0:e.weekStartsOn)??((h=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)??t.weekStartsOn??((m=(f=t.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,r=ct(n,e==null?void 0:e.in),o=r.getDay(),l=(o<i?7:0)+o-i;return r.setDate(r.getDate()-l),r.setHours(0,0,0,0),r}function Sd(n,e){return $a(n,{...e,weekStartsOn:1})}function uS(n,e){const t=ct(n,e==null?void 0:e.in),i=t.getFullYear(),r=Nn(t,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);const o=Sd(r),l=Nn(t,0);l.setFullYear(i,0,4),l.setHours(0,0,0,0);const c=Sd(l);return t.getTime()>=o.getTime()?i+1:t.getTime()>=c.getTime()?i:i-1}function Id(n){const e=ct(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function sl(n,...e){const t=Nn.bind(null,n||e.find(i=>typeof i=="object"));return e.map(t)}function Eo(n,e){const t=ct(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function hS(n,e,t){const[i,r]=sl(t==null?void 0:t.in,n,e),o=Eo(i),l=Eo(r),c=+o-Id(o),h=+l-Id(l);return Math.round((c-h)/d2)}function _2(n,e){const t=uS(n,e),i=Nn(n,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),Sd(i)}function Qh(n,e){const t=+ct(n)-+ct(e);return t<0?-1:t>0?1:t}function yy(n){return Nn(n,Date.now())}function dS(n,e,t){const[i,r]=sl(t==null?void 0:t.in,n,e);return+Eo(i)==+Eo(r)}function v2(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function w2(n){return!(!v2(n)&&typeof n!="number"||isNaN(+ct(n)))}function b2(n,e,t){const[i,r]=sl(t==null?void 0:t.in,n,e),o=i.getFullYear()-r.getFullYear(),l=i.getMonth()-r.getMonth();return o*12+l}function Xm(n,e,t){const[i,r]=sl(t==null?void 0:t.in,n,e),o=Fw(i,r),l=Math.abs(hS(i,r));i.setDate(i.getDate()-o*l);const c=+(Fw(i,r)===-o),h=o*(l-c);return h===0?0:h}function Fw(n,e){const t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function E2(n){return e=>{const i=(n?Math[n]:Math.trunc)(e);return i===0?0:i}}function x2(n,e){return+ct(n)-+ct(e)}function df(n,e){const t=ct(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function T2(n,e){const t=ct(n,e==null?void 0:e.in),i=t.getMonth();return t.setFullYear(t.getFullYear(),i+1,0),t.setHours(23,59,59,999),t}function S2(n,e){const t=ct(n,e==null?void 0:e.in);return+df(t,e)==+T2(t,e)}function fS(n,e,t){const[i,r,o]=sl(t==null?void 0:t.in,n,n,e),l=Qh(r,o),c=Math.abs(b2(r,o));if(c<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-l*c);let h=Qh(r,o)===-l;S2(i)&&c===1&&Qh(i,o)===1&&(h=!1);const f=l*(c-+h);return f===0?0:f}function pS(n,e,t){const i=x2(n,e)/1e3;return E2(t==null?void 0:t.roundingMethod)(i)}function I2(n,e){const t=ct(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function k2(n,e){const t=e==null?void 0:e.weekStartsOn,i=ct(n,e==null?void 0:e.in),r=i.getDay(),o=(r<t?-7:0)+6-(r-t);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}const A2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},C2=(n,e,t)=>{let i;const r=A2[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function Da(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const P2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},R2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},N2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},D2={date:Da({formats:P2,defaultWidth:"full"}),time:Da({formats:R2,defaultWidth:"full"}),dateTime:Da({formats:N2,defaultWidth:"full"})},M2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},O2=(n,e,t,i)=>M2[n];function Di(n){return(e,t)=>{const i=t!=null&&t.context?String(t.context):"standalone";let r;if(i==="formatting"&&n.formattingValues){const l=n.defaultFormattingWidth||n.defaultWidth,c=t!=null&&t.width?String(t.width):l;r=n.formattingValues[c]||n.formattingValues[l]}else{const l=n.defaultWidth,c=t!=null&&t.width?String(t.width):n.defaultWidth;r=n.values[c]||n.values[l]}const o=n.argumentCallback?n.argumentCallback(e):e;return r[o]}}const V2={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},L2={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},j2={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},F2={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},B2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},z2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},U2=(n,e)=>{const t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},W2={ordinalNumber:U2,era:Di({values:V2,defaultWidth:"wide"}),quarter:Di({values:L2,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Di({values:j2,defaultWidth:"wide"}),day:Di({values:F2,defaultWidth:"wide"}),dayPeriod:Di({values:B2,defaultWidth:"wide",formattingValues:z2,defaultFormattingWidth:"wide"})};function Mi(n){return(e,t={})=>{const i=t.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],o=e.match(r);if(!o)return null;const l=o[0],c=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],h=Array.isArray(c)?$2(c,_=>_.test(l)):H2(c,_=>_.test(l));let f;f=n.valueCallback?n.valueCallback(h):h,f=t.valueCallback?t.valueCallback(f):f;const m=e.slice(l.length);return{value:f,rest:m}}}function H2(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function $2(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function mS(n){return(e,t={})=>{const i=e.match(n.matchPattern);if(!i)return null;const r=i[0],o=e.match(n.parsePattern);if(!o)return null;let l=n.valueCallback?n.valueCallback(o[0]):o[0];l=t.valueCallback?t.valueCallback(l):l;const c=e.slice(r.length);return{value:l,rest:c}}}const q2=/^(\d+)(th|st|nd|rd)?/i,K2=/\d+/i,G2={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Y2={any:[/^b/i,/^(a|c)/i]},Q2={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},X2={any:[/1/i,/2/i,/3/i,/4/i]},J2={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Z2={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},eO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},tO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},nO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},iO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},rO={ordinalNumber:mS({matchPattern:q2,parsePattern:K2,valueCallback:n=>parseInt(n,10)}),era:Mi({matchPatterns:G2,defaultMatchWidth:"wide",parsePatterns:Y2,defaultParseWidth:"any"}),quarter:Mi({matchPatterns:Q2,defaultMatchWidth:"wide",parsePatterns:X2,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Mi({matchPatterns:J2,defaultMatchWidth:"wide",parsePatterns:Z2,defaultParseWidth:"any"}),day:Mi({matchPatterns:eO,defaultMatchWidth:"wide",parsePatterns:tO,defaultParseWidth:"any"}),dayPeriod:Mi({matchPatterns:nO,defaultMatchWidth:"any",parsePatterns:iO,defaultParseWidth:"any"})},gS={code:"en-US",formatDistance:C2,formatLong:D2,formatRelative:O2,localize:W2,match:rO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function sO(n,e){const t=ct(n,e==null?void 0:e.in);return hS(t,I2(t))+1}function oO(n,e){const t=ct(n,e==null?void 0:e.in),i=+Sd(t)-+_2(t);return Math.round(i/cS)+1}function yS(n,e){var m,_,y,x;const t=ct(n,e==null?void 0:e.in),i=t.getFullYear(),r=nu(),o=(e==null?void 0:e.firstWeekContainsDate)??((_=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:_.firstWeekContainsDate)??r.firstWeekContainsDate??((x=(y=r.locale)==null?void 0:y.options)==null?void 0:x.firstWeekContainsDate)??1,l=Nn((e==null?void 0:e.in)||n,0);l.setFullYear(i+1,0,o),l.setHours(0,0,0,0);const c=$a(l,e),h=Nn((e==null?void 0:e.in)||n,0);h.setFullYear(i,0,o),h.setHours(0,0,0,0);const f=$a(h,e);return+t>=+c?i+1:+t>=+f?i:i-1}function aO(n,e){var c,h,f,m;const t=nu(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??t.firstWeekContainsDate??((m=(f=t.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,r=yS(n,e),o=Nn((e==null?void 0:e.in)||n,0);return o.setFullYear(r,0,i),o.setHours(0,0,0,0),$a(o,e)}function lO(n,e){const t=ct(n,e==null?void 0:e.in),i=+$a(t,e)-+aO(t,e);return Math.round(i/cS)+1}function Ye(n,e){const t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}const Zr={y(n,e){const t=n.getFullYear(),i=t>0?t:1-t;return Ye(e==="yy"?i%100:i,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Ye(t+1,2)},d(n,e){return Ye(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Ye(n.getHours()%12||12,e.length)},H(n,e){return Ye(n.getHours(),e.length)},m(n,e){return Ye(n.getMinutes(),e.length)},s(n,e){return Ye(n.getSeconds(),e.length)},S(n,e){const t=e.length,i=n.getMilliseconds(),r=Math.trunc(i*Math.pow(10,t-3));return Ye(r,e.length)}},Ea={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Bw={G:function(n,e,t){const i=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const i=n.getFullYear(),r=i>0?i:1-i;return t.ordinalNumber(r,{unit:"year"})}return Zr.y(n,e)},Y:function(n,e,t,i){const r=yS(n,i),o=r>0?r:1-r;if(e==="YY"){const l=o%100;return Ye(l,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):Ye(o,e.length)},R:function(n,e){const t=uS(n);return Ye(t,e.length)},u:function(n,e){const t=n.getFullYear();return Ye(t,e.length)},Q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return Ye(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return Ye(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,t){const i=n.getMonth();switch(e){case"M":case"MM":return Zr.M(n,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,t){const i=n.getMonth();switch(e){case"L":return String(i+1);case"LL":return Ye(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,t,i){const r=lO(n,i);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):Ye(r,e.length)},I:function(n,e,t){const i=oO(n);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):Ye(i,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Zr.d(n,e)},D:function(n,e,t){const i=sO(n);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):Ye(i,e.length)},E:function(n,e,t){const i=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,t,i){const r=n.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Ye(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(n,e,t,i){const r=n.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Ye(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(n,e,t){const i=n.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return Ye(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,t){const r=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,e,t){const i=n.getHours();let r;switch(i===12?r=Ea.noon:i===0?r=Ea.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,e,t){const i=n.getHours();let r;switch(i>=17?r=Ea.evening:i>=12?r=Ea.afternoon:i>=4?r=Ea.morning:r=Ea.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let i=n.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return Zr.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Zr.H(n,e)},K:function(n,e,t){const i=n.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):Ye(i,e.length)},k:function(n,e,t){let i=n.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):Ye(i,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Zr.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Zr.s(n,e)},S:function(n,e){return Zr.S(n,e)},X:function(n,e,t){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return Uw(i);case"XXXX":case"XX":return io(i);case"XXXXX":case"XXX":default:return io(i,":")}},x:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"x":return Uw(i);case"xxxx":case"xx":return io(i);case"xxxxx":case"xxx":default:return io(i,":")}},O:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+zw(i,":");case"OOOO":default:return"GMT"+io(i,":")}},z:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+zw(i,":");case"zzzz":default:return"GMT"+io(i,":")}},t:function(n,e,t){const i=Math.trunc(+n/1e3);return Ye(i,e.length)},T:function(n,e,t){return Ye(+n,e.length)}};function zw(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),r=Math.trunc(i/60),o=i%60;return o===0?t+String(r):t+String(r)+e+Ye(o,2)}function Uw(n,e){return n%60===0?(n>0?"-":"+")+Ye(Math.abs(n)/60,2):io(n,e)}function io(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),r=Ye(Math.trunc(i/60),2),o=Ye(i%60,2);return t+r+e+o}const Ww=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},_S=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},cO=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],i=t[1],r=t[2];if(!r)return Ww(n,e);let o;switch(i){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",Ww(i,e)).replace("{{time}}",_S(r,e))},uO={p:_S,P:cO},hO=/^D+$/,dO=/^Y+$/,fO=["D","DD","YY","YYYY"];function pO(n){return hO.test(n)}function mO(n){return dO.test(n)}function gO(n,e,t){const i=yO(n,e,t);if(console.warn(i),fO.includes(n))throw new RangeError(i)}function yO(n,e,t){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _O=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,wO=/^'([^]*?)'?$/,bO=/''/g,EO=/[a-zA-Z]/;function Ma(n,e,t){var m,_,y,x,T,k,I,N;const i=nu(),r=(t==null?void 0:t.locale)??i.locale??gS,o=(t==null?void 0:t.firstWeekContainsDate)??((_=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:_.firstWeekContainsDate)??i.firstWeekContainsDate??((x=(y=i.locale)==null?void 0:y.options)==null?void 0:x.firstWeekContainsDate)??1,l=(t==null?void 0:t.weekStartsOn)??((k=(T=t==null?void 0:t.locale)==null?void 0:T.options)==null?void 0:k.weekStartsOn)??i.weekStartsOn??((N=(I=i.locale)==null?void 0:I.options)==null?void 0:N.weekStartsOn)??0,c=ct(n,t==null?void 0:t.in);if(!w2(c))throw new RangeError("Invalid time value");let h=e.match(vO).map(V=>{const z=V[0];if(z==="p"||z==="P"){const q=uO[z];return q(V,r.formatLong)}return V}).join("").match(_O).map(V=>{if(V==="''")return{isToken:!1,value:"'"};const z=V[0];if(z==="'")return{isToken:!1,value:xO(V)};if(Bw[z])return{isToken:!0,value:V};if(z.match(EO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+z+"`");return{isToken:!1,value:V}});r.localize.preprocessor&&(h=r.localize.preprocessor(c,h));const f={firstWeekContainsDate:o,weekStartsOn:l,locale:r};return h.map(V=>{if(!V.isToken)return V.value;const z=V.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&mO(z)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&pO(z))&&gO(z,e,String(n));const q=Bw[z[0]];return q(c,z,r.localize,f)}).join("")}function xO(n){const e=n.match(wO);return e?e[1].replace(bO,"'"):n}function TO(n,e,t){const i=nu(),r=(t==null?void 0:t.locale)??i.locale??gS,o=2520,l=Qh(n,e);if(isNaN(l))throw new RangeError("Invalid time value");const c=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:l}),[h,f]=sl(t==null?void 0:t.in,...l>0?[e,n]:[n,e]),m=pS(f,h),_=(Id(f)-Id(h))/1e3,y=Math.round((m-_)/60);let x;if(y<2)return t!=null&&t.includeSeconds?m<5?r.formatDistance("lessThanXSeconds",5,c):m<10?r.formatDistance("lessThanXSeconds",10,c):m<20?r.formatDistance("lessThanXSeconds",20,c):m<40?r.formatDistance("halfAMinute",0,c):m<60?r.formatDistance("lessThanXMinutes",1,c):r.formatDistance("xMinutes",1,c):y===0?r.formatDistance("lessThanXMinutes",1,c):r.formatDistance("xMinutes",y,c);if(y<45)return r.formatDistance("xMinutes",y,c);if(y<90)return r.formatDistance("aboutXHours",1,c);if(y<Lw){const T=Math.round(y/60);return r.formatDistance("aboutXHours",T,c)}else{if(y<o)return r.formatDistance("xDays",1,c);if(y<Ih){const T=Math.round(y/Lw);return r.formatDistance("xDays",T,c)}else if(y<Ih*2)return x=Math.round(y/Ih),r.formatDistance("aboutXMonths",x,c)}if(x=fS(f,h),x<12){const T=Math.round(y/Ih);return r.formatDistance("xMonths",T,c)}else{const T=x%12,k=Math.trunc(x/12);return T<3?r.formatDistance("aboutXYears",k,c):T<9?r.formatDistance("overXYears",k,c):r.formatDistance("almostXYears",k+1,c)}}function Hw(n,e){return TO(n,yy(n),e)}function SO(n,e){return dS(Nn(n,n),yy(n))}function kd(n,e,t){const i=+ct(n,t==null?void 0:t.in),[r,o]=[+ct(e.start,t==null?void 0:t.in),+ct(e.end,t==null?void 0:t.in)].sort((l,c)=>l-c);return i>=r&&i<=o}function vS(n,e,t){return p2(n,-e,t)}function IO(n,e){return dS(Nn(n,n),vS(yy(n),1))}const kO={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},AO=(n,e,t)=>{let i;const r=kO[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"dans "+i:"il y a "+i:i},CO={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},PO={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},RO={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},NO={date:Da({formats:CO,defaultWidth:"full"}),time:Da({formats:PO,defaultWidth:"full"}),dateTime:Da({formats:RO,defaultWidth:"full"})},DO={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},MO=(n,e,t,i)=>DO[n],OO={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},VO={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},LO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},jO={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},FO={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},BO=(n,e)=>{const t=Number(n),i=e==null?void 0:e.unit;if(t===0)return"0";const r=["year","week","hour","minute","second"];let o;return t===1?o=i&&r.includes(i)?"re":"er":o="me",t+o},zO=["MMM","MMMM"],UO={preprocessor:(n,e)=>n.getDate()===1||!e.some(i=>i.isToken&&zO.includes(i.value))?e:e.map(i=>i.isToken&&i.value==="do"?{isToken:!0,value:"d"}:i),ordinalNumber:BO,era:Di({values:OO,defaultWidth:"wide"}),quarter:Di({values:VO,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Di({values:LO,defaultWidth:"wide"}),day:Di({values:jO,defaultWidth:"wide"}),dayPeriod:Di({values:FO,defaultWidth:"wide"})},WO=/^(\d+)(ime|re|me|er|e)?/i,HO=/\d+/i,$O={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},qO={any:[/^av/i,/^ap/i]},KO={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},GO={any:[/1/i,/2/i,/3/i,/4/i]},YO={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},QO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},XO={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},JO={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},ZO={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},eV={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},tV={ordinalNumber:mS({matchPattern:WO,parsePattern:HO,valueCallback:n=>parseInt(n)}),era:Mi({matchPatterns:$O,defaultMatchWidth:"wide",parsePatterns:qO,defaultParseWidth:"any"}),quarter:Mi({matchPatterns:KO,defaultMatchWidth:"wide",parsePatterns:GO,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Mi({matchPatterns:YO,defaultMatchWidth:"wide",parsePatterns:QO,defaultParseWidth:"any"}),day:Mi({matchPatterns:XO,defaultMatchWidth:"wide",parsePatterns:JO,defaultParseWidth:"any"}),dayPeriod:Mi({matchPatterns:ZO,defaultMatchWidth:"any",parsePatterns:eV,defaultParseWidth:"any"})},po={code:"fr",formatDistance:AO,formatLong:NO,formatRelative:MO,localize:UO,match:tV,options:{weekStartsOn:1,firstWeekContainsDate:4}},wS=({events:n,lastFeeding:e,interval:t,compact:i=!1})=>{const{settings:r}=rl(),[o,l]=ae.useState(null),[c,h]=ae.useState(null),f=e||(n==null?void 0:n.find(V=>V.type==="feeding")),m=t||r.feedingInterval;ae.useEffect(()=>{if(!f){l(null),h(null);return}const V=new Date(f.createdAt),z=g2(V,m);h(z);const q=()=>{const P=pS(z,new Date);l(P)};q();const K=setInterval(q,1e3);return()=>clearInterval(K)},[f,m]);const _=V=>{if(V<=0)return{hours:0,minutes:0,seconds:0};const z=Math.floor(V/3600),q=Math.floor(V%3600/60),K=V%60;return{hours:z,minutes:q,seconds:K}},y=()=>f?o===null?"Calcul en cours...":o<=0?"Il est temps d'allaiter !":"Prochain allaitement dans":"Aucun allaitement enregistr",x=()=>o?o<=0?"overdue":o<=300?"warning":"normal":"",T=()=>{if(!f||!f.breast)return null;const V=f.breast==="left"?"":"",z=f.breast==="left"?"Sein droit":"Sein gauche";return`${V} ${z}`},k=_(o||0),I=o!==null&&o<=0,N=T();return i?!f||o===null?null:b.jsxs("div",{className:`feeding-timer-compact ${x()}`,children:[b.jsx("span",{className:"compact-icon",children:I?"":""}),b.jsx("span",{className:"compact-time",children:I?"C'est l'heure !":`${String(k.hours).padStart(2,"0")}:${String(k.minutes).padStart(2,"0")}:${String(k.seconds).padStart(2,"0")}`}),N&&!I&&b.jsx("span",{className:"compact-breast",children:f.breast==="left"?"":""})]}):b.jsxs("div",{className:`feeding-timer ${x()}`,children:[b.jsx("div",{className:"timer-header",children:b.jsx("h2",{children:y()})}),f&&o!==null&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"timer-display",children:I?b.jsx("div",{className:"overdue-icon",children:""}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"time-unit",children:[b.jsx("div",{className:"time-value",children:String(k.hours).padStart(2,"0")}),b.jsx("div",{className:"time-label",children:"heures"})]}),b.jsx("div",{className:"time-separator",children:":"}),b.jsxs("div",{className:"time-unit",children:[b.jsx("div",{className:"time-value",children:String(k.minutes).padStart(2,"0")}),b.jsx("div",{className:"time-label",children:"minutes"})]}),b.jsx("div",{className:"time-separator",children:":"}),b.jsxs("div",{className:"time-unit",children:[b.jsx("div",{className:"time-value",children:String(k.seconds).padStart(2,"0")}),b.jsx("div",{className:"time-label",children:"secondes"})]})]})}),c&&!I&&b.jsx("div",{className:"next-feeding-time",children:b.jsxs("p",{className:"exact-time",children:["Prochain allaitement prvu  ",b.jsx("strong",{children:Ma(c,"HH:mm",{locale:po})}),N&&b.jsx("span",{className:"next-breast",children:N})]})})]}),!f&&b.jsxs("div",{className:"no-feeding-message",children:[b.jsx("div",{className:"no-feeding-icon",children:""}),b.jsx("p",{children:"Commencez par enregistrer votre premier allaitement"})]})]})},nV=({user:n,activeView:e,setActiveView:t,events:i})=>{const{settings:r,toggleTheme:o}=rl(),l=[{id:"home",label:"Accueil",icon:""},{id:"history",label:"Historique",icon:""},{id:"statistics",label:"Statistiques",icon:""},{id:"todos",label:"To-Do",icon:""},{id:"settings",label:"Paramtres",icon:""}];return b.jsxs("header",{className:"header",children:[b.jsxs("div",{className:"header-content",children:[b.jsxs("h1",{className:"app-title",children:[b.jsx("span",{className:"app-icon",children:""}),"Baby Track"]}),b.jsx(wS,{events:i,compact:!0})]}),b.jsx("nav",{className:"nav-tabs",children:l.map(c=>b.jsxs("button",{className:`nav-tab ${e===c.id?"active":""}`,onClick:()=>t(c.id),children:[b.jsx("span",{className:"nav-icon",children:c.icon}),b.jsx("span",{className:"nav-label",children:c.label})]},c.id))})]})},iV=({activeView:n,setActiveView:e})=>{const t=[{id:"home",label:"Accueil",icon:""},{id:"history",label:"Historique",icon:""},{id:"statistics",label:"Stats",icon:""},{id:"todos",label:"To-Do",icon:""},{id:"settings",label:"Rglages",icon:""}];return b.jsx("nav",{className:"mobile-nav",children:t.map(i=>b.jsxs("button",{className:`mobile-nav-item ${n===i.id?"active":""}`,onClick:()=>e(i.id),children:[b.jsx("span",{className:"mobile-nav-icon",children:i.icon}),b.jsx("span",{className:"mobile-nav-label",children:i.label})]},i.id))})},rV=({events:n})=>{const e=ae.useMemo(()=>{const t=new Date,i=Eo(t),r=df(t),o=n.filter(I=>kd(new Date(I.createdAt),{start:i,end:r})),l=o.filter(I=>I.type==="feeding"),c=o.filter(I=>I.type==="diaper"),h=o.filter(I=>I.type==="bath"),f=o.filter(I=>I.type==="care"),m=n.filter(I=>I.type==="bath"),_=m.length>0?m[0]:null,y={eyes:!1,nose:!1,vitaminD:!1};f.forEach(I=>{I.careItems&&(I.careItems.eyes&&(y.eyes=!0),I.careItems.nose&&(y.nose=!0),I.careItems.vitaminD&&(y.vitaminD=!0))});const x=l[0],T=c[0],k=l.length>0?Math.round(l.map(I=>I.duration||parseInt(I.customDuration)||0).filter(I=>I>0).reduce((I,N)=>I+N,0)/l.filter(I=>I.duration||I.customDuration).length):0;return{feedingsCount:l.length,diapersCount:c.length,bathsCount:h.length,careCount:f.length,careStatus:y,lastFeeding:x,lastDiaper:T,lastBath:_,avgDuration:k}},[n]);return b.jsxs("div",{className:"daily-summary",children:[b.jsx("div",{className:"summary-header",children:b.jsx("h3",{children:" Aujourd'hui"})}),b.jsxs("div",{className:"summary-grid",children:[b.jsxs("div",{className:"summary-card feedings",children:[b.jsx("div",{className:"summary-icon",children:""}),b.jsxs("div",{className:"summary-content",children:[b.jsx("div",{className:"summary-count",children:e.feedingsCount}),b.jsx("div",{className:"summary-label",children:"Allaitements"}),e.avgDuration>0&&b.jsxs("div",{className:"summary-detail",children:["Moy. ",e.avgDuration," min"]})]})]}),b.jsxs("div",{className:"summary-card diapers",children:[b.jsx("div",{className:"summary-icon",children:""}),b.jsxs("div",{className:"summary-content",children:[b.jsx("div",{className:"summary-count",children:e.diapersCount}),b.jsx("div",{className:"summary-label",children:"Couches"}),e.lastDiaper&&b.jsxs("div",{className:"summary-detail",children:["Dernier"," ",Hw(new Date(e.lastDiaper.createdAt),{addSuffix:!0,locale:po})]})]})]}),b.jsxs("div",{className:"summary-card care",children:[b.jsx("div",{className:"summary-icon",children:""}),b.jsxs("div",{className:"summary-content",children:[b.jsx("div",{className:"summary-label",children:"Soins du jour"}),b.jsxs("div",{className:"care-status",children:[b.jsxs("span",{className:"care-item-status",children:[e.careStatus.eyes?"":""," Yeux"]}),b.jsxs("span",{className:"care-item-status",children:[e.careStatus.nose?"":""," Nez"]}),b.jsxs("span",{className:"care-item-status",children:[e.careStatus.vitaminD?"":""," Vitamine D"]})]})]})]})]}),b.jsxs("div",{className:"summary-bottom",children:[e.lastFeeding&&b.jsxs("div",{className:"last-feeding-info",children:[b.jsx("span",{className:"info-icon",children:""}),b.jsxs("span",{className:"info-text",children:["Dernier allaitement",e.lastFeeding.breast&&b.jsx("span",{className:"breast-indicator",children:e.lastFeeding.breast==="left"?"  Sein gauche":"  Sein droit"})," ",Hw(new Date(e.lastFeeding.createdAt),{addSuffix:!0,locale:po})]})]}),b.jsxs("div",{className:"last-bath-info",children:[b.jsx("span",{className:"bath-icon-small",children:""}),b.jsxs("div",{className:"bath-info-content",children:[b.jsx("span",{className:"bath-info-label",children:"Dernier bain"}),e.lastBath?b.jsxs("span",{className:"bath-info-text",children:[Ma(new Date(e.lastBath.createdAt),"d MMM",{locale:po}),"  ",Xm(new Date,new Date(e.lastBath.createdAt))," jour",Xm(new Date,new Date(e.lastBath.createdAt))>1?"s":""]}):b.jsx("span",{className:"bath-info-text",children:"Aucun"})]})]})]}),e.feedingsCount===0&&e.diapersCount===0&&b.jsxs("div",{className:"no-activity",children:[b.jsx("div",{className:"no-activity-icon",children:""}),b.jsx("p",{children:"Aucune activit enregistre aujourd'hui"})]})]})},bS=({type:n,onSubmit:e,onClose:t,editEvent:i=null,lastFeeding:r=null})=>{const[o,l]=ae.useState({type:n,diaperType:"pee",breast:null,pumpingBreasts:{left:!1,right:!1},duration:null,customDuration:"",notes:"",customDate:"",customTime:"",careItems:{eyes:!1,nose:!1,vitaminD:!1}});ae.useEffect(()=>{if(i){const T=i.createdAt?new Date(i.createdAt):new Date,k=T.getFullYear(),I=String(T.getMonth()+1).padStart(2,"0"),N=String(T.getDate()).padStart(2,"0"),V=String(T.getHours()).padStart(2,"0"),z=String(T.getMinutes()).padStart(2,"0");l({type:i.type,diaperType:i.diaperType||"pee",breast:i.breast||null,pumpingBreasts:i.pumpingBreasts||{left:!1,right:!1},duration:i.duration||null,customDuration:i.customDuration||"",notes:i.notes||"",customDate:`${k}-${I}-${N}`,customTime:`${V}:${z}`,careItems:i.careItems||{eyes:!1,nose:!1,vitaminD:!1}})}else if(n==="feeding"&&r&&r.breast){const T=r.breast==="left"?"right":"left";l(k=>({...k,breast:T}))}},[i,n,r]);const c=T=>{T.preventDefault(),e(o)},h=T=>{l({...o,diaperType:T})},f=T=>{l({...o,duration:T,customDuration:""})},m=T=>{l({...o,customDuration:T,duration:null})},_=T=>{l({...o,breast:T})},y=T=>{l({...o,careItems:{...o.careItems,[T]:!o.careItems[T]}})},x=T=>{l({...o,pumpingBreasts:{...o.pumpingBreasts,[T]:!o.pumpingBreasts[T]}})};return b.jsx("div",{className:"modal-overlay",onClick:t,children:b.jsxs("div",{className:"modal-content",onClick:T=>T.stopPropagation(),children:[b.jsxs("div",{className:"modal-header",children:[b.jsxs("h2",{children:[i?" Modifier ":"",n==="feeding"&&" Allaitement",n==="diaper"&&" Changement de couche",n==="bath"&&" Bain",n==="care"&&" Soins du jour",n==="pumping"&&" Tirage de lait"]}),b.jsx("button",{className:"close-button",onClick:t,children:""})]}),b.jsxs("form",{onSubmit:c,children:[n==="feeding"&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Sein"}),b.jsxs("div",{className:"breast-options",children:[b.jsxs("button",{type:"button",className:`breast-option ${o.breast==="left"?"active":""}`,onClick:()=>_("left"),children:[b.jsx("span",{className:"breast-emoji",children:""}),b.jsx("span",{className:"breast-label",children:"Sein Gauche"})]}),b.jsxs("button",{type:"button",className:`breast-option ${o.breast==="right"?"active":""}`,onClick:()=>_("right"),children:[b.jsx("span",{className:"breast-emoji",children:""}),b.jsx("span",{className:"breast-label",children:"Sein Droit"})]})]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Dure de l'allaitement (optionnel)"}),b.jsxs("div",{className:"duration-options",children:[b.jsx("button",{type:"button",className:`duration-option ${o.duration===5?"active":""}`,onClick:()=>f(5),children:"5 min"}),b.jsx("button",{type:"button",className:`duration-option ${o.duration===10?"active":""}`,onClick:()=>f(10),children:"10 min"}),b.jsx("button",{type:"button",className:`duration-option ${o.duration===15?"active":""}`,onClick:()=>f(15),children:"15 min"}),b.jsx("button",{type:"button",className:`duration-option ${o.duration===20?"active":""}`,onClick:()=>f(20),children:"20 min"})]}),b.jsx("div",{className:"custom-duration",children:b.jsx("input",{type:"number",placeholder:"Autre dure (min)",value:o.customDuration,onChange:T=>m(T.target.value),min:"1",max:"120",className:"custom-duration-input"})})]})]}),n==="diaper"&&b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Type de couche"}),b.jsxs("div",{className:"diaper-options",children:[b.jsx("button",{type:"button",className:`diaper-option ${o.diaperType==="pee"?"active":""}`,onClick:()=>h("pee"),children:" Pipi"}),b.jsx("button",{type:"button",className:`diaper-option ${o.diaperType==="poop"?"active":""}`,onClick:()=>h("poop"),children:" Caca"}),b.jsx("button",{type:"button",className:`diaper-option ${o.diaperType==="both"?"active":""}`,onClick:()=>h("both"),children:" Les deux"})]})]}),n==="care"&&b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Soins effectus"}),b.jsxs("div",{className:"care-items",children:[b.jsxs("button",{type:"button",className:`care-item ${o.careItems.eyes?"active":""}`,onClick:()=>y("eyes"),children:[b.jsx("span",{className:"care-icon",children:""}),b.jsx("span",{className:"care-label",children:"Yeux"}),o.careItems.eyes&&b.jsx("span",{className:"care-check",children:""})]}),b.jsxs("button",{type:"button",className:`care-item ${o.careItems.nose?"active":""}`,onClick:()=>y("nose"),children:[b.jsx("span",{className:"care-icon",children:""}),b.jsx("span",{className:"care-label",children:"Nez"}),o.careItems.nose&&b.jsx("span",{className:"care-check",children:""})]}),b.jsxs("button",{type:"button",className:`care-item ${o.careItems.vitaminD?"active":""}`,onClick:()=>y("vitaminD"),children:[b.jsx("span",{className:"care-icon",children:""}),b.jsx("span",{className:"care-label",children:"Vitamine D"}),o.careItems.vitaminD&&b.jsx("span",{className:"care-check",children:""})]})]})]}),n==="pumping"&&b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Sein(s) tir(s)"}),b.jsxs("div",{className:"pumping-breasts",children:[b.jsxs("button",{type:"button",className:`pumping-breast ${o.pumpingBreasts.left?"active":""}`,onClick:()=>x("left"),children:[b.jsx("span",{className:"pumping-icon",children:""}),b.jsx("span",{className:"pumping-label",children:"Sein Gauche"}),o.pumpingBreasts.left&&b.jsx("span",{className:"pumping-check",children:""})]}),b.jsxs("button",{type:"button",className:`pumping-breast ${o.pumpingBreasts.right?"active":""}`,onClick:()=>x("right"),children:[b.jsx("span",{className:"pumping-icon",children:""}),b.jsx("span",{className:"pumping-label",children:"Sein Droit"}),o.pumpingBreasts.right&&b.jsx("span",{className:"pumping-check",children:""})]})]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"customDate",children:"Date (optionnel - par dfaut aujourd'hui)"}),b.jsx("input",{type:"date",id:"customDate",value:o.customDate,onChange:T=>l({...o,customDate:T.target.value}),className:"custom-date-input"}),b.jsx("div",{className:"time-hint",children:"Laissez vide pour utiliser la date d'aujourd'hui"})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"customTime",children:"Heure (optionnel - par dfaut maintenant)"}),b.jsx("input",{type:"time",id:"customTime",value:o.customTime,onChange:T=>l({...o,customTime:T.target.value}),className:"custom-time-input"}),b.jsx("div",{className:"time-hint",children:"Laissez vide pour utiliser l'heure actuelle"})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"notes",children:"Notes (optionnel)"}),b.jsx("textarea",{id:"notes",value:o.notes,onChange:T=>l({...o,notes:T.target.value}),placeholder:n==="feeding"?"Ex: Bon allaitement, bb calme...":n==="diaper"?"Ex: Couche trs mouille, selles normales...":n==="bath"?"Ex: Bain agrable, temprature de l'eau...":n==="pumping"?"Ex: Quantit tire, dure du tirage...":"Ex: Soins effectus, ractions du bb...",rows:"3"})]}),b.jsxs("div",{className:"modal-actions",children:[b.jsx("button",{type:"button",className:"cancel-button",onClick:t,children:"Annuler"}),b.jsx("button",{type:"submit",className:"submit-button",children:"Enregistrer"})]})]})]})})},sV=({onAddEvent:n,lastFeeding:e})=>{const[t,i]=ae.useState(!1),[r,o]=ae.useState(null),l=f=>{o(f),i(!0)},c=f=>{n(f),i(!1),o(null)},h=()=>{i(!1),o(null)};return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"quick-actions",children:[b.jsx("h3",{children:"Actions rapides"}),b.jsxs("div",{className:"action-buttons",children:[b.jsxs("button",{className:"action-button feeding",onClick:()=>l("feeding"),children:[b.jsx("div",{className:"action-icon",children:""}),b.jsx("div",{className:"action-label",children:"Allaitement"})]}),b.jsxs("button",{className:"action-button diaper",onClick:()=>l("diaper"),children:[b.jsx("div",{className:"action-icon",children:""}),b.jsx("div",{className:"action-label",children:"Couche"})]})]}),b.jsxs("div",{className:"secondary-actions",children:[b.jsxs("button",{className:"secondary-action-button pumping",onClick:()=>l("pumping"),children:[b.jsx("span",{className:"secondary-icon",children:""}),b.jsx("span",{className:"secondary-label",children:"Tirage"})]}),b.jsxs("button",{className:"secondary-action-button bath",onClick:()=>l("bath"),children:[b.jsx("span",{className:"secondary-icon",children:""}),b.jsx("span",{className:"secondary-label",children:"Bain"})]}),b.jsxs("button",{className:"secondary-action-button care",onClick:()=>l("care"),children:[b.jsx("span",{className:"secondary-icon",children:""}),b.jsx("span",{className:"secondary-label",children:"Soins"})]})]})]}),t&&b.jsx(bS,{type:r,onSubmit:c,onClose:h,lastFeeding:e})]})},ES=({events:n,limit:e,onEditEvent:t})=>{const{activeBaby:i}=Ao(),r=e?n.slice(0,e):n,o=T=>{const k={};return T.forEach(I=>{const N=new Date(I.createdAt),V=Ma(N,"yyyy-MM-dd");k[V]||(k[V]={date:N,events:[]}),k[V].events.push(I)}),Object.values(k)},l=T=>SO(T)?"Aujourd'hui":IO(T)?"Hier":Ma(T,"EEEE d MMMM",{locale:po}),c=T=>{const k={};return T.forEach(I=>{k[I.type]=(k[I.type]||0)+1}),k},h=o(r),f=async T=>{if(i&&window.confirm("tes-vous sr de vouloir supprimer cet vnement ?"))try{await s2(i.id,T)}catch(k){console.error("Erreur lors de la suppression:",k),alert("Erreur lors de la suppression de l'vnement")}},m=T=>T.type==="feeding"?"":T.type==="pumping"?"":T.type==="diaper"?T.diaperType==="pee"?"":T.diaperType==="poop"?"":"":T.type==="bath"?"":T.type==="care"?"":"",_=T=>T.type==="feeding"?"Allaitement":T.type==="pumping"?"Tirage de lait":T.type==="diaper"?T.diaperType==="pee"?"Couche - Pipi":T.diaperType==="poop"?"Couche - Caca":"Couche - Les deux":T.type==="bath"?"Bain":T.type==="care"?"Soins":"vnement",y=T=>{if(T.type==="feeding"&&T.breast){if(T.breast==="left")return" Sein gauche";if(T.breast==="right")return" Sein droit"}return null},x=T=>{if(T.type==="feeding"&&(T.duration||T.customDuration))return`${T.duration||T.customDuration} min`;if(T.type==="pumping"&&T.pumpingBreasts){const k=[];return T.pumpingBreasts.left&&k.push(" Gauche"),T.pumpingBreasts.right&&k.push(" Droit"),k.length>0?k.join("  "):null}if(T.type==="care"&&T.careItems){const k=[];return T.careItems.eyes&&k.push(" Yeux"),T.careItems.nose&&k.push(" Nez"),T.careItems.vitaminD&&k.push(" Vitamine D"),k.length>0?k.join("  "):null}return null};return r.length===0?b.jsxs("div",{className:"timeline-empty",children:[b.jsx("div",{className:"timeline-empty-icon",children:""}),b.jsx("p",{children:"Aucun vnement  afficher"})]}):b.jsx("div",{className:"event-timeline",children:h.map((T,k)=>{const I=c(T.events);return b.jsxs("div",{className:"timeline-group",children:[b.jsxs("div",{className:"timeline-date-header",children:[b.jsxs("div",{className:"timeline-date-label",children:[l(T.date),b.jsxs("span",{className:"timeline-date-counts",children:[I.feeding&&b.jsxs("span",{className:"count-item feeding",children:[I.feeding," "]}),I.pumping&&b.jsxs("span",{className:"count-item pumping",children:[I.pumping," "]}),I.diaper&&b.jsxs("span",{className:"count-item diaper",children:[I.diaper," "]}),I.bath&&b.jsxs("span",{className:"count-item bath",children:[I.bath," "]}),I.care&&b.jsxs("span",{className:"count-item care",children:[I.care," "]})]})]}),b.jsx("div",{className:"timeline-date-line"})]}),T.events.map((N,V)=>b.jsxs("div",{className:`timeline-item ${N.type}`,children:[b.jsx("div",{className:"timeline-time",children:Ma(new Date(N.createdAt),"HH:mm",{locale:po})}),b.jsxs("div",{className:"timeline-marker",children:[b.jsx("div",{className:"timeline-dot"}),(V<T.events.length-1||k<h.length-1)&&b.jsx("div",{className:"timeline-line"})]}),b.jsx("div",{className:"timeline-content",children:b.jsxs("div",{className:"timeline-card",children:[b.jsxs("div",{className:"timeline-header",children:[b.jsx("div",{className:"timeline-icon",children:m(N)}),b.jsxs("div",{className:"timeline-info",children:[b.jsxs("div",{className:"timeline-title",children:[_(N),y(N)&&b.jsx("span",{className:"timeline-breast-badge",children:y(N)})]}),x(N)&&b.jsx("div",{className:"timeline-details",children:x(N)})]}),b.jsxs("div",{className:"timeline-actions",children:[t&&b.jsx("button",{className:"timeline-edit",onClick:()=>t(N),title:"Modifier",children:""}),b.jsx("button",{className:"timeline-delete",onClick:()=>f(N.id),title:"Supprimer",children:""})]})]}),N.notes&&b.jsxs("div",{className:"timeline-notes",children:[b.jsx("div",{className:"timeline-notes-icon",children:""}),N.notes]})]})})]},N.id))]},T.date.toISOString())})})},oV=({events:n,showAll:e=!1,onEditEvent:t})=>{const[i,r]=ae.useState("all"),o=n.filter(l=>i==="all"?!0:l.type===i);return b.jsxs("div",{className:"event-history",children:[b.jsxs("div",{className:"history-header",children:[b.jsx("h3",{children:e?"Historique complet":"Derniers vnements"}),e&&b.jsxs("div",{className:"filter-buttons",children:[b.jsx("button",{className:`filter-btn ${i==="all"?"active":""}`,onClick:()=>r("all"),children:"Tous"}),b.jsx("button",{className:`filter-btn ${i==="feeding"?"active":""}`,onClick:()=>r("feeding"),children:" Allaitement"}),b.jsx("button",{className:`filter-btn ${i==="pumping"?"active":""}`,onClick:()=>r("pumping"),children:" Tirage"}),b.jsx("button",{className:`filter-btn ${i==="diaper"?"active":""}`,onClick:()=>r("diaper"),children:" Couches"}),b.jsx("button",{className:`filter-btn ${i==="bath"?"active":""}`,onClick:()=>r("bath"),children:" Bains"}),b.jsx("button",{className:`filter-btn ${i==="care"?"active":""}`,onClick:()=>r("care"),children:" Soins"})]})]}),b.jsx(ES,{events:o,limit:e?null:5,onEditEvent:t})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function iu(n){return n+.5|0}const ss=(n,e,t)=>Math.max(Math.min(n,t),e);function hc(n){return ss(iu(n*2.55),0,255)}function ds(n){return ss(iu(n*255),0,255)}function pr(n){return ss(iu(n/2.55)/100,0,1)}function $w(n){return ss(iu(n*100),0,100)}const Wn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Jm=[..."0123456789ABCDEF"],aV=n=>Jm[n&15],lV=n=>Jm[(n&240)>>4]+Jm[n&15],kh=n=>(n&240)>>4===(n&15),cV=n=>kh(n.r)&&kh(n.g)&&kh(n.b)&&kh(n.a);function uV(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Wn[n[1]]*17,g:255&Wn[n[2]]*17,b:255&Wn[n[3]]*17,a:e===5?Wn[n[4]]*17:255}:(e===7||e===9)&&(t={r:Wn[n[1]]<<4|Wn[n[2]],g:Wn[n[3]]<<4|Wn[n[4]],b:Wn[n[5]]<<4|Wn[n[6]],a:e===9?Wn[n[7]]<<4|Wn[n[8]]:255})),t}const hV=(n,e)=>n<255?e(n):"";function dV(n){var e=cV(n)?aV:lV;return n?"#"+e(n.r)+e(n.g)+e(n.b)+hV(n.a,e):void 0}const fV=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function xS(n,e,t){const i=e*Math.min(t,1-t),r=(o,l=(o+n/30)%12)=>t-i*Math.max(Math.min(l-3,9-l,1),-1);return[r(0),r(8),r(4)]}function pV(n,e,t){const i=(r,o=(r+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function mV(n,e,t){const i=xS(n,1,.5);let r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function gV(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function _y(n){const t=n.r/255,i=n.g/255,r=n.b/255,o=Math.max(t,i,r),l=Math.min(t,i,r),c=(o+l)/2;let h,f,m;return o!==l&&(m=o-l,f=c>.5?m/(2-o-l):m/(o+l),h=gV(t,i,r,m,o),h=h*60+.5),[h|0,f||0,c]}function vy(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(ds)}function wy(n,e,t){return vy(xS,n,e,t)}function yV(n,e,t){return vy(mV,n,e,t)}function _V(n,e,t){return vy(pV,n,e,t)}function TS(n){return(n%360+360)%360}function vV(n){const e=fV.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?hc(+e[5]):ds(+e[5]));const r=TS(+e[2]),o=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?i=yV(r,o,l):e[1]==="hsv"?i=_V(r,o,l):i=wy(r,o,l),{r:i[0],g:i[1],b:i[2],a:t}}function wV(n,e){var t=_y(n);t[0]=TS(t[0]+e),t=wy(t),n.r=t[0],n.g=t[1],n.b=t[2]}function bV(n){if(!n)return;const e=_y(n),t=e[0],i=$w(e[1]),r=$w(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${pr(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}const qw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Kw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function EV(){const n={},e=Object.keys(Kw),t=Object.keys(qw);let i,r,o,l,c;for(i=0;i<e.length;i++){for(l=c=e[i],r=0;r<t.length;r++)o=t[r],c=c.replace(o,qw[o]);o=parseInt(Kw[l],16),n[c]=[o>>16&255,o>>8&255,o&255]}return n}let Ah;function xV(n){Ah||(Ah=EV(),Ah.transparent=[0,0,0,0]);const e=Ah[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const TV=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function SV(n){const e=TV.exec(n);let t=255,i,r,o;if(e){if(e[7]!==i){const l=+e[7];t=e[8]?hc(l):ss(l*255,0,255)}return i=+e[1],r=+e[3],o=+e[5],i=255&(e[2]?hc(i):ss(i,0,255)),r=255&(e[4]?hc(r):ss(r,0,255)),o=255&(e[6]?hc(o):ss(o,0,255)),{r:i,g:r,b:o,a:t}}}function IV(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${pr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const hm=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,xa=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function kV(n,e,t){const i=xa(pr(n.r)),r=xa(pr(n.g)),o=xa(pr(n.b));return{r:ds(hm(i+t*(xa(pr(e.r))-i))),g:ds(hm(r+t*(xa(pr(e.g))-r))),b:ds(hm(o+t*(xa(pr(e.b))-o))),a:n.a+t*(e.a-n.a)}}function Ch(n,e,t){if(n){let i=_y(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=wy(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function SS(n,e){return n&&Object.assign(e||{},n)}function Gw(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=ds(n[3]))):(e=SS(n,{r:0,g:0,b:0,a:1}),e.a=ds(e.a)),e}function AV(n){return n.charAt(0)==="r"?SV(n):vV(n)}class jc{constructor(e){if(e instanceof jc)return e;const t=typeof e;let i;t==="object"?i=Gw(e):t==="string"&&(i=uV(e)||xV(e)||AV(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=SS(this._rgb);return e&&(e.a=pr(e.a)),e}set rgb(e){this._rgb=Gw(e)}rgbString(){return this._valid?IV(this._rgb):void 0}hexString(){return this._valid?dV(this._rgb):void 0}hslString(){return this._valid?bV(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,r=e.rgb;let o;const l=t===o?.5:t,c=2*l-1,h=i.a-r.a,f=((c*h===-1?c:(c+h)/(1+c*h))+1)/2;o=1-f,i.r=255&f*i.r+o*r.r+.5,i.g=255&f*i.g+o*r.g+.5,i.b=255&f*i.b+o*r.b+.5,i.a=l*i.a+(1-l)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=kV(this._rgb,e._rgb,t)),this}clone(){return new jc(this.rgb)}alpha(e){return this._rgb.a=ds(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=iu(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ch(this._rgb,2,e),this}darken(e){return Ch(this._rgb,2,-e),this}saturate(e){return Ch(this._rgb,1,e),this}desaturate(e){return Ch(this._rgb,1,-e),this}rotate(e){return wV(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ur(){}const CV=(()=>{let n=0;return()=>n++})();function qe(n){return n==null}function Rt(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ue(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Gn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Ci(n,e){return Gn(n)?n:e}function De(n,e){return typeof n>"u"?e:n}const PV=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,IS=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function st(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Qe(n,e,t,i){let r,o,l;if(Rt(n))for(o=n.length,r=0;r<o;r++)e.call(t,n[r],r);else if(Ue(n))for(l=Object.keys(n),o=l.length,r=0;r<o;r++)e.call(t,n[l[r]],l[r])}function Ad(n,e){let t,i,r,o;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],o=e[t],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function Cd(n){if(Rt(n))return n.map(Cd);if(Ue(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let r=0;for(;r<i;++r)e[t[r]]=Cd(n[t[r]]);return e}return n}function kS(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function RV(n,e,t,i){if(!kS(n))return;const r=e[n],o=t[n];Ue(r)&&Ue(o)?Fc(r,o,i):e[n]=Cd(o)}function Fc(n,e,t){const i=Rt(e)?e:[e],r=i.length;if(!Ue(n))return n;t=t||{};const o=t.merger||RV;let l;for(let c=0;c<r;++c){if(l=i[c],!Ue(l))continue;const h=Object.keys(l);for(let f=0,m=h.length;f<m;++f)o(h[f],n,l,t)}return n}function xc(n,e){return Fc(n,e,{merger:NV})}function NV(n,e,t){if(!kS(n))return;const i=e[n],r=t[n];Ue(i)&&Ue(r)?xc(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Cd(r))}const Yw={"":n=>n,x:n=>n.x,y:n=>n.y};function DV(n){const e=n.split("."),t=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function MV(n){const e=DV(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function xo(n,e){return(Yw[e]||(Yw[e]=MV(e)))(n)}function by(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Bc=n=>typeof n<"u",bs=n=>typeof n=="function",Qw=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function OV(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Xe=Math.PI,mt=2*Xe,VV=mt+Xe,Pd=Number.POSITIVE_INFINITY,LV=Xe/180,Nt=Xe/2,Zs=Xe/4,Xw=Xe*2/3,AS=Math.log10,zi=Math.sign;function Tc(n,e,t){return Math.abs(n-e)<t}function Jw(n){const e=Math.round(n);n=Tc(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(AS(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function jV(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,o)=>r-o).pop(),e}function FV(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function zc(n){return!FV(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function BV(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function zV(n,e,t){let i,r,o;for(i=0,r=n.length;i<r;i++)o=n[i][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function _r(n){return n*(Xe/180)}function UV(n){return n*(180/Xe)}function Zw(n){if(!Gn(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function CS(n,e){const t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i);let o=Math.atan2(i,t);return o<-.5*Xe&&(o+=mt),{angle:o,distance:r}}function Zm(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function WV(n,e){return(n-e+VV)%mt-Xe}function hi(n){return(n%mt+mt)%mt}function Uc(n,e,t,i){const r=hi(n),o=hi(e),l=hi(t),c=hi(o-r),h=hi(l-r),f=hi(r-o),m=hi(r-l);return r===o||r===l||i&&o===l||c>h&&f<m}function tn(n,e,t){return Math.max(e,Math.min(t,n))}function HV(n){return tn(n,-32768,32767)}function os(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function Ey(n,e,t){t=t||(l=>n[l]<e);let i=n.length-1,r=0,o;for(;i-r>1;)o=r+i>>1,t(o)?r=o:i=o;return{lo:r,hi:i}}const co=(n,e,t,i)=>Ey(n,t,i?r=>{const o=n[r][e];return o<t||o===t&&n[r+1][e]===t}:r=>n[r][e]<t),$V=(n,e,t)=>Ey(n,t,i=>n[i][e]>=t);function qV(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}const PS=["push","pop","shift","splice","unshift"];function KV(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),PS.forEach(t=>{const i="_onData"+by(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...o){const l=r.apply(this,o);return n._chartjs.listeners.forEach(c=>{typeof c[i]=="function"&&c[i](...o)}),l}})})}function eb(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(PS.forEach(o=>{delete n[o]}),delete n._chartjs)}function RS(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const NS=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function DS(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,NS.call(window,()=>{i=!1,n.apply(e,t)}))}}function GV(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const xy=n=>n==="start"?"left":n==="end"?"right":"center",Jt=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,YV=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function QV(n,e,t){const i=e.length;let r=0,o=i;if(n._sorted){const{iScale:l,vScale:c,_parsed:h}=n,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,m=l.axis,{min:_,max:y,minDefined:x,maxDefined:T}=l.getUserBounds();if(x){if(r=Math.min(co(h,m,_).lo,t?i:co(e,m,l.getPixelForValue(_)).lo),f){const k=h.slice(0,r+1).reverse().findIndex(I=>!qe(I[c.axis]));r-=Math.max(0,k)}r=tn(r,0,i-1)}if(T){let k=Math.max(co(h,l.axis,y,!0).hi+1,t?0:co(e,m,l.getPixelForValue(y),!0).hi+1);if(f){const I=h.slice(k-1).findIndex(N=>!qe(N[c.axis]));k+=Math.max(0,I)}o=tn(k,r,i)-r}else o=i-r}return{start:r,count:o}}function XV(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;const o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),o}const Ph=n=>n===0||n===1,tb=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*mt/t)),nb=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*mt/t)+1,Sc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Nt)+1,easeOutSine:n=>Math.sin(n*Nt),easeInOutSine:n=>-.5*(Math.cos(Xe*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Ph(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Ph(n)?n:tb(n,.075,.3),easeOutElastic:n=>Ph(n)?n:nb(n,.075,.3),easeInOutElastic(n){return Ph(n)?n:n<.5?.5*tb(n*2,.1125,.45):.5+.5*nb(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Sc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Sc.easeInBounce(n*2)*.5:Sc.easeOutBounce(n*2-1)*.5+.5};function Ty(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function ib(n){return Ty(n)?n:new jc(n)}function dm(n){return Ty(n)?n:new jc(n).saturate(.5).darken(.1).hexString()}const JV=["x","y","borderWidth","radius","tension"],ZV=["color","borderColor","backgroundColor"];function eL(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:ZV},numbers:{type:"number",properties:JV}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function tL(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const rb=new Map;function nL(n,e){e=e||{};const t=n+JSON.stringify(e);let i=rb.get(t);return i||(i=new Intl.NumberFormat(n,e),rb.set(t,i)),i}function Sy(n,e,t){return nL(e,t).format(n)}const iL={values(n){return Rt(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let r,o=n;if(t.length>1){const f=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(f<1e-4||f>1e15)&&(r="scientific"),o=rL(n,t)}const l=AS(Math.abs(o)),c=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),h={notation:r,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(h,this.options.ticks.format),Sy(n,i,h)}};function rL(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var MS={formatters:iL};function sL(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:MS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const To=Object.create(null),eg=Object.create(null);function Ic(n,e){if(!e)return n;const t=e.split(".");for(let i=0,r=t.length;i<r;++i){const o=t[i];n=n[o]||(n[o]=Object.create(null))}return n}function fm(n,e,t){return typeof e=="string"?Fc(Ic(n,e),t):Fc(Ic(n,""),e)}class oL{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>dm(r.backgroundColor),this.hoverBorderColor=(i,r)=>dm(r.borderColor),this.hoverColor=(i,r)=>dm(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return fm(this,e,t)}get(e){return Ic(this,e)}describe(e,t){return fm(eg,e,t)}override(e,t){return fm(To,e,t)}route(e,t,i,r){const o=Ic(this,e),l=Ic(this,i),c="_"+t;Object.defineProperties(o,{[c]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){const h=this[c],f=l[r];return Ue(h)?Object.assign({},f,h):De(h,f)},set(h){this[c]=h}}})}apply(e){e.forEach(t=>t(this))}}var vt=new oL({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[eL,tL,sL]);function aL(n){return!n||qe(n.size)||qe(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function sb(n,e,t,i,r){let o=e[r];return o||(o=e[r]=n.measureText(r).width,t.push(r)),o>i&&(i=o),i}function eo(n,e,t){const i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function ob(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function tg(n,e,t,i){OS(n,e,t,i,null)}function OS(n,e,t,i,r){let o,l,c,h,f,m,_,y;const x=e.pointStyle,T=e.rotation,k=e.radius;let I=(T||0)*LV;if(x&&typeof x=="object"&&(o=x.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(I),n.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),n.restore();return}if(!(isNaN(k)||k<=0)){switch(n.beginPath(),x){default:r?n.ellipse(t,i,r/2,k,0,0,mt):n.arc(t,i,k,0,mt),n.closePath();break;case"triangle":m=r?r/2:k,n.moveTo(t+Math.sin(I)*m,i-Math.cos(I)*k),I+=Xw,n.lineTo(t+Math.sin(I)*m,i-Math.cos(I)*k),I+=Xw,n.lineTo(t+Math.sin(I)*m,i-Math.cos(I)*k),n.closePath();break;case"rectRounded":f=k*.516,h=k-f,l=Math.cos(I+Zs)*h,_=Math.cos(I+Zs)*(r?r/2-f:h),c=Math.sin(I+Zs)*h,y=Math.sin(I+Zs)*(r?r/2-f:h),n.arc(t-_,i-c,f,I-Xe,I-Nt),n.arc(t+y,i-l,f,I-Nt,I),n.arc(t+_,i+c,f,I,I+Nt),n.arc(t-y,i+l,f,I+Nt,I+Xe),n.closePath();break;case"rect":if(!T){h=Math.SQRT1_2*k,m=r?r/2:h,n.rect(t-m,i-h,2*m,2*h);break}I+=Zs;case"rectRot":_=Math.cos(I)*(r?r/2:k),l=Math.cos(I)*k,c=Math.sin(I)*k,y=Math.sin(I)*(r?r/2:k),n.moveTo(t-_,i-c),n.lineTo(t+y,i-l),n.lineTo(t+_,i+c),n.lineTo(t-y,i+l),n.closePath();break;case"crossRot":I+=Zs;case"cross":_=Math.cos(I)*(r?r/2:k),l=Math.cos(I)*k,c=Math.sin(I)*k,y=Math.sin(I)*(r?r/2:k),n.moveTo(t-_,i-c),n.lineTo(t+_,i+c),n.moveTo(t+y,i-l),n.lineTo(t-y,i+l);break;case"star":_=Math.cos(I)*(r?r/2:k),l=Math.cos(I)*k,c=Math.sin(I)*k,y=Math.sin(I)*(r?r/2:k),n.moveTo(t-_,i-c),n.lineTo(t+_,i+c),n.moveTo(t+y,i-l),n.lineTo(t-y,i+l),I+=Zs,_=Math.cos(I)*(r?r/2:k),l=Math.cos(I)*k,c=Math.sin(I)*k,y=Math.sin(I)*(r?r/2:k),n.moveTo(t-_,i-c),n.lineTo(t+_,i+c),n.moveTo(t+y,i-l),n.lineTo(t-y,i+l);break;case"line":l=r?r/2:Math.cos(I)*k,c=Math.sin(I)*k,n.moveTo(t-l,i-c),n.lineTo(t+l,i+c);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(I)*(r?r/2:k),i+Math.sin(I)*k);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Wc(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Iy(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function ky(n){n.restore()}function lL(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){const o=(e.x+t.x)/2;n.lineTo(o,e.y),n.lineTo(o,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function cL(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function uL(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),qe(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function hL(n,e,t,i,r){if(r.strikethrough||r.underline){const o=n.measureText(i),l=e-o.actualBoundingBoxLeft,c=e+o.actualBoundingBoxRight,h=t-o.actualBoundingBoxAscent,f=t+o.actualBoundingBoxDescent,m=r.strikethrough?(h+f)/2:f;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(l,m),n.lineTo(c,m),n.stroke()}}function dL(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Hc(n,e,t,i,r,o={}){const l=Rt(e)?e:[e],c=o.strokeWidth>0&&o.strokeColor!=="";let h,f;for(n.save(),n.font=r.string,uL(n,o),h=0;h<l.length;++h)f=l[h],o.backdrop&&dL(n,o.backdrop),c&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),qe(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(f,t,i,o.maxWidth)),n.fillText(f,t,i,o.maxWidth),hL(n,t,i,f,o),i+=Number(r.lineHeight);n.restore()}function Rd(n,e){const{x:t,y:i,w:r,h:o,radius:l}=e;n.arc(t+l.topLeft,i+l.topLeft,l.topLeft,1.5*Xe,Xe,!0),n.lineTo(t,i+o-l.bottomLeft),n.arc(t+l.bottomLeft,i+o-l.bottomLeft,l.bottomLeft,Xe,Nt,!0),n.lineTo(t+r-l.bottomRight,i+o),n.arc(t+r-l.bottomRight,i+o-l.bottomRight,l.bottomRight,Nt,0,!0),n.lineTo(t+r,i+l.topRight),n.arc(t+r-l.topRight,i+l.topRight,l.topRight,0,-Nt,!0),n.lineTo(t+l.topLeft,i)}const fL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,pL=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function mL(n,e){const t=(""+n).match(fL);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const gL=n=>+n||0;function Ay(n,e){const t={},i=Ue(e),r=i?Object.keys(e):e,o=Ue(n)?i?l=>De(n[l],n[e[l]]):l=>n[l]:()=>n;for(const l of r)t[l]=gL(o(l));return t}function VS(n){return Ay(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Oa(n){return Ay(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Yn(n){const e=VS(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function nn(n,e){n=n||{},e=e||vt.font;let t=De(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=De(n.style,e.style);i&&!(""+i).match(pL)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:De(n.family,e.family),lineHeight:mL(De(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:De(n.weight,e.weight),string:""};return r.string=aL(r),r}function Rh(n,e,t,i){let r,o,l;for(r=0,o=n.length;r<o;++r)if(l=n[r],l!==void 0&&l!==void 0)return l}function yL(n,e,t){const{min:i,max:r}=n,o=IS(e,(r-i)/2),l=(c,h)=>t&&c===0?0:c+h;return{min:l(i,-Math.abs(o)),max:l(r,o)}}function Co(n,e){return Object.assign(Object.create(n),e)}function Cy(n,e=[""],t,i,r=()=>n[0]){const o=t||n;typeof i>"u"&&(i=BS("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:r,override:c=>Cy([c,...n],e,o,i)};return new Proxy(l,{deleteProperty(c,h){return delete c[h],delete c._keys,delete n[0][h],!0},get(c,h){return jS(c,h,()=>SL(h,e,n,c))},getOwnPropertyDescriptor(c,h){return Reflect.getOwnPropertyDescriptor(c._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(c,h){return lb(c).includes(h)},ownKeys(c){return lb(c)},set(c,h,f){const m=c._storage||(c._storage=r());return c[h]=m[h]=f,delete c._keys,!0}})}function qa(n,e,t,i){const r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:LS(n,i),setContext:o=>qa(n,o,t,i),override:o=>qa(n.override(o),e,t,i)};return new Proxy(r,{deleteProperty(o,l){return delete o[l],delete n[l],!0},get(o,l,c){return jS(o,l,()=>vL(o,l,c))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(o,l,c){return n[l]=c,delete o[l],!0}})}function LS(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:bs(t)?t:()=>t,isIndexable:bs(i)?i:()=>i}}const _L=(n,e)=>n?n+by(e):e,Py=(n,e)=>Ue(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function jS(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function vL(n,e,t){const{_proxy:i,_context:r,_subProxy:o,_descriptors:l}=n;let c=i[e];return bs(c)&&l.isScriptable(e)&&(c=wL(e,c,n,t)),Rt(c)&&c.length&&(c=bL(e,c,n,l.isIndexable)),Py(e,c)&&(c=qa(c,r,o&&o[e],l)),c}function wL(n,e,t,i){const{_proxy:r,_context:o,_subProxy:l,_stack:c}=t;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let h=e(o,l||i);return c.delete(n),Py(n,h)&&(h=Ry(r._scopes,r,n,h)),h}function bL(n,e,t,i){const{_proxy:r,_context:o,_subProxy:l,_descriptors:c}=t;if(typeof o.index<"u"&&i(n))return e[o.index%e.length];if(Ue(e[0])){const h=e,f=r._scopes.filter(m=>m!==h);e=[];for(const m of h){const _=Ry(f,r,n,m);e.push(qa(_,o,l&&l[n],c))}}return e}function FS(n,e,t){return bs(n)?n(e,t):n}const EL=(n,e)=>n===!0?e:typeof n=="string"?xo(e,n):void 0;function xL(n,e,t,i,r){for(const o of e){const l=EL(t,o);if(l){n.add(l);const c=FS(l._fallback,t,r);if(typeof c<"u"&&c!==t&&c!==i)return c}else if(l===!1&&typeof i<"u"&&t!==i)return null}return!1}function Ry(n,e,t,i){const r=e._rootScopes,o=FS(e._fallback,t,i),l=[...n,...r],c=new Set;c.add(i);let h=ab(c,l,t,o||t,i);return h===null||typeof o<"u"&&o!==t&&(h=ab(c,l,o,h,i),h===null)?!1:Cy(Array.from(c),[""],r,o,()=>TL(e,t,i))}function ab(n,e,t,i,r){for(;t;)t=xL(n,e,t,i,r);return t}function TL(n,e,t){const i=n._getTarget();e in i||(i[e]={});const r=i[e];return Rt(r)&&Ue(t)?t:r||{}}function SL(n,e,t,i){let r;for(const o of e)if(r=BS(_L(o,n),t),typeof r<"u")return Py(n,r)?Ry(t,i,n,r):r}function BS(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function lb(n){let e=n._keys;return e||(e=n._keys=IL(n._scopes)),e}function IL(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const kL=Number.EPSILON||1e-14,Ka=(n,e)=>e<n.length&&!n[e].skip&&n[e],zS=n=>n==="x"?"y":"x";function AL(n,e,t,i){const r=n.skip?e:n,o=e,l=t.skip?e:t,c=Zm(o,r),h=Zm(l,o);let f=c/(c+h),m=h/(c+h);f=isNaN(f)?0:f,m=isNaN(m)?0:m;const _=i*f,y=i*m;return{previous:{x:o.x-_*(l.x-r.x),y:o.y-_*(l.y-r.y)},next:{x:o.x+y*(l.x-r.x),y:o.y+y*(l.y-r.y)}}}function CL(n,e,t){const i=n.length;let r,o,l,c,h,f=Ka(n,0);for(let m=0;m<i-1;++m)if(h=f,f=Ka(n,m+1),!(!h||!f)){if(Tc(e[m],0,kL)){t[m]=t[m+1]=0;continue}r=t[m]/e[m],o=t[m+1]/e[m],c=Math.pow(r,2)+Math.pow(o,2),!(c<=9)&&(l=3/Math.sqrt(c),t[m]=r*l*e[m],t[m+1]=o*l*e[m])}}function PL(n,e,t="x"){const i=zS(t),r=n.length;let o,l,c,h=Ka(n,0);for(let f=0;f<r;++f){if(l=c,c=h,h=Ka(n,f+1),!c)continue;const m=c[t],_=c[i];l&&(o=(m-l[t])/3,c[`cp1${t}`]=m-o,c[`cp1${i}`]=_-o*e[f]),h&&(o=(h[t]-m)/3,c[`cp2${t}`]=m+o,c[`cp2${i}`]=_+o*e[f])}}function RL(n,e="x"){const t=zS(e),i=n.length,r=Array(i).fill(0),o=Array(i);let l,c,h,f=Ka(n,0);for(l=0;l<i;++l)if(c=h,h=f,f=Ka(n,l+1),!!h){if(f){const m=f[e]-h[e];r[l]=m!==0?(f[t]-h[t])/m:0}o[l]=c?f?zi(r[l-1])!==zi(r[l])?0:(r[l-1]+r[l])/2:r[l-1]:r[l]}CL(n,r,o),PL(n,o,e)}function Nh(n,e,t){return Math.max(Math.min(n,t),e)}function NL(n,e){let t,i,r,o,l,c=Wc(n[0],e);for(t=0,i=n.length;t<i;++t)l=o,o=c,c=t<i-1&&Wc(n[t+1],e),o&&(r=n[t],l&&(r.cp1x=Nh(r.cp1x,e.left,e.right),r.cp1y=Nh(r.cp1y,e.top,e.bottom)),c&&(r.cp2x=Nh(r.cp2x,e.left,e.right),r.cp2y=Nh(r.cp2y,e.top,e.bottom)))}function DL(n,e,t,i,r){let o,l,c,h;if(e.spanGaps&&(n=n.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")RL(n,r);else{let f=i?n[n.length-1]:n[0];for(o=0,l=n.length;o<l;++o)c=n[o],h=AL(f,c,n[Math.min(o+1,l-(i?0:1))%l],e.tension),c.cp1x=h.previous.x,c.cp1y=h.previous.y,c.cp2x=h.next.x,c.cp2y=h.next.y,f=c}e.capBezierPoints&&NL(n,t)}function Ny(){return typeof window<"u"&&typeof document<"u"}function Dy(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Nd(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const ff=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function ML(n,e){return ff(n).getPropertyValue(e)}const OL=["top","right","bottom","left"];function mo(n,e,t){const i={};t=t?"-"+t:"";for(let r=0;r<4;r++){const o=OL[r];i[o]=parseFloat(n[e+"-"+o+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const VL=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function LL(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:o}=i;let l=!1,c,h;if(VL(r,o,n.target))c=r,h=o;else{const f=e.getBoundingClientRect();c=i.clientX-f.left,h=i.clientY-f.top,l=!0}return{x:c,y:h,box:l}}function ro(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,r=ff(t),o=r.boxSizing==="border-box",l=mo(r,"padding"),c=mo(r,"border","width"),{x:h,y:f,box:m}=LL(n,t),_=l.left+(m&&c.left),y=l.top+(m&&c.top);let{width:x,height:T}=e;return o&&(x-=l.width+c.width,T-=l.height+c.height),{x:Math.round((h-_)/x*t.width/i),y:Math.round((f-y)/T*t.height/i)}}function jL(n,e,t){let i,r;if(e===void 0||t===void 0){const o=n&&Dy(n);if(!o)e=n.clientWidth,t=n.clientHeight;else{const l=o.getBoundingClientRect(),c=ff(o),h=mo(c,"border","width"),f=mo(c,"padding");e=l.width-f.width-h.width,t=l.height-f.height-h.height,i=Nd(c.maxWidth,o,"clientWidth"),r=Nd(c.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:i||Pd,maxHeight:r||Pd}}const as=n=>Math.round(n*10)/10;function FL(n,e,t,i){const r=ff(n),o=mo(r,"margin"),l=Nd(r.maxWidth,n,"clientWidth")||Pd,c=Nd(r.maxHeight,n,"clientHeight")||Pd,h=jL(n,e,t);let{width:f,height:m}=h;if(r.boxSizing==="content-box"){const y=mo(r,"border","width"),x=mo(r,"padding");f-=x.width+y.width,m-=x.height+y.height}return f=Math.max(0,f-o.width),m=Math.max(0,i?f/i:m-o.height),f=as(Math.min(f,l,h.maxWidth)),m=as(Math.min(m,c,h.maxHeight)),f&&!m&&(m=as(f/2)),(e!==void 0||t!==void 0)&&i&&h.height&&m>h.height&&(m=h.height,f=as(Math.floor(m*i))),{width:f,height:m}}function cb(n,e,t){const i=e||1,r=as(n.height*i),o=as(n.width*i);n.height=as(n.height),n.width=as(n.width);const l=n.canvas;return l.style&&(t||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||l.height!==r||l.width!==o?(n.currentDevicePixelRatio=i,l.height=r,l.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const BL=(function(){let n=!1;try{const e={get passive(){return n=!0,!1}};Ny()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function ub(n,e){const t=ML(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function so(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function zL(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function UL(n,e,t,i){const r={x:n.cp2x,y:n.cp2y},o={x:e.cp1x,y:e.cp1y},l=so(n,r,t),c=so(r,o,t),h=so(o,e,t),f=so(l,c,t),m=so(c,h,t);return so(f,m,t)}const WL=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},HL=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Va(n,e,t){return n?WL(e,t):HL()}function US(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function WS(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function HS(n){return n==="angle"?{between:Uc,compare:WV,normalize:hi}:{between:os,compare:(e,t)=>e-t,normalize:e=>e}}function hb({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function $L(n,e,t){const{property:i,start:r,end:o}=t,{between:l,normalize:c}=HS(i),h=e.length;let{start:f,end:m,loop:_}=n,y,x;if(_){for(f+=h,m+=h,y=0,x=h;y<x&&l(c(e[f%h][i]),r,o);++y)f--,m--;f%=h,m%=h}return m<f&&(m+=h),{start:f,end:m,loop:_,style:n.style}}function qL(n,e,t){if(!t)return[n];const{property:i,start:r,end:o}=t,l=e.length,{compare:c,between:h,normalize:f}=HS(i),{start:m,end:_,loop:y,style:x}=$L(n,e,t),T=[];let k=!1,I=null,N,V,z;const q=()=>h(r,z,N)&&c(r,z)!==0,K=()=>c(o,N)===0||h(o,z,N),J=()=>k||q(),P=()=>!k||K();for(let C=m,R=m;C<=_;++C)V=e[C%l],!V.skip&&(N=f(V[i]),N!==z&&(k=h(N,r,o),I===null&&J()&&(I=c(N,r)===0?C:R),I!==null&&P()&&(T.push(hb({start:I,end:C,loop:y,count:l,style:x})),I=null),R=C,z=N));return I!==null&&T.push(hb({start:I,end:_,loop:y,count:l,style:x})),T}function KL(n,e){const t=[],i=n.segments;for(let r=0;r<i.length;r++){const o=qL(i[r],n.points,e);o.length&&t.push(...o)}return t}function GL(n,e,t,i){let r=0,o=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(o+=r);o>r&&n[o%e].skip;)o--;return o%=e,{start:r,end:o}}function YL(n,e,t,i){const r=n.length,o=[];let l=e,c=n[e],h;for(h=e+1;h<=t;++h){const f=n[h%r];f.skip||f.stop?c.skip||(i=!1,o.push({start:e%r,end:(h-1)%r,loop:i}),e=l=f.stop?h:null):(l=h,c.skip&&(e=h)),c=f}return l!==null&&o.push({start:e%r,end:l%r,loop:i}),o}function QL(n,e){const t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];const o=!!n._loop,{start:l,end:c}=GL(t,r,o,i);if(i===!0)return db(n,[{start:l,end:c,loop:o}],t,e);const h=c<l?c+r:c,f=!!n._fullLoop&&l===0&&c===r-1;return db(n,YL(t,l,h,f),t,e)}function db(n,e,t,i){return!i||!i.setContext||!t?e:XL(n,e,t,i)}function XL(n,e,t,i){const r=n._chart.getContext(),o=fb(n.options),{_datasetIndex:l,options:{spanGaps:c}}=n,h=t.length,f=[];let m=o,_=e[0].start,y=_;function x(T,k,I,N){const V=c?-1:1;if(T!==k){for(T+=h;t[T%h].skip;)T-=V;for(;t[k%h].skip;)k+=V;T%h!==k%h&&(f.push({start:T%h,end:k%h,loop:I,style:N}),m=N,_=k%h)}}for(const T of e){_=c?_:T.start;let k=t[_%h],I;for(y=_+1;y<=T.end;y++){const N=t[y%h];I=fb(i.setContext(Co(r,{type:"segment",p0:k,p1:N,p0DataIndex:(y-1)%h,p1DataIndex:y%h,datasetIndex:l}))),JL(I,m)&&x(_,y-1,T.loop,m),k=N,m=I}_<y-1&&x(_,y-1,T.loop,m)}return f}function fb(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function JL(n,e){if(!e)return!1;const t=[],i=function(r,o){return Ty(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function Dh(n,e,t){return n.options.clip?n[t]:e[t]}function ZL(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:Dh(t,e,"left"),right:Dh(t,e,"right"),top:Dh(i,e,"top"),bottom:Dh(i,e,"bottom")}:e}function ej(n,e){const t=e._clip;if(t.disabled)return!1;const i=ZL(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class tj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){const o=t.listeners[r],l=t.duration;o.forEach(c=>c({chart:e,initial:t.initial,numSteps:l,currentStep:Math.min(i-t.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=NS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const o=i.items;let l=o.length-1,c=!1,h;for(;l>=0;--l)h=o[l],h._active?(h._total>i.duration&&(i.duration=h._total),h.tick(e),c=!0):(o[l]=o[o.length-1],o.pop());c&&(r.draw(),this._notify(r,i,e,"progress")),o.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var hr=new tj;const pb="transparent",nj={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=ib(n||pb),r=i.valid&&ib(e||pb);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class ij{constructor(e,t,i,r){const o=t[i];r=Rh([e.to,r,o,e.from]);const l=Rh([e.from,o,r]);this._active=!0,this._fn=e.fn||nj[e.type||typeof l],this._easing=Sc[e.easing]||Sc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=l,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const r=this._target[this._prop],o=i-this._start,l=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Rh([e.to,t,r,e.from]),this._from=Rh([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,r=this._prop,o=this._from,l=this._loop,c=this._to;let h;if(this._active=o!==c&&(l||t<i),!this._active){this._target[r]=c,this._notify(!0);return}if(t<0){this._target[r]=o;return}h=t/i%2,h=l&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[r]=this._fn(o,c,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}}class $S{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ue(e))return;const t=Object.keys(vt.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const o=e[r];if(!Ue(o))return;const l={};for(const c of t)l[c]=o[c];(Rt(o.properties)&&o.properties||[r]).forEach(c=>{(c===r||!i.has(c))&&i.set(c,l)})})}_animateOptions(e,t){const i=t.options,r=sj(e,i);if(!r)return[];const o=this._createAnimations(r,i);return i.$shared&&rj(e.options.$animations,i).then(()=>{e.options=i},()=>{}),o}_createAnimations(e,t){const i=this._properties,r=[],o=e.$animations||(e.$animations={}),l=Object.keys(t),c=Date.now();let h;for(h=l.length-1;h>=0;--h){const f=l[h];if(f.charAt(0)==="$")continue;if(f==="options"){r.push(...this._animateOptions(e,t));continue}const m=t[f];let _=o[f];const y=i.get(f);if(_)if(y&&_.active()){_.update(y,m,c);continue}else _.cancel();if(!y||!y.duration){e[f]=m;continue}o[f]=_=new ij(y,e,f,m),r.push(_)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return hr.add(this._chart,i),!0}}function rj(n,e){const t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const o=n[i[r]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function sj(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function mb(n,e){const t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:i?o:r,end:i?r:o}}function oj(n,e,t){if(t===!1)return!1;const i=mb(n,t),r=mb(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function aj(n){let e,t,i,r;return Ue(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function qS(n,e){const t=[],i=n._getSortedDatasetMetas(e);let r,o;for(r=0,o=i.length;r<o;++r)t.push(i[r].index);return t}function gb(n,e,t,i={}){const r=n.keys,o=i.mode==="single";let l,c,h,f;if(e===null)return;let m=!1;for(l=0,c=r.length;l<c;++l){if(h=+r[l],h===t){if(m=!0,i.all)continue;break}f=n.values[h],Gn(f)&&(o||e===0||zi(e)===zi(f))&&(e+=f)}return!m&&!i.all?0:e}function lj(n,e){const{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",l=Object.keys(n),c=new Array(l.length);let h,f,m;for(h=0,f=l.length;h<f;++h)m=l[h],c[h]={[r]:m,[o]:n[m]};return c}function pm(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function cj(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function uj(n){const{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function hj(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function yb(n,e,t,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const o=n[r.index];if(t&&o>0||!t&&o<0)return r.index}return null}function _b(n,e){const{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:o,vScale:l,index:c}=i,h=o.axis,f=l.axis,m=cj(o,l,i),_=e.length;let y;for(let x=0;x<_;++x){const T=e[x],{[h]:k,[f]:I}=T,N=T._stacks||(T._stacks={});y=N[f]=hj(r,m,k),y[c]=I,y._top=yb(y,l,!0,i.type),y._bottom=yb(y,l,!1,i.type);const V=y._visualValues||(y._visualValues={});V[c]=I}}function mm(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function dj(n,e){return Co(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function fj(n,e,t){return Co(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function nc(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const r of e){const o=r._stacks;if(!o||o[i]===void 0||o[i][t]===void 0)return;delete o[i][t],o[i]._visualValues!==void 0&&o[i]._visualValues[t]!==void 0&&delete o[i]._visualValues[t]}}}const gm=n=>n==="reset"||n==="none",vb=(n,e)=>e?n:Object.assign({},n),pj=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:qS(t,!0),values:null};class go{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=pm(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&nc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),r=(_,y,x,T)=>_==="x"?y:_==="r"?T:x,o=t.xAxisID=De(i.xAxisID,mm(e,"x")),l=t.yAxisID=De(i.yAxisID,mm(e,"y")),c=t.rAxisID=De(i.rAxisID,mm(e,"r")),h=t.indexAxis,f=t.iAxisID=r(h,o,l,c),m=t.vAxisID=r(h,l,o,c);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(l),t.rScale=this.getScaleForId(c),t.iScale=this.getScaleForId(f),t.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&eb(this._data,this),e._stacked&&nc(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(Ue(t)){const r=this._cachedMeta;this._data=lj(t,r)}else if(i!==t){if(i){eb(i,this);const r=this._cachedMeta;nc(r),r._parsed=[]}t&&Object.isExtensible(t)&&KV(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const o=t._stacked;t._stacked=pm(t.vScale,t),t.stack!==i.stack&&(r=!0,nc(t),t.stack=i.stack),this._resyncElements(e),(r||o!==t._stacked)&&(_b(this,t._parsed),t._stacked=pm(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:r}=this,{iScale:o,_stacked:l}=i,c=o.axis;let h=e===0&&t===r.length?!0:i._sorted,f=e>0&&i._parsed[e-1],m,_,y;if(this._parsing===!1)i._parsed=r,i._sorted=!0,y=r;else{Rt(r[e])?y=this.parseArrayData(i,r,e,t):Ue(r[e])?y=this.parseObjectData(i,r,e,t):y=this.parsePrimitiveData(i,r,e,t);const x=()=>_[c]===null||f&&_[c]<f[c];for(m=0;m<t;++m)i._parsed[m+e]=_=y[m],h&&(x()&&(h=!1),f=_);i._sorted=h}l&&_b(this,y)}parsePrimitiveData(e,t,i,r){const{iScale:o,vScale:l}=e,c=o.axis,h=l.axis,f=o.getLabels(),m=o===l,_=new Array(r);let y,x,T;for(y=0,x=r;y<x;++y)T=y+i,_[y]={[c]:m||o.parse(f[T],T),[h]:l.parse(t[T],T)};return _}parseArrayData(e,t,i,r){const{xScale:o,yScale:l}=e,c=new Array(r);let h,f,m,_;for(h=0,f=r;h<f;++h)m=h+i,_=t[m],c[h]={x:o.parse(_[0],m),y:l.parse(_[1],m)};return c}parseObjectData(e,t,i,r){const{xScale:o,yScale:l}=e,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,f=new Array(r);let m,_,y,x;for(m=0,_=r;m<_;++m)y=m+i,x=t[y],f[m]={x:o.parse(xo(x,c),y),y:l.parse(xo(x,h),y)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const r=this.chart,o=this._cachedMeta,l=t[e.axis],c={keys:qS(r,!0),values:t._stacks[e.axis]._visualValues};return gb(c,l,o.index,{mode:i})}updateRangeFromParsed(e,t,i,r){const o=i[t.axis];let l=o===null?NaN:o;const c=r&&i._stacks[t.axis];r&&c&&(r.values=c,l=gb(r,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,t){const i=this._cachedMeta,r=i._parsed,o=i._sorted&&e===i.iScale,l=r.length,c=this._getOtherScale(e),h=pj(t,i,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:_}=uj(c);let y,x;function T(){x=r[y];const k=x[c.axis];return!Gn(x[e.axis])||m>k||_<k}for(y=0;y<l&&!(!T()&&(this.updateRangeFromParsed(f,e,x,h),o));++y);if(o){for(y=l-1;y>=0;--y)if(!T()){this.updateRangeFromParsed(f,e,x,h);break}}return f}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let r,o,l;for(r=0,o=t.length;r<o;++r)l=t[r][e.axis],Gn(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,r=t.vScale,o=this.getParsed(e);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=aj(De(this.options.clip,oj(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,r=i.data||[],o=t.chartArea,l=[],c=this._drawStart||0,h=this._drawCount||r.length-c,f=this.options.drawActiveElementsOnTop;let m;for(i.dataset&&i.dataset.draw(e,o,c,h),m=c;m<c+h;++m){const _=r[m];_.hidden||(_.active&&f?l.push(_):_.draw(e,o))}for(m=0;m<l.length;++m)l[m].draw(e,o)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const r=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=fj(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=r.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=dj(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=i,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const r=t==="active",o=this._cachedDataOpts,l=e+"-"+t,c=o[l],h=this.enableOptionSharing&&Bc(i);if(c)return vb(c,h);const f=this.chart.config,m=f.datasetElementScopeKeys(this._type,e),_=r?[`${e}Hover`,"hover",e,""]:[e,""],y=f.getOptionScopes(this.getDataset(),m),x=Object.keys(vt.elements[e]),T=()=>this.getContext(i,r,t),k=f.resolveNamedOptions(y,x,T,_);return k.$shared&&(k.$shared=h,o[l]=Object.freeze(vb(k,h))),k}_resolveAnimations(e,t,i){const r=this.chart,o=this._cachedDataOpts,l=`animation-${t}`,c=o[l];if(c)return c;let h;if(r.options.animation!==!1){const m=this.chart.config,_=m.datasetAnimationScopeKeys(this._type,t),y=m.getOptionScopes(this.getDataset(),_);h=m.createResolver(y,this.getContext(e,i,t))}const f=new $S(r,h&&h.animations);return h&&h._cacheable&&(o[l]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||gm(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),r=this._sharedOptions,o=this.getSharedOptions(i),l=this.includeOptions(t,o)||o!==r;return this.updateSharedOptions(o,t,i),{sharedOptions:o,includeOptions:l}}updateElement(e,t,i,r){gm(r)?Object.assign(e,i):this._resolveAnimations(t,r).update(e,i)}updateSharedOptions(e,t,i){e&&!gm(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,r){e.active=r;const o=this.getStyle(t,r);this._resolveAnimations(t,i,r).update(e,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[c,h,f]of this._syncList)this[c](h,f);this._syncList=[];const r=i.length,o=t.length,l=Math.min(o,r);l&&this.parse(0,l),o>r?this._insertElements(r,o-r,e):o<r&&this._removeElements(o,r-o)}_insertElements(e,t,i=!0){const r=this._cachedMeta,o=r.data,l=e+t;let c;const h=f=>{for(f.length+=t,c=f.length-1;c>=l;c--)f[c]=f[c-t]};for(h(o),c=e;c<l;++c)o[c]=new this.dataElementType;this._parsing&&h(r._parsed),this.parse(e,t),i&&this.updateElements(o,e,t,"reset")}updateElements(e,t,i,r){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,t);i._stacked&&nc(i,r)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,r]=e;this[t](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ge(go,"defaults",{}),ge(go,"datasetElementType",null),ge(go,"dataElementType",null);function mj(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let r=0,o=t.length;r<o;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=RS(i.sort((r,o)=>r-o))}return n._cache.$bar}function gj(n){const e=n.iScale,t=mj(e,n.type);let i=e._length,r,o,l,c;const h=()=>{l===32767||l===-32768||(Bc(c)&&(i=Math.min(i,Math.abs(l-c)||i)),c=l)};for(r=0,o=t.length;r<o;++r)l=e.getPixelForValue(t[r]),h();for(c=void 0,r=0,o=e.ticks.length;r<o;++r)l=e.getPixelForTick(r),h();return i}function yj(n,e,t,i){const r=t.barThickness;let o,l;return qe(r)?(o=e.min*t.categoryPercentage,l=t.barPercentage):(o=r*i,l=1),{chunk:o/i,ratio:l,start:e.pixels[n]-o/2}}function _j(n,e,t,i){const r=e.pixels,o=r[n];let l=n>0?r[n-1]:null,c=n<r.length-1?r[n+1]:null;const h=t.categoryPercentage;l===null&&(l=o-(c===null?e.end-e.start:c-o)),c===null&&(c=o+o-l);const f=o-(o-Math.min(l,c))/2*h;return{chunk:Math.abs(c-l)/2*h/i,ratio:t.barPercentage,start:f}}function vj(n,e,t,i){const r=t.parse(n[0],i),o=t.parse(n[1],i),l=Math.min(r,o),c=Math.max(r,o);let h=l,f=c;Math.abs(l)>Math.abs(c)&&(h=c,f=l),e[t.axis]=f,e._custom={barStart:h,barEnd:f,start:r,end:o,min:l,max:c}}function KS(n,e,t,i){return Rt(n)?vj(n,e,t,i):e[t.axis]=t.parse(n,i),e}function wb(n,e,t,i){const r=n.iScale,o=n.vScale,l=r.getLabels(),c=r===o,h=[];let f,m,_,y;for(f=t,m=t+i;f<m;++f)y=e[f],_={},_[r.axis]=c||r.parse(l[f],f),h.push(KS(y,_,o,f));return h}function ym(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function wj(n,e,t){return n!==0?zi(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function bj(n){let e,t,i,r,o;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",o="start"):(r="start",o="end"),{start:t,end:i,reverse:e,top:r,bottom:o}}function Ej(n,e,t,i){let r=e.borderSkipped;const o={};if(!r){n.borderSkipped=o;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:c,reverse:h,top:f,bottom:m}=bj(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=f:(t._bottom||0)===i?r=m:(o[bb(m,l,c,h)]=!0,r=f)),o[bb(r,l,c,h)]=!0,n.borderSkipped=o}function bb(n,e,t,i){return i?(n=xj(n,e,t),n=Eb(n,t,e)):n=Eb(n,e,t),n}function xj(n,e,t){return n===e?t:n===t?e:n}function Eb(n,e,t){return n==="start"?e:n==="end"?t:n}function Tj(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class Xh extends go{parsePrimitiveData(e,t,i,r){return wb(e,t,i,r)}parseArrayData(e,t,i,r){return wb(e,t,i,r)}parseObjectData(e,t,i,r){const{iScale:o,vScale:l}=e,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,f=o.axis==="x"?c:h,m=l.axis==="x"?c:h,_=[];let y,x,T,k;for(y=i,x=i+r;y<x;++y)k=t[y],T={},T[o.axis]=o.parse(xo(k,f),y),_.push(KS(xo(k,m),T,l,y));return _}updateRangeFromParsed(e,t,i,r){super.updateRangeFromParsed(e,t,i,r);const o=i._custom;o&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:r}=t,o=this.getParsed(e),l=o._custom,c=ym(l)?"["+l.start+", "+l.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,r){const o=r==="reset",{index:l,_cachedMeta:{vScale:c}}=this,h=c.getBasePixel(),f=c.isHorizontal(),m=this._getRuler(),{sharedOptions:_,includeOptions:y}=this._getSharedOptions(t,r);for(let x=t;x<t+i;x++){const T=this.getParsed(x),k=o||qe(T[c.axis])?{base:h,head:h}:this._calculateBarValuePixels(x),I=this._calculateBarIndexPixels(x,m),N=(T._stacks||{})[c.axis],V={horizontal:f,base:k.base,enableBorderRadius:!N||ym(T._custom)||l===N._top||l===N._bottom,x:f?k.head:I.center,y:f?I.center:k.head,height:f?I.size:Math.abs(k.size),width:f?Math.abs(k.size):I.size};y&&(V.options=_||this.resolveDataElementOptions(x,e[x].active?"active":r));const z=V.options||e[x].options;Ej(V,z,N,l),Tj(V,z,m.ratio),this.updateElement(e[x],x,V,r)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),o=i.options.stacked,l=[],c=this._cachedMeta.controller.getParsed(t),h=c&&c[i.axis],f=m=>{const _=m._parsed.find(x=>x[i.axis]===h),y=_&&_[m.vScale.axis];if(qe(y)||isNaN(y))return!0};for(const m of r)if(!(t!==void 0&&f(m))&&((o===!1||l.indexOf(m.stack)===-1||o===void 0&&m.stack===void 0)&&l.push(m.stack),m.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[De(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,i){const r=this._getStacks(e,i),o=t!==void 0?r.indexOf(t):-1;return o===-1?r.length-1:o}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,r=[];let o,l;for(o=0,l=t.data.length;o<l;++o)r.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const c=e.barThickness;return{min:c||gj(t),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:r},options:{base:o,minBarLength:l}}=this,c=o||0,h=this.getParsed(e),f=h._custom,m=ym(f);let _=h[t.axis],y=0,x=i?this.applyStack(t,h,i):_,T,k;x!==_&&(y=x-_,x=_),m&&(_=f.barStart,x=f.barEnd-f.barStart,_!==0&&zi(_)!==zi(f.barEnd)&&(y=0),y+=_);const I=!qe(o)&&!m?o:y;let N=t.getPixelForValue(I);if(this.chart.getDataVisibility(e)?T=t.getPixelForValue(y+x):T=N,k=T-N,Math.abs(k)<l){k=wj(k,t,c)*l,_===c&&(N-=k/2);const V=t.getPixelForDecimal(0),z=t.getPixelForDecimal(1),q=Math.min(V,z),K=Math.max(V,z);N=Math.max(Math.min(N,K),q),T=N+k,i&&!m&&(h._stacks[t.axis]._visualValues[r]=t.getValueForPixel(T)-t.getValueForPixel(N))}if(N===t.getPixelForValue(c)){const V=zi(k)*t.getLineWidthForValue(c)/2;N+=V,k-=V}return{size:k,base:N,head:T,center:T+k/2}}_calculateBarIndexPixels(e,t){const i=t.scale,r=this.options,o=r.skipNull,l=De(r.maxBarThickness,1/0);let c,h;const f=this._getAxisCount();if(t.grouped){const m=o?this._getStackCount(e):t.stackCount,_=r.barThickness==="flex"?_j(e,t,r,m*f):yj(e,t,r,m*f),y=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(De(y,this.getFirstScaleIdForIndexAxis())),T=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+x;c=_.start+_.chunk*T+_.chunk/2,h=Math.min(l,_.chunk*_.ratio)}else c=i.getPixelForValue(this.getParsed(e)[i.axis],e),h=Math.min(l,t.min*t.ratio);return{base:c-h/2,head:c+h/2,center:c,size:h}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,r=i.length;let o=0;for(;o<r;++o)this.getParsed(o)[t.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}ge(Xh,"id","bar"),ge(Xh,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ge(Xh,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Sj(n,e,t){let i=1,r=1,o=0,l=0;if(e<mt){const c=n,h=c+e,f=Math.cos(c),m=Math.sin(c),_=Math.cos(h),y=Math.sin(h),x=(z,q,K)=>Uc(z,c,h,!0)?1:Math.max(q,q*t,K,K*t),T=(z,q,K)=>Uc(z,c,h,!0)?-1:Math.min(q,q*t,K,K*t),k=x(0,f,_),I=x(Nt,m,y),N=T(Xe,f,_),V=T(Xe+Nt,m,y);i=(k-N)/2,r=(I-V)/2,o=-(k+N)/2,l=-(I+V)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:l}}class dc extends go{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let o=h=>+i[h];if(Ue(i[e])){const{key:h="value"}=this._parsing;o=f=>+xo(i[f],h)}let l,c;for(l=e,c=e+t;l<c;++l)r._parsed[l]=o(l)}}_getRotation(){return _r(this.options.rotation-90)}_getCircumference(){return _r(this.options.circumference)}_getRotationExtents(){let e=mt,t=-mt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,o=r._getRotation(),l=r._getCircumference();e=Math.min(e,o),t=Math.max(t,o+l)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,r=this._cachedMeta,o=r.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,c=Math.max((Math.min(i.width,i.height)-l)/2,0),h=Math.min(PV(this.options.cutout,c),1),f=this._getRingWeight(this.index),{circumference:m,rotation:_}=this._getRotationExtents(),{ratioX:y,ratioY:x,offsetX:T,offsetY:k}=Sj(_,m,h),I=(i.width-l)/y,N=(i.height-l)/x,V=Math.max(Math.min(I,N)/2,0),z=IS(this.options.radius,V),q=Math.max(z*h,0),K=(z-q)/this._getVisibleDatasetWeightTotal();this.offsetX=T*z,this.offsetY=k*z,r.total=this.calculateTotal(),this.outerRadius=z-K*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-K*f,0),this.updateElements(o,0,o.length,e)}_circumference(e,t){const i=this.options,r=this._cachedMeta,o=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*o/mt)}updateElements(e,t,i,r){const o=r==="reset",l=this.chart,c=l.chartArea,f=l.options.animation,m=(c.left+c.right)/2,_=(c.top+c.bottom)/2,y=o&&f.animateScale,x=y?0:this.innerRadius,T=y?0:this.outerRadius,{sharedOptions:k,includeOptions:I}=this._getSharedOptions(t,r);let N=this._getRotation(),V;for(V=0;V<t;++V)N+=this._circumference(V,o);for(V=t;V<t+i;++V){const z=this._circumference(V,o),q=e[V],K={x:m+this.offsetX,y:_+this.offsetY,startAngle:N,endAngle:N+z,circumference:z,outerRadius:T,innerRadius:x};I&&(K.options=k||this.resolveDataElementOptions(V,q.active?"active":r)),N+=z,this.updateElement(q,V,K,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,r;for(r=0;r<t.length;r++){const o=e._parsed[r];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!t[r].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?mt*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,r=i.data.labels||[],o=Sy(t._parsed[e],i.options.locale);return{label:r[e]||"",value:o}}getMaxBorderWidth(e){let t=0;const i=this.chart;let r,o,l,c,h;if(!e){for(r=0,o=i.data.datasets.length;r<o;++r)if(i.isDatasetVisible(r)){l=i.getDatasetMeta(r),e=l.data,c=l.controller;break}}if(!e)return 0;for(r=0,o=e.length;r<o;++r)h=c.resolveDataElementOptions(r),h.borderAlign!=="inner"&&(t=Math.max(t,h.borderWidth||0,h.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,r=e.length;i<r;++i){const o=this.resolveDataElementOptions(i);t=Math.max(t,o.offset||0,o.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(De(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ge(dc,"id","doughnut"),ge(dc,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ge(dc,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ge(dc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:i,textAlign:r,color:o,useBorderRadius:l,borderRadius:c}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((h,f)=>{const _=e.getDatasetMeta(0).controller.getStyle(f);return{text:h,fillStyle:_.backgroundColor,fontColor:o,hidden:!e.getDataVisibility(f),lineDash:_.borderDash,lineDashOffset:_.borderDashOffset,lineJoin:_.borderJoinStyle,lineWidth:_.borderWidth,strokeStyle:_.borderColor,textAlign:r,pointStyle:i,borderRadius:l&&(c||_.borderRadius),index:f}}):[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}});class Jh extends go{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:r=[],_dataset:o}=t,l=this.chart._animationsDisabled;let{start:c,count:h}=QV(t,r,l);this._drawStart=c,this._drawCount=h,XV(t)&&(c=0,h=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=r;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:f},e),this.updateElements(r,c,h,e)}updateElements(e,t,i,r){const o=r==="reset",{iScale:l,vScale:c,_stacked:h,_dataset:f}=this._cachedMeta,{sharedOptions:m,includeOptions:_}=this._getSharedOptions(t,r),y=l.axis,x=c.axis,{spanGaps:T,segment:k}=this.options,I=zc(T)?T:Number.POSITIVE_INFINITY,N=this.chart._animationsDisabled||o||r==="none",V=t+i,z=e.length;let q=t>0&&this.getParsed(t-1);for(let K=0;K<z;++K){const J=e[K],P=N?J:{};if(K<t||K>=V){P.skip=!0;continue}const C=this.getParsed(K),R=qe(C[x]),O=P[y]=l.getPixelForValue(C[y],K),L=P[x]=o||R?c.getBasePixel():c.getPixelForValue(h?this.applyStack(c,C,h):C[x],K);P.skip=isNaN(O)||isNaN(L)||R,P.stop=K>0&&Math.abs(C[y]-q[y])>I,k&&(P.parsed=C,P.raw=f.data[K]),_&&(P.options=m||this.resolveDataElementOptions(K,J.active?"active":r)),N||this.updateElement(J,K,P,r),q=C}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const o=r[0].size(this.resolveDataElementOptions(0)),l=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,o,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ge(Jh,"id","line"),ge(Jh,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ge(Jh,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function to(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class My{constructor(e){ge(this,"options");this.options=e||{}}static override(e){Object.assign(My.prototype,e)}init(){}formats(){return to()}parse(){return to()}format(){return to()}add(){return to()}diff(){return to()}startOf(){return to()}endOf(){return to()}}var Ij={_date:My};function kj(n,e,t,i){const{controller:r,data:o,_sorted:l}=n,c=r._cachedMeta.iScale,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&l&&o.length){const f=c._reversePixels?$V:co;if(i){if(r._sharedOptions){const m=o[0],_=typeof m.getRange=="function"&&m.getRange(e);if(_){const y=f(o,e,t-_),x=f(o,e,t+_);return{lo:y.lo,hi:x.hi}}}}else{const m=f(o,e,t);if(h){const{vScale:_}=r._cachedMeta,{_parsed:y}=n,x=y.slice(0,m.lo+1).reverse().findIndex(k=>!qe(k[_.axis]));m.lo-=Math.max(0,x);const T=y.slice(m.hi).findIndex(k=>!qe(k[_.axis]));m.hi+=Math.max(0,T)}return m}}return{lo:0,hi:o.length-1}}function pf(n,e,t,i,r){const o=n.getSortedVisibleDatasetMetas(),l=t[e];for(let c=0,h=o.length;c<h;++c){const{index:f,data:m}=o[c],{lo:_,hi:y}=kj(o[c],e,l,r);for(let x=_;x<=y;++x){const T=m[x];T.skip||i(T,f,x)}}}function Aj(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){const o=e?Math.abs(i.x-r.x):0,l=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function _m(n,e,t,i,r){const o=[];return!r&&!n.isPointInArea(e)||pf(n,t,e,function(c,h,f){!r&&!Wc(c,n.chartArea,0)||c.inRange(e.x,e.y,i)&&o.push({element:c,datasetIndex:h,index:f})},!0),o}function Cj(n,e,t,i){let r=[];function o(l,c,h){const{startAngle:f,endAngle:m}=l.getProps(["startAngle","endAngle"],i),{angle:_}=CS(l,{x:e.x,y:e.y});Uc(_,f,m)&&r.push({element:l,datasetIndex:c,index:h})}return pf(n,t,e,o),r}function Pj(n,e,t,i,r,o){let l=[];const c=Aj(t);let h=Number.POSITIVE_INFINITY;function f(m,_,y){const x=m.inRange(e.x,e.y,r);if(i&&!x)return;const T=m.getCenterPoint(r);if(!(!!o||n.isPointInArea(T))&&!x)return;const I=c(e,T);I<h?(l=[{element:m,datasetIndex:_,index:y}],h=I):I===h&&l.push({element:m,datasetIndex:_,index:y})}return pf(n,t,e,f),l}function vm(n,e,t,i,r,o){return!o&&!n.isPointInArea(e)?[]:t==="r"&&!i?Cj(n,e,t,r):Pj(n,e,t,i,r,o)}function xb(n,e,t,i,r){const o=[],l=t==="x"?"inXRange":"inYRange";let c=!1;return pf(n,t,e,(h,f,m)=>{h[l]&&h[l](e[t],r)&&(o.push({element:h,datasetIndex:f,index:m}),c=c||h.inRange(e.x,e.y,r))}),i&&!c?[]:o}var Rj={modes:{index(n,e,t,i){const r=ro(e,n),o=t.axis||"x",l=t.includeInvisible||!1,c=t.intersect?_m(n,r,o,i,l):vm(n,r,o,!1,i,l),h=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(f=>{const m=c[0].index,_=f.data[m];_&&!_.skip&&h.push({element:_,datasetIndex:f.index,index:m})}),h):[]},dataset(n,e,t,i){const r=ro(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;let c=t.intersect?_m(n,r,o,i,l):vm(n,r,o,!1,i,l);if(c.length>0){const h=c[0].datasetIndex,f=n.getDatasetMeta(h).data;c=[];for(let m=0;m<f.length;++m)c.push({element:f[m],datasetIndex:h,index:m})}return c},point(n,e,t,i){const r=ro(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;return _m(n,r,o,i,l)},nearest(n,e,t,i){const r=ro(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;return vm(n,r,o,t.intersect,i,l)},x(n,e,t,i){const r=ro(e,n);return xb(n,r,"x",t.intersect,i)},y(n,e,t,i){const r=ro(e,n);return xb(n,r,"y",t.intersect,i)}}};const GS=["left","top","right","bottom"];function ic(n,e){return n.filter(t=>t.pos===e)}function Tb(n,e){return n.filter(t=>GS.indexOf(t.pos)===-1&&t.box.axis===e)}function rc(n,e){return n.sort((t,i)=>{const r=e?i:t,o=e?t:i;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function Nj(n){const e=[];let t,i,r,o,l,c;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:o,options:{stack:l,stackWeight:c=1}}=r,e.push({index:t,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:l&&o+l,stackWeight:c});return e}function Dj(n){const e={};for(const t of n){const{stack:i,pos:r,stackWeight:o}=t;if(!i||!GS.includes(r))continue;const l=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return e}function Mj(n,e){const t=Dj(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let o,l,c;for(o=0,l=n.length;o<l;++o){c=n[o];const{fullSize:h}=c.box,f=t[c.stack],m=f&&c.stackWeight/f.weight;c.horizontal?(c.width=m?m*i:h&&e.availableWidth,c.height=r):(c.width=i,c.height=m?m*r:h&&e.availableHeight)}return t}function Oj(n){const e=Nj(n),t=rc(e.filter(f=>f.box.fullSize),!0),i=rc(ic(e,"left"),!0),r=rc(ic(e,"right")),o=rc(ic(e,"top"),!0),l=rc(ic(e,"bottom")),c=Tb(e,"x"),h=Tb(e,"y");return{fullSize:t,leftAndTop:i.concat(o),rightAndBottom:r.concat(h).concat(l).concat(c),chartArea:ic(e,"chartArea"),vertical:i.concat(r).concat(h),horizontal:o.concat(l).concat(c)}}function Sb(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function YS(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function Vj(n,e,t,i){const{pos:r,box:o}=t,l=n.maxPadding;if(!Ue(r)){t.size&&(n[r]-=t.size);const _=i[t.stack]||{size:0,count:1};_.size=Math.max(_.size,t.horizontal?o.height:o.width),t.size=_.size/_.count,n[r]+=t.size}o.getPadding&&YS(l,o.getPadding());const c=Math.max(0,e.outerWidth-Sb(l,n,"left","right")),h=Math.max(0,e.outerHeight-Sb(l,n,"top","bottom")),f=c!==n.w,m=h!==n.h;return n.w=c,n.h=h,t.horizontal?{same:f,other:m}:{same:m,other:f}}function Lj(n){const e=n.maxPadding;function t(i){const r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function jj(n,e){const t=e.maxPadding;function i(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(l=>{o[l]=Math.max(e[l],t[l])}),o}return i(n?["left","right"]:["top","bottom"])}function fc(n,e,t,i){const r=[];let o,l,c,h,f,m;for(o=0,l=n.length,f=0;o<l;++o){c=n[o],h=c.box,h.update(c.width||e.w,c.height||e.h,jj(c.horizontal,e));const{same:_,other:y}=Vj(e,t,c,i);f|=_&&r.length,m=m||y,h.fullSize||r.push(c)}return f&&fc(r,e,t,i)||m}function Mh(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function Ib(n,e,t,i){const r=t.padding;let{x:o,y:l}=e;for(const c of n){const h=c.box,f=i[c.stack]||{placed:0,weight:1},m=c.stackWeight/f.weight||1;if(c.horizontal){const _=e.w*m,y=f.size||h.height;Bc(f.start)&&(l=f.start),h.fullSize?Mh(h,r.left,l,t.outerWidth-r.right-r.left,y):Mh(h,e.left+f.placed,l,_,y),f.start=l,f.placed+=_,l=h.bottom}else{const _=e.h*m,y=f.size||h.width;Bc(f.start)&&(o=f.start),h.fullSize?Mh(h,o,r.top,y,t.outerHeight-r.bottom-r.top):Mh(h,o,e.top+f.placed,y,_),f.start=o,f.placed+=_,o=h.right}}e.x=o,e.y=l}var $n={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const r=Yn(n.options.layout.padding),o=Math.max(e-r.width,0),l=Math.max(t-r.height,0),c=Oj(n.boxes),h=c.vertical,f=c.horizontal;Qe(n.boxes,k=>{typeof k.beforeLayout=="function"&&k.beforeLayout()});const m=h.reduce((k,I)=>I.box.options&&I.box.options.display===!1?k:k+1,0)||1,_=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/m,hBoxMaxHeight:l/2}),y=Object.assign({},r);YS(y,Yn(i));const x=Object.assign({maxPadding:y,w:o,h:l,x:r.left,y:r.top},r),T=Mj(h.concat(f),_);fc(c.fullSize,x,_,T),fc(h,x,_,T),fc(f,x,_,T)&&fc(h,x,_,T),Lj(x),Ib(c.leftAndTop,x,_,T),x.x+=x.w,x.y+=x.h,Ib(c.rightAndBottom,x,_,T),n.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},Qe(c.chartArea,k=>{const I=k.box;Object.assign(I,n.chartArea),I.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class QS{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}}class Fj extends QS{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Zh="$chartjs",Bj={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},kb=n=>n===null||n==="";function zj(n,e){const t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[Zh]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",kb(r)){const o=ub(n,"width");o!==void 0&&(n.width=o)}if(kb(i))if(n.style.height==="")n.height=n.width/(e||2);else{const o=ub(n,"height");o!==void 0&&(n.height=o)}return n}const XS=BL?{passive:!0}:!1;function Uj(n,e,t){n&&n.addEventListener(e,t,XS)}function Wj(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,XS)}function Hj(n,e){const t=Bj[n.type]||n.type,{x:i,y:r}=ro(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Dd(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function $j(n,e,t){const i=n.canvas,r=new MutationObserver(o=>{let l=!1;for(const c of o)l=l||Dd(c.addedNodes,i),l=l&&!Dd(c.removedNodes,i);l&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function qj(n,e,t){const i=n.canvas,r=new MutationObserver(o=>{let l=!1;for(const c of o)l=l||Dd(c.removedNodes,i),l=l&&!Dd(c.addedNodes,i);l&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}const $c=new Map;let Ab=0;function JS(){const n=window.devicePixelRatio;n!==Ab&&(Ab=n,$c.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function Kj(n,e){$c.size||window.addEventListener("resize",JS),$c.set(n,e)}function Gj(n){$c.delete(n),$c.size||window.removeEventListener("resize",JS)}function Yj(n,e,t){const i=n.canvas,r=i&&Dy(i);if(!r)return;const o=DS((c,h)=>{const f=r.clientWidth;t(c,h),f<r.clientWidth&&t()},window),l=new ResizeObserver(c=>{const h=c[0],f=h.contentRect.width,m=h.contentRect.height;f===0&&m===0||o(f,m)});return l.observe(r),Kj(n,o),l}function wm(n,e,t){t&&t.disconnect(),e==="resize"&&Gj(n)}function Qj(n,e,t){const i=n.canvas,r=DS(o=>{n.ctx!==null&&t(Hj(o,n))},n);return Uj(i,e,r),r}class Xj extends QS{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(zj(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[Zh])return!1;const i=t[Zh].initial;["height","width"].forEach(o=>{const l=i[o];qe(l)?t.removeAttribute(o):t.setAttribute(o,l)});const r=i.style||{};return Object.keys(r).forEach(o=>{t.style[o]=r[o]}),t.width=t.width,delete t[Zh],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),l={attach:$j,detach:qj,resize:Yj}[t]||Qj;r[t]=l(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:wm,detach:wm,resize:wm}[t]||Wj)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return FL(e,t,i,r)}isAttached(e){const t=e&&Dy(e);return!!(t&&t.isConnected)}}function Jj(n){return!Ny()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Fj:Xj}class yi{constructor(){ge(this,"x");ge(this,"y");ge(this,"active",!1);ge(this,"options");ge(this,"$animations")}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return zc(this.x)&&zc(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const r={};return e.forEach(o=>{r[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),r}}ge(yi,"defaults",{}),ge(yi,"defaultRoutes");function Zj(n,e){const t=n.options.ticks,i=eF(n),r=Math.min(t.maxTicksLimit||i,i),o=t.major.enabled?nF(e):[],l=o.length,c=o[0],h=o[l-1],f=[];if(l>r)return iF(e,f,o,l/r),f;const m=tF(o,e,r);if(l>0){let _,y;const x=l>1?Math.round((h-c)/(l-1)):null;for(Oh(e,f,m,qe(x)?0:c-x,c),_=0,y=l-1;_<y;_++)Oh(e,f,m,o[_],o[_+1]);return Oh(e,f,m,h,qe(x)?e.length:h+x),f}return Oh(e,f,m),f}function eF(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function tF(n,e,t){const i=rF(n),r=e.length/t;if(!i)return Math.max(r,1);const o=jV(i);for(let l=0,c=o.length-1;l<c;l++){const h=o[l];if(h>r)return h}return Math.max(r,1)}function nF(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function iF(n,e,t,i){let r=0,o=t[0],l;for(i=Math.ceil(i),l=0;l<n.length;l++)l===o&&(e.push(n[l]),r++,o=t[r*i])}function Oh(n,e,t,i,r){const o=De(i,0),l=Math.min(De(r,n.length),n.length);let c=0,h,f,m;for(t=Math.ceil(t),r&&(h=r-i,t=h/Math.floor(h/t)),m=o;m<0;)c++,m=Math.round(o+c*t);for(f=Math.max(o,0);f<l;f++)f===m&&(e.push(n[f]),c++,m=Math.round(o+c*t))}function rF(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const sF=n=>n==="left"?"right":n==="right"?"left":n,Cb=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,Pb=(n,e)=>Math.min(e||n,n);function Rb(n,e){const t=[],i=n.length/e,r=n.length;let o=0;for(;o<r;o+=i)t.push(n[Math.floor(o)]);return t}function oF(n,e,t){const i=n.ticks.length,r=Math.min(e,i-1),o=n._startPixel,l=n._endPixel,c=1e-6;let h=n.getPixelForTick(r),f;if(!(t&&(i===1?f=Math.max(h-o,l-h):e===0?f=(n.getPixelForTick(1)-h)/2:f=(h-n.getPixelForTick(r-1))/2,h+=r<e?f:-f,h<o-c||h>l+c)))return h}function aF(n,e){Qe(n,t=>{const i=t.gc,r=i.length/2;let o;if(r>e){for(o=0;o<r;++o)delete t.data[i[o]];i.splice(0,r)}})}function sc(n){return n.drawTicks?n.tickLength:0}function Nb(n,e){if(!n.display)return 0;const t=nn(n.font,e),i=Yn(n.padding);return(Rt(n.text)?n.text.length:1)*t.lineHeight+i.height}function lF(n,e){return Co(n,{scale:e,type:"scale"})}function cF(n,e,t){return Co(n,{tick:t,index:e,type:"tick"})}function uF(n,e,t){let i=xy(n);return(t&&e!=="right"||!t&&e==="right")&&(i=sF(i)),i}function hF(n,e,t,i){const{top:r,left:o,bottom:l,right:c,chart:h}=n,{chartArea:f,scales:m}=h;let _=0,y,x,T;const k=l-r,I=c-o;if(n.isHorizontal()){if(x=Jt(i,o,c),Ue(t)){const N=Object.keys(t)[0],V=t[N];T=m[N].getPixelForValue(V)+k-e}else t==="center"?T=(f.bottom+f.top)/2+k-e:T=Cb(n,t,e);y=c-o}else{if(Ue(t)){const N=Object.keys(t)[0],V=t[N];x=m[N].getPixelForValue(V)-I+e}else t==="center"?x=(f.left+f.right)/2-I+e:x=Cb(n,t,e);T=Jt(i,l,r),_=t==="left"?-Nt:Nt}return{titleX:x,titleY:T,maxWidth:y,rotation:_}}class ol extends yi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=Ci(e,Number.POSITIVE_INFINITY),t=Ci(t,Number.NEGATIVE_INFINITY),i=Ci(i,Number.POSITIVE_INFINITY),r=Ci(r,Number.NEGATIVE_INFINITY),{min:Ci(e,i),max:Ci(t,r),minDefined:Gn(e),maxDefined:Gn(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:o}=this.getUserBounds(),l;if(r&&o)return{min:t,max:i};const c=this.getMatchingVisibleMetas();for(let h=0,f=c.length;h<f;++h)l=c[h].controller.getMinMax(this,e),r||(t=Math.min(t,l.min)),o||(i=Math.max(i,l.max));return t=o&&t>i?i:t,i=r&&t>i?t:i,{min:Ci(t,Ci(i,t)),max:Ci(i,Ci(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){st(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:r,grace:o,ticks:l}=this.options,c=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=yL(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=c<this.ticks.length;this._convertTicksToLabels(h?Rb(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=Zj(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){st(this.options.afterUpdate,[this])}beforeSetDimensions(){st(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){st(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),st(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){st(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,r,o;for(i=0,r=e.length;i<r;i++)o=e[i],o.label=st(t.callback,[o.value,i,e],this)}afterTickToLabelConversion(){st(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){st(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=Pb(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,o=t.maxRotation;let l=r,c,h,f;if(!this._isVisible()||!t.display||r>=o||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const m=this._getLabelSizes(),_=m.widest.width,y=m.highest.height,x=tn(this.chart.width-_,0,this.maxWidth);c=e.offset?this.maxWidth/i:x/(i-1),_+6>c&&(c=x/(i-(e.offset?.5:1)),h=this.maxHeight-sc(e.grid)-t.padding-Nb(e.title,this.chart.options.font),f=Math.sqrt(_*_+y*y),l=UV(Math.min(Math.asin(tn((m.highest.height+6)/c,-1,1)),Math.asin(tn(h/f,-1,1))-Math.asin(tn(y/f,-1,1)))),l=Math.max(r,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){st(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){st(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:o}}=this,l=this._isVisible(),c=this.isHorizontal();if(l){const h=Nb(r,t.options.font);if(c?(e.width=this.maxWidth,e.height=sc(o)+h):(e.height=this.maxHeight,e.width=sc(o)+h),i.display&&this.ticks.length){const{first:f,last:m,widest:_,highest:y}=this._getLabelSizes(),x=i.padding*2,T=_r(this.labelRotation),k=Math.cos(T),I=Math.sin(T);if(c){const N=i.mirror?0:I*_.width+k*y.height;e.height=Math.min(this.maxHeight,e.height+N+x)}else{const N=i.mirror?0:k*_.width+I*y.height;e.width=Math.min(this.maxWidth,e.width+N+x)}this._calculatePadding(f,m,I,k)}}this._handleMargins(),c?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){const{ticks:{align:o,padding:l},position:c}=this.options,h=this.labelRotation!==0,f=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,_=this.right-this.getPixelForTick(this.ticks.length-1);let y=0,x=0;h?f?(y=r*e.width,x=i*t.height):(y=i*e.height,x=r*t.width):o==="start"?x=t.width:o==="end"?y=e.width:o!=="inner"&&(y=e.width/2,x=t.width/2),this.paddingLeft=Math.max((y-m+l)*this.width/(this.width-m),0),this.paddingRight=Math.max((x-_+l)*this.width/(this.width-_),0)}else{let m=t.height/2,_=e.height/2;o==="start"?(m=0,_=e.height):o==="end"&&(m=t.height,_=0),this.paddingTop=m+l,this.paddingBottom=_+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){st(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)qe(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=Rb(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:r,_longestTextCache:o}=this,l=[],c=[],h=Math.floor(t/Pb(t,i));let f=0,m=0,_,y,x,T,k,I,N,V,z,q,K;for(_=0;_<t;_+=h){if(T=e[_].label,k=this._resolveTickFontOptions(_),r.font=I=k.string,N=o[I]=o[I]||{data:{},gc:[]},V=k.lineHeight,z=q=0,!qe(T)&&!Rt(T))z=sb(r,N.data,N.gc,z,T),q=V;else if(Rt(T))for(y=0,x=T.length;y<x;++y)K=T[y],!qe(K)&&!Rt(K)&&(z=sb(r,N.data,N.gc,z,K),q+=V);l.push(z),c.push(q),f=Math.max(z,f),m=Math.max(q,m)}aF(o,t);const J=l.indexOf(f),P=c.indexOf(m),C=R=>({width:l[R]||0,height:c[R]||0});return{first:C(0),last:C(t-1),widest:C(J),highest:C(P),widths:l,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return HV(this._alignToPixels?eo(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=cF(this.getContext(),e,i))}return this.$context||(this.$context=lF(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=_r(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),o=this._getLabelSizes(),l=e.autoSkipPadding||0,c=o?o.widest.width+l:0,h=o?o.highest.height+l:0;return this.isHorizontal()?h*i>c*r?c/i:h/r:h*r<c*i?h/i:c/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,r=this.options,{grid:o,position:l,border:c}=r,h=o.offset,f=this.isHorizontal(),_=this.ticks.length+(h?1:0),y=sc(o),x=[],T=c.setContext(this.getContext()),k=T.display?T.width:0,I=k/2,N=function(Re){return eo(i,Re,k)};let V,z,q,K,J,P,C,R,O,L,F,M;if(l==="top")V=N(this.bottom),P=this.bottom-y,R=V-I,L=N(e.top)+I,M=e.bottom;else if(l==="bottom")V=N(this.top),L=e.top,M=N(e.bottom)-I,P=V+I,R=this.top+y;else if(l==="left")V=N(this.right),J=this.right-y,C=V-I,O=N(e.left)+I,F=e.right;else if(l==="right")V=N(this.left),O=e.left,F=N(e.right)-I,J=V+I,C=this.left+y;else if(t==="x"){if(l==="center")V=N((e.top+e.bottom)/2+.5);else if(Ue(l)){const Re=Object.keys(l)[0],be=l[Re];V=N(this.chart.scales[Re].getPixelForValue(be))}L=e.top,M=e.bottom,P=V+I,R=P+y}else if(t==="y"){if(l==="center")V=N((e.left+e.right)/2);else if(Ue(l)){const Re=Object.keys(l)[0],be=l[Re];V=N(this.chart.scales[Re].getPixelForValue(be))}J=V-I,C=J-y,O=e.left,F=e.right}const Le=De(r.ticks.maxTicksLimit,_),Ie=Math.max(1,Math.ceil(_/Le));for(z=0;z<_;z+=Ie){const Re=this.getContext(z),be=o.setContext(Re),ie=c.setContext(Re),ce=be.lineWidth,oe=be.color,U=ie.dash||[],Q=ie.dashOffset,pe=be.tickWidth,xe=be.tickColor,Ae=be.tickBorderDash||[],Pe=be.tickBorderDashOffset;q=oF(this,z,h),q!==void 0&&(K=eo(i,q,ce),f?J=C=O=F=K:P=R=L=M=K,x.push({tx1:J,ty1:P,tx2:C,ty2:R,x1:O,y1:L,x2:F,y2:M,width:ce,color:oe,borderDash:U,borderDashOffset:Q,tickWidth:pe,tickColor:xe,tickBorderDash:Ae,tickBorderDashOffset:Pe}))}return this._ticksLength=_,this._borderValue=V,x}_computeLabelItems(e){const t=this.axis,i=this.options,{position:r,ticks:o}=i,l=this.isHorizontal(),c=this.ticks,{align:h,crossAlign:f,padding:m,mirror:_}=o,y=sc(i.grid),x=y+m,T=_?-m:x,k=-_r(this.labelRotation),I=[];let N,V,z,q,K,J,P,C,R,O,L,F,M="middle";if(r==="top")J=this.bottom-T,P=this._getXAxisLabelAlignment();else if(r==="bottom")J=this.top+T,P=this._getXAxisLabelAlignment();else if(r==="left"){const Ie=this._getYAxisLabelAlignment(y);P=Ie.textAlign,K=Ie.x}else if(r==="right"){const Ie=this._getYAxisLabelAlignment(y);P=Ie.textAlign,K=Ie.x}else if(t==="x"){if(r==="center")J=(e.top+e.bottom)/2+x;else if(Ue(r)){const Ie=Object.keys(r)[0],Re=r[Ie];J=this.chart.scales[Ie].getPixelForValue(Re)+x}P=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")K=(e.left+e.right)/2-x;else if(Ue(r)){const Ie=Object.keys(r)[0],Re=r[Ie];K=this.chart.scales[Ie].getPixelForValue(Re)}P=this._getYAxisLabelAlignment(y).textAlign}t==="y"&&(h==="start"?M="top":h==="end"&&(M="bottom"));const Le=this._getLabelSizes();for(N=0,V=c.length;N<V;++N){z=c[N],q=z.label;const Ie=o.setContext(this.getContext(N));C=this.getPixelForTick(N)+o.labelOffset,R=this._resolveTickFontOptions(N),O=R.lineHeight,L=Rt(q)?q.length:1;const Re=L/2,be=Ie.color,ie=Ie.textStrokeColor,ce=Ie.textStrokeWidth;let oe=P;l?(K=C,P==="inner"&&(N===V-1?oe=this.options.reverse?"left":"right":N===0?oe=this.options.reverse?"right":"left":oe="center"),r==="top"?f==="near"||k!==0?F=-L*O+O/2:f==="center"?F=-Le.highest.height/2-Re*O+O:F=-Le.highest.height+O/2:f==="near"||k!==0?F=O/2:f==="center"?F=Le.highest.height/2-Re*O:F=Le.highest.height-L*O,_&&(F*=-1),k!==0&&!Ie.showLabelBackdrop&&(K+=O/2*Math.sin(k))):(J=C,F=(1-L)*O/2);let U;if(Ie.showLabelBackdrop){const Q=Yn(Ie.backdropPadding),pe=Le.heights[N],xe=Le.widths[N];let Ae=F-Q.top,Pe=0-Q.left;switch(M){case"middle":Ae-=pe/2;break;case"bottom":Ae-=pe;break}switch(P){case"center":Pe-=xe/2;break;case"right":Pe-=xe;break;case"inner":N===V-1?Pe-=xe:N>0&&(Pe-=xe/2);break}U={left:Pe,top:Ae,width:xe+Q.width,height:pe+Q.height,color:Ie.backdropColor}}I.push({label:q,font:R,textOffset:F,options:{rotation:k,color:be,strokeColor:ie,strokeWidth:ce,textAlign:oe,textBaseline:M,translation:[K,J],backdrop:U}})}return I}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-_r(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:r,padding:o}}=this.options,l=this._getLabelSizes(),c=e+o,h=l.widest.width;let f,m;return t==="left"?r?(m=this.right+o,i==="near"?f="left":i==="center"?(f="center",m+=h/2):(f="right",m+=h)):(m=this.right-c,i==="near"?f="right":i==="center"?(f="center",m-=h/2):(f="left",m=this.left)):t==="right"?r?(m=this.left+o,i==="near"?f="right":i==="center"?(f="center",m-=h/2):(f="left",m-=h)):(m=this.left+c,i==="near"?f="left":i==="center"?(f="center",m+=h/2):(f="right",m=this.right)):f="right",{textAlign:f,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:r,width:o,height:l}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,o,l),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex(o=>o.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,l;const c=(h,f,m)=>{!m.width||!m.color||(i.save(),i.lineWidth=m.width,i.strokeStyle=m.color,i.setLineDash(m.borderDash||[]),i.lineDashOffset=m.borderDashOffset,i.beginPath(),i.moveTo(h.x,h.y),i.lineTo(f.x,f.y),i.stroke(),i.restore())};if(t.display)for(o=0,l=r.length;o<l;++o){const h=r[o];t.drawOnChartArea&&c({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),t.drawTicks&&c({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),l=i.display?o.width:0;if(!l)return;const c=r.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let f,m,_,y;this.isHorizontal()?(f=eo(e,this.left,l)-l/2,m=eo(e,this.right,c)+c/2,_=y=h):(_=eo(e,this.top,l)-l/2,y=eo(e,this.bottom,c)+c/2,f=m=h),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(f,_),t.lineTo(m,y),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Iy(i,r);const o=this.getLabelItems(e);for(const l of o){const c=l.options,h=l.font,f=l.label,m=l.textOffset;Hc(i,f,0,m,h,c)}r&&ky(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;const o=nn(i.font),l=Yn(i.padding),c=i.align;let h=o.lineHeight/2;t==="bottom"||t==="center"||Ue(t)?(h+=l.bottom,Rt(i.text)&&(h+=o.lineHeight*(i.text.length-1))):h+=l.top;const{titleX:f,titleY:m,maxWidth:_,rotation:y}=hF(this,h,t,c);Hc(e,i.text,0,0,o,{color:i.color,maxWidth:_,rotation:y,textAlign:uF(c,t,r),textBaseline:"middle",translation:[f,m]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=De(e.grid&&e.grid.z,-1),r=De(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ol.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let o,l;for(o=0,l=t.length;o<l;++o){const c=t[o];c[i]===this.id&&(!e||c.type===e)&&r.push(c)}return r}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return nn(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Vh{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;pF(t)&&(i=this.register(t));const r=this.items,o=e.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in r||(r[o]=e,dF(e,l,i),this.override&&vt.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in vt[r]&&(delete vt[r][i],this.override&&delete To[i])}}function dF(n,e,t){const i=Fc(Object.create(null),[t?vt.get(t):{},vt.get(e),n.defaults]);vt.set(e,i),n.defaultRoutes&&fF(e,n.defaultRoutes),n.descriptors&&vt.describe(e,n.descriptors)}function fF(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),r=i.pop(),o=[n].concat(i).join("."),l=e[t].split("."),c=l.pop(),h=l.join(".");vt.route(o,r,h,c)})}function pF(n){return"id"in n&&"defaults"in n}class mF{constructor(){this.controllers=new Vh(go,"datasets",!0),this.elements=new Vh(yi,"elements"),this.plugins=new Vh(Object,"plugins"),this.scales=new Vh(ol,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{const o=i||this._getRegistryForType(r);i||o.isForType(r)||o===this.plugins&&r.id?this._exec(e,o,r):Qe(r,l=>{const c=i||this._getRegistryForType(l);this._exec(e,c,l)})})}_exec(e,t,i){const r=by(e);st(i["before"+r],[],i),t[e](i),st(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Ri=new mF;class gF{constructor(){this._init=void 0}notify(e,t,i,r){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const o=r?this._descriptors(e).filter(r):this._descriptors(e),l=this._notify(o,e,t,i);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),l}_notify(e,t,i,r){r=r||{};for(const o of e){const l=o.plugin,c=l[i],h=[t,r,o.options];if(st(c,h,l)===!1&&r.cancelable)return!1}return!0}invalidate(){qe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,r=De(i.options&&i.options.plugins,{}),o=yF(i);return r===!1&&!t?[]:vF(e,o,r,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,r=(o,l)=>o.filter(c=>!l.some(h=>c.plugin.id===h.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}}function yF(n){const e={},t=[],i=Object.keys(Ri.plugins.items);for(let o=0;o<i.length;o++)t.push(Ri.getPlugin(i[o]));const r=n.plugins||[];for(let o=0;o<r.length;o++){const l=r[o];t.indexOf(l)===-1&&(t.push(l),e[l.id]=!0)}return{plugins:t,localIds:e}}function _F(n,e){return!e&&n===!1?null:n===!0?{}:n}function vF(n,{plugins:e,localIds:t},i,r){const o=[],l=n.getContext();for(const c of e){const h=c.id,f=_F(i[h],r);f!==null&&o.push({plugin:c,options:wF(n.config,{plugin:c,local:t[h]},f,l)})}return o}function wF(n,{plugin:e,local:t},i,r){const o=n.pluginScopeKeys(e),l=n.getOptionScopes(i,o);return t&&e.defaults&&l.push(e.defaults),n.createResolver(l,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ng(n,e){const t=vt.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function bF(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function EF(n,e){return n===e?"_index_":"_value_"}function Db(n){if(n==="x"||n==="y"||n==="r")return n}function xF(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function ig(n,...e){if(Db(n))return n;for(const t of e){const i=t.axis||xF(t.position)||n.length>1&&Db(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Mb(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function TF(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return Mb(n,"x",t[0])||Mb(n,"y",t[0])}return{}}function SF(n,e){const t=To[n.type]||{scales:{}},i=e.scales||{},r=ng(n.type,e),o=Object.create(null);return Object.keys(i).forEach(l=>{const c=i[l];if(!Ue(c))return console.error(`Invalid scale configuration for scale: ${l}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=ig(l,c,TF(l,n),vt.scales[c.type]),f=EF(h,r),m=t.scales||{};o[l]=xc(Object.create(null),[{axis:h},c,m[h],m[f]])}),n.data.datasets.forEach(l=>{const c=l.type||n.type,h=l.indexAxis||ng(c,e),m=(To[c]||{}).scales||{};Object.keys(m).forEach(_=>{const y=bF(_,h),x=l[y+"AxisID"]||y;o[x]=o[x]||Object.create(null),xc(o[x],[{axis:y},i[x],m[_]])})}),Object.keys(o).forEach(l=>{const c=o[l];xc(c,[vt.scales[c.type],vt.scale])}),o}function ZS(n){const e=n.options||(n.options={});e.plugins=De(e.plugins,{}),e.scales=SF(n,e)}function eI(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function IF(n){return n=n||{},n.data=eI(n.data),ZS(n),n}const Ob=new Map,tI=new Set;function Lh(n,e){let t=Ob.get(n);return t||(t=e(),Ob.set(n,t),tI.add(t)),t}const oc=(n,e,t)=>{const i=xo(e,t);i!==void 0&&n.add(i)};class kF{constructor(e){this._config=IF(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=eI(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ZS(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Lh(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Lh(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Lh(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return Lh(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){const{options:r,type:o}=this,l=this._cachedScopes(e,i),c=l.get(t);if(c)return c;const h=new Set;t.forEach(m=>{e&&(h.add(e),m.forEach(_=>oc(h,e,_))),m.forEach(_=>oc(h,r,_)),m.forEach(_=>oc(h,To[o]||{},_)),m.forEach(_=>oc(h,vt,_)),m.forEach(_=>oc(h,eg,_))});const f=Array.from(h);return f.length===0&&f.push(Object.create(null)),tI.has(t)&&l.set(t,f),f}chartOptionScopes(){const{options:e,type:t}=this;return[e,To[t]||{},vt.datasets[t]||{},{type:t},vt,eg]}resolveNamedOptions(e,t,i,r=[""]){const o={$shared:!0},{resolver:l,subPrefixes:c}=Vb(this._resolverCache,e,r);let h=l;if(CF(l,t)){o.$shared=!1,i=bs(i)?i():i;const f=this.createResolver(e,i,c);h=qa(l,i,f)}for(const f of t)o[f]=h[f];return o}createResolver(e,t,i=[""],r){const{resolver:o}=Vb(this._resolverCache,e,i);return Ue(t)?qa(o,t,void 0,r):o}}function Vb(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const r=t.join();let o=i.get(r);return o||(o={resolver:Cy(e,t),subPrefixes:t.filter(c=>!c.toLowerCase().includes("hover"))},i.set(r,o)),o}const AF=n=>Ue(n)&&Object.getOwnPropertyNames(n).some(e=>bs(n[e]));function CF(n,e){const{isScriptable:t,isIndexable:i}=LS(n);for(const r of e){const o=t(r),l=i(r),c=(l||o)&&n[r];if(o&&(bs(c)||AF(c))||l&&Rt(c))return!0}return!1}var PF="4.5.1";const RF=["top","bottom","left","right","chartArea"];function Lb(n,e){return n==="top"||n==="bottom"||RF.indexOf(n)===-1&&e==="x"}function jb(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function Fb(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),st(t&&t.onComplete,[n],e)}function NF(n){const e=n.chart,t=e.options.animation;st(t&&t.onProgress,[n],e)}function nI(n){return Ny()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const ed={},Bb=n=>{const e=nI(n);return Object.values(ed).filter(t=>t.canvas===e).pop()};function DF(n,e,t){const i=Object.keys(n);for(const r of i){const o=+r;if(o>=e){const l=n[r];delete n[r],(t>0||o>e)&&(n[o+t]=l)}}}function MF(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}var es;let mf=(es=class{static register(...e){Ri.add(...e),zb()}static unregister(...e){Ri.remove(...e),zb()}constructor(e,t){const i=this.config=new kF(t),r=nI(e),o=Bb(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Jj(r)),this.platform.updateConfig(i);const c=this.platform.acquireContext(r,l.aspectRatio),h=c&&c.canvas,f=h&&h.height,m=h&&h.width;if(this.id=CV(),this.ctx=c,this.canvas=h,this.width=m,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new gF,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=GV(_=>this.update(_),l.resizeDelay||0),this._dataChanges=[],ed[this.id]=this,!c||!h){console.error("Failed to create chart: can't acquire context from the given item");return}hr.listen(this,"complete",Fb),hr.listen(this,"progress",NF),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:r,_aspectRatio:o}=this;return qe(e)?t&&o?o:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ri}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():cb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ob(this.canvas,this.ctx),this}stop(){return hr.stop(this),this}resize(e,t){hr.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,r=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(r,e,t,o),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,cb(this,c,!0)&&(this.notifyPlugins("resize",{size:l}),st(i.onResize,[this,l],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Qe(t,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,r=Object.keys(i).reduce((l,c)=>(l[c]=!1,l),{});let o=[];t&&(o=o.concat(Object.keys(t).map(l=>{const c=t[l],h=ig(l,c),f=h==="r",m=h==="x";return{options:c,dposition:f?"chartArea":m?"bottom":"left",dtype:f?"radialLinear":m?"category":"linear"}}))),Qe(o,l=>{const c=l.options,h=c.id,f=ig(h,c),m=De(c.type,l.dtype);(c.position===void 0||Lb(c.position,f)!==Lb(l.dposition))&&(c.position=l.dposition),r[h]=!0;let _=null;if(h in i&&i[h].type===m)_=i[h];else{const y=Ri.getScale(m);_=new y({id:h,type:m,ctx:this.ctx,chart:this}),i[_.id]=_}_.init(c,e)}),Qe(r,(l,c)=>{l||delete i[c]}),Qe(i,l=>{$n.configure(this,l,l.options),$n.addBox(this,l)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((r,o)=>r.index-o.index),i>t){for(let r=t;r<i;++r)this._destroyDatasetMeta(r);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(jb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,r)=>{t.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=t.length;i<r;i++){const o=t[i];let l=this.getDatasetMeta(i);const c=o.type||this.config.type;if(l.type&&l.type!==c&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=c,l.indexAxis=o.indexAxis||ng(c,this.options),l.order=o.order||0,l.index=i,l.label=""+o.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const h=Ri.getController(c),{datasetElementType:f,dataElementType:m}=vt.datasets[c];Object.assign(h,{dataElementType:Ri.getElement(m),datasetElementType:f&&Ri.getElement(f)}),l.controller=new h(this,i),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){Qe(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,m=this.data.datasets.length;f<m;f++){const{controller:_}=this.getDatasetMeta(f),y=!r&&o.indexOf(_)===-1;_.buildOrUpdateElements(y),l=Math.max(+_.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),r||Qe(o,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(jb("z","_idx"));const{_active:c,_lastEvent:h}=this;h?this._eventHandler(h,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Qe(this.scales,e=>{$n.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Qw(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:o}of t){const l=i==="_removeElements"?-o:o;DF(e,r,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=o=>new Set(e.filter(l=>l[0]===o).map((l,c)=>c+","+l.splice(1).join(","))),r=i(0);for(let o=1;o<t;o++)if(!Qw(r,i(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;$n.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],Qe(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,bs(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(hr.has(this)?this.attached&&!hr.running(this)&&hr.start(this):(this.draw(),Fb({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let r,o;for(r=0,o=t.length;r<o;++r){const l=t[r];(!e||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=ej(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Iy(t,r),e.controller.draw(),r&&ky(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Wc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,r){const o=Rj.modes[t];return typeof o=="function"?o(this,e,i,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let r=i.filter(o=>o&&o._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Co(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const r=i?"show":"hide",o=this.getDatasetMeta(e),l=o.controller._resolveAnimations(void 0,r);Bc(t)?(o.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),l.update(o,{visible:i}),this.update(c=>c.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),hr.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ob(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete ed[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(o,l)=>{t.addEventListener(this,o,l),e[o]=l},r=(o,l,c)=>{o.offsetX=l,o.offsetY=c,this._eventHandler(o)};Qe(this.options.events,o=>i(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(h,f)=>{t.addEventListener(this,h,f),e[h]=f},r=(h,f)=>{e[h]&&(t.removeEventListener(this,h,f),delete e[h])},o=(h,f)=>{this.canvas&&this.resize(h,f)};let l;const c=()=>{r("attach",c),this.attached=!0,this.resize(),i("resize",o),i("detach",l)};l=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),i("attach",c)},t.isAttached(this.canvas)?c():l()}unbindEvents(){Qe(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Qe(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const r=i?"set":"remove";let o,l,c,h;for(t==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),c=0,h=e.length;c<h;++c){l=e[c];const f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[r+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:o,index:l})=>{const c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[l],index:l}});!Ad(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const r=this.options.hover,o=(h,f)=>h.filter(m=>!f.some(_=>m.datasetIndex===_.datasetIndex&&m.index===_.index)),l=o(t,e),c=i?e:o(e,t);l.length&&this.updateHoverStyle(l,r.mode,!1),c.length&&r.mode&&this.updateHoverStyle(c,r.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const o=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(o||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:r=[],options:o}=this,l=t,c=this._getActiveElements(e,r,i,l),h=OV(e),f=MF(e,this._lastEvent,i,h);i&&(this._lastEvent=null,st(o.onHover,[e,c,this],this),h&&st(o.onClick,[e,c,this],this));const m=!Ad(c,r);return(m||t)&&(this._active=c,this._updateHoverStyles(c,r,t)),this._lastEvent=f,m}_getActiveElements(e,t,i,r){if(e.type==="mouseout")return[];if(!i)return t;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,r)}},ge(es,"defaults",vt),ge(es,"instances",ed),ge(es,"overrides",To),ge(es,"registry",Ri),ge(es,"version",PF),ge(es,"getChart",Bb),es);function zb(){return Qe(mf.instances,n=>n._plugins.invalidate())}function OF(n,e,t){const{startAngle:i,x:r,y:o,outerRadius:l,innerRadius:c,options:h}=e,{borderWidth:f,borderJoinStyle:m}=h,_=Math.min(f/l,hi(i-t));if(n.beginPath(),n.arc(r,o,l-f/2,i+_/2,t-_/2),c>0){const y=Math.min(f/c,hi(i-t));n.arc(r,o,c+f/2,t-y/2,i+y/2,!0)}else{const y=Math.min(f/2,l*hi(i-t));if(m==="round")n.arc(r,o,y,t-Xe/2,i+Xe/2,!0);else if(m==="bevel"){const x=2*y*y,T=-x*Math.cos(t+Xe/2)+r,k=-x*Math.sin(t+Xe/2)+o,I=x*Math.cos(i+Xe/2)+r,N=x*Math.sin(i+Xe/2)+o;n.lineTo(T,k),n.lineTo(I,N)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function VF(n,e,t){const{startAngle:i,pixelMargin:r,x:o,y:l,outerRadius:c,innerRadius:h}=e;let f=r/c;n.beginPath(),n.arc(o,l,c,i-f,t+f),h>r?(f=r/h,n.arc(o,l,h,t+f,i-f,!0)):n.arc(o,l,r,t+Nt,i-Nt),n.closePath(),n.clip()}function LF(n){return Ay(n,["outerStart","outerEnd","innerStart","innerEnd"])}function jF(n,e,t,i){const r=LF(n.options.borderRadius),o=(t-e)/2,l=Math.min(o,i*e/2),c=h=>{const f=(t-Math.min(o,h))*i/2;return tn(h,0,Math.min(o,f))};return{outerStart:c(r.outerStart),outerEnd:c(r.outerEnd),innerStart:tn(r.innerStart,0,l),innerEnd:tn(r.innerEnd,0,l)}}function Ta(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function Md(n,e,t,i,r,o){const{x:l,y:c,startAngle:h,pixelMargin:f,innerRadius:m}=e,_=Math.max(e.outerRadius+i+t-f,0),y=m>0?m+i+t+f:0;let x=0;const T=r-h;if(i){const Ie=m>0?m-i:0,Re=_>0?_-i:0,be=(Ie+Re)/2,ie=be!==0?T*be/(be+i):T;x=(T-ie)/2}const k=Math.max(.001,T*_-t/Xe)/_,I=(T-k)/2,N=h+I+x,V=r-I-x,{outerStart:z,outerEnd:q,innerStart:K,innerEnd:J}=jF(e,y,_,V-N),P=_-z,C=_-q,R=N+z/P,O=V-q/C,L=y+K,F=y+J,M=N+K/L,Le=V-J/F;if(n.beginPath(),o){const Ie=(R+O)/2;if(n.arc(l,c,_,R,Ie),n.arc(l,c,_,Ie,O),q>0){const ce=Ta(C,O,l,c);n.arc(ce.x,ce.y,q,O,V+Nt)}const Re=Ta(F,V,l,c);if(n.lineTo(Re.x,Re.y),J>0){const ce=Ta(F,Le,l,c);n.arc(ce.x,ce.y,J,V+Nt,Le+Math.PI)}const be=(V-J/y+(N+K/y))/2;if(n.arc(l,c,y,V-J/y,be,!0),n.arc(l,c,y,be,N+K/y,!0),K>0){const ce=Ta(L,M,l,c);n.arc(ce.x,ce.y,K,M+Math.PI,N-Nt)}const ie=Ta(P,N,l,c);if(n.lineTo(ie.x,ie.y),z>0){const ce=Ta(P,R,l,c);n.arc(ce.x,ce.y,z,N-Nt,R)}}else{n.moveTo(l,c);const Ie=Math.cos(R)*_+l,Re=Math.sin(R)*_+c;n.lineTo(Ie,Re);const be=Math.cos(O)*_+l,ie=Math.sin(O)*_+c;n.lineTo(be,ie)}n.closePath()}function FF(n,e,t,i,r){const{fullCircles:o,startAngle:l,circumference:c}=e;let h=e.endAngle;if(o){Md(n,e,t,i,h,r);for(let f=0;f<o;++f)n.fill();isNaN(c)||(h=l+(c%mt||mt))}return Md(n,e,t,i,h,r),n.fill(),h}function BF(n,e,t,i,r){const{fullCircles:o,startAngle:l,circumference:c,options:h}=e,{borderWidth:f,borderJoinStyle:m,borderDash:_,borderDashOffset:y,borderRadius:x}=h,T=h.borderAlign==="inner";if(!f)return;n.setLineDash(_||[]),n.lineDashOffset=y,T?(n.lineWidth=f*2,n.lineJoin=m||"round"):(n.lineWidth=f,n.lineJoin=m||"bevel");let k=e.endAngle;if(o){Md(n,e,t,i,k,r);for(let I=0;I<o;++I)n.stroke();isNaN(c)||(k=l+(c%mt||mt))}T&&VF(n,e,k),h.selfJoin&&k-l>=Xe&&x===0&&m!=="miter"&&OF(n,e,k),o||(Md(n,e,t,i,k,r),n.stroke())}class pc extends yi{constructor(t){super();ge(this,"circumference");ge(this,"endAngle");ge(this,"fullCircles");ge(this,"innerRadius");ge(this,"outerRadius");ge(this,"pixelMargin");ge(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,r){const o=this.getProps(["x","y"],r),{angle:l,distance:c}=CS(o,{x:t,y:i}),{startAngle:h,endAngle:f,innerRadius:m,outerRadius:_,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),x=(this.options.spacing+this.options.borderWidth)/2,T=De(y,f-h),k=Uc(l,h,f)&&h!==f,I=T>=mt||k,N=os(c,m+x,_+x);return I&&N}getCenterPoint(t){const{x:i,y:r,startAngle:o,endAngle:l,innerRadius:c,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:f,spacing:m}=this.options,_=(o+l)/2,y=(c+h+m+f)/2;return{x:i+Math.cos(_)*y,y:r+Math.sin(_)*y}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:i,circumference:r}=this,o=(i.offset||0)/4,l=(i.spacing||0)/2,c=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>mt?Math.floor(r/mt):0,r===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const h=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(h)*o,Math.sin(h)*o);const f=1-Math.sin(Math.min(Xe,r||0)),m=o*f;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,FF(t,this,m,l,c),BF(t,this,m,l,c),t.restore()}}ge(pc,"id","arc"),ge(pc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ge(pc,"defaultRoutes",{backgroundColor:"backgroundColor"}),ge(pc,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function iI(n,e,t=e){n.lineCap=De(t.borderCapStyle,e.borderCapStyle),n.setLineDash(De(t.borderDash,e.borderDash)),n.lineDashOffset=De(t.borderDashOffset,e.borderDashOffset),n.lineJoin=De(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=De(t.borderWidth,e.borderWidth),n.strokeStyle=De(t.borderColor,e.borderColor)}function zF(n,e,t){n.lineTo(t.x,t.y)}function UF(n){return n.stepped?lL:n.tension||n.cubicInterpolationMode==="monotone"?cL:zF}function rI(n,e,t={}){const i=n.length,{start:r=0,end:o=i-1}=t,{start:l,end:c}=e,h=Math.max(r,l),f=Math.min(o,c),m=r<l&&o<l||r>c&&o>c;return{count:i,start:h,loop:e.loop,ilen:f<h&&!m?i+f-h:f-h}}function WF(n,e,t,i){const{points:r,options:o}=e,{count:l,start:c,loop:h,ilen:f}=rI(r,t,i),m=UF(o);let{move:_=!0,reverse:y}=i||{},x,T,k;for(x=0;x<=f;++x)T=r[(c+(y?f-x:x))%l],!T.skip&&(_?(n.moveTo(T.x,T.y),_=!1):m(n,k,T,y,o.stepped),k=T);return h&&(T=r[(c+(y?f:0))%l],m(n,k,T,y,o.stepped)),!!h}function HF(n,e,t,i){const r=e.points,{count:o,start:l,ilen:c}=rI(r,t,i),{move:h=!0,reverse:f}=i||{};let m=0,_=0,y,x,T,k,I,N;const V=q=>(l+(f?c-q:q))%o,z=()=>{k!==I&&(n.lineTo(m,I),n.lineTo(m,k),n.lineTo(m,N))};for(h&&(x=r[V(0)],n.moveTo(x.x,x.y)),y=0;y<=c;++y){if(x=r[V(y)],x.skip)continue;const q=x.x,K=x.y,J=q|0;J===T?(K<k?k=K:K>I&&(I=K),m=(_*m+q)/++_):(z(),n.lineTo(q,K),T=J,_=0,k=I=K),N=K}z()}function rg(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?HF:WF}function $F(n){return n.stepped?zL:n.tension||n.cubicInterpolationMode==="monotone"?UL:so}function qF(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),iI(n,e.options),n.stroke(r)}function KF(n,e,t,i){const{segments:r,options:o}=e,l=rg(e);for(const c of r)iI(n,o,c.style),n.beginPath(),l(n,e,c,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const GF=typeof Path2D=="function";function YF(n,e,t,i){GF&&!e.options.segment?qF(n,e,t,i):KF(n,e,t,i)}class mc extends yi{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;DL(this._points,i,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=QL(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,r=e[t],o=this.points,l=KL(this,{property:t,start:r,end:r});if(!l.length)return;const c=[],h=$F(i);let f,m;for(f=0,m=l.length;f<m;++f){const{start:_,end:y}=l[f],x=o[_],T=o[y];if(x===T){c.push(x);continue}const k=Math.abs((r-x[t])/(T[t]-x[t])),I=h(x,T,k,i.stepped);I[t]=e[t],c.push(I)}return c.length===1?c[0]:c}pathSegment(e,t,i){return rg(this)(e,this,t,i)}path(e,t,i){const r=this.segments,o=rg(this);let l=this._loop;t=t||0,i=i||this.points.length-t;for(const c of r)l&=o(e,this,c,{start:t,end:t+i-1});return!!l}draw(e,t,i,r){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),YF(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ge(mc,"id","line"),ge(mc,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ge(mc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ge(mc,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Ub(n,e,t,i){const r=n.options,{[t]:o}=n.getProps([t],i);return Math.abs(e-o)<r.radius+r.hitRadius}class td extends yi{constructor(t){super();ge(this,"parsed");ge(this,"skip");ge(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,r){const o=this.options,{x:l,y:c}=this.getProps(["x","y"],r);return Math.pow(t-l,2)+Math.pow(i-c,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,i){return Ub(this,t,"x",i)}inYRange(t,i){return Ub(this,t,"y",i)}getCenterPoint(t){const{x:i,y:r}=this.getProps(["x","y"],t);return{x:i,y:r}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const r=i&&t.borderWidth||0;return(i+r)*2}draw(t,i){const r=this.options;this.skip||r.radius<.1||!Wc(this,i,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,tg(t,r,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}ge(td,"id","point"),ge(td,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ge(td,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function sI(n,e){const{x:t,y:i,base:r,width:o,height:l}=n.getProps(["x","y","base","width","height"],e);let c,h,f,m,_;return n.horizontal?(_=l/2,c=Math.min(t,r),h=Math.max(t,r),f=i-_,m=i+_):(_=o/2,c=t-_,h=t+_,f=Math.min(i,r),m=Math.max(i,r)),{left:c,top:f,right:h,bottom:m}}function ls(n,e,t,i){return n?0:tn(e,t,i)}function QF(n,e,t){const i=n.options.borderWidth,r=n.borderSkipped,o=VS(i);return{t:ls(r.top,o.top,0,t),r:ls(r.right,o.right,0,e),b:ls(r.bottom,o.bottom,0,t),l:ls(r.left,o.left,0,e)}}function XF(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,o=Oa(r),l=Math.min(e,t),c=n.borderSkipped,h=i||Ue(r);return{topLeft:ls(!h||c.top||c.left,o.topLeft,0,l),topRight:ls(!h||c.top||c.right,o.topRight,0,l),bottomLeft:ls(!h||c.bottom||c.left,o.bottomLeft,0,l),bottomRight:ls(!h||c.bottom||c.right,o.bottomRight,0,l)}}function JF(n){const e=sI(n),t=e.right-e.left,i=e.bottom-e.top,r=QF(n,t/2,i/2),o=XF(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:o},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function bm(n,e,t,i){const r=e===null,o=t===null,c=n&&!(r&&o)&&sI(n,i);return c&&(r||os(e,c.left,c.right))&&(o||os(t,c.top,c.bottom))}function ZF(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function e4(n,e){n.rect(e.x,e.y,e.w,e.h)}function Em(n,e,t={}){const i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,o=(n.x+n.w!==t.x+t.w?e:0)-i,l=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+o,h:n.h+l,radius:n.radius}}class nd extends yi{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:o,outer:l}=JF(this),c=ZF(l.radius)?Rd:e4;e.save(),(l.w!==o.w||l.h!==o.h)&&(e.beginPath(),c(e,Em(l,t,o)),e.clip(),c(e,Em(o,-t,l)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),c(e,Em(o,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return bm(this,e,t,i)}inXRange(e,t){return bm(this,e,null,t)}inYRange(e,t){return bm(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+r)/2:t,y:o?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ge(nd,"id","bar"),ge(nd,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ge(nd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Wb=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},t4=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class Hb extends yi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=st(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=nn(i.font),o=r.size,l=this._computeTitleHeight(),{boxWidth:c,itemHeight:h}=Wb(i,o);let f,m;t.font=r.string,this.isHorizontal()?(f=this.maxWidth,m=this._fitRows(l,o,c,h)+10):(m=this.maxHeight,f=this._fitCols(l,r,c,h)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(m,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){const{ctx:o,maxWidth:l,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],f=this.lineWidths=[0],m=r+c;let _=e;o.textAlign="left",o.textBaseline="middle";let y=-1,x=-m;return this.legendItems.forEach((T,k)=>{const I=i+t/2+o.measureText(T.text).width;(k===0||f[f.length-1]+I+2*c>l)&&(_+=m,f[f.length-(k>0?0:1)]=0,x+=m,y++),h[k]={left:0,top:x,row:y,width:I,height:r},f[f.length-1]+=I+c}),_}_fitCols(e,t,i,r){const{ctx:o,maxHeight:l,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],f=this.columnSizes=[],m=l-e;let _=c,y=0,x=0,T=0,k=0;return this.legendItems.forEach((I,N)=>{const{itemWidth:V,itemHeight:z}=n4(i,t,o,I,r);N>0&&x+z+2*c>m&&(_+=y+c,f.push({width:y,height:x}),T+=y+c,k++,y=x=0),h[N]={left:T,top:x,col:k,width:V,height:z},y=Math.max(y,V),x+=z+c}),_+=y,f.push({width:y,height:x}),_}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:o}}=this,l=Va(o,this.left,this.width);if(this.isHorizontal()){let c=0,h=Jt(i,this.left+r,this.right-this.lineWidths[c]);for(const f of t)c!==f.row&&(c=f.row,h=Jt(i,this.left+r,this.right-this.lineWidths[c])),f.top+=this.top+e+r,f.left=l.leftForLtr(l.x(h),f.width),h+=f.width+r}else{let c=0,h=Jt(i,this.top+e+r,this.bottom-this.columnSizes[c].height);for(const f of t)f.col!==c&&(c=f.col,h=Jt(i,this.top+e+r,this.bottom-this.columnSizes[c].height)),f.top=h,f.left+=this.left+r,f.left=l.leftForLtr(l.x(f.left),f.width),h+=f.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Iy(e,this),this._draw(),ky(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:o,labels:l}=e,c=vt.color,h=Va(e.rtl,this.left,this.width),f=nn(l.font),{padding:m}=l,_=f.size,y=_/2;let x;this.drawTitle(),r.textAlign=h.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=f.string;const{boxWidth:T,boxHeight:k,itemHeight:I}=Wb(l,_),N=function(J,P,C){if(isNaN(T)||T<=0||isNaN(k)||k<0)return;r.save();const R=De(C.lineWidth,1);if(r.fillStyle=De(C.fillStyle,c),r.lineCap=De(C.lineCap,"butt"),r.lineDashOffset=De(C.lineDashOffset,0),r.lineJoin=De(C.lineJoin,"miter"),r.lineWidth=R,r.strokeStyle=De(C.strokeStyle,c),r.setLineDash(De(C.lineDash,[])),l.usePointStyle){const O={radius:k*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:R},L=h.xPlus(J,T/2),F=P+y;OS(r,O,L,F,l.pointStyleWidth&&T)}else{const O=P+Math.max((_-k)/2,0),L=h.leftForLtr(J,T),F=Oa(C.borderRadius);r.beginPath(),Object.values(F).some(M=>M!==0)?Rd(r,{x:L,y:O,w:T,h:k,radius:F}):r.rect(L,O,T,k),r.fill(),R!==0&&r.stroke()}r.restore()},V=function(J,P,C){Hc(r,C.text,J,P+I/2,f,{strikethrough:C.hidden,textAlign:h.textAlign(C.textAlign)})},z=this.isHorizontal(),q=this._computeTitleHeight();z?x={x:Jt(o,this.left+m,this.right-i[0]),y:this.top+m+q,line:0}:x={x:this.left+m,y:Jt(o,this.top+q+m,this.bottom-t[0].height),line:0},US(this.ctx,e.textDirection);const K=I+m;this.legendItems.forEach((J,P)=>{r.strokeStyle=J.fontColor,r.fillStyle=J.fontColor;const C=r.measureText(J.text).width,R=h.textAlign(J.textAlign||(J.textAlign=l.textAlign)),O=T+y+C;let L=x.x,F=x.y;h.setWidth(this.width),z?P>0&&L+O+m>this.right&&(F=x.y+=K,x.line++,L=x.x=Jt(o,this.left+m,this.right-i[x.line])):P>0&&F+K>this.bottom&&(L=x.x=L+t[x.line].width+m,x.line++,F=x.y=Jt(o,this.top+q+m,this.bottom-t[x.line].height));const M=h.x(L);if(N(M,F,J),L=YV(R,L+T+y,z?L+O:this.right,e.rtl),V(h.x(L),F,J),z)x.x+=O+m;else if(typeof J.text!="string"){const Le=f.lineHeight;x.y+=oI(J,Le)+m}else x.y+=K}),WS(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=nn(t.font),r=Yn(t.padding);if(!t.display)return;const o=Va(e.rtl,this.left,this.width),l=this.ctx,c=t.position,h=i.size/2,f=r.top+h;let m,_=this.left,y=this.width;if(this.isHorizontal())y=Math.max(...this.lineWidths),m=this.top+f,_=Jt(e.align,_,this.right-y);else{const T=this.columnSizes.reduce((k,I)=>Math.max(k,I.height),0);m=f+Jt(e.align,this.top,this.bottom-T-e.labels.padding-this._computeTitleHeight())}const x=Jt(c,_,_+y);l.textAlign=o.textAlign(xy(c)),l.textBaseline="middle",l.strokeStyle=t.color,l.fillStyle=t.color,l.font=i.string,Hc(l,t.text,x,m,i)}_computeTitleHeight(){const e=this.options.title,t=nn(e.font),i=Yn(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,o;if(os(e,this.left,this.right)&&os(t,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],os(e,r.left,r.left+r.width)&&os(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!s4(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,o=t4(r,i);r&&!o&&st(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!o&&st(t.onHover,[e,i,this],this)}else i&&st(t.onClick,[e,i,this],this)}}function n4(n,e,t,i,r){const o=i4(i,n,e,t),l=r4(r,i,e.lineHeight);return{itemWidth:o,itemHeight:l}}function i4(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((o,l)=>o.length>l.length?o:l)),e+t.size/2+i.measureText(r).width}function r4(n,e,t){let i=n;return typeof e.text!="string"&&(i=oI(e,t)),i}function oI(n,e){const t=n.text?n.text.length:0;return e*t}function s4(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var o4={id:"legend",_element:Hb,start(n,e,t){const i=n.legend=new Hb({ctx:n.ctx,options:t,chart:n});$n.configure(n,i,t),$n.addBox(n,i)},stop(n){$n.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;$n.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:o,useBorderRadius:l,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const f=h.controller.getStyle(t?0:void 0),m=Yn(f.borderWidth);return{text:e[h.index].label,fillStyle:f.backgroundColor,fontColor:o,hidden:!h.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:f.borderColor,pointStyle:i||f.pointStyle,rotation:f.rotation,textAlign:r||f.textAlign,borderRadius:l&&(c||f.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class aI extends yi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const r=Rt(i.text)?i.text.length:1;this._padding=Yn(i.padding);const o=r*nn(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:r,right:o,options:l}=this,c=l.align;let h=0,f,m,_;return this.isHorizontal()?(m=Jt(c,i,o),_=t+e,f=o-i):(l.position==="left"?(m=i+e,_=Jt(c,r,t),h=Xe*-.5):(m=o-e,_=Jt(c,t,r),h=Xe*.5),f=r-t),{titleX:m,titleY:_,maxWidth:f,rotation:h}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=nn(t.font),o=i.lineHeight/2+this._padding.top,{titleX:l,titleY:c,maxWidth:h,rotation:f}=this._drawArgs(o);Hc(e,t.text,0,0,i,{color:t.color,maxWidth:h,rotation:f,textAlign:xy(t.align),textBaseline:"middle",translation:[l,c]})}}function a4(n,e){const t=new aI({ctx:n.ctx,options:e,chart:n});$n.configure(n,t,e),$n.addBox(n,t),n.titleBlock=t}var l4={id:"title",_element:aI,start(n,e,t){a4(n,t)},stop(n){const e=n.titleBlock;$n.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;$n.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const gc={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,o=0;for(e=0,t=n.length;e<t;++e){const c=n[e].element;if(c&&c.hasValue()){const h=c.tooltipPosition();i.add(h.x),r+=h.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((c,h)=>c+h)/i.size,y:r/o}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,o,l,c;for(o=0,l=n.length;o<l;++o){const h=n[o].element;if(h&&h.hasValue()){const f=h.getCenterPoint(),m=Zm(e,f);m<r&&(r=m,c=h)}}if(c){const h=c.tooltipPosition();t=h.x,i=h.y}return{x:t,y:i}}};function Pi(n,e){return e&&(Rt(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function dr(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function c4(n,e){const{element:t,datasetIndex:i,index:r}=e,o=n.getDatasetMeta(i).controller,{label:l,value:c}=o.getLabelAndValue(r);return{chart:n,label:l,parsed:o.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:c,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function $b(n,e){const t=n.chart.ctx,{body:i,footer:r,title:o}=n,{boxWidth:l,boxHeight:c}=e,h=nn(e.bodyFont),f=nn(e.titleFont),m=nn(e.footerFont),_=o.length,y=r.length,x=i.length,T=Yn(e.padding);let k=T.height,I=0,N=i.reduce((q,K)=>q+K.before.length+K.lines.length+K.after.length,0);if(N+=n.beforeBody.length+n.afterBody.length,_&&(k+=_*f.lineHeight+(_-1)*e.titleSpacing+e.titleMarginBottom),N){const q=e.displayColors?Math.max(c,h.lineHeight):h.lineHeight;k+=x*q+(N-x)*h.lineHeight+(N-1)*e.bodySpacing}y&&(k+=e.footerMarginTop+y*m.lineHeight+(y-1)*e.footerSpacing);let V=0;const z=function(q){I=Math.max(I,t.measureText(q).width+V)};return t.save(),t.font=f.string,Qe(n.title,z),t.font=h.string,Qe(n.beforeBody.concat(n.afterBody),z),V=e.displayColors?l+2+e.boxPadding:0,Qe(i,q=>{Qe(q.before,z),Qe(q.lines,z),Qe(q.after,z)}),V=0,t.font=m.string,Qe(n.footer,z),t.restore(),I+=T.width,{width:I,height:k}}function u4(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function h4(n,e,t,i){const{x:r,width:o}=i,l=t.caretSize+t.caretPadding;if(n==="left"&&r+o+l>e.width||n==="right"&&r-o-l<0)return!0}function d4(n,e,t,i){const{x:r,width:o}=t,{width:l,chartArea:{left:c,right:h}}=n;let f="center";return i==="center"?f=r<=(c+h)/2?"left":"right":r<=o/2?f="left":r>=l-o/2&&(f="right"),h4(f,n,e,t)&&(f="center"),f}function qb(n,e,t){const i=t.yAlign||e.yAlign||u4(n,t);return{xAlign:t.xAlign||e.xAlign||d4(n,e,t,i),yAlign:i}}function f4(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function p4(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function Kb(n,e,t,i){const{caretSize:r,caretPadding:o,cornerRadius:l}=n,{xAlign:c,yAlign:h}=t,f=r+o,{topLeft:m,topRight:_,bottomLeft:y,bottomRight:x}=Oa(l);let T=f4(e,c);const k=p4(e,h,f);return h==="center"?c==="left"?T+=f:c==="right"&&(T-=f):c==="left"?T-=Math.max(m,y)+r:c==="right"&&(T+=Math.max(_,x)+r),{x:tn(T,0,i.width-e.width),y:tn(k,0,i.height-e.height)}}function jh(n,e,t){const i=Yn(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function Gb(n){return Pi([],dr(n))}function m4(n,e,t){return Co(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function Yb(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const lI={beforeTitle:ur,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:ur,beforeBody:ur,beforeLabel:ur,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return qe(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:ur,afterBody:ur,beforeFooter:ur,footer:ur,afterFooter:ur};function vn(n,e,t,i){const r=n[e].call(t,i);return typeof r>"u"?lI[e].call(t,i):r}class sg extends yi{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&t.options.animation&&i.animations,o=new $S(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=m4(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,r=vn(i,"beforeTitle",this,e),o=vn(i,"title",this,e),l=vn(i,"afterTitle",this,e);let c=[];return c=Pi(c,dr(r)),c=Pi(c,dr(o)),c=Pi(c,dr(l)),c}getBeforeBody(e,t){return Gb(vn(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,r=[];return Qe(e,o=>{const l={before:[],lines:[],after:[]},c=Yb(i,o);Pi(l.before,dr(vn(c,"beforeLabel",this,o))),Pi(l.lines,vn(c,"label",this,o)),Pi(l.after,dr(vn(c,"afterLabel",this,o))),r.push(l)}),r}getAfterBody(e,t){return Gb(vn(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,r=vn(i,"beforeFooter",this,e),o=vn(i,"footer",this,e),l=vn(i,"afterFooter",this,e);let c=[];return c=Pi(c,dr(r)),c=Pi(c,dr(o)),c=Pi(c,dr(l)),c}_createItems(e){const t=this._active,i=this.chart.data,r=[],o=[],l=[];let c=[],h,f;for(h=0,f=t.length;h<f;++h)c.push(c4(this.chart,t[h]));return e.filter&&(c=c.filter((m,_,y)=>e.filter(m,_,y,i))),e.itemSort&&(c=c.sort((m,_)=>e.itemSort(m,_,i))),Qe(c,m=>{const _=Yb(e.callbacks,m);r.push(vn(_,"labelColor",this,m)),o.push(vn(_,"labelPointStyle",this,m)),l.push(vn(_,"labelTextColor",this,m))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=c,c}update(e,t){const i=this.options.setContext(this.getContext()),r=this._active;let o,l=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const c=gc[i.position].call(this,r,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const h=this._size=$b(this,i),f=Object.assign({},c,h),m=qb(this.chart,i,f),_=Kb(i,f,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,o={opacity:1,x:_.x,y:_.y,width:h.width,height:h.height,caretX:c.x,caretY:c.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,r){const o=this.getCaretPosition(e,i,r);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,i){const{xAlign:r,yAlign:o}=this,{caretSize:l,cornerRadius:c}=i,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:_}=Oa(c),{x:y,y:x}=e,{width:T,height:k}=t;let I,N,V,z,q,K;return o==="center"?(q=x+k/2,r==="left"?(I=y,N=I-l,z=q+l,K=q-l):(I=y+T,N=I+l,z=q-l,K=q+l),V=I):(r==="left"?N=y+Math.max(h,m)+l:r==="right"?N=y+T-Math.max(f,_)-l:N=this.caretX,o==="top"?(z=x,q=z-l,I=N-l,V=N+l):(z=x+k,q=z+l,I=N+l,V=N-l),K=z),{x1:I,x2:N,x3:V,y1:z,y2:q,y3:K}}drawTitle(e,t,i){const r=this.title,o=r.length;let l,c,h;if(o){const f=Va(i.rtl,this.x,this.width);for(e.x=jh(this,i.titleAlign,i),t.textAlign=f.textAlign(i.titleAlign),t.textBaseline="middle",l=nn(i.titleFont),c=i.titleSpacing,t.fillStyle=i.titleColor,t.font=l.string,h=0;h<o;++h)t.fillText(r[h],f.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+c,h+1===o&&(e.y+=i.titleMarginBottom-c)}}_drawColorBox(e,t,i,r,o){const l=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:h,boxWidth:f}=o,m=nn(o.bodyFont),_=jh(this,"left",o),y=r.x(_),x=h<m.lineHeight?(m.lineHeight-h)/2:0,T=t.y+x;if(o.usePointStyle){const k={radius:Math.min(f,h)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},I=r.leftForLtr(y,f)+f/2,N=T+h/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,tg(e,k,I,N),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,tg(e,k,I,N)}else{e.lineWidth=Ue(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const k=r.leftForLtr(y,f),I=r.leftForLtr(r.xPlus(y,1),f-2),N=Oa(l.borderRadius);Object.values(N).some(V=>V!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Rd(e,{x:k,y:T,w:f,h,radius:N}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),Rd(e,{x:I,y:T+1,w:f-2,h:h-2,radius:N}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(k,T,f,h),e.strokeRect(k,T,f,h),e.fillStyle=l.backgroundColor,e.fillRect(I,T+1,f-2,h-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:r}=this,{bodySpacing:o,bodyAlign:l,displayColors:c,boxHeight:h,boxWidth:f,boxPadding:m}=i,_=nn(i.bodyFont);let y=_.lineHeight,x=0;const T=Va(i.rtl,this.x,this.width),k=function(C){t.fillText(C,T.x(e.x+x),e.y+y/2),e.y+=y+o},I=T.textAlign(l);let N,V,z,q,K,J,P;for(t.textAlign=l,t.textBaseline="middle",t.font=_.string,e.x=jh(this,I,i),t.fillStyle=i.bodyColor,Qe(this.beforeBody,k),x=c&&I!=="right"?l==="center"?f/2+m:f+2+m:0,q=0,J=r.length;q<J;++q){for(N=r[q],V=this.labelTextColors[q],t.fillStyle=V,Qe(N.before,k),z=N.lines,c&&z.length&&(this._drawColorBox(t,e,q,T,i),y=Math.max(_.lineHeight,h)),K=0,P=z.length;K<P;++K)k(z[K]),y=_.lineHeight;Qe(N.after,k)}x=0,y=_.lineHeight,Qe(this.afterBody,k),e.y-=o}drawFooter(e,t,i){const r=this.footer,o=r.length;let l,c;if(o){const h=Va(i.rtl,this.x,this.width);for(e.x=jh(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=h.textAlign(i.footerAlign),t.textBaseline="middle",l=nn(i.footerFont),t.fillStyle=i.footerColor,t.font=l.string,c=0;c<o;++c)t.fillText(r[c],h.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+i.footerSpacing}}drawBackground(e,t,i,r){const{xAlign:o,yAlign:l}=this,{x:c,y:h}=e,{width:f,height:m}=i,{topLeft:_,topRight:y,bottomLeft:x,bottomRight:T}=Oa(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(c+_,h),l==="top"&&this.drawCaret(e,t,i,r),t.lineTo(c+f-y,h),t.quadraticCurveTo(c+f,h,c+f,h+y),l==="center"&&o==="right"&&this.drawCaret(e,t,i,r),t.lineTo(c+f,h+m-T),t.quadraticCurveTo(c+f,h+m,c+f-T,h+m),l==="bottom"&&this.drawCaret(e,t,i,r),t.lineTo(c+x,h+m),t.quadraticCurveTo(c,h+m,c,h+m-x),l==="center"&&o==="left"&&this.drawCaret(e,t,i,r),t.lineTo(c,h+_),t.quadraticCurveTo(c,h,c+_,h),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,r=i&&i.x,o=i&&i.y;if(r||o){const l=gc[e.position].call(this,this._active,this._eventPosition);if(!l)return;const c=this._size=$b(this,e),h=Object.assign({},l,this._size),f=qb(t,e,h),m=Kb(e,h,f,t);(r._to!==m.x||o._to!==m.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=c.width,this.height=c.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=Yn(t.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&c&&(e.save(),e.globalAlpha=i,this.drawBackground(o,e,r,t),US(e,t.textDirection),o.y+=l.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),WS(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,r=e.map(({datasetIndex:c,index:h})=>{const f=this.chart.getDatasetMeta(c);if(!f)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:f.data[h],index:h}}),o=!Ad(i,r),l=this._positionChanged(r,t);(o||l)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],l=this._getActiveElements(e,o,t,i),c=this._positionChanged(l,e),h=t||!Ad(l,o)||c;return h&&(this._active=l,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),h}_getActiveElements(e,t,i,r){const o=this.options;if(e.type==="mouseout")return[];if(!r)return t.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,o.mode,o,i);return o.reverse&&l.reverse(),l}_positionChanged(e,t){const{caretX:i,caretY:r,options:o}=this,l=gc[o.position].call(this,e,t);return l!==!1&&(i!==l.x||r!==l.y)}}ge(sg,"positioners",gc);var g4={id:"tooltip",_element:sg,positioners:gc,afterInit(n,e,t){t&&(n.tooltip=new sg({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:lI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const y4=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function _4(n,e,t,i){const r=n.indexOf(e);if(r===-1)return y4(n,e,t,i);const o=n.lastIndexOf(e);return r!==o?t:r}const v4=(n,e)=>n===null?null:tn(Math.round(n),0,e);function Qb(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class og extends ol{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:r,label:o}of t)i[r]===o&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(qe(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:_4(i,e,De(t,e),this._addedLabels),v4(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,r=[];let o=this.getLabels();o=e===0&&t===o.length-1?o:o.slice(e,t+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=e;l<=t;l++)r.push({value:l});return r}getLabelForValue(e){return Qb.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ge(og,"id","category"),ge(og,"defaults",{ticks:{callback:Qb}});function w4(n,e){const t=[],{bounds:r,step:o,min:l,max:c,precision:h,count:f,maxTicks:m,maxDigits:_,includeBounds:y}=n,x=o||1,T=m-1,{min:k,max:I}=e,N=!qe(l),V=!qe(c),z=!qe(f),q=(I-k)/(_+1);let K=Jw((I-k)/T/x)*x,J,P,C,R;if(K<1e-14&&!N&&!V)return[{value:k},{value:I}];R=Math.ceil(I/K)-Math.floor(k/K),R>T&&(K=Jw(R*K/T/x)*x),qe(h)||(J=Math.pow(10,h),K=Math.ceil(K*J)/J),r==="ticks"?(P=Math.floor(k/K)*K,C=Math.ceil(I/K)*K):(P=k,C=I),N&&V&&o&&BV((c-l)/o,K/1e3)?(R=Math.round(Math.min((c-l)/K,m)),K=(c-l)/R,P=l,C=c):z?(P=N?l:P,C=V?c:C,R=f-1,K=(C-P)/R):(R=(C-P)/K,Tc(R,Math.round(R),K/1e3)?R=Math.round(R):R=Math.ceil(R));const O=Math.max(Zw(K),Zw(P));J=Math.pow(10,qe(h)?O:h),P=Math.round(P*J)/J,C=Math.round(C*J)/J;let L=0;for(N&&(y&&P!==l?(t.push({value:l}),P<l&&L++,Tc(Math.round((P+L*K)*J)/J,l,Xb(l,q,n))&&L++):P<l&&L++);L<R;++L){const F=Math.round((P+L*K)*J)/J;if(V&&F>c)break;t.push({value:F})}return V&&y&&C!==c?t.length&&Tc(t[t.length-1].value,c,Xb(c,q,n))?t[t.length-1].value=c:t.push({value:c}):(!V||C===c)&&t.push({value:C}),t}function Xb(n,e,{horizontal:t,minRotation:i}){const r=_r(i),o=(t?Math.sin(r):Math.cos(r))||.001,l=.75*e*(""+n).length;return Math.min(e/o,l)}class b4 extends ol{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return qe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:r,max:o}=this;const l=h=>r=t?r:h,c=h=>o=i?o:h;if(e){const h=zi(r),f=zi(o);h<0&&f<0?c(0):h>0&&f>0&&l(0)}if(r===o){let h=o===0?1:Math.abs(o*.05);c(o+h),e||l(r-h)}this.min=r,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,l=w4(r,o);return e.bounds==="ticks"&&zV(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Sy(e,this.chart.options.locale,this.options.ticks.format)}}class ag extends b4{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Gn(e)?e:0,this.max=Gn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=_r(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ge(ag,"id","linear"),ge(ag,"defaults",{ticks:{callback:MS.formatters.numeric}});const gf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},En=Object.keys(gf);function Jb(n,e){return n-e}function Zb(n,e){if(qe(e))return null;const t=n._adapter,{parser:i,round:r,isoWeekday:o}=n._parseOpts;let l=e;return typeof i=="function"&&(l=i(l)),Gn(l)||(l=typeof i=="string"?t.parse(l,i):t.parse(l)),l===null?null:(r&&(l=r==="week"&&(zc(o)||o===!0)?t.startOf(l,"isoWeek",o):t.startOf(l,r)),+l)}function eE(n,e,t,i){const r=En.length;for(let o=En.indexOf(n);o<r-1;++o){const l=gf[En[o]],c=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((t-e)/(c*l.size))<=i)return En[o]}return En[r-1]}function E4(n,e,t,i,r){for(let o=En.length-1;o>=En.indexOf(t);o--){const l=En[o];if(gf[l].common&&n._adapter.diff(r,i,l)>=e-1)return l}return En[t?En.indexOf(t):0]}function x4(n){for(let e=En.indexOf(n)+1,t=En.length;e<t;++e)if(gf[En[e]].common)return En[e]}function tE(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:r}=Ey(t,e),o=t[i]>=e?t[i]:t[r];n[o]=!0}}function T4(n,e,t,i){const r=n._adapter,o=+r.startOf(e[0].value,i),l=e[e.length-1].value;let c,h;for(c=o;c<=l;c=+r.add(c,1,i))h=t[c],h>=0&&(e[h].major=!0);return e}function nE(n,e,t){const i=[],r={},o=e.length;let l,c;for(l=0;l<o;++l)c=e[l],r[c]=l,i.push({value:c,major:!1});return o===0||!t?i:T4(n,i,r,t)}class Od extends ol{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),r=this._adapter=new Ij._date(e.adapters.date);r.init(t),xc(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:Zb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:r,max:o,minDefined:l,maxDefined:c}=this.getUserBounds();function h(f){!l&&!isNaN(f.min)&&(r=Math.min(r,f.min)),!c&&!isNaN(f.max)&&(o=Math.max(o,f.max))}(!l||!c)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),r=Gn(r)&&!isNaN(r)?r:+t.startOf(Date.now(),i),o=Gn(o)&&!isNaN(o)?o:+t.endOf(Date.now(),i)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,l=this.max,c=qV(r,o,l);return this._unit=t.unit||(i.autoSkip?eE(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):E4(this,c.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:x4(this._unit),this.initOffsets(r),e.reverse&&c.reverse(),nE(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,r,o;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?t=1-r:t=(this.getDecimalForValue(e[1])-r)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?i=o:i=(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;t=tn(t,0,l),i=tn(i,0,l),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,r=this.options,o=r.time,l=o.unit||eE(o.minUnit,t,i,this._getLabelCapacity(t)),c=De(r.ticks.stepSize,1),h=l==="week"?o.isoWeekday:!1,f=zc(h)||h===!0,m={};let _=t,y,x;if(f&&(_=+e.startOf(_,"isoWeek",h)),_=+e.startOf(_,f?"day":l),e.diff(i,t,l)>1e5*c)throw new Error(t+" and "+i+" are too far apart with stepSize of "+c+" "+l);const T=r.ticks.source==="data"&&this.getDataTimestamps();for(y=_,x=0;y<i;y=+e.add(y,c,l),x++)tE(m,y,T);return(y===i||r.bounds==="ticks"||x===1)&&tE(m,y,T),Object.keys(m).sort(Jb).map(k=>+k)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const r=this.options.time.displayFormats,o=this._unit,l=t||r[o];return this._adapter.format(e,l)}_tickFormatFunction(e,t,i,r){const o=this.options,l=o.ticks.callback;if(l)return st(l,[e,t,i],this);const c=o.time.displayFormats,h=this._unit,f=this._majorUnit,m=h&&c[h],_=f&&c[f],y=i[t],x=f&&_&&y&&y.major;return this._adapter.format(e,r||(x?_:m))}generateTickLabels(e){let t,i,r;for(t=0,i=e.length;t<i;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,r=_r(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(r),l=Math.sin(r),c=this._resolveTickFontOptions(0).size;return{w:i*o+c*l,h:i*l+c*o}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,r=i[t.unit]||i.millisecond,o=this._tickFormatFunction(e,0,nE(this,[e],this._majorUnit),r),l=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,i=r.length;t<i;++t)e=e.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const r=this.getLabels();for(t=0,i=r.length;t<i;++t)e.push(Zb(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return RS(e.sort(Jb))}}ge(Od,"id","time"),ge(Od,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Fh(n,e,t){let i=0,r=n.length-1,o,l,c,h;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=co(n,"pos",e)),{pos:o,time:c}=n[i],{pos:l,time:h}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=co(n,"time",e)),{time:o,pos:c}=n[i],{time:l,pos:h}=n[r]);const f=l-o;return f?c+(h-c)*(e-o)/f:c}class iE extends Od{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Fh(t,this.min),this._tableRange=Fh(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,r=[],o=[];let l,c,h,f,m;for(l=0,c=e.length;l<c;++l)f=e[l],f>=t&&f<=i&&r.push(f);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(l=0,c=r.length;l<c;++l)m=r[l+1],h=r[l-1],f=r[l],Math.round((m+h)/2)!==f&&o.push({time:f,pos:l/(c-1)});return o}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,o)=>r-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Fh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Fh(this._table,i*this._tableRange+this._minPos,!0)}}ge(iE,"id","timeseries"),ge(iE,"defaults",Od.defaults);const cI="label";function rE(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function S4(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function uI(n,e){n.labels=e}function hI(n,e,t=cI){const i=[];n.datasets=e.map(r=>{const o=n.datasets.find(l=>l[t]===r[t]);return!o||!r.data||i.includes(o)?{...r}:(i.push(o),Object.assign(o,r),o)})}function I4(n,e=cI){const t={labels:[],datasets:[]};return uI(t,n.labels),hI(t,n.datasets,e),t}function k4(n,e){const{height:t=150,width:i=300,redraw:r=!1,datasetIdKey:o,type:l,data:c,options:h,plugins:f=[],fallbackContent:m,updateMode:_,...y}=n,x=ae.useRef(null),T=ae.useRef(null),k=()=>{x.current&&(T.current=new mf(x.current,{type:l,data:I4(c,o),options:h&&{...h},plugins:f}),rE(e,T.current))},I=()=>{rE(e,null),T.current&&(T.current.destroy(),T.current=null)};return ae.useEffect(()=>{!r&&T.current&&h&&S4(T.current,h)},[r,h]),ae.useEffect(()=>{!r&&T.current&&uI(T.current.config.data,c.labels)},[r,c.labels]),ae.useEffect(()=>{!r&&T.current&&c.datasets&&hI(T.current.config.data,c.datasets,o)},[r,c.datasets]),ae.useEffect(()=>{T.current&&(r?(I(),setTimeout(k)):T.current.update(_))},[r,h,c.labels,c.datasets,_]),ae.useEffect(()=>{T.current&&(I(),setTimeout(k))},[l]),ae.useEffect(()=>(k(),()=>I()),[]),b.jsx("canvas",{ref:x,role:"img",height:t,width:i,...y,children:m})}const A4=ae.forwardRef(k4);function Oy(n,e){return mf.register(e),ae.forwardRef((t,i)=>b.jsx(A4,{...t,ref:i,type:n}))}const C4=Oy("line",Jh),P4=Oy("bar",Xh),sE=Oy("doughnut",dc);mf.register(og,ag,td,mc,nd,l4,g4,o4,pc);const R4=({events:n})=>{const e=ae.useMemo(()=>{const m=[],_=[],y=[],x=[];for(let T=6;T>=0;T--){const k=vS(new Date,T),I=Eo(k),N=df(k),V=n.filter(P=>kd(new Date(P.createdAt),{start:I,end:N})),z=V.filter(P=>P.type==="feeding"),q=V.filter(P=>P.type==="diaper"),K=z.map(P=>parseInt(P.duration||P.customDuration||0)).filter(P=>P>0),J=K.length>0?K.reduce((P,C)=>P+C,0)/K.length:0;m.push(Ma(k,"EEE",{locale:po})),_.push(z.length),y.push(q.length),x.push(Math.round(J))}return{days:m,feedingCounts:_,diaperCounts:y,avgDurations:x}},[n]),t=ae.useMemo(()=>{const m=n.filter(x=>x.type==="diaper"&&x.diaperType==="pee").length,_=n.filter(x=>x.type==="diaper"&&x.diaperType==="poop").length,y=n.filter(x=>x.type==="diaper"&&x.diaperType==="both").length;return{peeCount:m,poopCount:_,bothCount:y}},[n]),i=ae.useMemo(()=>{const m=n.filter(y=>y.type==="feeding"&&y.breast==="left").length,_=n.filter(y=>y.type==="feeding"&&y.breast==="right").length;return{leftCount:m,rightCount:_}},[n]),r={labels:e.days,datasets:[{label:"Allaitements",data:e.feedingCounts,borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4},{label:"Couches",data:e.diaperCounts,borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4}]},o={labels:e.days,datasets:[{label:"Dure moyenne (min)",data:e.avgDurations,backgroundColor:"#3b82f6"}]},l={labels:["Pipi","Caca","Les deux"],datasets:[{data:[t.peeCount,t.poopCount,t.bothCount],backgroundColor:["#60a5fa","#f59e0b","#10b981"],borderColor:getComputedStyle(document.documentElement).getPropertyValue("--card-bg").trim(),borderWidth:3}]},c={labels:["Sein gauche","Sein droit"],datasets:[{data:[i.leftCount,i.rightCount],backgroundColor:["#3b82f6","#8b5cf6"],borderColor:getComputedStyle(document.documentElement).getPropertyValue("--card-bg").trim(),borderWidth:3}]},h={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:getComputedStyle(document.documentElement).getPropertyValue("--text-primary").trim(),font:{family:"Inter, system-ui, sans-serif"}}},tooltip:{backgroundColor:getComputedStyle(document.documentElement).getPropertyValue("--card-bg").trim(),titleColor:getComputedStyle(document.documentElement).getPropertyValue("--text-primary").trim(),bodyColor:getComputedStyle(document.documentElement).getPropertyValue("--text-secondary").trim(),borderColor:getComputedStyle(document.documentElement).getPropertyValue("--border-color").trim(),borderWidth:1}},scales:{y:{beginAtZero:!0,ticks:{color:getComputedStyle(document.documentElement).getPropertyValue("--text-secondary").trim(),stepSize:1},grid:{color:getComputedStyle(document.documentElement).getPropertyValue("--border-color").trim()}},x:{ticks:{color:getComputedStyle(document.documentElement).getPropertyValue("--text-secondary").trim()},grid:{color:getComputedStyle(document.documentElement).getPropertyValue("--border-color").trim()}}}},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:getComputedStyle(document.documentElement).getPropertyValue("--text-primary").trim(),font:{family:"Inter, system-ui, sans-serif"},padding:15}},tooltip:{backgroundColor:getComputedStyle(document.documentElement).getPropertyValue("--card-bg").trim(),titleColor:getComputedStyle(document.documentElement).getPropertyValue("--text-primary").trim(),bodyColor:getComputedStyle(document.documentElement).getPropertyValue("--text-secondary").trim(),borderColor:getComputedStyle(document.documentElement).getPropertyValue("--border-color").trim(),borderWidth:1}}};return b.jsxs("div",{className:"charts-container",children:[b.jsxs("div",{className:"chart-card",children:[b.jsx("h3",{className:"chart-title",children:"vnements quotidiens (7 derniers jours)"}),b.jsx("div",{className:"chart-wrapper",children:b.jsx(C4,{data:r,options:h})})]}),b.jsxs("div",{className:"chart-card",children:[b.jsx("h3",{className:"chart-title",children:"Dure moyenne d'allaitement (7 derniers jours)"}),b.jsx("div",{className:"chart-wrapper",children:b.jsx(P4,{data:o,options:h})})]}),b.jsxs("div",{className:"charts-row",children:[b.jsxs("div",{className:"chart-card chart-small",children:[b.jsx("h3",{className:"chart-title",children:"Rpartition des couches"}),b.jsx("div",{className:"chart-wrapper",children:b.jsx(sE,{data:l,options:f})})]}),b.jsxs("div",{className:"chart-card chart-small",children:[b.jsx("h3",{className:"chart-title",children:"Rpartition des seins"}),b.jsx("div",{className:"chart-wrapper",children:b.jsx(sE,{data:c,options:f})})]})]})]})},N4=({events:n})=>{const{activeBaby:e}=Ao(),t=ae.useMemo(()=>{if(!e||!e.birthDate)return null;const r=n.filter(k=>k.type==="feeding"),o=n.filter(k=>k.type==="diaper"),l=new Date(e.birthDate),c=new Date,h=Xm(c,l),f=fS(c,l),m=Math.max(h,1),_=(o.length/m).toFixed(1),y=(r.length/m).toFixed(1),T=h<7?{period:"Nouveau-n (0-7 jours)",expectedDiapers:"8-12",expectedFeedings:"8-12",insights:["Les nouveau-ns ont besoin de manger toutes les 2-3 heures","Au moins 6 couches mouilles par jour est un bon signe d'hydratation","Les selles peuvent tre frquentes aprs chaque tte"]}:h<30?{period:`Nouveau-n (${h} jours)`,expectedDiapers:"6-10",expectedFeedings:"8-12",insights:["Le rythme des ttes commence  se rgulariser","6  8 couches mouilles par jour indique une bonne alimentation","Les selles peuvent devenir moins frquentes aprs 3-4 semaines"]}:f<2?{period:"1 mois",expectedDiapers:"5-8",expectedFeedings:"7-9",insights:["Bb commence  espacer les ttes","Les pleurs diminuent gnralement aprs 6 semaines","Le sommeil peut commencer  s'organiser par priodes plus longues"]}:f<3?{period:"2 mois",expectedDiapers:"5-8",expectedFeedings:"6-8",insights:["Les sourires sociaux apparaissent","Bb peut tenir sa tte quelques instants","Les priodes d'veil sont plus longues"]}:f<6?{period:`${f} mois`,expectedDiapers:"5-7",expectedFeedings:"5-7",insights:["Bb commence  faire ses nuits (5-6h d'affile)","Les ttes s'espacent davantage","Dveloppement moteur : rouler, saisir des objets"]}:{period:`${f} mois`,expectedDiapers:"4-6",expectedFeedings:"4-6",insights:["Priode de diversification alimentaire","Les nuits sont gnralement plus calmes","Bb devient plus autonome"]};return{ageInDays:h,ageInMonths:f,totalDiapers:o.length,totalFeedings:r.length,avgDiapersPerDay:_,avgFeedingsPerDay:y,ageData:T}},[n,e]);if(!e||!e.birthDate)return b.jsx("div",{className:"fun-features",children:b.jsxs("div",{className:"fun-empty",children:[b.jsx("div",{className:"fun-empty-icon",children:""}),b.jsx("h3",{children:"Date de naissance manquante"}),b.jsx("p",{children:"Ajoutez la date de naissance de votre bb dans les paramtres pour voir les statistiques."})]})});if(n.length===0)return b.jsx("div",{className:"fun-features",children:b.jsxs("div",{className:"fun-empty",children:[b.jsx("div",{className:"fun-empty-icon",children:""}),b.jsx("h3",{children:"Aucune donne encore"}),b.jsx("p",{children:"Commencez  enregistrer des vnements pour voir les statistiques."})]})});if(!t)return null;const i=()=>t.ageInDays<30?`${t.ageInDays} jour${t.ageInDays>1?"s":""}`:t.ageInMonths<1?`${t.ageInDays} jours`:t.ageInMonths===1?"1 mois":`${t.ageInMonths} mois`;return b.jsxs("div",{className:"fun-features",children:[b.jsxs("div",{className:"fun-header",children:[b.jsxs("h2",{children:[" ",e.name]}),b.jsx("p",{className:"fun-subtitle",children:i()})]}),b.jsxs("section",{className:"fun-section",children:[b.jsx("h3",{children:" Progression"}),b.jsx("div",{className:"age-progress",children:b.jsxs("div",{className:"progress-item",children:[b.jsxs("div",{className:"progress-header",children:[b.jsx("span",{className:"progress-label",children:"ge"}),b.jsx("span",{className:"progress-value",children:i()})]}),b.jsx("div",{className:"progress-bar",children:b.jsx("div",{className:"progress-fill",style:{width:`${Math.min(t.ageInDays/365*100,100)}%`}})}),b.jsxs("div",{className:"progress-note",children:["Priode : ",t.ageData.period]})]})})]}),b.jsxs("section",{className:"fun-section",children:[b.jsx("h3",{children:" Depuis le dbut"}),b.jsxs("div",{className:"main-stats",children:[b.jsxs("div",{className:"main-stat-card",children:[b.jsx("div",{className:"stat-icon-large",children:""}),b.jsx("div",{className:"stat-number",children:t.totalDiapers}),b.jsx("div",{className:"stat-title",children:"Couches changes"}),b.jsxs("div",{className:"stat-average",children:["Moyenne : ",t.avgDiapersPerDay,"/jour"]})]}),b.jsxs("div",{className:"main-stat-card",children:[b.jsx("div",{className:"stat-icon-large",children:""}),b.jsx("div",{className:"stat-number",children:t.totalFeedings}),b.jsx("div",{className:"stat-title",children:"Allaitements"}),b.jsxs("div",{className:"stat-average",children:["Moyenne : ",t.avgFeedingsPerDay,"/jour"]})]})]})]}),b.jsxs("section",{className:"fun-section",children:[b.jsx("h3",{children:" Repres pour cet ge"}),b.jsx("div",{className:"age-insights",children:t.ageData.insights.map((r,o)=>b.jsxs("div",{className:"insight-item",children:[b.jsx("span",{className:"insight-bullet",children:""}),b.jsx("span",{className:"insight-text",children:r})]},o))})]})]})},D4=({events:n})=>{const[e,t]=ae.useState(!1),i=ae.useMemo(()=>{const o=new Date,l=Eo(o),c=df(o),h=$a(o,{weekStartsOn:1}),f=k2(o,{weekStartsOn:1}),m=n.filter(y=>kd(new Date(y.createdAt),{start:l,end:c})),_=n.filter(y=>kd(new Date(y.createdAt),{start:h,end:f}));return{today:{feedings:m.filter(y=>y.type==="feeding").length,diapers:m.filter(y=>y.type==="diaper").length,pee:m.filter(y=>y.type==="diaper"&&(y.diaperType==="pee"||y.diaperType==="both")).length,poop:m.filter(y=>y.type==="diaper"&&(y.diaperType==="poop"||y.diaperType==="both")).length,baths:m.filter(y=>y.type==="bath").length,care:m.filter(y=>y.type==="care").length},week:{feedings:_.filter(y=>y.type==="feeding").length,diapers:_.filter(y=>y.type==="diaper").length,pee:_.filter(y=>y.type==="diaper"&&(y.diaperType==="pee"||y.diaperType==="both")).length,poop:_.filter(y=>y.type==="diaper"&&(y.diaperType==="poop"||y.diaperType==="both")).length,baths:_.filter(y=>y.type==="bath").length,care:_.filter(y=>y.type==="care").length},total:{feedings:n.filter(y=>y.type==="feeding").length,diapers:n.filter(y=>y.type==="diaper").length,baths:n.filter(y=>y.type==="bath").length,care:n.filter(y=>y.type==="care").length}}},[n]),r=({title:o,icon:l,value:c,color:h})=>b.jsxs("div",{className:`stat-card ${h}`,children:[b.jsx("div",{className:"stat-icon",children:l}),b.jsxs("div",{className:"stat-info",children:[b.jsx("div",{className:"stat-value",children:c}),b.jsx("div",{className:"stat-label",children:o})]})]});return e?b.jsxs("div",{className:"statistics",children:[b.jsx("button",{className:"fun-back-button",onClick:()=>t(!1),children:" Retour aux statistiques"}),b.jsx(N4,{events:n})]}):b.jsxs("div",{className:"statistics",children:[b.jsxs("section",{className:"stat-section",children:[b.jsx("h3",{children:" Aujourd'hui"}),b.jsxs("div",{className:"stat-grid",children:[b.jsx(r,{title:"Allaitements",icon:"",value:i.today.feedings,color:"blue"}),b.jsx(r,{title:"Couches",icon:"",value:i.today.diapers,color:"green"}),b.jsx(r,{title:"Pipi",icon:"",value:i.today.pee,color:"cyan"}),b.jsx(r,{title:"Caca",icon:"",value:i.today.poop,color:"orange"}),b.jsx(r,{title:"Bains",icon:"",value:i.today.baths,color:"blue"}),b.jsx(r,{title:"Soins",icon:"",value:i.today.care,color:"green"})]})]}),b.jsxs("section",{className:"stat-section",children:[b.jsx("h3",{children:" Cette semaine"}),b.jsxs("div",{className:"stat-grid",children:[b.jsx(r,{title:"Allaitements",icon:"",value:i.week.feedings,color:"blue"}),b.jsx(r,{title:"Couches",icon:"",value:i.week.diapers,color:"green"}),b.jsx(r,{title:"Pipi",icon:"",value:i.week.pee,color:"cyan"}),b.jsx(r,{title:"Caca",icon:"",value:i.week.poop,color:"orange"}),b.jsx(r,{title:"Bains",icon:"",value:i.week.baths,color:"blue"}),b.jsx(r,{title:"Soins",icon:"",value:i.week.care,color:"green"})]})]}),b.jsxs("section",{className:"stat-section",children:[b.jsx("h3",{children:" Total"}),b.jsxs("div",{className:"stat-grid",children:[b.jsx(r,{title:"Allaitements",icon:"",value:i.total.feedings,color:"blue"}),b.jsx(r,{title:"Couches",icon:"",value:i.total.diapers,color:"green"}),b.jsx(r,{title:"Bains",icon:"",value:i.total.baths,color:"blue"}),b.jsx(r,{title:"Soins",icon:"",value:i.total.care,color:"green"})]})]}),n.length>0&&b.jsxs("section",{className:"stat-section",children:[b.jsx("h3",{children:" Graphiques"}),b.jsx(R4,{events:n})]}),n.length>0&&b.jsx("section",{className:"stat-section",children:b.jsxs("button",{className:"fun-access-button",onClick:()=>t(!0),children:[b.jsx("span",{className:"fun-icon",children:""}),b.jsxs("span",{className:"fun-text",children:[b.jsx("strong",{children:"Statistiques Inutiles mais Fun"}),b.jsx("small",{children:"Dcouvrir des infos compltement absurdes"})]}),b.jsx("span",{className:"fun-arrow",children:""})]})}),n.length===0&&b.jsxs("div",{className:"no-stats",children:[b.jsx("div",{className:"no-stats-icon",children:""}),b.jsx("p",{children:"Commencez  enregistrer des vnements pour voir vos statistiques"})]})]})},M4=()=>{const{activeBaby:n}=Ao(),[e,t]=ae.useState([]),[i,r]=ae.useState(""),[o,l]=ae.useState(null),[c,h]=ae.useState("");ae.useEffect(()=>{if(!n)return;const N=Ha(un,"babies",n.id,"todos"),V=iy(N,AT("createdAt","desc")),z=MT(V,q=>{const K=q.docs.map(J=>({id:J.id,...J.data()}));t(K)});return()=>z()},[n]);const f=async N=>{if(N.preventDefault(),!(!i.trim()||!n))try{const V=Ha(un,"babies",n.id,"todos");await ay(V,{text:i.trim(),completed:!1,createdAt:new Date().toISOString()}),r("")}catch(V){console.error("Erreur lors de l'ajout:",V)}},m=async N=>{try{const V=ji(un,"babies",n.id,"todos",N.id);await Ed(V,{completed:!N.completed})}catch(V){console.error("Erreur lors de la mise  jour:",V)}},_=async N=>{try{const V=ji(un,"babies",n.id,"todos",N);await DT(V)}catch(V){console.error("Erreur lors de la suppression:",V)}},y=N=>{l(N.id),h(N.text)},x=async N=>{if(c.trim())try{const V=ji(un,"babies",n.id,"todos",N);await Ed(V,{text:c.trim()}),l(null),h("")}catch(V){console.error("Erreur lors de la modification:",V)}},T=()=>{l(null),h("")},k=e.filter(N=>N.completed).length,I=e.length;return b.jsxs("div",{className:"todolist",children:[b.jsxs("div",{className:"todolist-header",children:[b.jsx("h2",{children:" To-Do List"}),b.jsx("p",{className:"todolist-subtitle",children:"Questions, tches, mmos... tout ce qui vous passe par la tte"}),I>0&&b.jsxs("div",{className:"todolist-progress",children:[b.jsxs("div",{className:"progress-text",children:[k," / ",I," compltes"]}),b.jsx("div",{className:"progress-bar",children:b.jsx("div",{className:"progress-fill",style:{width:`${I>0?k/I*100:0}%`}})})]})]}),b.jsxs("form",{className:"todolist-add-form",onSubmit:f,children:[b.jsx("input",{type:"text",value:i,onChange:N=>r(N.target.value),placeholder:"Ajouter une tche, question, mmo...",className:"todolist-input"}),b.jsx("button",{type:"submit",className:"todolist-add-button",children:" Ajouter"})]}),e.length===0?b.jsxs("div",{className:"todolist-empty",children:[b.jsx("div",{className:"empty-icon",children:""}),b.jsx("p",{children:"Aucune tche pour le moment"}),b.jsx("small",{children:"Ajoutez vos questions, ides ou choses  ne pas oublier"})]}):b.jsx("div",{className:"todolist-items",children:e.map(N=>b.jsx("div",{className:`todolist-item ${N.completed?"completed":""}`,children:o===N.id?b.jsxs("div",{className:"todolist-edit-mode",children:[b.jsx("input",{type:"text",value:c,onChange:V=>h(V.target.value),className:"todolist-edit-input",autoFocus:!0}),b.jsxs("div",{className:"todolist-edit-actions",children:[b.jsx("button",{onClick:()=>x(N.id),className:"todolist-save-button",children:" Sauvegarder"}),b.jsx("button",{onClick:T,className:"todolist-cancel-button",children:" Annuler"})]})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"todolist-item-content",children:[b.jsx("button",{className:"todolist-checkbox",onClick:()=>m(N),children:N.completed?"":""}),b.jsx("span",{className:"todolist-text",children:N.text})]}),b.jsxs("div",{className:"todolist-item-actions",children:[b.jsx("button",{onClick:()=>y(N),className:"todolist-edit-button",title:"Modifier",children:""}),b.jsx("button",{onClick:()=>_(N.id),className:"todolist-delete-button",title:"Supprimer",children:""})]})]})},N.id))})]})},O4=()=>{var c;const{activeBaby:n}=Ao(),{user:e}=Ir(),[t,i]=ae.useState(!1);if(!n)return null;const r=`${window.location.origin}?invite=${n.id}`,o=async()=>{try{await navigator.clipboard.writeText(r),i(!0),setTimeout(()=>i(!1),3e3)}catch(h){console.error("Erreur lors de la copie:",h);const f=document.createElement("textarea");f.value=r,document.body.appendChild(f),f.select(),document.execCommand("copy"),document.body.removeChild(f),i(!0),setTimeout(()=>i(!1),3e3)}},l=async()=>{if(navigator.share)try{await navigator.share({title:`Rejoindre le suivi de ${n.name}`,text:`Clique sur ce lien pour suivre ${n.name} avec moi !`,url:r})}catch(h){h.name!=="AbortError"&&console.error("Erreur lors du partage:",h)}else o()};return b.jsxs("div",{className:"invite-link-container",children:[b.jsx("h3",{children:" Partager avec votre partenaire"}),b.jsxs("p",{className:"invite-description",children:["Partagez ce lien pour que votre partenaire puisse rejoindre le suivi de ",n.name]}),b.jsx("div",{className:"invite-link-box",children:b.jsx("input",{type:"text",value:r,readOnly:!0,className:"invite-link-input",onClick:h=>h.target.select()})}),b.jsxs("div",{className:"invite-actions",children:[b.jsx("button",{onClick:o,className:"btn-copy",children:t?" Copi !":" Copier le lien"}),navigator.share&&b.jsx("button",{onClick:l,className:"btn-share",children:" Partager"})]}),b.jsx("div",{className:"invite-info",children:b.jsx("p",{className:"info-text",children:" Votre partenaire doit tre connect avec son compte Google pour accepter l'invitation"})}),b.jsxs("div",{className:"current-members",children:[b.jsx("h4",{children:"Membres actuels :"}),b.jsx("ul",{children:(c=n.members)==null?void 0:c.map((h,f)=>b.jsxs("li",{children:[b.jsx("span",{className:"member-icon",children:h.role==="owner"?"":""}),b.jsx("span",{className:"member-name",children:h.displayName||h.email}),b.jsx("span",{className:"member-role",children:h.role==="owner"?"Propritaire":"Membre"})]},f))})]})]})},V4=()=>{const[n,e]=ae.useState(Notification.permission),[t,i]=ae.useState(""),[r,o]=ae.useState(!1);aE.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(()=>{o(!0)})},[]);const l=async()=>{try{const x=await Notification.requestPermission();e(x),i(x==="granted"?" Permission accorde !":x==="denied"?" Permission refuse. Sur mobile, vous devez peut-tre installer l'app comme PWA.":" Permission non dtermine")}catch(x){i(` Erreur: ${x.message}`)}},c=async()=>{if(n!=="granted"){i(" Vous devez d'abord autoriser les notifications");return}try{if(r&&"serviceWorker"in navigator)await(await navigator.serviceWorker.ready).showNotification(" Test d'allaitement",{body:"Ceci est une notification de test !",icon:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="0.9em" font-size="90"></text></svg>',badge:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="0.9em" font-size="90"></text></svg>',tag:"test-notification",requireInteraction:!1,timestamp:Date.now(),data:{url:window.location.href}}),i(" Notification envoye via Service Worker !");else{const x=new Notification(" Test d'allaitement",{body:"Ceci est une notification de test !",tag:"test-notification",requireInteraction:!1,timestamp:Date.now()});x.onclick=()=>{window.focus(),x.close()},i(" Notification envoye !"),setTimeout(()=>x.close(),5e3)}}catch(x){i(` Erreur: ${x.message}`)}},h=async()=>{if(n!=="granted"){i(" Vous devez d'abord autoriser les notifications");return}try{if(r&&"serviceWorker"in navigator)await(await navigator.serviceWorker.ready).showNotification(" Rappel d'allaitement",{body:"Il est temps de nourrir bb ! Dernier allaitement il y a 4 heures.",icon:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="0.9em" font-size="90"></text></svg>',badge:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="0.9em" font-size="90"></text></svg>',tag:"feeding-reminder",requireInteraction:!0,vibrate:[200,100,200],timestamp:Date.now(),data:{url:window.location.href}}),i(" Rappel d'allaitement envoy via Service Worker !");else{const x=new Notification(" Rappel d'allaitement",{body:"Il est temps de nourrir bb ! Dernier allaitement il y a 4 heures.",tag:"feeding-reminder",requireInteraction:!0,vibrate:[200,100,200],timestamp:Date.now()});x.onclick=()=>{window.focus(),x.close()},i(" Rappel d'allaitement envoy !")}}catch(x){i(` Erreur: ${x.message}`)}},f=async()=>{if(n!=="granted"){i(" Vous devez d'abord autoriser les notifications");return}try{if(r&&"serviceWorker"in navigator)await(await navigator.serviceWorker.ready).showNotification(" Changement de couche",{body:"N'oubliez pas de changer la couche de bb !",icon:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="0.9em" font-size="90"></text></svg>',badge:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="0.9em" font-size="90"></text></svg>',tag:"diaper-reminder",vibrate:[100,50,100],timestamp:Date.now(),data:{url:window.location.href}}),i(" Rappel de couche envoy via Service Worker !");else{const x=new Notification(" Changement de couche",{body:"N'oubliez pas de changer la couche de bb !",tag:"diaper-reminder",vibrate:[100,50,100],timestamp:Date.now()});x.onclick=()=>{window.focus(),x.close()},i(" Rappel de couche envoy !")}}catch(x){i(` Erreur: ${x.message}`)}},m=()=>{if(n!=="granted"){i(" Vous devez d'abord autoriser les notifications");return}i(" Notification programme dans 5 secondes..."),setTimeout(()=>{try{const x=new Notification(" Notification programme",{body:"Cette notification a t programme il y a 5 secondes !",icon:"/pwa-192x192.png",tag:"scheduled-notification"});x.onclick=()=>{window.focus(),x.close()},i(" Notification programme dclenche !")}catch(x){i(` Erreur: ${x.message}`)}},5e3)},y=(()=>{switch(n){case"granted":return{text:"Autorises ",color:"#10b981"};case"denied":return{text:"Refuses ",color:"#ef4444"};default:return{text:"Non demandes ",color:"#f59e0b"}}})();return b.jsxs("div",{className:"notification-test",children:[b.jsx("h2",{children:" Test des Notifications"}),b.jsxs("div",{className:"permission-status",style:{borderColor:y.color},children:[b.jsx("div",{className:"status-label",children:"Statut des permissions :"}),b.jsx("div",{className:"status-value",style:{color:y.color},children:y.text})]}),n!=="granted"&&b.jsx("div",{className:"permission-section",children:b.jsx("button",{onClick:l,className:"btn-permission",children:" Demander la permission"})}),n==="granted"&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"test-section",children:[b.jsx("h3",{children:"Tests basiques"}),b.jsxs("div",{className:"test-buttons",children:[b.jsx("button",{onClick:c,className:"btn-test",children:" Notification simple"}),b.jsx("button",{onClick:m,className:"btn-test",children:" Notification dans 5s"})]})]}),b.jsxs("div",{className:"test-section",children:[b.jsx("h3",{children:"Simulations relles"}),b.jsxs("div",{className:"test-buttons",children:[b.jsx("button",{onClick:h,className:"btn-test primary",children:" Rappel d'allaitement"}),b.jsx("button",{onClick:f,className:"btn-test secondary",children:" Rappel de couche"})]})]})]}),t&&b.jsx("div",{className:"test-result",children:t}),b.jsxs("div",{className:"info-section",children:[b.jsx("h3",{children:" Informations"}),b.jsxs("ul",{children:[b.jsxs("li",{children:[b.jsx("strong",{children:"Navigateur support :"})," ","Notification"in window?" Oui":" Non"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Service Worker :"})," ","serviceWorker"in navigator?r?" Prt":" Chargement...":" Non disponible"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Permission actuelle :"})," ",n]}),b.jsxs("li",{children:[b.jsx("strong",{children:"PWA installe :"})," ",window.matchMedia("(display-mode: standalone)").matches?" Oui":" Non (ouvrez depuis l'cran d'accueil)"]})]})]}),b.jsxs("div",{className:"instructions",children:[b.jsx("h3",{children:" Instructions"}),b.jsxs("ol",{children:[b.jsx("li",{children:'Cliquez sur "Demander la permission" pour autoriser les notifications'}),b.jsx("li",{children:"Testez les diffrents types de notifications"}),b.jsx("li",{children:"Vrifiez que vous recevez bien les notifications"}),b.jsx("li",{children:"Sur mobile : vrifiez que l'app vibre"})]}),!window.matchMedia("(display-mode: standalone)").matches&&b.jsxs("div",{className:"mobile-tip",style:{background:"#fef3c7",border:"2px solid #f59e0b",borderRadius:"8px",padding:"12px",marginTop:"12px"},children:[b.jsx("strong",{children:" Sur mobile Chrome :"}),b.jsxs("ol",{style:{marginTop:"8px",paddingLeft:"20px"},children:[b.jsx("li",{children:"Ouvrez le menu ()"}),b.jsx("li",{children:`Slectionnez "Ajouter  l'cran d'accueil" ou "Installer l'application"`}),b.jsx("li",{children:"Ouvrez l'app depuis l'icne sur votre cran d'accueil"}),b.jsx("li",{children:"Les notifications fonctionneront mieux depuis la PWA installe"})]})]})]})]})},L4=()=>{const[n,e]=ae.useState(null),[t,i]=ae.useState(!1);ae.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const o=l=>{l.preventDefault(),e(l)};return window.addEventListener("beforeinstallprompt",o),()=>{window.removeEventListener("beforeinstallprompt",o)}},[]);const r=async()=>{if(!n)return;n.prompt();const{outcome:o}=await n.userChoice;o==="accepted"&&i(!0),e(null)};return t||!n?null:b.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"16px",borderRadius:"12px",margin:"16px 0",display:"flex",alignItems:"center",gap:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:[b.jsx("div",{style:{fontSize:"32px"},children:""}),b.jsxs("div",{style:{flex:1},children:[b.jsx("strong",{style:{display:"block",marginBottom:"4px"},children:"Installer Baby Track"}),b.jsx("small",{children:"Installez l'app pour un accs rapide et des notifications push"})]}),b.jsx("button",{onClick:r,style:{background:"white",color:"#667eea",border:"none",padding:"10px 20px",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",fontSize:"14px",whiteSpace:"nowrap"},children:"Installer"})]})},j4=({onLogout:n})=>{const{user:e}=Ir(),{settings:t,updateSettings:i,toggleTheme:r}=rl(),[o,l]=ae.useState(t.feedingInterval),[c,h]=ae.useState(!1),f=async()=>{if(o<1||o>12){alert("L'intervalle doit tre entre 1 et 12 heures");return}try{h(!0),await i({feedingInterval:o}),alert("Paramtres sauvegards avec succs !")}catch{alert("Erreur lors de la sauvegarde des paramtres")}finally{h(!1)}},m=async()=>{try{const y=!t.notificationsEnabled;if(y&&"Notification"in window&&await Notification.requestPermission()!=="granted"){alert("Vous devez autoriser les notifications pour activer cette fonctionnalit");return}await i({notificationsEnabled:y})}catch(y){console.error("Erreur lors de la mise  jour des notifications:",y)}},_=async()=>{if(window.confirm("tes-vous sr de vouloir vider le cache et recharger l'application ? Cela permettra de rcuprer la dernire version."))try{if("caches"in window){const x=await caches.keys();await Promise.all(x.map(T=>caches.delete(T)))}if("serviceWorker"in navigator){const x=await navigator.serviceWorker.getRegistrations();await Promise.all(x.map(T=>T.unregister()))}localStorage.clear(),sessionStorage.clear();const y="/baby-track/";setTimeout(()=>{window.location.href=y+"?v="+Date.now()},500)}catch(y){console.error("Erreur lors du nettoyage du cache:",y),alert("Erreur lors du nettoyage du cache")}};return b.jsxs("div",{className:"settings",children:[b.jsx(L4,{}),b.jsxs("div",{className:"settings-section",children:[b.jsx("h3",{children:" Profil"}),b.jsxs("div",{className:"profile-info",children:[b.jsx("img",{src:e.photoURL||"/default-avatar.png",alt:e.displayName,className:"profile-avatar"}),b.jsxs("div",{className:"profile-details",children:[b.jsx("div",{className:"profile-name",children:e.displayName}),b.jsx("div",{className:"profile-email",children:e.email})]})]}),b.jsx("button",{className:"logout-button",onClick:n,children:"Dconnexion"})]}),b.jsxs("div",{className:"settings-section",children:[b.jsx("h3",{children:" Intervalle d'allaitement"}),b.jsx("p",{className:"setting-description",children:"Dfinissez l'intervalle de temps (en heures) entre chaque allaitement"}),b.jsxs("div",{className:"interval-setting",children:[b.jsx("input",{type:"number",min:"1",max:"12",value:o,onChange:y=>l(Number(y.target.value)),className:"interval-input"}),b.jsx("span",{className:"interval-unit",children:"heures"})]}),b.jsx("button",{className:"save-button",onClick:f,disabled:c||o===t.feedingInterval,children:c?"Sauvegarde...":"Sauvegarder"})]}),b.jsx("div",{className:"settings-section",children:b.jsx(O4,{})}),b.jsxs("div",{className:"settings-section",children:[b.jsx("h3",{children:" Apparence"}),b.jsxs("div",{className:"theme-setting",children:[b.jsxs("div",{className:"setting-info",children:[b.jsx("div",{className:"setting-label",children:"Thme"}),b.jsx("div",{className:"setting-value",children:t.theme==="dark"?"Sombre":"Clair"})]}),b.jsx("button",{className:"theme-button",onClick:r,children:t.theme==="dark"?" Mode clair":" Mode sombre"})]})]}),b.jsxs("div",{className:"settings-section",children:[b.jsx("h3",{children:" Notifications"}),b.jsxs("div",{className:"notification-setting",children:[b.jsxs("div",{className:"setting-info",children:[b.jsx("div",{className:"setting-label",children:"Notifications push"}),b.jsx("div",{className:"setting-description",children:"Recevoir des rappels pour les allaitements"})]}),b.jsxs("label",{className:"toggle-switch",children:[b.jsx("input",{type:"checkbox",checked:t.notificationsEnabled,onChange:m}),b.jsx("span",{className:"toggle-slider"})]})]})]}),b.jsx("div",{className:"settings-section",children:b.jsx(V4,{})}),b.jsxs("div",{className:"settings-section",children:[b.jsx("h3",{children:" Mise  jour"}),b.jsxs("div",{className:"cache-setting",children:[b.jsxs("div",{className:"setting-info",children:[b.jsx("div",{className:"setting-label",children:"Forcer la mise  jour"}),b.jsx("div",{className:"setting-description",children:"Vide le cache et recharge l'application pour rcuprer la dernire version"})]}),b.jsx("button",{className:"clear-cache-button",onClick:_,children:" Vider le cache"})]})]}),b.jsxs("div",{className:"settings-section",children:[b.jsx("h3",{children:"  propos"}),b.jsxs("div",{className:"about-info",children:[b.jsxs("p",{children:[b.jsx("strong",{children:"Baby Track"})," v2.0.0"]}),b.jsx("p",{children:"Application de suivi d'allaitement et de couches"}),b.jsx("p",{className:"sync-info",children:" Synchronisation en temps rel active"})]})]})]})},F4=()=>{const{user:n}=Ir(),{refreshBabies:e}=Ao(),[t,i]=ae.useState({name:"",birthDate:""}),[r,o]=ae.useState(!1),l=async c=>{if(c.preventDefault(),!t.name||!t.birthDate){alert("Veuillez remplir tous les champs");return}o(!0);try{await a2(n.uid,n.email,n.displayName,{name:t.name,birthDate:t.birthDate,photo:""}),await e()}catch(h){console.error("Erreur lors de la cration du bb:",h),alert("Erreur lors de la cration du profil bb")}finally{o(!1)}};return b.jsx("div",{className:"baby-setup-container",children:b.jsxs("div",{className:"baby-setup-card",children:[b.jsx("div",{className:"setup-icon",children:""}),b.jsx("h1",{children:"Crer le profil de votre bb"}),b.jsx("p",{className:"setup-description",children:"Commencez par crer le profil de votre bb. Vous pourrez ensuite inviter votre conjoint(e)  le partager."}),b.jsxs("form",{onSubmit:l,className:"baby-setup-form",children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"name",children:"Prnom du bb"}),b.jsx("input",{type:"text",id:"name",value:t.name,onChange:c=>i({...t,name:c.target.value}),placeholder:"Ex: Emma, Lucas...",required:!0})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"birthDate",children:"Date de naissance"}),b.jsx("input",{type:"date",id:"birthDate",value:t.birthDate,onChange:c=>i({...t,birthDate:c.target.value}),required:!0})]}),b.jsx("button",{type:"submit",className:"submit-button",disabled:r,children:r?"Cration...":"Crer le profil"})]})]})})},B4=()=>{const{user:n}=Ir(),{settings:e}=rl(),{activeBaby:t,loading:i}=Ao(),[r,o]=ae.useState([]),[l,c]=ae.useState("home"),[h,f]=ae.useState(!0),[m,_]=ae.useState(null);h2(),ae.useEffect(()=>{if(t){const z=t2(t.id,q=>{o(q),f(!1)});return()=>z()}},[t]);const y=async z=>{try{if(!t){alert("Aucun bb slectionn");return}let q=new Date;if(z.customDate){const[J,P,C]=z.customDate.split("-").map(Number);q=new Date(J,P-1,C)}if(z.customTime){const[J,P]=z.customTime.split(":").map(Number);q.setHours(J,P,0,0)}const K={...z,createdAt:z.customDate||z.customTime?q.toISOString():new Date().toISOString()};delete K.customDate,delete K.customTime,await e2(t.id,K,{userId:n.uid,displayName:n.displayName||n.email})}catch(q){console.error("Erreur lors de l'ajout de l'vnement:",q),alert("Erreur lors de l'ajout de l'vnement")}},x=z=>{_(z)},T=async z=>{try{if(!t){alert("Aucun bb slectionn");return}let q={...z};if(z.customDate||z.customTime){let K=m.createdAt?new Date(m.createdAt):new Date;if(z.customDate){const[J,P,C]=z.customDate.split("-").map(Number);K=new Date(J,P-1,C,K.getHours(),K.getMinutes(),0,0)}if(z.customTime){const[J,P]=z.customTime.split(":").map(Number);K.setHours(J,P,0,0)}q.createdAt=K.toISOString()}delete q.customDate,delete q.customTime,await r2(t.id,m.id,q),_(null)}catch(q){console.error("Erreur lors de la mise  jour de l'vnement:",q),alert("Erreur lors de la mise  jour de l'vnement")}},k=()=>{_(null)},I=async()=>{try{await XM()}catch(z){console.error("Erreur lors de la dconnexion:",z)}},N=()=>r.find(z=>z.type==="feeding"),V=()=>{switch(l){case"home":return b.jsxs(b.Fragment,{children:[b.jsx(rV,{events:r}),b.jsx(wS,{lastFeeding:N(),interval:e.feedingInterval}),b.jsx(sV,{onAddEvent:y,lastFeeding:N()}),b.jsx("div",{className:"section-title",children:"Timeline du jour"}),b.jsx(ES,{events:r,limit:15,onEditEvent:x})]});case"history":return b.jsx(oV,{events:r,showAll:!0,onEditEvent:x});case"statistics":return b.jsx(D4,{events:r});case"todos":return b.jsx(M4,{});case"settings":return b.jsx(j4,{onLogout:I});default:return null}};return i?b.jsxs("div",{className:"loading-container",children:[b.jsx("div",{className:"loading-spinner"}),b.jsx("p",{children:"Chargement..."})]}):t?h?b.jsxs("div",{className:"loading-container",children:[b.jsx("div",{className:"loading-spinner"}),b.jsx("p",{children:"Chargement des vnements..."})]}):b.jsxs("div",{className:"dashboard-container",children:[b.jsx(nV,{user:n,activeView:l,setActiveView:c,events:r}),b.jsx("main",{className:"dashboard-main",children:V()}),b.jsx(iV,{activeView:l,setActiveView:c}),m&&b.jsx(bS,{type:m.type,editEvent:m,onSubmit:T,onClose:k})]}):b.jsx(F4,{})},z4=({babyId:n,onAccepted:e,onCancel:t})=>{var I,N;const{user:i}=Ir(),{refreshBabies:r}=Ao(),[o,l]=ae.useState(null),[c,h]=ae.useState(!0),[f,m]=ae.useState(!1),[_,y]=ae.useState(null),[x,T]=ae.useState(!1);ae.useEffect(()=>{i&&n&&(async()=>{var z;try{h(!0);const q=await Qm(n);if(!q){y("Ce bb n'existe pas ou a t supprim.");return}l(q);const K=(z=q.memberIds)==null?void 0:z.includes(i.uid);T(K)}catch(q){console.error("Erreur lors du chargement du bb:",q),y("Impossible de charger les informations du bb.")}finally{h(!1)}})()},[n,i]);const k=async()=>{try{m(!0),y(null),await l2(n,{userId:i.uid,email:i.email,displayName:i.displayName||i.email,role:"member"}),await r(),e&&e()}catch(V){console.error("Erreur lors de l'acceptation:",V),y("Erreur lors de l'acceptation de l'invitation. Ressayez.")}finally{m(!1)}};return c?b.jsxs("div",{className:"invite-accept-container",children:[b.jsx("div",{className:"loading-spinner"}),b.jsx("p",{children:"Chargement de l'invitation..."})]}):_?b.jsx("div",{className:"invite-accept-container",children:b.jsxs("div",{className:"invite-error",children:[b.jsx("span",{className:"error-icon",children:""}),b.jsx("h2",{children:"Erreur"}),b.jsx("p",{children:_}),t&&b.jsx("button",{onClick:t,className:"btn-cancel",children:"Retour"})]})}):x?b.jsx("div",{className:"invite-accept-container",children:b.jsxs("div",{className:"invite-already-member",children:[b.jsx("span",{className:"success-icon",children:""}),b.jsx("h2",{children:"Dj membre"}),b.jsxs("p",{children:["Vous faites dj partie du suivi de ",b.jsx("strong",{children:o.name})," !"]}),t&&b.jsx("button",{onClick:t,className:"btn-primary",children:"Continuer"})]})}):b.jsx("div",{className:"invite-accept-container",children:b.jsxs("div",{className:"invite-card",children:[b.jsxs("div",{className:"invite-header",children:[b.jsx("span",{className:"baby-icon",children:""}),b.jsx("h2",{children:"Invitation  rejoindre"})]}),b.jsxs("div",{className:"baby-info",children:[b.jsx("h3",{children:o.name}),o.birthDate&&b.jsxs("p",{className:"birth-date",children:["N(e) le ",new Date(o.birthDate).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})]})]}),b.jsx("div",{className:"invite-message",children:b.jsxs("p",{children:["Vous tes invit(e)  suivre l'allaitement et les couches de"," ",b.jsx("strong",{children:o.name})," avec les autres membres de la famille."]})}),b.jsxs("div",{className:"current-members-preview",children:[b.jsx("p",{className:"members-label",children:"Membres actuels :"}),b.jsxs("div",{className:"members-list",children:[(I=o.members)==null?void 0:I.slice(0,3).map((V,z)=>{var q;return b.jsx("div",{className:"member-avatar",children:((q=V.displayName)==null?void 0:q.charAt(0).toUpperCase())||"?"},z)}),((N=o.members)==null?void 0:N.length)>3&&b.jsxs("div",{className:"member-avatar more",children:["+",o.members.length-3]})]})]}),b.jsxs("div",{className:"invite-actions",children:[b.jsx("button",{onClick:k,disabled:f,className:"btn-accept",children:f?"Acceptation...":" Accepter l'invitation"}),t&&b.jsx("button",{onClick:t,className:"btn-decline",children:"Refuser"})]}),_&&b.jsx("div",{className:"error-message",children:_})]})})},U4=()=>{const{user:n}=Ir(),{settings:e}=rl(),[t,i]=ae.useState(null);return ae.useEffect(()=>{document.documentElement.setAttribute("data-theme",e.theme)},[e.theme]),ae.useEffect(()=>{const o=new URLSearchParams(window.location.search).get("invite");o&&i(o)},[]),n?t?b.jsx(z4,{babyId:t,onAccepted:()=>{window.history.replaceState({},document.title,window.location.pathname),i(null)},onCancel:()=>{window.history.replaceState({},document.title,window.location.pathname),i(null)}}):b.jsx(B4,{}):b.jsx(u2,{})};function W4(){return b.jsx(ZM,{children:b.jsx(o2,{children:b.jsx(c2,{children:b.jsx(U4,{})})})})}I1.createRoot(document.getElementById("root")).render(b.jsx(aE.StrictMode,{children:b.jsx(W4,{})}));
